(()=>{"use strict";var e,t,s;!function(e){e[e.FallingTickProcessed=0]="FallingTickProcessed",e[e.GameOver=1]="GameOver",e[e.FiguresMoved=2]="FiguresMoved",e[e.LevelUp=3]="LevelUp",e[e.FiguresSpawned=4]="FiguresSpawned"}(e||(e={}));class a{gameData;transferredToMatrixFigures;squashedLines;droppedLines;constructor(e,t,s,a){this.gameData=e,this.transferredToMatrixFigures=t,this.squashedLines=s,this.droppedLines=a}getEventType(){return e.FallingTickProcessed}}class i{gameData;constructor(e){this.gameData=e}getEventType(){return e.GameOver}}class n{gameData;constructor(e){this.gameData=e}getEventType(){return e.FiguresMoved}}class r{gameData;newFigures;constructor(e,t){this.gameData=e,this.newFigures=t}getEventType(){return e.FiguresSpawned}}class l{handlers=new Map;on(e,t,s=!0){let a=this.handlers.get(e)||[];s&&a.some((e=>e===t))||(a.push(t),this.handlers.set(e,a))}off(e,t){let s=this.handlers.get(e)||[],a=s.indexOf(t);a>0&&s.splice(a,1),this.handlers.set(e,s)}fire(e){(this.handlers.get(e.getEventType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.InitGame=0]="InitGame",e[e.ResumeGame=1]="ResumeGame",e[e.PauseGame=2]="PauseGame",e[e.FiguresFallTick=3]="FiguresFallTick",e[e.GameOver=4]="GameOver",e[e.Render=5]="Render",e[e.MoveLeft=6]="MoveLeft",e[e.MoveRight=7]="MoveRight",e[e.TurnClockwise=8]="TurnClockwise",e[e.MoveDown=9]="MoveDown",e[e.FiguresFallDown=10]="FiguresFallDown",e[e.MoveToX=11]="MoveToX",e[e.MoveToY=12]="MoveToY",e[e.TurnToState=13]="TurnToState"}(t||(t={}));class o{gameData;constructor(e){this.gameData=e}getCommandType(){return t.InitGame}}class c{gameData;constructor(e){this.gameData=e}getCommandType(){return t.ResumeGame}}class u{gameData;constructor(e){this.gameData=e}getCommandType(){return t.PauseGame}}class m{gameData;constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallTick}}class h{gameData;constructor(e){this.gameData=e}getCommandType(){return t.GameOver}}class d{gameData;constructor(e){this.gameData=e}getCommandType(){return t.Render}}class g{gameData;constructor(e){this.gameData=e}getCommandType(){return t.MoveLeft}}class p{gameData;constructor(e){this.gameData=e}getCommandType(){return t.MoveRight}}class f{gameData;constructor(e){this.gameData=e}getCommandType(){return t.TurnClockwise}}class w{gameData;constructor(e){this.gameData=e}getCommandType(){return t.MoveDown}}class v{gameData;x;constructor(e,t){this.gameData=e,this.x=t}getCommandType(){return t.MoveToX}}class F{gameData;y;constructor(e,t){this.gameData=e,this.y=t}getCommandType(){return t.MoveToY}}class T{gameData;turnState;constructor(e,t){this.gameData=e,this.turnState=t}getCommandType(){return t.TurnToState}}class C{gameData;constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallDown}}class D{handlers=new Map;addHandler(e,t,s=!0){let a=this.handlers.get(e)||[];s&&a.some((e=>e===t))||(a.push(t),this.handlers.set(e,a))}removeHandler(e,t){let s=this.handlers.get(e)||[],a=s.indexOf(t);a>0&&s.splice(a,1),this.handlers.set(e,s)}run(e){(this.handlers.get(e.getCommandType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(s||(s={}));class M{getTurn(e){switch(e){case s.One:return this.getFirstTurn();case s.Two:return this.getSecondTurn();case s.Three:return this.getThirdTurn();case s.Four:return this.getForthTurn()}}}class B extends M{getNormalizedFigure(){let e=this.getFigure(),t=e.reduce(((e,t)=>Math.max(e,t.length)),0);return e.map((e=>{let s=e.length;return e.length=t,e.fill(!1,s-1,t-1)}))}getFirstTurn(){return this.getNormalizedFigure()}getSecondTurn(){let e=this.getNormalizedFigure(),t=[],s=e.length,a=e[0].length;for(let i=0;i<a;i++){t[i]=new Array(s).fill(!1);for(let a=0;a<s;a++)t[i][s-a-1]=e[a][i]}return t}getThirdTurn(){return this.getFirstTurn().reverse().map((e=>e.reverse()))}getForthTurn(){return this.getSecondTurn().reverse().map((e=>e.reverse()))}}class H extends B{getFigure(){return["###".split("").map((e=>"#"===e)),"-#-".split("").map((e=>"#"===e))]}}class x extends B{getFigure(){return["###".split("").map((e=>"#"===e)),"--#".split("").map((e=>"#"===e))]}}class S extends B{getFigure(){return["###".split("").map((e=>"#"===e)),"#--".split("").map((e=>"#"===e))]}}class y extends B{getFigure(){return["##".split("").map((e=>"#"===e)),"##".split("").map((e=>"#"===e))]}}class b extends B{getFigure(){return["####".split("").map((e=>"#"===e))]}}class E extends B{getFigure(){return["##-".split("").map((e=>"#"===e)),"-##".split("").map((e=>"#"===e))]}}class O extends B{getFigure(){return["-##".split("").map((e=>"#"===e)),"##-".split("").map((e=>"#"===e))]}}class G{x;y;constructor(e,t){this.x=e,this.y=t}}class P{figure;position;turnState;color;constructor(e,t,s,a){this.figure=e,this.position=t,this.turnState=s,this.color=a}}class k{fieldWidth;fieldHeight;figures;constructor(e,t,s){this.fieldWidth=e,this.fieldHeight=t,this.figures=s}}class R{figuresFallen=0;linesSquashed=0}class I{isInitialized;isGameOver;fallingFigures;matrix;nextTickTimeoutId;settings;level;score;combo;stats;constructor(e=!1,t=!1,s=[],a=[],i=setTimeout((()=>{})),n,r=1,l=0,o=0,c=new R){this.isInitialized=e,this.isGameOver=t,this.fallingFigures=s,this.matrix=a,this.nextTickTimeoutId=i,this.settings=n,this.level=r,this.score=l,this.combo=o,this.stats=c}static makeSimple(e=10,t=20){return new I(!1,!1,[],new Array(t).fill([]).map((t=>new Array(e).fill(!1))),setTimeout((()=>{})),new k(e,t,[new H,new x,new S,new y,new b,new E,new O]))}}class L{timingsHandler;eventBus;commandBus;gameData=I.makeSimple();constructor(e,s,a){this.timingsHandler=e,this.eventBus=s,this.commandBus=a,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(t.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(t.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(t.GameOver,this.gameOverHandler.bind(this))}initGameHandler(t){this.gameData=t.gameData,this.gameData.isInitialized=!0,this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}resumeGameHandler(e){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new o(e.gameData)),this.fallTick())}pauseGameHandler(e){this.gameData=e.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new d(this.gameData))}gameOverHandler(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new i(this.gameData))}fallTick(){this.commandBus.run(new m(this.gameData))}onFallTickProcessed(e){clearTimeout(this.gameData.nextTickTimeoutId);const t=this.timingsHandler.getDelayForNextTickMs(this.gameData);this.gameData.isGameOver||t==1/0||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))}}class q{static canFigureBePlaced(e,t,s){return e.every(((e,a)=>e.every(((e,i)=>{const n=t.y+a,r=t.x+i;return!e||n<0&&r>=0&&r<=s[0].length-1||n in s&&r in s[n]&&!s[n][r]}))))}}class X{filled;filledGameOver;empty;constructor(e,t,s){this.filled=e,this.filledGameOver=t,this.empty=s}}class j{containerElement;renderProjectionFigures;matrixCellColors;fallingFigureCellColors;projectionFigureCellColors;constructor(e,t=!0,s=new X("#007400","#780000","#fff"),a=new X("#007400","#780000",null),i=new X("#b8e5e3",null,null)){this.containerElement=e,this.renderProjectionFigures=t,this.matrixCellColors=s,this.fallingFigureCellColors=a,this.projectionFigureCellColors=i}}class A{filled;empty;constructor(e,t){this.filled=e,this.empty=t}}class z{renderSettings;commandBus;eventBus;cellsHtmlElementsMap=[];table;scoreDisplay;constructor(e,s,a){this.renderSettings=e,this.commandBus=s,this.eventBus=a,s.addHandler(t.InitGame,this.initHandler.bind(this)),s.addHandler(t.Render,this.renderCommandHandler.bind(this))}initHandler(t){this.table=z.createHtmlElement('<div style="float: left; display: table; border-collapse: collapse"></div>'),this.cellsHtmlElementsMap=[];for(let e=0;e<t.gameData.settings.fieldHeight;e++){let s=z.createHtmlElement('<div style="display: table-row"></div>');this.cellsHtmlElementsMap[e]=[];for(let a=0;a<t.gameData.settings.fieldWidth;a++){let t=z.createHtmlElement('<div style="display: table-cell; border: 1px solid #ccc; width: 20px; height: 20px"></div>');this.cellsHtmlElementsMap[e][a]=t,s.appendChild(t)}this.table.appendChild(s)}this.renderSettings.containerElement.innerHTML="",this.renderSettings.containerElement.appendChild(this.table),this.scoreDisplay=z.createHtmlElement('<div style="float: left; font-family: \'Helvetica Neue\', sans-serif; font-size: 20px; margin-left: 15px;">\n                Level: <span id="level"></span><br>\n                Score: <span id="score"></span><br>\n                Combo: <span id="combo"></span><br>\n                Figures fallen: <span id="figures_fallen"></span><br>\n                Lines squashed: <span id="lines_squashed"></span><br>\n            </div>'),this.renderSettings.containerElement.appendChild(this.scoreDisplay),this.renderSettings.containerElement.appendChild(z.createHtmlElement('<div style="clear: both"></div>')),this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this)),this.eventBus.on(e.GameOver,this.onGameOver.bind(this)),this.eventBus.on(e.FiguresMoved,this.onFiguresMoved.bind(this))}onFiguresMoved(e){this.renderState(e.gameData)}onFallTickProcessed(e){this.renderState(e.gameData)}onGameOver(e){this.renderState(e.gameData)}renderCommandHandler(e){this.renderState(e.gameData)}renderState(e){this.repaintMatrixCells(e.matrix,new G(0,0),e),this.renderSettings.renderProjectionFigures&&this.renderFallingFiguresProjection(e),this.renderFallingFigures(e),this.renderStats(e)}renderFallingFigures(e){e.fallingFigures.forEach((t=>{this.repaintFallingFiguresCells(t,e)}))}renderFallingFiguresProjection(e){e.fallingFigures.forEach((t=>{const s=t.figure.getTurn(t.turnState),a=t.position.x;let i=t.position.y;for(;q.canFigureBePlaced(s,new G(a,i+1),e.matrix);)i++;this.repaintProjectionFiguresCells(s,new G(a,i),e)}))}repaintMatrixCells(e,t,s){let a;a=s.isGameOver?new A(this.renderSettings.matrixCellColors.filledGameOver,this.renderSettings.matrixCellColors.empty):new A(this.renderSettings.matrixCellColors.filled,this.renderSettings.matrixCellColors.empty),this.repaintCells(e,t,a)}repaintFallingFiguresCells(e,t){let s;s=t.isGameOver?new A(this.renderSettings.fallingFigureCellColors.filledGameOver,this.renderSettings.fallingFigureCellColors.empty):new A(e.color||this.renderSettings.fallingFigureCellColors.filled,this.renderSettings.fallingFigureCellColors.empty),this.repaintCells(e.figure.getTurn(e.turnState),e.position,s)}repaintProjectionFiguresCells(e,t,s){let a;a=s.isGameOver?new A(this.renderSettings.projectionFigureCellColors.filledGameOver,this.renderSettings.projectionFigureCellColors.empty):new A(this.renderSettings.projectionFigureCellColors.filled,this.renderSettings.projectionFigureCellColors.empty),this.repaintCells(e,t,a)}repaintCells(e,t,s){e.forEach(((e,a)=>{e.forEach(((e,i)=>{const n=a+t.y,r=i+t.x;if(n in this.cellsHtmlElementsMap&&r in this.cellsHtmlElementsMap[n]){const t=e?s.filled:s.empty;null!==t&&(this.cellsHtmlElementsMap[n][r].style.background=t)}}))}))}renderStats(e){const t=document.getElementById("level"),s=document.getElementById("score"),a=document.getElementById("combo"),i=document.getElementById("figures_fallen"),n=document.getElementById("lines_squashed");null!==t&&(t.innerHTML=e.level.toString()),null!==s&&(s.innerHTML=e.score.toString()),null!==a&&(a.innerHTML=e.combo.toString()),null!==i&&(i.innerHTML=e.stats.figuresFallen.toString()),null!==n&&(n.innerHTML=e.stats.linesSquashed.toString())}static createHtmlElement(e){let t=document.createElement("div");if(t.innerHTML=e,t.children.length>1||null===t.firstElementChild)throw"The HTML must contain only one child";if(!(t.firstElementChild instanceof HTMLElement))throw"Something went wrong while trying to get HTMLElement child from div";return t.firstElementChild}}class N{transferredFigures=[];isGameOver=!1}class W{commandBus;eventBus;constructor(e,s){this.commandBus=e,this.eventBus=s,this.commandBus.addHandler(t.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(t.FiguresFallDown,this.processDropFiguresCommand.bind(this))}processFiguresFallTickCommand(e){const t=this.fallFiguresForOneCell(e.gameData);let s=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new h(e.gameData)),this.eventBus.fire(new a(e.gameData,t.transferredFigures,s,0))}processDropFiguresCommand(e){let t=new N,s=0;for(;e.gameData.fallingFigures.length>0;){const a=this.fallFiguresForOneCell(e.gameData);t.transferredFigures.push(...a.transferredFigures),t.isGameOver=t.isGameOver||a.isGameOver,s++}let i=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new h(e.gameData)),this.eventBus.fire(new a(e.gameData,t.transferredFigures,i,s-1))}fallFiguresForOneCell(e){let t=new N;return e.fallingFigures.forEach(((s,a)=>{if(this.figureCanFall(e.matrix,s))s.position.y++;else{let i=this.transferFigureToMatrix(e.matrix,s);t.transferredFigures.push(...e.fallingFigures.splice(a,1)),t.isGameOver=t.isGameOver||i}})),t}figureCanFall(e,t){return q.canFigureBePlaced(t.figure.getTurn(t.turnState),new G(t.position.x,t.position.y+1),e)}transferFigureToMatrix(e,t){let s=!1;return t.figure.getTurn(t.turnState).forEach(((a,i)=>{a.forEach(((a,n)=>{if(!a)return;let r=t.position.x+n,l=t.position.y+i;l in e&&r in e[l]&&!e[l][r]?e[l][r]=!0:s=!0}))})),s}squashLines(e){let t=[];return e.forEach(((e,s)=>{e.every((e=>e))&&t.push(s)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t}}class _{static ToArray(e){return Object.keys(e).map((e=>Number.parseInt(e))).filter((e=>!Number.isNaN(e)))}static GetRandom(e){const t=_.ToArray(e);return t[Math.floor(Math.random()*t.length)]}}class Y{eventBus;commandBus;constructor(e,s){this.eventBus=e,this.commandBus=s,this.commandBus.addHandler(t.InitGame,this.initHandler.bind(this))}initHandler(t){this.eventBus.on(e.FallingTickProcessed,this.processOnFallTick.bind(this))}processOnFallTick(e){this.addFigure(e.gameData)}addFigure(e){if(e.fallingFigures.length>0||e.isGameOver)return;const t=Math.floor(Math.random()*e.settings.figures.length),a=e.settings.figures[t],i=_.GetRandom(s),n=a.getTurn(i),l=Math.max(...n.map((e=>e.length))),o=new G(Math.ceil(e.settings.fieldWidth/2-l/2)-1,-n.length),c=new P(a,o,i);e.fallingFigures.push(c),this.eventBus.fire(new r(e,[c]))}}class U{commandBus;eventBus;constructor(e,s){this.commandBus=e,this.eventBus=s,this.commandBus.addHandler(t.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(t.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(t.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(t.TurnClockwise,this.processTurnClockwiseCommand.bind(this)),this.commandBus.addHandler(t.MoveToX,this.processMoveToXCommand.bind(this)),this.commandBus.addHandler(t.MoveToY,this.processMoveToYCommand.bind(this)),this.commandBus.addHandler(t.TurnToState,this.processTurnToStateCommand.bind(this))}processMoveLeftCommand(e){e.gameData.fallingFigures.forEach((t=>{q.canFigureBePlaced(t.figure.getTurn(t.turnState),new G(t.position.x-1,t.position.y),e.gameData.matrix)&&t.position.x--})),this.eventBus.fire(new n(e.gameData))}processMoveRightCommand(e){e.gameData.fallingFigures.forEach((t=>{q.canFigureBePlaced(t.figure.getTurn(t.turnState),new G(t.position.x+1,t.position.y),e.gameData.matrix)&&t.position.x++})),this.eventBus.fire(new n(e.gameData))}processTurnClockwiseCommand(e){const t=_.ToArray(s);e.gameData.fallingFigures.forEach((s=>{let a=s.turnState+1;a in t||(a=t[0]),q.canFigureBePlaced(s.figure.getTurn(a),s.position,e.gameData.matrix)&&(s.turnState=a)})),this.eventBus.fire(new n(e.gameData))}processMoveDownCommand(e){this.commandBus.run(new m(e.gameData))}processMoveToXCommand(e){e.x<0||e.x>e.gameData.settings.fieldWidth-1||(e.gameData.fallingFigures.forEach((t=>{const s=e.x>t.position.x?1:-1;for(;t.position.x!==e.x&&q.canFigureBePlaced(t.figure.getTurn(t.turnState),new G(t.position.x+s,t.position.y),e.gameData.matrix);)t.position.x+=s})),this.eventBus.fire(new n(e.gameData)))}processMoveToYCommand(e){e.y<0||(e.gameData.fallingFigures.forEach((t=>{for(;t.position.y<e.y&&q.canFigureBePlaced(t.figure.getTurn(t.turnState),new G(t.position.x,t.position.y+1),e.gameData.matrix);)t.position.y++})),this.eventBus.fire(new n(e.gameData)))}processTurnToStateCommand(e){e.gameData.fallingFigures.forEach((t=>{q.canFigureBePlaced(t.figure.getTurn(e.turnState),t.position,e.gameData.matrix)&&(t.turnState=e.turnState)})),this.eventBus.fire(new n(e.gameData))}}class V{commandBus;eventBus;squashedRowsRewardThresholdsMap;rewardOnCombo;constructor(e,s,a=new Map([[1,100],[2,300],[3,500],[4,800]]),i=50){this.commandBus=e,this.eventBus=s,this.squashedRowsRewardThresholdsMap=a,this.rewardOnCombo=i,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){if(e.squashedLines.length<0)return;let t=0;this.squashedRowsRewardThresholdsMap.forEach(((s,a)=>{a>e.squashedLines.length||(t=s)})),e.gameData.score+=t*e.gameData.level+this.rewardOnCombo*Math.max(0,e.gameData.combo-1)*e.gameData.level+2*e.droppedLines*e.gameData.level}}class J{eventBus;commandBus;levelIncreaseOnSquashedRowsNumber;maxLevels;squashedRowsCounter=0;constructor(e,s,a,i){this.eventBus=e,this.commandBus=s,this.levelIncreaseOnSquashedRowsNumber=a,this.maxLevels=i,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){0!==e.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,e.gameData.level=Math.min(this.maxLevels,e.gameData.level+1)))}}class K{commandBus;eventBus;constructor(e,s){this.commandBus=e,this.eventBus=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){e.transferredToMatrixFigures.length<=0||(e.squashedLines.length>0?e.gameData.combo+=1:e.gameData.combo=0)}}class Q{delayMs;constructor(e){this.delayMs=e}getDelayForNextTickMs(e){return this.delayMs}}class Z{commandBus;eventBus;constructor(e,s){this.commandBus=e,this.eventBus=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){e.gameData.stats.figuresFallen+=e.transferredToMatrixFigures.length,e.gameData.stats.linesSquashed+=e.squashedLines.length}}class ${commandBus;constructor(e){this.commandBus=e,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(e){window.onkeydown=t=>{"ArrowLeft"===t.code?this.commandBus.run(new g(e.gameData)):"ArrowRight"===t.code?this.commandBus.run(new p(e.gameData)):"ArrowUp"===t.code?this.commandBus.run(new f(e.gameData)):"ArrowDown"===t.code||"ArrowDown"===t.code?this.commandBus.run(new w(e.gameData)):"Space"===t.code&&this.commandBus.run(new C(e.gameData))}}}class ee{eventBus;commandBus;gameController;movingHandler;keyboardController;fallingFiguresProcessor;figuresSpawner;levelCounter;comboCounter;scoreCounter;statsCounter;tableRenderer;gameData;constructor(e=new l,t=new D,s=new L(new Q(2e3),e,t),a=new U(t,e),i=new $(t),n=new W(t,e),r=new Y(e,t),o=new J(e,t,8,15),c=new K(t,e),u=new V(t,e),m=new Z(t,e),h=new z(new j(document.body),t,e),d=I.makeSimple()){this.eventBus=e,this.commandBus=t,this.gameController=s,this.movingHandler=a,this.keyboardController=i,this.fallingFiguresProcessor=n,this.figuresSpawner=r,this.levelCounter=o,this.comboCounter=c,this.scoreCounter=u,this.statsCounter=m,this.tableRenderer=h,this.gameData=d}start(e){e=e||I.makeSimple(),this.commandBus.run(new o(e)),this.commandBus.run(new c(e))}resume(){this.commandBus.run(new c(this.gameData))}pause(){this.commandBus.run(new u(this.gameData))}}class te{target;_persisted;constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class se{target;_persisted;constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class ae{target;constructor(e){this.target=e}get persisted(){return!1}}class ie{get persisted(){return!1}}class ne{figuresTargetStates;placingSteps;constructor(e,t){this.figuresTargetStates=e,this.placingSteps=t}}class re{isOpened;cells;constructor(e,t){this.isOpened=e,this.cells=t}}class le{static collectHoles(e){let t=[];class s{cells;previousRowOpenXs;currentRowOpenXs;isOpened;continues;constructor(e=[],t=[],s=[],a=!1,i=!1){this.cells=e,this.previousRowOpenXs=t,this.currentRowOpenXs=s,this.isOpened=a,this.continues=i}}let a=[],i=new Set;return e.forEach(((n,r)=>{a.forEach((e=>e.continues=!1)),n.forEach(((t,n)=>{if(t)i.add(n);else if(i.has(n)){let t=a.find((e=>e.previousRowOpenXs.some((e=>e===n))||e.currentRowOpenXs.length>0&&e.currentRowOpenXs[e.currentRowOpenXs.length-1]===n));void 0===t&&(t=new s,a.push(t)),t.currentRowOpenXs.push(n),t.cells.push(new G(n,r)),t.continues=!0,t.isOpened=t.isOpened||this.doesTheWayOutFromHoleExists(e,new G(n,r),i,[[!0,!0]])}}));let l=[];a.forEach(((s,a)=>{s.continues&&(s.previousRowOpenXs=s.currentRowOpenXs,s.currentRowOpenXs=[]),s.continues&&r!=e.length-1||(t.push(new re(s.isOpened,s.cells)),l.push(a))})),l.reverse().forEach((e=>a.splice(e,1)))})),t}static doesTheWayOutFromHoleExists(e,t,s,a){return void 0!==this.findTheWayOutFromHole(e,t,s,a)}static findTheWayOutFromHole(e,t,s,a){s instanceof Map&&(s=le.convertCoveredColumnsToXs(s));for(let i=t.x-1;i>=0&&q.canFigureBePlaced(a,new G(i,t.y),e);i--){let e=!0;for(let t=i+a[0].length-1;t>=i;t--)if(s.has(t)){e=!1;break}if(e)return i}for(let i=t.x+1;i<e[0].length&&q.canFigureBePlaced(a,new G(i,t.y),e);i++){let e=!0;for(let t=i;t<i+a[0].length;t++)if(s.has(t)){e=!1;break}if(e)return i}}static collectCoveredColumnsXs(e,t){return le.convertCoveredColumnsToXs(le.collectCoveredColumns(e,t))}static convertCoveredColumnsToXs(e){return new Set([...e.keys()])}static collectCoveredColumns(e,t){let s=new Map;return e.some(((a,i)=>(a.forEach(((e,t)=>{e&&s.set(t,i)})),void 0!==t&&i>=t||s.size==e[0].length))),s}}class oe{gameData;originalHoles;originalCoveredColumns;imaginableMatrix;imaginableCoveredColumns;squashedLinesCount;constructor(e,t,s,a,i,n){this.gameData=e,this.originalHoles=t,this.originalCoveredColumns=s,this.imaginableMatrix=a,this.imaginableCoveredColumns=i,this.squashedLinesCount=n}}class ce extends Error{}class ue extends ce{}class me{commandBus;scoreCalculator;constructor(e,t){this.commandBus=e,this.scoreCalculator=t}resolve(e){if(0===e.fallingFigures.length)return;if(1!==e.fallingFigures.length)throw new ue;const t=e.fallingFigures[0];let s=-1/0,a=new ne(new Map,[]);return this.processStates(e,((e,i,n)=>{i>s&&(s=i,a=new ne(new Map([[t,e]]),n))})),a}processStates(e,t,a){const i=e.fallingFigures[0];let n=_.ToArray(s);for(;n[0]!==i.turnState;)n.unshift(n.pop());let r=new Map,l=new Set;n.forEach((e=>{let t=i.figure.getTurn(e),s=t.map((e=>e.map((e=>e?"1":"0")).join())).join("\n");l.has(s)||(l.add(s),r.set(e,t))}));const o=le.collectHoles(e.matrix),c=le.collectCoveredColumns(e.matrix);r.forEach(((s,n)=>{for(let r=0;r<e.settings.fieldWidth-s[0].length+1;r++){let[l,u]=this.imagineFigureDrop(e.matrix,s,r),m=new G(r,l),h=this.squashLines(u),d=new P(i.figure,m,n);a&&a(d);let g=le.collectCoveredColumns(u),p=new oe(e,o,c,u,g,h),f=this.scoreCalculator.calculateScore(p),w=this.makeSimplePlacingSteps(d);t&&t(d,f,w)}})),o.filter((e=>e.isOpened&&e.cells.length>0)).forEach((s=>{let n=e.settings.fieldHeight,l=e.settings.fieldWidth,u=-1,m=-1;s.cells.forEach((e=>{n=Math.min(n,e.y),l=Math.min(l,e.x),u=Math.max(u,e.y),m=Math.max(m,e.x)})),r.forEach(((s,r)=>{for(let h=Math.max(n-s.length+1,0);h<=u;h++)for(let n=Math.max(l-s[0].length+1,0);n<=m;n++){let l=new G(n,h),u=new P(i.figure,l,r);if(a&&a(u),q.canFigureBePlaced(s,l,e.matrix)){let a=this.makePushInPlacingSteps(e,u,c);if(void 0!==a){let i=this.imagineFigurePlacing(e.matrix,s,l),n=this.squashLines(i),r=le.collectCoveredColumns(i),m=new oe(e,o,c,i,r,n),h=this.scoreCalculator.calculateScore(m);t&&t(u,h,a)}}}}))}))}squashLines(e){let t=[];return e.forEach(((e,s)=>{e.every((e=>e))&&t.push(s)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t.length}imagineFigureDrop(e,t,s){let a=-t.length;for(;q.canFigureBePlaced(t,new G(s,a+1),e);)a++;return[a,this.imagineFigurePlacing(e,t,new G(s,a))]}imagineFigurePlacing(e,t,s){let a=structuredClone(e);return t.forEach(((e,t)=>{e.forEach(((e,i)=>{const n=s.y+t,r=s.x+i;n in a&&r in a[n]&&e&&(a[n][r]=!0)}))})),a}makePushInPlacingSteps(e,t,s){let a=t.figure.getTurn(t.turnState),i=le.findTheWayOutFromHole(e.matrix,t.position,s,a);if(void 0!==i)return[new te(t.turnState,!0),new se(i,!1),new ae(t.position.y),new se(t.position.x,!0),new ie]}makeSimplePlacingSteps(e){return[new te(e.turnState,!0),new se(e.position.x,!0),new ie]}}class he{calculators;constructor(e){this.calculators=e}calculateScore(e){return this.calculators.reduce(((t,s)=>t+s.calculateScore(e)),0)}}class de{multiplier;constructor(e){this.multiplier=e}}class ge{params;constructor(e=new de(5)){this.params=e}calculateScore(e){return e.squashedLinesCount*this.params.multiplier}}class pe{minimumValuableHeight;powMultiplier;multiplier;constructor(e,t,s){this.minimumValuableHeight=e,this.powMultiplier=t,this.multiplier=s}}class fe{params;constructor(e=new pe(5,1,1)){this.params=e}calculateScore(e){const t=e.gameData.settings.fieldHeight,s=e.gameData.settings.fieldWidth,[a,i]=this.calculateFillableSpace(e.imaginableMatrix,s);let n=0;return i>this.params.minimumValuableHeight&&(n=-a*Math.pow(a,a/(t*s)*this.params.powMultiplier)*this.params.multiplier),n}calculateFillableSpace(e,t){let s=new Set,a=0,i=0;return e.every((e=>(e.forEach(((e,t)=>{e&&s.add(t)})),e.forEach(((e,t)=>{!e&&s.size>0&&!s.has(t)&&a++})),s.size<t&&(s.size>0&&i++,!0)))),[a,i]}}class we{countDecreaseMultiplier;countIncreaseMultiplier;coveredHeightPowMultiplier;coveredHeightMultiplier;constructor(e,t,s,a){this.countDecreaseMultiplier=e,this.countIncreaseMultiplier=t,this.coveredHeightPowMultiplier=s,this.coveredHeightMultiplier=a}}class ve{params;constructor(e=new we(150,70,1,5)){this.params=e}calculateScore(e){const[t,s]=this.calculateHolesAndCoveredHeight(e.imaginableMatrix,e.gameData.matrix),a=e.originalHoles.length-t;let i=a>0?a*this.params.countDecreaseMultiplier:a*this.params.countIncreaseMultiplier;return 0!==s&&0!==t&&(i-=s*Math.pow(s,s/(e.gameData.settings.fieldHeight*t)*this.params.coveredHeightPowMultiplier)*this.params.coveredHeightMultiplier),i}calculateHolesAndCoveredHeight(e,t){const[s,a]=this.calculateTheHighestHoleCoveredY(t);let i=new Map,n=0,r=0;return e.forEach(((e,t)=>{e.forEach(((e,l)=>{e&&!i.has(l)&&i.set(l,t);let o=i.get(l);void 0===o||e||(r++,void 0!==s&&void 0!==a&&(t<s?n+=t-o:o<a&&(n+=a-o)))}))})),[r,n]}calculateTheHighestHoleCoveredY(e){let t,s,a=new Map;return e.some(((e,i)=>e.some(((e,n)=>{e&&!a.has(n)&&a.set(n,i);let r=a.get(n);return void 0!==r&&!e&&(s=i,t=r,!0)})))),[s,t]}}class Fe{powMultiplier;multiplier;constructor(e,t){this.powMultiplier=e,this.multiplier=t}}class Te{params;constructor(e=new Fe(1,3)){this.params=e}calculateScore(e){const t=this.calculateHeight(e.imaginableMatrix);return-t*Math.pow(t,t/e.gameData.settings.fieldHeight*this.params.powMultiplier)*this.params.multiplier}calculateHeight(e){let t=-1;return e.every(((e,s)=>!!e.every((e=>!e))&&(t=s,!0))),e.length-t-1}}class Ce{minimumValuableHeight;countMultiplier;heightPowMultiplier;heightMultiplier;constructor(e,t,s,a){this.minimumValuableHeight=e,this.countMultiplier=t,this.heightPowMultiplier=s,this.heightMultiplier=a}}class De{params;constructor(e=new Ce(3,70,1,7)){this.params=e}calculateScore(e){const[t,s]=this.calculateTunnelsExceptUncovered(e.imaginableMatrix,e.gameData.matrix);return 0===s?0:-s*this.params.countMultiplier-t*Math.pow(t,t/(e.gameData.settings.fieldHeight*s)*this.params.heightPowMultiplier)*this.params.heightMultiplier}calculateTunnelsExceptUncovered(e,t){let s=new Set;t.every((e=>{e.forEach(((e,t)=>{e&&s.add(t)}))}));let a=new Set,i=new Map;const n=e[0].length;e.every(((e,t)=>(e.forEach(((e,t)=>{e&&a.add(t)})),e.forEach(((e,t)=>{e||a.has(t)||s.has(t)||0!==t&&!a.has(t-1)||t!==n-1&&!a.has(t+1)||i.set(t,(i.get(t)||0)+1)})),a.size<n)));let r=0,l=0;return i.forEach((e=>{e>=this.params.minimumValuableHeight&&(r+=e,l++)})),[r,l]}}class Me{eventBus;commandBus;figurePlacingResolver;figurePlacingPerformer;constructor(e,s,a,i){this.eventBus=e,this.commandBus=s,this.figurePlacingResolver=a,this.figurePlacingPerformer=i,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FiguresSpawned,this.onFiguresSpawned.bind(this))}onFiguresSpawned(e){const t=this.figurePlacingResolver.resolve(e.gameData);this.figurePlacingPerformer.place(e.gameData,t)}}class Be extends Error{}class He extends Be{}class xe extends Be{}class Se extends Be{}class ye{commandBus;constructor(e){this.commandBus=e}place(e,t){"undefined"!=typeof setImmediate?setImmediate((()=>this.placeImpl(e,t))):setTimeout((()=>this.placeImpl(e,t)),0)}placeImpl(e,t){if(0===e.fallingFigures.length)return;if(1!==e.fallingFigures.length)throw new He;if(void 0===t)return;const s=e.fallingFigures[0],a=t.figuresTargetStates.get(s);if(a){if(s.figure!==a.figure)throw new xe("Both of the original and the target falling figures must have the same figure in it.");t.placingSteps.forEach((t=>{if(t instanceof te)this.commandBus.run(new T(e,t.target));else if(t instanceof se)this.commandBus.run(new v(e,t.target));else if(t instanceof ae)this.commandBus.run(new F(e,t.target));else{if(!(t instanceof ie))throw new Se("Unknown step "+t.constructor.name);this.commandBus.run(new C(e))}}))}}}class be{static initSolver(e,t){return new Me(e,t,new me(t,new he([new fe,new Te,new ve,new ge,new De])),new ye(t))}}document.addEventListener("DOMContentLoaded",(()=>{const e=new l,t=new D;let s=new ee(e,t);be.initSolver(e,t),s.start()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bkQsR0FBSXFKLGFBQWdCakosR0FDdkIvUixLQUFLd0gsV0FBV3pFLElBQUksSUFBSVgsRUFBZXpELEVBQVVxYyxFQUFLckosYUFDbkQsTUFBSXFKLGFBQWdCaEosSUFHdkIsTUFBTSxJQUFJMEksR0FBK0IsZ0JBQWtCTSxFQUFLamMsWUFBWWtjLE1BRjVFamIsS0FBS3dILFdBQVd6RSxJQUFJLElBQUlMLEVBQW1CL0QsRyxLQUt2RCxFQzlDRyxNQUFNdWMsR0FDVGpVLGtCQUNJTSxFQUNBQyxHQUVBLE9BQU8sSUFBSTBTLEdBQ1AzUyxFQUNBQyxFQUNBLElBQUltTixHQUNBbk4sRUFDQSxJQUFJdVAsR0FBb0IsQ0FDcEIsSUFBSVcsR0FDSixJQUFJMkIsR0FDSixJQUFJaEIsR0FDSixJQUFJaEIsR0FDSixJQUFJdUMsTUFPWixJQUFJZSxHQUE4Qm5ULEdBRTFDLEVDbENKZ0UsU0FBUzJQLGlCQUFpQixvQkFBb0IsS0FDMUMsTUFBTTVULEVBQVcsSUFBSTlILEVBQ2YrSCxFQUFhLElBQUk1RSxFQUN2QixJQUFJd1ksRUFBUyxJQUFJekssR0FBYXBKLEVBQVVDLEdBQ3hDMFQsR0FBbUJHLFdBQVc5VCxFQUFVQyxHQUV4QzRULEVBQU83SixPQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmlndXJlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0dhbWVDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9SZW5kZXJlci9UYWJsZVJlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IvUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRW51bUhlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZpZ3VyZXNTcGF3bmVyL0Fsd2F5c09uZUZpZ3VyZVNwYXduZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Nb3ZpbmdIYW5kbGVyL01vdmluZ0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tYm9Db3VudGVyL0NvbWJvQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9TdGF0c0NvdW50ZXIvU3RhdHNDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvS2V5Ym9hcmRDb250cm9sbGVyL0tleWJvYXJkQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RldHJpc0ZhY2FkZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1V0aWxzL0hvbGVzSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci9GaWd1cmVQbGFjaW5nUmVzb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9TY29yZUNhbGN1bGF0b3IvQ2FsY3VsYXRvckFnZ3JlZ2F0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9TcXVhc2hlZFJvd3MvU3F1YXNoZWRSb3dzQ2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9GaWxsYWJsZUNlbGxzL0ZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL0hvbGVzL0hvbGVzVjFDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL0ZpbGxlZEhlaWdodC9GaWxsZWRIZWlnaHRDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL1R1bm5lbHMvVHVubmVsc0NhbGN1bGF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyL0luc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvVGV0cmlzU29sdmVyRmFjYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBlbnVtIEV2ZW50VHlwZSB7XG4gICAgRmFsbGluZ1RpY2tQcm9jZXNzZWQsXG4gICAgR2FtZU92ZXIsXG4gICAgRmlndXJlc01vdmVkLFxuICAgIExldmVsVXAsXG4gICAgRmlndXJlc1NwYXduZWQsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcblxuICAgIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGU7XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgdHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSxcbiAgICAgICAgcHVibGljIHNxdWFzaGVkTGluZXM6IG51bWJlcltdLFxuICAgICAgICBwdWJsaWMgZHJvcHBlZExpbmVzOiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVPdmVyRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkdhbWVPdmVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNNb3ZlZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5GaWd1cmVzTW92ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGV2ZWxVcEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5MZXZlbFVwO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNTcGF3bmVkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIHB1YmxpYyBuZXdGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10sXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZpZ3VyZXNTcGF3bmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV2ZW50QnVzIHtcbiAgICBwcml2YXRlIGhhbmRsZXJzOiBNYXA8RXZlbnRUeXBlLCAoKC4uLl86IGFueSkgPT4gdm9pZClbXT4gPSBuZXcgTWFwKCk7XG5cbiAgICBwdWJsaWMgb24oZXZlbnQ6IEV2ZW50VHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCwgdW5pcXVlOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGlmICh1bmlxdWUgJiYgaGFuZGxlcnMuc29tZShib3VuZEhhbmRsZXIgPT4gYm91bmRIYW5kbGVyID09PSBoYW5kbGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIG9mZihldmVudDogRXZlbnRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgbGV0IGluZGV4ID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIGZpcmUoZXZlbnRQYXlsb2FkOiBFdmVudCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudFBheWxvYWQuZ2V0RXZlbnRUeXBlKCkpIHx8IFtdO1xuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge2hhbmRsZXIoZXZlbnRQYXlsb2FkKX0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vRmlndXJlc1wiO1xuXG5leHBvcnQgZW51bSBDb21tYW5kVHlwZSB7XG4gICAgSW5pdEdhbWUsXG4gICAgUmVzdW1lR2FtZSxcbiAgICBQYXVzZUdhbWUsXG4gICAgRmlndXJlc0ZhbGxUaWNrLFxuICAgIEdhbWVPdmVyLFxuICAgIFJlbmRlcixcbiAgICBNb3ZlTGVmdCxcbiAgICBNb3ZlUmlnaHQsXG4gICAgVHVybkNsb2Nrd2lzZSxcbiAgICBNb3ZlRG93bixcbiAgICBGaWd1cmVzRmFsbERvd24sXG4gICAgTW92ZVRvWCxcbiAgICBNb3ZlVG9ZLFxuICAgIFR1cm5Ub1N0YXRlLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcblxuICAgIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgSW5pdEdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkluaXRHYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlc3VtZUdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlJlc3VtZUdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGF1c2VHYW1lQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5QYXVzZUdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbFRpY2s7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZU92ZXJDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkdhbWVPdmVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlckNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUmVuZGVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVMZWZ0Q29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlTGVmdDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlUmlnaHRDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVSaWdodDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUdXJuQ2xvY2t3aXNlQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVEb3duQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlRG93bjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlVG9YQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgeDogbnVtYmVyXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVUb1g7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVRvWUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZVRvWTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUdXJuVG9TdGF0ZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIHR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlR1cm5Ub1N0YXRlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERyb3BGaWd1cmVzQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJ1cyB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPENvbW1hbmRUeXBlLCAoKHBheWxvYWQ6IENvbW1hbmQpID0+IHZvaWQpW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIGFkZEhhbmRsZXIoZXZlbnQ6IENvbW1hbmRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSGFuZGxlcihldmVudDogQ29tbWFuZFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuKHBheWxvYWQ6IENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQocGF5bG9hZC5nZXRDb21tYW5kVHlwZSgpKSB8fCBbXTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtoYW5kbGVyKHBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gRmlndXJlVHVyblN0YXRlIHtcbiAgICBPbmUsXG4gICAgVHdvLFxuICAgIFRocmVlLFxuICAgIEZvdXIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlndXJlIHtcbiAgICAvKipcbiAgICAgKiBBbnkgZmlndXJlIG11c3QgYmUgYWJsZSB0byB0dXJuIDQgdGltZXMgaW4gMiBkaW1lbnNpb25zLlxuICAgICAqIEFsbCB0dXJucyBhcmUgY2xvY2t3aXNlLlxuICAgICAqL1xuICAgIGdldFR1cm4oZmlndXJlVHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUpOiBib29sZWFuW11bXTtcbiAgICBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RGaWd1cmUgaW1wbGVtZW50cyBGaWd1cmV7XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW107XG5cbiAgICBnZXRUdXJuKGZpZ3VyZVR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBzd2l0Y2ggKGZpZ3VyZVR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuT25lOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuVHdvOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKTtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLlRocmVlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRoaXJkVHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuRm91cjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3J0aFR1cm4oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdpdmVzIGFuIGVhc3kgd2F5IHRvIGRlZmluZSBmaWd1cmVzIGZvciB0ZXRyaXMuXG4gKiBKdXN0IGltcGxlbWVudCB0aGUgZ2V0RmlndXJlIG1ldGhvZCBhbmQgcmV0dXJuIGZpZ3VyZSBsaWtlIHRoaXM6XG4gKiBgYGAodHMpXG4gKiBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAqICAgICByZXR1cm4gW1xuICogICAgICAgICBbdHJ1ZSwgIHRydWUsIHRydWVdLFxuICogICAgICAgICBbZmFsc2UsIHRydWUsIGZhbHNlXSxcbiAqICAgICAgICAgW3RydWUsICB0cnVlLCB0cnVlXSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKlxuICogT3IgZGVmaW5lIGl0IGxpa2UgdGhpcyBmb3IgbW9yZSB2aXN1YWwgcHJlc2VudGF0aW9uOlxuICogYGBgKHRzKVxuICogcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gKiAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgICAgIFwiLSMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUgZXh0ZW5kcyBBYnN0cmFjdEZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldEZpZ3VyZSgpOiBib29sZWFuW11bXTtcblxuICAgIHByaXZhdGUgZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIGxldCBmaWd1cmUgPSB0aGlzLmdldEZpZ3VyZSgpO1xuICAgICAgICBsZXQgdGhlTG9uZ2VzdFJvd1NpemUgPSBmaWd1cmUucmVkdWNlKFxuICAgICAgICAgICAgKHByZXZpb3VzLCBjdXJyZW50KSA9PiBNYXRoLm1heChwcmV2aW91cywgY3VycmVudC5sZW5ndGgpLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmlndXJlLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsTGVuZ3RoID0gcm93Lmxlbmd0aDtcbiAgICAgICAgICAgIHJvdy5sZW5ndGggPSB0aGVMb25nZXN0Um93U2l6ZTtcbiAgICAgICAgICAgIHJldHVybiByb3cuZmlsbChmYWxzZSwgb3JpZ2luYWxMZW5ndGggLSAxLCB0aGVMb25nZXN0Um93U2l6ZSAtIDEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlID0gdGhpcy5nZXROb3JtYWxpemVkRmlndXJlKCk7XG4gICAgICAgIGxldCB0dXJuZWRGaWd1cmU6IGJvb2xlYW5bXVtdID0gW107XG4gICAgICAgIGxldCBvcmlnaW5hbEZpZ3VyZUhlaWdodCA9IG9yaWdpbmFsRmlndXJlLmxlbmd0aDtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlV2lkdGggPSBvcmlnaW5hbEZpZ3VyZVswXS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgb3JpZ2luYWxGaWd1cmVXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICB0dXJuZWRGaWd1cmVbeF0gPSBuZXcgQXJyYXkob3JpZ2luYWxGaWd1cmVIZWlnaHQpLmZpbGwoZmFsc2UpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBvcmlnaW5hbEZpZ3VyZUhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdHVybmVkRmlndXJlW3hdW29yaWdpbmFsRmlndXJlSGVpZ2h0IC0geSAtIDFdID0gb3JpZ2luYWxGaWd1cmVbeV1beF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR1cm5lZEZpZ3VyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RUdXJuKCkucmV2ZXJzZSgpLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKS5yZXZlcnNlKCkubWFwKHJvdyA9PiByb3cucmV2ZXJzZSgpKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBURmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmlnaHRMRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItLSNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGVmdExGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIiMtLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTcXVhcmVGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RpY2tGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExaRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBSWkZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIi0jI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RmlndXJlLCBGaWd1cmVUdXJuU3RhdGUsIExlZnRMRmlndXJlLCBMWkZpZ3VyZSwgUmlnaHRMRmlndXJlLCBSWkZpZ3VyZSwgU3F1YXJlRmlndXJlLCBTdGlja0ZpZ3VyZSwgVEZpZ3VyZX0gZnJvbSBcIi4vRmlndXJlc1wiO1xuXG4vKipcbiAqIHggZm9yIGhvcml6b250YWwgcG9zaXRpb25pbmdcbiAqIHkgZm9yIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBDb29yZGluYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHg6IG51bWJlcixcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsaW5nRmlndXJlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZ3VyZTogRmlndXJlLFxuICAgICAgICBwdWJsaWMgcG9zaXRpb246IENvb3JkaW5hdGUsXG4gICAgICAgIHB1YmxpYyB0dXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHVibGljIGNvbG9yOiBzdHJpbmd8dW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWVsZFdpZHRoOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBmaWVsZEhlaWdodDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgZmlndXJlczogRmlndXJlW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgU3RhdHMge1xuICAgIHB1YmxpYyBmaWd1cmVzRmFsbGVuID0gMDtcbiAgICBwdWJsaWMgbGluZXNTcXVhc2hlZCA9IDA7XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lRGF0YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBpc0dhbWVPdmVyOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBmYWxsaW5nRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBtYXRyaXg6IGJvb2xlYW5bXVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBuZXh0VGlja1RpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgfSksXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nczogR2FtZVNldHRpbmdzLFxuICAgICAgICBwdWJsaWMgbGV2ZWw6IG51bWJlciA9IDEsXG4gICAgICAgIHB1YmxpYyBzY29yZTogbnVtYmVyID0gMCxcbiAgICAgICAgcHVibGljIGNvbWJvOiBudW1iZXIgPSAwLFxuICAgICAgICBwdWJsaWMgc3RhdHM6IFN0YXRzID0gbmV3IFN0YXRzKCksXG4gICAgKSB7fVxuXG4gICAgc3RhdGljIG1ha2VTaW1wbGUod2lkdGg6IG51bWJlciA9IDEwLCBoZWlnaHQ6IG51bWJlciA9IDIwKTogR2FtZURhdGEge1xuICAgICAgICByZXR1cm4gbmV3IEdhbWVEYXRhKFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgbmV3IEFycmF5KGhlaWdodCkuZmlsbChbXSlcbiAgICAgICAgICAgICAgICAubWFwKF8gPT4gbmV3IEFycmF5KHdpZHRoKS5maWxsKGZhbHNlKSksXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IEdhbWVTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmlnaHRMRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBMZWZ0TEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgU3F1YXJlRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTdGlja0ZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgTFpGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJaRmlndXJlKCksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc01vdmVkRXZlbnQsIEdhbWVPdmVyRXZlbnR9IGZyb20gXCIuL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlbmRlckNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgR2FtZUNvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgZ2FtZURhdGE6IEdhbWVEYXRhID0gR2FtZURhdGEubWFrZVNpbXBsZSgpO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBwcml2YXRlIHRpbWluZ3NIYW5kbGVyOiBUaW1pbmdzSGFuZGxlcixcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5SZXN1bWVHYW1lLCB0aGlzLnJlc3VtZUdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5QYXVzZUdhbWUsIHRoaXMucGF1c2VHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuR2FtZU92ZXIsIHRoaXMuZ2FtZU92ZXJIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gY29tbWFuZC5nYW1lRGF0YTtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc3VtZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFJlc3VtZUdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhbGxUaWNrKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXVzZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFBhdXNlR2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGNvbW1hbmQuZ2FtZURhdGE7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnYW1lT3ZlckhhbmRsZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgR2FtZU92ZXJFdmVudCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmYWxsVGljaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKTtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIgJiYgZGVsYXkgIT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgIHRoaXMuZmFsbFRpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ0NoZWNrZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgY2FuRmlndXJlQmVQbGFjZWQodGFyZ2V0RmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0UG9zaXRpb246IENvb3JkaW5hdGUsIG1hdHJpeDogYm9vbGVhbltdW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldEZpZ3VyZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcm93LmV2ZXJ5KCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0gdGFyZ2V0UG9zaXRpb24ueSArIHk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRQb3NpdGlvbi54ICsgeDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXZhbHVlXG4gICAgICAgICAgICAgICAgICAgIHx8IChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxZIDwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPj0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPD0gbWF0cml4WzBdLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgKSB8fCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsWSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIG1hdHJpeFtyZWFsWV1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFtYXRyaXhbcmVhbFldW3JlYWxYXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZCwgUmVuZGVyQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50LCBHYW1lT3ZlckV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGxlZDogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBmaWxsZWRHYW1lT3Zlcjogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBlbXB0eTogc3RyaW5nfG51bGwsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlclNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBwdWJsaWMgcmVuZGVyUHJvamVjdGlvbkZpZ3VyZXM6IGJvb2xlYW4gPSB0cnVlLFxuICAgICAgICBwdWJsaWMgbWF0cml4Q2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjMDA3NDAwJyxcbiAgICAgICAgICAgICcjNzgwMDAwJyxcbiAgICAgICAgICAgICcjZmZmJyxcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIGZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyMwMDc0MDAnLFxuICAgICAgICAgICAgJyM3ODAwMDAnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIHByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyNiOGU1ZTMnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICksXG4gICAgKSB7fVxufVxuXG5jbGFzcyBDZWxsQ29sb3JzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGxlZDogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBlbXB0eTogc3RyaW5nfG51bGwsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlciB7XG4gICAgcHJpdmF0ZSBjZWxsc0h0bWxFbGVtZW50c01hcDogSFRNTEVsZW1lbnRbXVtdID0gW107XG4gICAgcHJpdmF0ZSB0YWJsZTogSFRNTEVsZW1lbnR8dW5kZWZpbmVkO1xuICAgIHByaXZhdGUgc2NvcmVEaXNwbGF5OiBIVE1MRWxlbWVudHx1bmRlZmluZWQ7XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHByaXZhdGUgcmVuZGVyU2V0dGluZ3M6IFRhYmxlUmVuZGVyZXJTZXR0aW5ncyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUmVuZGVyLCB0aGlzLnJlbmRlckNvbW1hbmRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMudGFibGUgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZmxvYXQ6IGxlZnQ7IGRpc3BsYXk6IHRhYmxlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlXCI+PC9kaXY+Jyk7XG4gICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXAgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIGxldCByb3cgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtcm93XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3ldID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNvbW1hbmQuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNlbGwgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtY2VsbDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgd2lkdGg6IDIwcHg7IGhlaWdodDogMjBweFwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbeV1beF0gPSBjZWxsO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlKTtcblxuICAgICAgICB0aGlzLnNjb3JlRGlzcGxheSA9IFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoXG4gICAgICAgICAgICBgPGRpdiBzdHlsZT1cImZsb2F0OiBsZWZ0OyBmb250LWZhbWlseTogJ0hlbHZldGljYSBOZXVlJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAyMHB4OyBtYXJnaW4tbGVmdDogMTVweDtcIj5cbiAgICAgICAgICAgICAgICBMZXZlbDogPHNwYW4gaWQ9XCJsZXZlbFwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgU2NvcmU6IDxzcGFuIGlkPVwic2NvcmVcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIENvbWJvOiA8c3BhbiBpZD1cImNvbWJvXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBGaWd1cmVzIGZhbGxlbjogPHNwYW4gaWQ9XCJmaWd1cmVzX2ZhbGxlblwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgTGluZXMgc3F1YXNoZWQ6IDxzcGFuIGlkPVwibGluZXNfc3F1YXNoZWRcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgPC9kaXY+YCk7XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNjb3JlRGlzcGxheSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoJzxkaXYgc3R5bGU9XCJjbGVhcjogYm90aFwiPjwvZGl2PicpKTtcblxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5HYW1lT3ZlciwgdGhpcy5vbkdhbWVPdmVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GaWd1cmVzTW92ZWQsIHRoaXMub25GaWd1cmVzTW92ZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZpZ3VyZXNNb3ZlZChjb21tYW5kOiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGNvbW1hbmQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uR2FtZU92ZXIoY29tbWFuZDogR2FtZU92ZXJFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQ29tbWFuZEhhbmRsZXIoY29tbWFuZDogUmVuZGVyQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyU3RhdGUoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwYWludE1hdHJpeENlbGxzKGdhbWVEYXRhLm1hdHJpeCwgbmV3IENvb3JkaW5hdGUoMCwgMCksIGdhbWVEYXRhKTtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyU2V0dGluZ3MucmVuZGVyUHJvamVjdGlvbkZpZ3VyZXMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmFsbGluZ0ZpZ3VyZXNQcm9qZWN0aW9uKGdhbWVEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlckZhbGxpbmdGaWd1cmVzKGdhbWVEYXRhKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0cyhnYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJGYWxsaW5nRmlndXJlcyhnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMoZmFsbGluZ0ZpZ3VyZSwgZ2FtZURhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbihnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdGlvbkZpZ3VyZVggPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBsZXQgcHJvamVjdGlvbkZpZ3VyZVkgPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnk7XG4gICAgICAgICAgICB3aGlsZShGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSArIDEpLCBnYW1lRGF0YS5tYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbkZpZ3VyZVkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMoXG4gICAgICAgICAgICAgICAgZmlndXJlTWF0cml4LFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSksXG4gICAgICAgICAgICAgICAgZ2FtZURhdGFcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludE1hdHJpeENlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZmlsbGVkR2FtZU92ZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhtYXRyaXgsIGluZGVudCwgY29sb3JzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRGYWxsaW5nRmlndXJlc0NlbGxzKGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUsIGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBsZXQgY29sb3JzOiBDZWxsQ29sb3JzO1xuICAgICAgICBpZiAoZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWRHYW1lT3ZlcixcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUuY29sb3IgfHwgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMoXG4gICAgICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUucG9zaXRpb24sXG4gICAgICAgICAgICBjb2xvcnNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRQcm9qZWN0aW9uRmlndXJlc0NlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmZpbGxlZEdhbWVPdmVyLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMobWF0cml4LCBpbmRlbnQsIGNvbG9ycyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50Q2VsbHMobWF0cml4OiBib29sZWFuW11bXSwgaW5kZW50OiBDb29yZGluYXRlLCBjZWxsQ29sb3JzOiBDZWxsQ29sb3JzKTogdm9pZCB7XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0geSArIGluZGVudC55O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxYID0geCArIGluZGVudC54O1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwXG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbcmVhbFldXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdmFsdWUgPyBjZWxsQ29sb3JzLmZpbGxlZCA6IGNlbGxDb2xvcnMuZW1wdHk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFtyZWFsWV1bcmVhbFhdLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclN0YXRzKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBjb25zdCBsZXZlbFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGV2ZWwnKTtcbiAgICAgICAgY29uc3Qgc2NvcmVTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7XG4gICAgICAgIGNvbnN0IGNvbWJvU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21ibycpO1xuICAgICAgICBjb25zdCBmaWd1cmVzRmFsbGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZ3VyZXNfZmFsbGVuJyk7XG4gICAgICAgIGNvbnN0IGxpbmVzU3F1YXNoZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZXNfc3F1YXNoZWQnKTtcbiAgICAgICAgaWYgKGxldmVsU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV2ZWxTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmxldmVsLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjb3JlU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2NvcmVTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLnNjb3JlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbWJvU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29tYm9TcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmNvbWJvLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZ3VyZXNGYWxsZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZpZ3VyZXNGYWxsZW4uaW5uZXJIVE1MID0gZ2FtZURhdGEuc3RhdHMuZmlndXJlc0ZhbGxlbi50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaW5lc1NxdWFzaGVkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsaW5lc1NxdWFzaGVkLmlubmVySFRNTCA9IGdhbWVEYXRhLnN0YXRzLmxpbmVzU3F1YXNoZWQudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZUh0bWxFbGVtZW50KGh0bWw6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPiAxIHx8IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgJ1RoZSBIVE1MIG11c3QgY29udGFpbiBvbmx5IG9uZSBjaGlsZCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyAnU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgdHJ5aW5nIHRvIGdldCBIVE1MRWxlbWVudCBjaGlsZCBmcm9tIGRpdic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0Ryb3BGaWd1cmVzQ29tbWFuZCwgQ29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEdhbWVPdmVyQ29tbWFuZCwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcblxuY2xhc3MgRmFsbGluZ1Jlc3VsdCB7XG4gICAgcHVibGljIHRyYW5zZmVycmVkRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW107XG4gICAgcHVibGljIGlzR2FtZU92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbn1cblxuZXhwb3J0IGNsYXNzIFJlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsVGljaywgdGhpcy5wcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxEb3duLCB0aGlzLnByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZChjb21tYW5kOiBGaWd1cmVzRmFsbFRpY2tDb21tYW5kKSB7XG4gICAgICAgIGNvbnN0IGZhbGxpbmdSZXN1bHQgPSB0aGlzLmZhbGxGaWd1cmVzRm9yT25lQ2VsbChjb21tYW5kLmdhbWVEYXRhKTtcbiAgICAgICAgbGV0IHNxdWFzaGVkTGluZXMgPSB0aGlzLnNxdWFzaExpbmVzKGNvbW1hbmQuZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgaWYgKGZhbGxpbmdSZXN1bHQuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgR2FtZU92ZXJDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQoXG4gICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLFxuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMsXG4gICAgICAgICAgICBzcXVhc2hlZExpbmVzLFxuICAgICAgICAgICAgMFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQoY29tbWFuZDogRHJvcEZpZ3VyZXNDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGxldCBmYWxsaW5nUmVzdWx0ID0gbmV3IEZhbGxpbmdSZXN1bHQoKTtcbiAgICAgICAgbGV0IGRyb3BwZWRMaW5lcyA9IDA7XG4gICAgICAgIHdoaWxlIChjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG9uZUNlbGxGYWxsaW5nUmVzdWx0ID0gdGhpcy5mYWxsRmlndXJlc0Zvck9uZUNlbGwoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcy5wdXNoKC4uLm9uZUNlbGxGYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyk7XG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgPSBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgfHwgb25lQ2VsbEZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlcjtcbiAgICAgICAgICAgIGRyb3BwZWRMaW5lcysrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzcXVhc2hlZExpbmVzID0gdGhpcy5zcXVhc2hMaW5lcyhjb21tYW5kLmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGlmIChmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEdhbWVPdmVyQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KFxuICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YSxcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLFxuICAgICAgICAgICAgc3F1YXNoZWRMaW5lcyxcbiAgICAgICAgICAgIGRyb3BwZWRMaW5lcyAtIDEsXG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGdhbWVEYXRhOiBHYW1lRGF0YSk6IEZhbGxpbmdSZXN1bHQge1xuICAgICAgICBsZXQgZmFsbGluZ1Jlc3VsdCA9IG5ldyBGYWxsaW5nUmVzdWx0KCk7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goKGZhbGxpbmdGaWd1cmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWd1cmVDYW5GYWxsKGdhbWVEYXRhLm1hdHJpeCwgZmFsbGluZ0ZpZ3VyZSkpIHtcbiAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnkrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpZ3VyZUdhbWVPdmVyUmVzdWx0ID0gdGhpcy50cmFuc2ZlckZpZ3VyZVRvTWF0cml4KFxuICAgICAgICAgICAgICAgICAgICBnYW1lRGF0YS5tYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLnB1c2goLi4uZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuc3BsaWNlKGluZGV4LCAxKSk7XG4gICAgICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyID0gZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyIHx8IGZpZ3VyZUdhbWVPdmVyUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbGxpbmdSZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWd1cmVDYW5GYWxsKG1hdHJpeDogYm9vbGVhbltdW10sIGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmYWxsaW5nRmlndXJlLnBvc2l0aW9uLngsIGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSArIDEpLFxuICAgICAgICAgICAgbWF0cml4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFuc2ZlckZpZ3VyZVRvTWF0cml4KG1hdHJpeDogYm9vbGVhbltdW10sIGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGlzR2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChyb3csIGZpZ3VyZUNlbGxZKSA9PiB7XG4gICAgICAgICAgICAgICAgcm93LmZvckVhY2goKGNlbGxWYWx1ZSwgZmlndXJlQ2VsbFgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cml4WCA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueCArIGZpZ3VyZUNlbGxYO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cml4WSA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSArIGZpZ3VyZUNlbGxZO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0cml4WSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIG1hdHJpeFggaW4gbWF0cml4W21hdHJpeFldXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhbWF0cml4W21hdHJpeFldW21hdHJpeFhdXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W21hdHJpeFldW21hdHJpeFhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlzR2FtZU92ZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcXVhc2hMaW5lcyhtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyW10ge1xuICAgICAgICBsZXQgbGluZXNUb1NxdWFzaDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbkJlU3F1YXNoZWQgPSByb3cuZXZlcnkoY2VsbCA9PiBjZWxsKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVNxdWFzaGVkKSB7XG4gICAgICAgICAgICAgICAgbGluZXNUb1NxdWFzaC5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGluZXNUb1NxdWFzaC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgICAgbWF0cml4LnNwbGljZSh5LCAxKTtcbiAgICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KG5ldyBBcnJheShtYXRyaXhbMF0ubGVuZ3RoKS5maWxsKGZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZXNUb1NxdWFzaDtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRW51bUhlbHBlciB7XG4gICAgcHVibGljIHN0YXRpYyBUb0FycmF5KHZhbDogYW55KTogdHlwZW9mIHZhbFtdIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbClcbiAgICAgICAgICAgIC5tYXAobiA9PiBOdW1iZXIucGFyc2VJbnQobikpXG4gICAgICAgICAgICAuZmlsdGVyKG4gPT4gIU51bWJlci5pc05hTihuKSkgYXMgdW5rbm93biBhcyB0eXBlb2YgdmFsW107XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBHZXRSYW5kb20odmFsOiBhbnkpOiB0eXBlb2YgdmFsIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gRW51bUhlbHBlci5Ub0FycmF5KHZhbCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiB2YWx1ZXNbcmFuZG9tSW5kZXhdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc1NwYXduZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFbnVtSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvRW51bUhlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgQWx3YXlzT25lRmlndXJlU3Bhd25lciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEhhbmRsZXIoZXZlbnQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKFxuICAgICAgICAgICAgRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLFxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzT25GYWxsVGljay5iaW5kKHRoaXMpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc09uRmFsbFRpY2soZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hZGRGaWd1cmUoZXZlbnQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkRmlndXJlKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID4gMCB8fCBnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWd1cmVJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdhbWVEYXRhLnNldHRpbmdzLmZpZ3VyZXMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgZmlndXJlID0gZ2FtZURhdGEuc2V0dGluZ3MuZmlndXJlc1tmaWd1cmVJbmRleF07XG4gICAgICAgIGNvbnN0IHR1cm5TdGF0ZSA9IEVudW1IZWxwZXIuR2V0UmFuZG9tKEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZpZ3VyZS5nZXRUdXJuKHR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZVdpZHRoID0gTWF0aC5tYXgoLi4uZmlndXJlTWF0cml4Lm1hcChyb3cgPT4gcm93Lmxlbmd0aCkpO1xuICAgICAgICBjb25zdCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoXG4gICAgICAgICAgICBNYXRoLmNlaWwoZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aCAvIDIgLSBmaWd1cmVXaWR0aCAvIDIpIC0gMSxcbiAgICAgICAgICAgIC1maWd1cmVNYXRyaXgubGVuZ3RoLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmYWxsaW5nRmlndXJlID0gbmV3IEZhbGxpbmdGaWd1cmUoXG4gICAgICAgICAgICBmaWd1cmUsXG4gICAgICAgICAgICBjb29yZGluYXRlLFxuICAgICAgICAgICAgdHVyblN0YXRlXG4gICAgICAgICk7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLnB1c2goZmFsbGluZ0ZpZ3VyZSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc1NwYXduZWRFdmVudChnYW1lRGF0YSwgW2ZhbGxpbmdGaWd1cmVdKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDb21tYW5kQnVzLFxuICAgIENvbW1hbmRUeXBlLFxuICAgIE1vdmVMZWZ0Q29tbWFuZCxcbiAgICBNb3ZlUmlnaHRDb21tYW5kLFxuICAgIFR1cm5DbG9ja3dpc2VDb21tYW5kLFxuICAgIE1vdmVEb3duQ29tbWFuZCxcbiAgICBGaWd1cmVzRmFsbFRpY2tDb21tYW5kLFxuICAgIE1vdmVUb1hDb21tYW5kLFxuICAgIE1vdmVUb1lDb21tYW5kLFxuICAgIFR1cm5Ub1N0YXRlQ29tbWFuZFxufSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEZpZ3VyZXNNb3ZlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9VdGlscy9FbnVtSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZpbmdIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZUxlZnQsIHRoaXMucHJvY2Vzc01vdmVMZWZ0Q29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZVJpZ2h0LCB0aGlzLnByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlRG93biwgdGhpcy5wcm9jZXNzTW92ZURvd25Db21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlLCB0aGlzLnByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZVRvWCwgdGhpcy5wcm9jZXNzTW92ZVRvWENvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVUb1ksIHRoaXMucHJvY2Vzc01vdmVUb1lDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5UdXJuVG9TdGF0ZSwgdGhpcy5wcm9jZXNzVHVyblRvU3RhdGVDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVMZWZ0Q29tbWFuZChjb21tYW5kOiBNb3ZlTGVmdENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkTGVmdCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCAtIDEsIGZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZU1vdmVkTGVmdCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbi54LS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kKGNvbW1hbmQ6IE1vdmVSaWdodENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkUmlnaHQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4oZmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmlndXJlLnBvc2l0aW9uLnggKyAxLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVNb3ZlZFJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLngrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQ6IFR1cm5DbG9ja3dpc2VDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFsbFR1cm5TdGF0ZXMgPSBFbnVtSGVscGVyLlRvQXJyYXkoRmlndXJlVHVyblN0YXRlKTtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV4dFR1cm5TdGF0ZSA9IGZpZ3VyZS50dXJuU3RhdGUgKyAxO1xuICAgICAgICAgICAgaWYgKCEobmV4dFR1cm5TdGF0ZSBpbiBhbGxUdXJuU3RhdGVzKSkge1xuICAgICAgICAgICAgICAgIG5leHRUdXJuU3RhdGUgPSBhbGxUdXJuU3RhdGVzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FuQmVUdXJuZWQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4obmV4dFR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlVHVybmVkKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnR1cm5TdGF0ZSA9IG5leHRUdXJuU3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlRG93bkNvbW1hbmQoY29tbWFuZDogTW92ZURvd25Db21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVUb1hDb21tYW5kKGNvbW1hbmQ6IE1vdmVUb1hDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmIChjb21tYW5kLnggPCAwIHx8IGNvbW1hbmQueCA+IChjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSAxKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW92aW5nTW9kaWZpZXIgPSBjb21tYW5kLnggPiBmaWd1cmUucG9zaXRpb24ueCA/IDEgOiAtMTtcbiAgICAgICAgICAgIHdoaWxlIChmaWd1cmUucG9zaXRpb24ueCAhPT0gY29tbWFuZC54ICYmIEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCArIG1vdmluZ01vZGlmaWVyLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24ueCArPSBtb3ZpbmdNb2RpZmllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVUb1lDb21tYW5kKGNvbW1hbmQ6IE1vdmVUb1lDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmIChjb21tYW5kLnkgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICB3aGlsZSAoZmlndXJlLnBvc2l0aW9uLnkgPCBjb21tYW5kLnkgJiYgRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZpZ3VyZS5wb3NpdGlvbi54LCBmaWd1cmUucG9zaXRpb24ueSArIDEpLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLnkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R1cm5Ub1N0YXRlQ29tbWFuZChjb21tYW5kOiBUdXJuVG9TdGF0ZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZVR1cm5lZCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihjb21tYW5kLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlVHVybmVkKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnR1cm5TdGF0ZSA9IGNvbW1hbmQudHVyblN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgRmFsbFRpY2tTY29yZUNvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIHNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXA6IE1hcDxudW1iZXIsIG51bWJlcj4gPSBuZXcgTWFwKFtcbiAgICAgICAgICAgIFsxLCAxMDBdLFxuICAgICAgICAgICAgWzIsIDMwMF0sXG4gICAgICAgICAgICBbMywgNTAwXSxcbiAgICAgICAgICAgIFs0LCA4MDBdLFxuICAgICAgICBdKSxcbiAgICAgICAgcHJpdmF0ZSByZXdhcmRPbkNvbWJvID0gNTAsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA8IDApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGxldCBwcmV2aW91c1RocmVzaG9sZFJld2FyZCA9IDA7XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcC5mb3JFYWNoKChyZXdhcmQsIHJvd3NTcXVhc2hlZFRocmVzaG9sZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvd3NTcXVhc2hlZFRocmVzaG9sZCA+IGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgPSByZXdhcmQ7XG4gICAgICAgIH0pO1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zY29yZSArPVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgKiBldmVudC5nYW1lRGF0YS5sZXZlbFxuICAgICAgICAgICAgKyB0aGlzLnJld2FyZE9uQ29tYm8gKiBNYXRoLm1heCgwLCBldmVudC5nYW1lRGF0YS5jb21ibyAtIDEpICogZXZlbnQuZ2FtZURhdGEubGV2ZWxcbiAgICAgICAgICAgICsgZXZlbnQuZHJvcHBlZExpbmVzICogMiAqIGV2ZW50LmdhbWVEYXRhLmxldmVsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIFNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciB7XG4gICAgcHJpdmF0ZSBzcXVhc2hlZFJvd3NDb3VudGVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlcjogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIG1heExldmVsczogbnVtYmVyLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5wcm9jZXNzSW5pdEdhbWVDb21tYW5kLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlcisrO1xuICAgICAgICBpZiAodGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyID49IHRoaXMubGV2ZWxJbmNyZWFzZU9uU3F1YXNoZWRSb3dzTnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIgPSAwO1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEubGV2ZWwgPSBNYXRoLm1pbih0aGlzLm1heExldmVscywgZXZlbnQuZ2FtZURhdGEubGV2ZWwgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIENvbWJvQ291bnRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwdWJsaWMgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBldmVudC5nYW1lRGF0YS5jb21ibyArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEuY29tYm8gPSAwO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIENvbnN0VGltaW5nc0hhbmRsZXIgaW1wbGVtZW50cyBUaW1pbmdzSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBkZWxheU1zOiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgZ2V0RGVsYXlGb3JOZXh0VGlja01zKGdhbWVEYXRhOiBHYW1lRGF0YSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGF5TXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgU3RhdHNDb3VudGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsaW5nVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbGluZ1RpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpIHtcbiAgICAgICAgZXZlbnQuZ2FtZURhdGEuc3RhdHMuZmlndXJlc0ZhbGxlbiArPSBldmVudC50cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlcy5sZW5ndGg7XG4gICAgICAgIGV2ZW50LmdhbWVEYXRhLnN0YXRzLmxpbmVzU3F1YXNoZWQgKz0gZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGg7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgRHJvcEZpZ3VyZXNDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIE1vdmVMZWZ0Q29tbWFuZCwgTW92ZVJpZ2h0Q29tbWFuZCwgVHVybkNsb2Nrd2lzZUNvbW1hbmQsIE1vdmVEb3duQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmRDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLnByb2Nlc3NJbml0R2FtZUNvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB3aW5kb3cub25rZXlkb3duID0gZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZUxlZnRDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVJpZ2h0Q29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFR1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlRG93bkNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVEb3duQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdTcGFjZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBEcm9wRmlndXJlc0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZUNvbnRyb2xsZXJ9IGZyb20gJy4vR2FtZUNvbnRyb2xsZXInXG5pbXBvcnQge1RhYmxlUmVuZGVyZXIsIFRhYmxlUmVuZGVyZXJTZXR0aW5nc30gZnJvbSAnLi9SZW5kZXJlci9UYWJsZVJlbmRlcmVyJ1xuaW1wb3J0IHtSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3J9IGZyb20gXCIuL0ZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yL1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvclwiO1xuaW1wb3J0IHtBbHdheXNPbmVGaWd1cmVTcGF3bmVyfSBmcm9tIFwiLi9GaWd1cmVzU3Bhd25lci9BbHdheXNPbmVGaWd1cmVTcGF3bmVyXCI7XG5pbXBvcnQge0V2ZW50QnVzfSBmcm9tIFwiLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7TW92aW5nSGFuZGxlcn0gZnJvbSBcIi4vTW92aW5nSGFuZGxlci9Nb3ZpbmdIYW5kbGVyXCI7XG5pbXBvcnQge0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0ZhbGxUaWNrU2NvcmVDb3VudGVyfSBmcm9tIFwiLi9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXJcIjtcbmltcG9ydCB7U3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyfSBmcm9tIFwiLi9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi9Db21tb25cIjtcbmltcG9ydCB7Q29tYm9Db3VudGVyfSBmcm9tIFwiLi9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyXCI7XG5pbXBvcnQge0NvbnN0VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7U3RhdHNDb3VudGVyfSBmcm9tIFwiLi9TdGF0c0NvdW50ZXIvU3RhdHNDb3VudGVyXCI7XG5pbXBvcnQge0tleWJvYXJkQ29udHJvbGxlcn0gZnJvbSBcIi4vS2V5Ym9hcmRDb250cm9sbGVyL0tleWJvYXJkQ29udHJvbGxlclwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzRmFjYWRlIHtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKSxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoKSxcbiAgICAgICAgcHJpdmF0ZSBnYW1lQ29udHJvbGxlciA9IG5ldyBHYW1lQ29udHJvbGxlcihcbiAgICAgICAgICAgIC8vIG5ldyBMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXIoMjAwMCksXG4gICAgICAgICAgICBuZXcgQ29uc3RUaW1pbmdzSGFuZGxlcigyMDAwKSxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBtb3ZpbmdIYW5kbGVyID0gbmV3IE1vdmluZ0hhbmRsZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUga2V5Ym9hcmRDb250cm9sbGVyID0gbmV3IEtleWJvYXJkQ29udHJvbGxlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IgPSBuZXcgUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmlndXJlc1NwYXduZXIgPSBuZXcgQWx3YXlzT25lRmlndXJlU3Bhd25lcihcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBsZXZlbENvdW50ZXIgPSBuZXcgU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgOCxcbiAgICAgICAgICAgIDE1LFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGNvbWJvQ291bnRlciA9IG5ldyBDb21ib0NvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgc2NvcmVDb3VudGVyID0gbmV3IEZhbGxUaWNrU2NvcmVDb3VudGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIHN0YXRzQ291bnRlciA9IG5ldyBTdGF0c0NvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgdGFibGVSZW5kZXJlciA9IG5ldyBUYWJsZVJlbmRlcmVyKFxuICAgICAgICAgICAgbmV3IFRhYmxlUmVuZGVyZXJTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1c1xuICAgICAgICApLFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGEgPSBHYW1lRGF0YS5tYWtlU2ltcGxlKCksXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHN0YXJ0KGdhbWVEYXRhPzogR2FtZURhdGEpIHtcbiAgICAgICAgZ2FtZURhdGEgPSBnYW1lRGF0YSB8fCBHYW1lRGF0YS5tYWtlU2ltcGxlKCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEluaXRHYW1lQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZXN1bWVHYW1lQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXN1bWUoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlc3VtZUdhbWVDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFBhdXNlR2FtZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vVGV0cmlzL0ZpZ3VyZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBGaWd1cmVQbGFjaW5nU3RlcCB7XG4gICAgZ2V0IHBlcnNpc3RlZCgpOiBib29sZWFuLFxufVxuXG5leHBvcnQgY2xhc3MgVHVyblBsYWNpbmdTdGVwIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1N0ZXB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB0YXJnZXQ6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHJpdmF0ZSBfcGVyc2lzdGVkOiBib29sZWFuLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVhQbGFjaW5nU3RlcCBpbXBsZW1lbnRzIEZpZ3VyZVBsYWNpbmdTdGVwe1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgdGFyZ2V0OiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgX3BlcnNpc3RlZDogYm9vbGVhbixcbiAgICApIHt9XG5cbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc2lzdGVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVZUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHRhcmdldDogbnVtYmVyLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEcm9wUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWd1cmVzVGFyZ2V0U3RhdGVzOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4sXG4gICAgICAgIHB1YmxpYyBwbGFjaW5nU3RlcHM6IEZpZ3VyZVBsYWNpbmdTdGVwW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgSG9sZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpc09wZW5lZDogYm9vbGVhbixcbiAgICAgICAgcHVibGljIGNlbGxzOiBDb29yZGluYXRlW10sXG4gICAgKSB7fVxufVxuIiwiaW1wb3J0IHtIb2xlfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0Nvb3JkaW5hdGV9IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vLi4vVGV0cmlzL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBIb2xlc0hlbHBlciB7XG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0SG9sZXMobWF0cml4OiBib29sZWFuW11bXSk6IEhvbGVbXSB7XG4gICAgICAgIGxldCBob2xlczogSG9sZVtdID0gW107XG5cbiAgICAgICAgY2xhc3MgSG9sZUluUHJvY2VzcyB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgICAgICAgICBwdWJsaWMgY2VsbHM6IENvb3JkaW5hdGVbXSA9IFtdLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBwcmV2aW91c1Jvd09wZW5YczogbnVtYmVyW10gPSBbXSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgY3VycmVudFJvd09wZW5YczogbnVtYmVyW10gPSBbXSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgaXNPcGVuZWQ6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgY29udGludWVzOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBob2xlc0luUHJvY2VzczogSG9sZUluUHJvY2Vzc1tdID0gW107XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uczogU2V0PG51bWJlcj4gPSBuZXcgU2V0KCk7XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGhvbGVzSW5Qcm9jZXNzLmZvckVhY2goaG9sZSA9PiBob2xlLmNvbnRpbnVlcyA9IGZhbHNlKTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvY2Vzc2luZ0hvbGUgPSBob2xlc0luUHJvY2Vzcy5maW5kKGhvbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvbGUucHJldmlvdXNSb3dPcGVuWHMuc29tZShwcmV2WCA9PiBwcmV2WCA9PT0geClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoaG9sZS5jdXJyZW50Um93T3BlblhzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgaG9sZS5jdXJyZW50Um93T3BlblhzW2hvbGUuY3VycmVudFJvd09wZW5Ycy5sZW5ndGggLSAxXSA9PT0geCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc2luZ0hvbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUgPSBuZXcgSG9sZUluUHJvY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNJblByb2Nlc3MucHVzaChwcm9jZXNzaW5nSG9sZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuY3VycmVudFJvd09wZW5Ycy5wdXNoKHgpO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nSG9sZS5jZWxscy5wdXNoKG5ldyBDb29yZGluYXRlKHgsIHkpKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuY29udGludWVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuaXNPcGVuZWQgPSBwcm9jZXNzaW5nSG9sZS5pc09wZW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5kb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMobWF0cml4LCBuZXcgQ29vcmRpbmF0ZSh4LCB5KSwgY292ZXJlZENvbHVtbnMsIFtbdHJ1ZSwgdHJ1ZV1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZTogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgICAgIGhvbGVzSW5Qcm9jZXNzLmZvckVhY2goKGhvbGUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaG9sZS5jb250aW51ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZS5wcmV2aW91c1Jvd09wZW5YcyA9IGhvbGUuY3VycmVudFJvd09wZW5YcztcbiAgICAgICAgICAgICAgICAgICAgaG9sZS5jdXJyZW50Um93T3BlblhzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaG9sZS5jb250aW51ZXMgfHwgeSA9PSBtYXRyaXgubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBob2xlcy5wdXNoKG5ldyBIb2xlKFxuICAgICAgICAgICAgICAgICAgICAgICAgaG9sZS5pc09wZW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGUuY2VsbHMsXG4gICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgICAgICBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZS5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaG9sZXNJblByb2dyZXNzVG9SZW1vdmUucmV2ZXJzZSgpLmZvckVhY2goaSA9PiBob2xlc0luUHJvY2Vzcy5zcGxpY2UoaSwgMSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGhvbGVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZG9lc1RoZVdheU91dEZyb21Ib2xlRXhpc3RzKG1hdHJpeDogYm9vbGVhbltdW10sIGluaXRpYWxDb29yZGluYXRlOiBDb29yZGluYXRlLCBjb3ZlcmVkQ29sdW1uczogU2V0PG51bWJlcj4sIGZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZFRoZVdheU91dEZyb21Ib2xlKG1hdHJpeCwgaW5pdGlhbENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zLCBmaWd1cmVNYXRyaXgpICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmaW5kVGhlV2F5T3V0RnJvbUhvbGUobWF0cml4OiBib29sZWFuW11bXSwgaW5pdGlhbENvb3JkaW5hdGU6IENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zOiBTZXQ8bnVtYmVyPnxNYXA8bnVtYmVyLCBudW1iZXI+LCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucyA9IEhvbGVzSGVscGVyLmNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMoY292ZXJlZENvbHVtbnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRyeWluZyB0byBmaW5kIHRoZSB3YXkgb3V0IGZyb20gdGhlIGxlZnQgc2lkZVxuICAgICAgICBsZXQgdGFyZ2V0WENhbmRpZGF0ZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGxldCB4ID0gaW5pdGlhbENvb3JkaW5hdGUueCAtIDE7IHggPj0gMDsgeC0tKSB7XG4gICAgICAgICAgICBpZiAoIUZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUoeCwgaW5pdGlhbENvb3JkaW5hdGUueSksIG1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBjaGVja0ZhbGxYID0geCArIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGggLSAxOyBjaGVja0ZhbGxYID49IHg7IGNoZWNrRmFsbFgtLSkge1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5oYXMoY2hlY2tGYWxsWCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsQ29sdW1uc0ZyZWVUb0ZhbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFsbENvbHVtbnNGcmVlVG9GYWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0cnlpbmcgdG8gZmluZCB0aGUgd2F5IG91dCBmcm9tIHRoZSByaWdodCBzaWRlXG4gICAgICAgIGZvciAobGV0IHggPSBpbml0aWFsQ29vcmRpbmF0ZS54ICsgMTsgeCA8IG1hdHJpeFswXS5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgaWYgKCFGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHgsIGluaXRpYWxDb29yZGluYXRlLnkpLCBtYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYWxsQ29sdW1uc0ZyZWVUb0ZhbGwgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgY2hlY2tGYWxsWCA9IHg7IGNoZWNrRmFsbFggPCB4ICsgZmlndXJlTWF0cml4WzBdLmxlbmd0aDsgY2hlY2tGYWxsWCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyhjaGVja0ZhbGxYKSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWxsQ29sdW1uc0ZyZWVUb0ZhbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0Q292ZXJlZENvbHVtbnNYcyhtYXRyaXg6IGJvb2xlYW5bXVtdLCB0b1k/OiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgICAgIHJldHVybiBIb2xlc0hlbHBlci5jb252ZXJ0Q292ZXJlZENvbHVtbnNUb1hzKFxuICAgICAgICAgICAgSG9sZXNIZWxwZXIuY29sbGVjdENvdmVyZWRDb2x1bW5zKG1hdHJpeCwgdG9ZKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMoY292ZXJlZENvbHVtbnM6IE1hcDxudW1iZXIsIG51bWJlcj4pOiBTZXQ8bnVtYmVyPiB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KFsuLi5jb3ZlcmVkQ29sdW1ucy5rZXlzKCldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDQvNCw0L/RgyB4OiB5XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0Q292ZXJlZENvbHVtbnMobWF0cml4OiBib29sZWFuW11bXSwgdG9ZPzogbnVtYmVyKTogTWFwPG51bWJlciwgbnVtYmVyPiB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uczogTWFwPG51bWJlciwgbnVtYmVyPiA9IG5ldyBNYXAoKTtcbiAgICAgICAgbWF0cml4LnNvbWUoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICh0b1kgIT09IHVuZGVmaW5lZCAmJiB5ID49IHRvWSlcbiAgICAgICAgICAgICAgICB8fCBjb3ZlcmVkQ29sdW1ucy5zaXplID09IG1hdHJpeFswXS5sZW5ndGg7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY292ZXJlZENvbHVtbnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uLy4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7SG9sZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIG9yaWdpbmFsSG9sZXM6IEhvbGVbXSxcbiAgICAgICAgcHVibGljIG9yaWdpbmFsQ292ZXJlZENvbHVtbnM6IE1hcDxudW1iZXIsIG51bWJlcj4sXG4gICAgICAgIHB1YmxpYyBpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSxcbiAgICAgICAgcHVibGljIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1uczogTWFwPG51bWJlciwgbnVtYmVyPixcbiAgICAgICAgcHVibGljIHNxdWFzaGVkTGluZXNDb3VudDogbnVtYmVyLFxuICAgICkge31cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlcjtcbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi8uLi9UZXRyaXMvVXRpbHMvRW51bUhlbHBlclwiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi8uLi9UZXRyaXMvRmlndXJlc1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uLy4uL1RldHJpcy9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBSZW5kZXJDb21tYW5kfSBmcm9tIFwiLi4vLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtEcm9wUGxhY2luZ1N0ZXAsIEZpZ3VyZVBsYWNpbmdSZXN1bHQsIEZpZ3VyZVBsYWNpbmdTdGVwLCBNb3ZlWFBsYWNpbmdTdGVwLCBNb3ZlWVBsYWNpbmdTdGVwLCBUdXJuUGxhY2luZ1N0ZXB9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7Q2FsY3VsYXRvckFnZ3JlZ2F0ZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvci9DYWxjdWxhdG9yQWdncmVnYXRlXCI7XG5pbXBvcnQge0hvbGVzSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvSG9sZXNIZWxwZXJcIjtcbmltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0fSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9yL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuXG5jbGFzcyBQbGFjZVJlc29sdmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuXG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNlUmVzb2x2aW5nRXJyb3Ige1xufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIHNjb3JlQ2FsY3VsYXRvcjogQ2FsY3VsYXRvckFnZ3JlZ2F0ZSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcmVzb2x2ZShnYW1lRGF0YTogR2FtZURhdGEpOiBGaWd1cmVQbGFjaW5nUmVzdWx0fHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuXG4gICAgICAgIGxldCBtYXhTY29yZSA9IC1JbmZpbml0eTtcbiAgICAgICAgbGV0IHRoZUJlc3RSZXN1bHQgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc3VsdChuZXcgTWFwKCksIFtdKTtcblxuICAgICAgICB0aGlzLnByb2Nlc3NTdGF0ZXMoZ2FtZURhdGEsIChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlLCBzY29yZTogbnVtYmVyLCBwbGFjaW5nRGlyZWN0aW9uczogRmlndXJlUGxhY2luZ1N0ZXBbXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNjb3JlID4gbWF4U2NvcmUpIHtcbiAgICAgICAgICAgICAgICBtYXhTY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgICAgIHRoZUJlc3RSZXN1bHQgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc3VsdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IE1hcChbW29yaWdpbmFsRmlndXJlLCBpbWFnaW5hYmxlRmlndXJlXV0pLFxuICAgICAgICAgICAgICAgICAgICBwbGFjaW5nRGlyZWN0aW9uc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gbGV0IGRlYnVnTW9kZSA9IHRydWU7XG4gICAgICAgIC8qbGV0IGRlYnVnTW9kZSA9ICdkZWJ1Z01vZGUnIGluIHdpbmRvdyAmJiB3aW5kb3cuZGVidWdNb2RlO1xuICAgICAgICBsZXQgaW1hZ2luYWJsZUZpZ3VyZSA9IHRoZUJlc3RSZXN1bHQuZmlndXJlc1RhcmdldFN0YXRlcy5nZXQob3JpZ2luYWxGaWd1cmUpO1xuICAgICAgICBpZiAoZGVidWdNb2RlICYmIGltYWdpbmFibGVGaWd1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IGZha2VHYW1lRGF0YSA9IHN0cnVjdHVyZWRDbG9uZShnYW1lRGF0YSk7XG4gICAgICAgICAgICBpbWFnaW5hYmxlRmlndXJlLmNvbG9yID0gJyNmMDAnO1xuICAgICAgICAgICAgZmFrZUdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzID0gW2ltYWdpbmFibGVGaWd1cmVdO1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZChmYWtlR2FtZURhdGEpKTtcblxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzU3RhdGVzKGdhbWVEYXRhLCB1bmRlZmluZWQsIChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgaW1hZ2luYWJsZUZpZ3VyZS5jb2xvciA9ICcjMDBmJztcbiAgICAgICAgICAgICAgICBmYWtlR2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMgPSBbaW1hZ2luYWJsZUZpZ3VyZV07XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZChmYWtlR2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0qL1xuXG4gICAgICAgIHJldHVybiB0aGVCZXN0UmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1N0YXRlcyhcbiAgICAgICAgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBvbkFmdGVyU2NvcmVDYWxjdWxhdGVzPzogKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUsIHNjb3JlOiBudW1iZXIsIHBsYWNpbmdEaXJlY3Rpb25zOiBGaWd1cmVQbGFjaW5nU3RlcFtdKSA9PiB2b2lkLFxuICAgICAgICBvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcz86IChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlKSA9PiB2b2lkLFxuICAgICkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuXG4gICAgICAgIGxldCBlbnVtcyA9IEVudW1IZWxwZXIuVG9BcnJheShGaWd1cmVUdXJuU3RhdGUpO1xuICAgICAgICB3aGlsZSAoZW51bXNbMF0gIT09IG9yaWdpbmFsRmlndXJlLnR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgZW51bXMudW5zaGlmdChlbnVtcy5wb3AoKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1hdHJpY2VzOiBNYXA8RmlndXJlVHVyblN0YXRlLCBib29sZWFuW11bXT4gPSBuZXcgTWFwKCk7XG4gICAgICAgIGxldCBzdHJpbmd5TWF0cmljZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICAgICAgICBlbnVtcy5mb3JFYWNoKHR1cm5TdGF0ZSA9PiB7XG4gICAgICAgICAgICBsZXQgZmlndXJlTWF0cml4ID0gb3JpZ2luYWxGaWd1cmUuZmlndXJlLmdldFR1cm4odHVyblN0YXRlKTtcbiAgICAgICAgICAgIGxldCBzdHJpbmd5RmlndXJlTWF0cml4ID0gZmlndXJlTWF0cml4Lm1hcChyb3cgPT4gcm93Lm1hcCh2YWwgPT4gdmFsID8gXCIxXCIgOiBcIjBcIikuam9pbigpKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgaWYgKCFzdHJpbmd5TWF0cmljZXMuaGFzKHN0cmluZ3lGaWd1cmVNYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5neU1hdHJpY2VzLmFkZChzdHJpbmd5RmlndXJlTWF0cml4KTtcbiAgICAgICAgICAgICAgICBtYXRyaWNlcy5zZXQodHVyblN0YXRlLCBmaWd1cmVNYXRyaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBvcmlnaW5hbE1hdHJpeEhvbGVzID0gSG9sZXNIZWxwZXIuY29sbGVjdEhvbGVzKGdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQ292ZXJlZENvbHVtbnMgPSBIb2xlc0hlbHBlci5jb2xsZWN0Q292ZXJlZENvbHVtbnMoZ2FtZURhdGEubWF0cml4KTtcblxuICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoIC0gZmlndXJlTWF0cml4WzBdLmxlbmd0aCArIDE7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBbeSwgaW1hZ2luYWJsZU1hdHJpeF0gPSB0aGlzLmltYWdpbmVGaWd1cmVEcm9wKGdhbWVEYXRhLm1hdHJpeCwgZmlndXJlTWF0cml4LCB4KTtcbiAgICAgICAgICAgICAgICBsZXQgY29vcmRpbmF0ZSA9IG5ldyBDb29yZGluYXRlKHgsIHkpO1xuICAgICAgICAgICAgICAgIGxldCBzcXVhc2hlZExpbmVzQ291bnQgPSB0aGlzLnNxdWFzaExpbmVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlRmlndXJlID0gbmV3IEZhbGxpbmdGaWd1cmUob3JpZ2luYWxGaWd1cmUuZmlndXJlLCBjb29yZGluYXRlLCB0dXJuU3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmIChvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICBvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyhpbWFnaW5hYmxlRmlndXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyA9IEhvbGVzSGVscGVyLmNvbGxlY3RDb3ZlcmVkQ29sdW1ucyhpbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlU2NvcmVSZXF1ZXN0ID0gbmV3IENhbGN1bGF0ZVNjb3JlUmVxdWVzdChcbiAgICAgICAgICAgICAgICAgICAgZ2FtZURhdGEsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWF0cml4SG9sZXMsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ292ZXJlZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVNYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgc3F1YXNoZWRMaW5lc0NvdW50XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLnNjb3JlQ2FsY3VsYXRvci5jYWxjdWxhdGVTY29yZShjYWxjdWxhdGVTY29yZVJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb25zID0gdGhpcy5tYWtlU2ltcGxlUGxhY2luZ1N0ZXBzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgIGlmIChvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMoaW1hZ2luYWJsZUZpZ3VyZSwgc2NvcmUsIGRpcmVjdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3JpZ2luYWxNYXRyaXhIb2xlcy5maWx0ZXIoaG9sZSA9PiBob2xlLmlzT3BlbmVkICYmIGhvbGUuY2VsbHMubGVuZ3RoID4gMCkuZm9yRWFjaChob2xlID0+IHtcbiAgICAgICAgICAgIGxldCB0b3BZID0gZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQsXG4gICAgICAgICAgICAgICAgbGVmdFggPSBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoLFxuICAgICAgICAgICAgICAgIGJvdHRvbVkgPSAtMSxcbiAgICAgICAgICAgICAgICByaWdodFggPSAtMTtcbiAgICAgICAgICAgIGhvbGUuY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICB0b3BZID0gTWF0aC5taW4odG9wWSwgY2VsbC55KTtcbiAgICAgICAgICAgICAgICBsZWZ0WCA9IE1hdGgubWluKGxlZnRYLCBjZWxsLngpO1xuICAgICAgICAgICAgICAgIGJvdHRvbVkgPSBNYXRoLm1heChib3R0b21ZLCBjZWxsLnkpO1xuICAgICAgICAgICAgICAgIHJpZ2h0WCA9IE1hdGgubWF4KHJpZ2h0WCwgY2VsbC54KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSBNYXRoLm1heCh0b3BZIC0gZmlndXJlTWF0cml4Lmxlbmd0aCArIDEsIDApOyB5IDw9IGJvdHRvbVk7IHkrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gTWF0aC5tYXgobGVmdFggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMSwgMCk7IHggPD0gcmlnaHRYOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoeCwgeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2luYWJsZUZpZ3VyZSA9IG5ldyBGYWxsaW5nRmlndXJlKG9yaWdpbmFsRmlndXJlLmZpZ3VyZSwgY29vcmRpbmF0ZSwgdHVyblN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgY29vcmRpbmF0ZSwgZ2FtZURhdGEubWF0cml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb25zID0gdGhpcy5tYWtlUHVzaEluUGxhY2luZ1N0ZXBzKGdhbWVEYXRhLCBpbWFnaW5hYmxlRmlndXJlLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlTWF0cml4ID0gdGhpcy5pbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lRGF0YS5tYXRyaXgsIGZpZ3VyZU1hdHJpeCwgY29vcmRpbmF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhc2hlZExpbmVzQ291bnQgPSB0aGlzLnNxdWFzaExpbmVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zID0gSG9sZXNIZWxwZXIuY29sbGVjdENvdmVyZWRDb2x1bW5zKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlU2NvcmVSZXF1ZXN0ID0gbmV3IENhbGN1bGF0ZVNjb3JlUmVxdWVzdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYXRyaXhIb2xlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ292ZXJlZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlTWF0cml4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXNoZWRMaW5lc0NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuc2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKGNhbGN1bGF0ZVNjb3JlUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUsIHNjb3JlLCBkaXJlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNxdWFzaExpbmVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIge1xuICAgICAgICBsZXQgbGluZXNUb1NxdWFzaDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbkJlU3F1YXNoZWQgPSByb3cuZXZlcnkoY2VsbCA9PiBjZWxsKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVNxdWFzaGVkKSB7XG4gICAgICAgICAgICAgICAgbGluZXNUb1NxdWFzaC5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGluZXNUb1NxdWFzaC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgICAgbWF0cml4LnNwbGljZSh5LCAxKTtcbiAgICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KG5ldyBBcnJheShtYXRyaXhbMF0ubGVuZ3RoKS5maWxsKGZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZXNUb1NxdWFzaC5sZW5ndGg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbWFnaW5lRmlndXJlRHJvcChnYW1lTWF0cml4OiBib29sZWFuW11bXSwgZmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0WDogbnVtYmVyKTogW251bWJlciwgYm9vbGVhbltdW11dIHtcbiAgICAgICAgbGV0IHRhcmdldFkgPSAtZmlndXJlTWF0cml4Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUodGFyZ2V0WCwgdGFyZ2V0WSArIDEpLCBnYW1lTWF0cml4KSkge1xuICAgICAgICAgICAgdGFyZ2V0WSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB0YXJnZXRZLFxuICAgICAgICAgICAgdGhpcy5pbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lTWF0cml4LCBmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHRhcmdldFgsIHRhcmdldFkpKSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGltYWdpbmVGaWd1cmVQbGFjaW5nKGdhbWVNYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdLCB0YXJnZXRDb29yZGluYXRlOiBDb29yZGluYXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBsZXQgaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10gPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZU1hdHJpeCk7XG4gICAgICAgIGZpZ3VyZU1hdHJpeC5mb3JFYWNoKChyb3csIGZpZ3VyZVkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIGZpZ3VyZVgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHRhcmdldENvb3JkaW5hdGUueSArIGZpZ3VyZVk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRDb29yZGluYXRlLnggKyBmaWd1cmVYO1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiBpbWFnaW5hYmxlTWF0cml4XG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIGltYWdpbmFibGVNYXRyaXhbcmVhbFldXG4gICAgICAgICAgICAgICAgICAgICYmIHZhbFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlTWF0cml4W3JlYWxZXVtyZWFsWF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW1hZ2luYWJsZU1hdHJpeDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1ha2VQdXNoSW5QbGFjaW5nU3RlcHMoZ2FtZURhdGE6IEdhbWVEYXRhLCBpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zOiBNYXA8bnVtYmVyLCBudW1iZXI+KTogRmlndXJlUGxhY2luZ1N0ZXBbXSB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBmaWd1cmVNYXRyaXggPSBpbWFnaW5hYmxlRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGltYWdpbmFibGVGaWd1cmUudHVyblN0YXRlKTtcbiAgICAgICAgbGV0IHRhcmdldFggPSBIb2xlc0hlbHBlci5maW5kVGhlV2F5T3V0RnJvbUhvbGUoZ2FtZURhdGEubWF0cml4LCBpbWFnaW5hYmxlRmlndXJlLnBvc2l0aW9uLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zLCBmaWd1cmVNYXRyaXgpO1xuICAgICAgICBpZiAodGFyZ2V0WCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBUdXJuUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS50dXJuU3RhdGUsIHRydWUpLFxuICAgICAgICAgICAgbmV3IE1vdmVYUGxhY2luZ1N0ZXAodGFyZ2V0WCwgZmFsc2UpLFxuICAgICAgICAgICAgbmV3IE1vdmVZUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgIG5ldyBNb3ZlWFBsYWNpbmdTdGVwKGltYWdpbmFibGVGaWd1cmUucG9zaXRpb24ueCwgdHJ1ZSksXG4gICAgICAgICAgICBuZXcgRHJvcFBsYWNpbmdTdGVwKCksXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYWtlU2ltcGxlUGxhY2luZ1N0ZXBzKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBGaWd1cmVQbGFjaW5nU3RlcFtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBUdXJuUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS50dXJuU3RhdGUsIHRydWUpLFxuICAgICAgICAgICAgbmV3IE1vdmVYUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS5wb3NpdGlvbi54LCB0cnVlKSxcbiAgICAgICAgICAgIG5ldyBEcm9wUGxhY2luZ1N0ZXAoKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIENhbGN1bGF0b3JBZ2dyZWdhdGUgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNhbGN1bGF0b3JzOiBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VbXVxuICAgICkge31cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdG9ycy5yZWR1Y2UoKHNjb3JlLCBjYWxjdWxhdG9yKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc2NvcmUgKyBjYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKHJlcXVlc3QpO1xuICAgICAgICB9LCAwKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBTcXVhc2hlZFJvd3NDYWxjdWxhdG9yUGFyYW1zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIG11bHRpcGxpZXI6IG51bWJlclxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFNxdWFzaGVkUm93c0NhbGN1bGF0b3IgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHBhcmFtcyA9IG5ldyBTcXVhc2hlZFJvd3NDYWxjdWxhdG9yUGFyYW1zKDUpLFxuICAgICkge31cblxuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiByZXF1ZXN0LnNxdWFzaGVkTGluZXNDb3VudCAqIHRoaXMucGFyYW1zLm11bHRpcGxpZXI7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDYWxjdWxhdGVTY29yZVJlcXVlc3QsIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgRmlsbGFibGVDZWxsc0NhbGN1bGF0b3JQYXJhbXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgbWluaW11bVZhbHVhYmxlSGVpZ2h0OiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBwb3dNdWx0aXBsaWVyOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBtdWx0aXBsaWVyOiBudW1iZXIsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgRmlsbGFibGVDZWxsc0NhbGN1bGF0b3IgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHBhcmFtcyA9IG5ldyBGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvclBhcmFtcyg1LCAxLCAxKSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlU2NvcmUocmVxdWVzdDogQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0KTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgZmllbGRIZWlnaHQgPSByZXF1ZXN0LmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0O1xuICAgICAgICBjb25zdCBmaWVsZFdpZHRoID0gcmVxdWVzdC5nYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoO1xuICAgICAgICBjb25zdCBbZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUhlaWdodF0gPSB0aGlzLmNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UocmVxdWVzdC5pbWFnaW5hYmxlTWF0cml4LCBmaWVsZFdpZHRoKTtcbiAgICAgICAgbGV0IGZpbGxhYmxlQ2VsbHNTY29yZSA9IDA7XG4gICAgICAgIGlmIChmaWxsYWJsZUhlaWdodCA+IHRoaXMucGFyYW1zLm1pbmltdW1WYWx1YWJsZUhlaWdodCkge1xuICAgICAgICAgICAgZmlsbGFibGVDZWxsc1Njb3JlID0gLWZpbGxhYmxlQ2VsbHNDb3VudFxuICAgICAgICAgICAgICAgICogTWF0aC5wb3coXG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlQ2VsbHNDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgZmlsbGFibGVDZWxsc0NvdW50IC8gKGZpZWxkSGVpZ2h0ICogZmllbGRXaWR0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICogdGhpcy5wYXJhbXMucG93TXVsdGlwbGllclxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAqIHRoaXMucGFyYW1zLm11bHRpcGxpZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGxhYmxlQ2VsbHNTY29yZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UobWF0cml4OiBib29sZWFuW11bXSwgZmllbGRXaWR0aDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICBsZXQgZmlsbGFibGVDZWxsc0NvdW50ID0gMDtcbiAgICAgICAgbGV0IGZpbGxhYmxlSGVpZ2h0ID0gMDtcbiAgICAgICAgbWF0cml4LmV2ZXJ5KHJvdyA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWwgJiYgY292ZXJlZENvbHVtbnMuc2l6ZSA+IDAgJiYgIWNvdmVyZWRDb2x1bW5zLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUNlbGxzQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5zaXplIDwgZmllbGRXaWR0aCkge1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUhlaWdodCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUhlaWdodF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDYWxjdWxhdGVTY29yZVJlcXVlc3QsIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgSG9sZXNWMUNhbGN1bGF0b3JQYXJhbXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgY291bnREZWNyZWFzZU11bHRpcGxpZXI6IG51bWJlcixcbiAgICAgICAgcHVibGljIGNvdW50SW5jcmVhc2VNdWx0aXBsaWVyOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBjb3ZlcmVkSGVpZ2h0UG93TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgY292ZXJlZEhlaWdodE11bHRpcGxpZXI6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBIb2xlc1YxQ2FsY3VsYXRvciBpbXBsZW1lbnRzIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcGFyYW1zID0gbmV3IEhvbGVzVjFDYWxjdWxhdG9yUGFyYW1zKDE1MCwgNzAsIDEsIDUpLFxuICAgICkge31cblxuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IFtob2xlc0NvdW50LCBob2xlc0NvdmVyZWRIZWlnaHRdID0gdGhpcy5jYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQocmVxdWVzdC5pbWFnaW5hYmxlTWF0cml4LCByZXF1ZXN0LmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IGhvbGVzQ291bnREZWNyZWFzZSA9IHJlcXVlc3Qub3JpZ2luYWxIb2xlcy5sZW5ndGggLSBob2xlc0NvdW50O1xuICAgICAgICBsZXQgaG9sZXNTY29yZSA9IGhvbGVzQ291bnREZWNyZWFzZSA+IDBcbiAgICAgICAgICAgID8gaG9sZXNDb3VudERlY3JlYXNlICogdGhpcy5wYXJhbXMuY291bnREZWNyZWFzZU11bHRpcGxpZXJcbiAgICAgICAgICAgIDogaG9sZXNDb3VudERlY3JlYXNlICogdGhpcy5wYXJhbXMuY291bnRJbmNyZWFzZU11bHRpcGxpZXI7XG4gICAgICAgIGlmIChob2xlc0NvdmVyZWRIZWlnaHQgIT09IDAgJiYgaG9sZXNDb3VudCAhPT0gMCkge1xuICAgICAgICAgICAgaG9sZXNTY29yZSAtPVxuICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodFxuICAgICAgICAgICAgICAgICogTWF0aC5wb3coXG4gICAgICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3ZlcmVkSGVpZ2h0IC8gKHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQgKiBob2xlc0NvdW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgKiB0aGlzLnBhcmFtcy5jb3ZlcmVkSGVpZ2h0UG93TXVsdGlwbGllclxuICAgICAgICAgICAgICAgICkgKiB0aGlzLnBhcmFtcy5jb3ZlcmVkSGVpZ2h0TXVsdGlwbGllcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaG9sZXNTY29yZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhvbGVzQW5kQ292ZXJlZEhlaWdodChpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSwgcmVhbE1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgY29uc3QgW29yaWdpbmFsVGhlSGlnaGVzdEhvbGVZLCBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFldID0gdGhpcy5jYWxjdWxhdGVUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKHJlYWxNYXRyaXgpO1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnNZcyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBsZXQgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSA9IDA7XG4gICAgICAgIGxldCBob2xlc0NvdW50ID0gMDtcbiAgICAgICAgaW1hZ2luYWJsZU1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmICFjb3ZlcmVkQ29sdW1uc1lzLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1uc1lzLnNldCh4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvdmVyZWRZID0gY292ZXJlZENvbHVtbnNZcy5nZXQoeCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRZICE9PSB1bmRlZmluZWQgJiYgIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICBob2xlc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSAhPT0gdW5kZWZpbmVkICYmIG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSArPSB5IC0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdmVyZWRZIDwgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSArPSBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgLSBjb3ZlcmVkWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtob2xlc0NvdW50LCBob2xlc0NvdmVyZWRIZWlnaHRzU3VtXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkobWF0cml4OiBib29sZWFuW11bXSk6IFtudW1iZXJ8dW5kZWZpbmVkLCBudW1iZXJ8dW5kZWZpbmVkXSB7XG4gICAgICAgIGxldCB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgdGhlSGlnaGVzdEhvbGVZID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnNZcyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBtYXRyaXguc29tZSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcm93LnNvbWUoKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwgJiYgIWNvdmVyZWRDb2x1bW5zWXMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zWXMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY292ZXJlZFkgPSBjb3ZlcmVkQ29sdW1uc1lzLmdldCh4KTtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZFkgIT09IHVuZGVmaW5lZCAmJiAhdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoZUhpZ2hlc3RIb2xlWSA9IHk7XG4gICAgICAgICAgICAgICAgICAgIHRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgPSBjb3ZlcmVkWTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt0aGVIaWdoZXN0SG9sZVksIHRoZUhpZ2hlc3RIb2xlQ292ZXJlZFldO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0LCBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2V9IGZyb20gXCIuLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIEZpbGxlZEhlaWdodENhbGN1bGF0b3JQYXJhbXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgcG93TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgbXVsdGlwbGllcjogbnVtYmVyLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEZpbGxlZEhlaWdodENhbGN1bGF0b3IgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHBhcmFtcyA9IG5ldyBGaWxsZWRIZWlnaHRDYWxjdWxhdG9yUGFyYW1zKDEsIDMpLFxuICAgICkge31cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmNhbGN1bGF0ZUhlaWdodChyZXF1ZXN0LmltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICByZXR1cm4gLWhlaWdodFxuICAgICAgICAgICAgKiBNYXRoLnBvdyhcbiAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgaGVpZ2h0IC8gcmVxdWVzdC5nYW1lRGF0YS5zZXR0aW5ncy5maWVsZEhlaWdodFxuICAgICAgICAgICAgICAgICogdGhpcy5wYXJhbXMucG93TXVsdGlwbGllclxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgKiB0aGlzLnBhcmFtcy5tdWx0aXBsaWVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlSGVpZ2h0KG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIge1xuICAgICAgICBsZXQgbG93ZXN0RW1wdHlZID0gLTE7XG4gICAgICAgIG1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBpZiAocm93LmV2ZXJ5KHZhbCA9PiAhdmFsKSkge1xuICAgICAgICAgICAgICAgIGxvd2VzdEVtcHR5WSA9IHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtYXRyaXgubGVuZ3RoIC0gbG93ZXN0RW1wdHlZIC0gMTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBUdW5uZWxzQ2FsY3VsYXRvclBhcmFtcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBtaW5pbXVtVmFsdWFibGVIZWlnaHQ6IG51bWJlcixcbiAgICAgICAgcHVibGljIGNvdW50TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgaGVpZ2h0UG93TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgaGVpZ2h0TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFR1bm5lbHNDYWxjdWxhdG9yIGltcGxlbWVudHMgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwYXJhbXMgPSBuZXcgVHVubmVsc0NhbGN1bGF0b3JQYXJhbXMoMywgNzAsIDEsIDcpLFxuICAgICkge31cblxuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IFt0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzQ291bnRdID0gdGhpcy5jYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkKHJlcXVlc3QuaW1hZ2luYWJsZU1hdHJpeCwgcmVxdWVzdC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBpZiAodHVubmVsc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoLXR1bm5lbHNDb3VudCAqIHRoaXMucGFyYW1zLmNvdW50TXVsdGlwbGllcilcbiAgICAgICAgICAgIC0gKHR1bm5lbHNTdW1IZWlnaHRcbiAgICAgICAgICAgICAgICAqIE1hdGgucG93KFxuICAgICAgICAgICAgICAgICAgICB0dW5uZWxzU3VtSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB0dW5uZWxzU3VtSGVpZ2h0IC8gKHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQgKiB0dW5uZWxzQ291bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIHRoaXMucGFyYW1zLmhlaWdodFBvd011bHRpcGxpZXJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKiB0aGlzLnBhcmFtcy5oZWlnaHRNdWx0aXBsaWVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQoaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10sIHJlYWxNYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGxldCByZWFsQ292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICAgICAgcmVhbE1hdHJpeC5ldmVyeSgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZWFsQ292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGxldCB0dW5uZWxzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj47XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSBpbWFnaW5hYmxlTWF0cml4WzBdLmxlbmd0aDtcbiAgICAgICAgaW1hZ2luYWJsZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdmFsXG4gICAgICAgICAgICAgICAgICAgICYmICFpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHgpXG4gICAgICAgICAgICAgICAgICAgICYmICFyZWFsQ292ZXJlZENvbHVtbnMuaGFzKHgpXG4gICAgICAgICAgICAgICAgICAgICYmICh4ID09PSAwIHx8IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeCAtIDEpKVxuICAgICAgICAgICAgICAgICAgICAmJiAoeCA9PT0gZmllbGRXaWR0aCAtIDEgfHwgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4ICsgMSkpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHR1bm5lbHMuc2V0KHgsICh0dW5uZWxzLmdldCh4KSB8fCAwKSArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5zaXplIDwgZmllbGRXaWR0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCB0dW5uZWxzU3VtSGVpZ2h0ID0gMDtcbiAgICAgICAgbGV0IHR1bm5lbHNDb3VudCA9IDA7XG4gICAgICAgIHR1bm5lbHMuZm9yRWFjaChoZWlnaHQgPT4ge1xuICAgICAgICAgICAgaWYgKGhlaWdodCA+PSB0aGlzLnBhcmFtcy5taW5pbXVtVmFsdWFibGVIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0dW5uZWxzU3VtSGVpZ2h0ICs9IGhlaWdodDtcbiAgICAgICAgICAgICAgICB0dW5uZWxzQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbdHVubmVsc1N1bUhlaWdodCwgdHVubmVsc0NvdW50XTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZpZ3VyZXNTcGF3bmVkRXZlbnR9IGZyb20gXCIuLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1Jlc29sdmVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUmVzb2x2ZXIvRmlndXJlUGxhY2luZ1Jlc29sdmVyXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2V9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIvRmlndXJlUGxhY2luZ1BlcmZvcm1lckludGVyZmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzU29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBmaWd1cmVQbGFjaW5nUmVzb2x2ZXI6IEZpZ3VyZVBsYWNpbmdSZXNvbHZlcixcbiAgICAgICAgcHJpdmF0ZSBmaWd1cmVQbGFjaW5nUGVyZm9ybWVyOiBGaWd1cmVQbGFjaW5nUGVyZm9ybWVySW50ZXJmYWNlLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZpZ3VyZXNTcGF3bmVkLCB0aGlzLm9uRmlndXJlc1NwYXduZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZpZ3VyZXNTcGF3bmVkKGV2ZW50OiBGaWd1cmVzU3Bhd25lZEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzID0gdGhpcy5maWd1cmVQbGFjaW5nUmVzb2x2ZXIucmVzb2x2ZShldmVudC5nYW1lRGF0YSk7XG4gICAgICAgIHRoaXMuZmlndXJlUGxhY2luZ1BlcmZvcm1lci5wbGFjZShldmVudC5nYW1lRGF0YSwgdGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdSZXN1bHR9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIFBsYWNpbmdFcnJvciBleHRlbmRzIEVycm9yIHt9XG5leHBvcnQgY2xhc3MgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IgZXh0ZW5kcyBQbGFjaW5nRXJyb3Ige31cbmV4cG9ydCBjbGFzcyBJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5leHBvcnQgY2xhc3MgTm90U3VwcG9ydGVkRGlyZWN0aW9uU3RlcEVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlndXJlUGxhY2luZ1BlcmZvcm1lckludGVyZmFjZSB7XG4gICAgLyoqXG4gICAgICogQHRocm93cyBQbGFjaW5nRXJyb3JcbiAgICAgKi9cbiAgICBwbGFjZShnYW1lRGF0YTogR2FtZURhdGEsIHBsYWNpbmdSZXN1bHQ/OiBGaWd1cmVQbGFjaW5nUmVzdWx0KTogdm9pZDtcbn1cbiIsImltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge1xuICAgIENvbW1hbmRCdXMsXG4gICAgRHJvcEZpZ3VyZXNDb21tYW5kLFxuICAgIE1vdmVEb3duQ29tbWFuZCxcbiAgICBNb3ZlTGVmdENvbW1hbmQsXG4gICAgTW92ZVJpZ2h0Q29tbWFuZCxcbiAgICBNb3ZlVG9YQ29tbWFuZCxcbiAgICBNb3ZlVG9ZQ29tbWFuZCxcbiAgICBUdXJuQ2xvY2t3aXNlQ29tbWFuZCxcbiAgICBUdXJuVG9TdGF0ZUNvbW1hbmRcbn0gZnJvbSBcIi4uLy4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RHJvcFBsYWNpbmdTdGVwLCBGaWd1cmVQbGFjaW5nUmVzdWx0LCBNb3ZlWFBsYWNpbmdTdGVwLCBNb3ZlWVBsYWNpbmdTdGVwLCBUdXJuUGxhY2luZ1N0ZXB9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1BlcmZvcm1lckludGVyZmFjZSwgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IsIEluY29uc2lzdGVudFRhcmdldFN0YXRlRXJyb3IsIE5vdFN1cHBvcnRlZERpcmVjdGlvblN0ZXBFcnJvcn0gZnJvbSBcIi4vRmlndXJlUGxhY2luZ1BlcmZvcm1lckludGVyZmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgSW5zdGFudEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nUGVyZm9ybWVySW50ZXJmYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICkge31cblxuICAgIHB1YmxpYyBwbGFjZShnYW1lRGF0YTogR2FtZURhdGEsIHBsYWNpbmdSZXN1bHQ/OiBGaWd1cmVQbGFjaW5nUmVzdWx0KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IHRoaXMucGxhY2VJbXBsKGdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucGxhY2VJbXBsKGdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0KSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHBsYWNlSW1wbChnYW1lRGF0YTogR2FtZURhdGEsIHBsYWNpbmdSZXN1bHQ/OiBGaWd1cmVQbGFjaW5nUmVzdWx0KSB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGxhY2luZ1Jlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxGaWd1cmUgPSBnYW1lRGF0YS5mYWxsaW5nRmlndXJlc1swXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0RmlndXJlID0gcGxhY2luZ1Jlc3VsdC5maWd1cmVzVGFyZ2V0U3RhdGVzLmdldChvcmlnaW5hbEZpZ3VyZSk7XG4gICAgICAgIGlmICghdGFyZ2V0RmlndXJlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUuZmlndXJlICE9PSB0YXJnZXRGaWd1cmUuZmlndXJlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvcihcIkJvdGggb2YgdGhlIG9yaWdpbmFsIGFuZCB0aGUgdGFyZ2V0IGZhbGxpbmcgZmlndXJlcyBtdXN0IGhhdmUgdGhlIHNhbWUgZmlndXJlIGluIGl0LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBsYWNpbmdSZXN1bHQucGxhY2luZ1N0ZXBzLmZvckVhY2goc3RlcCA9PiB7XG4gICAgICAgICAgICBpZiAoc3RlcCBpbnN0YW5jZW9mIFR1cm5QbGFjaW5nU3RlcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFR1cm5Ub1N0YXRlQ29tbWFuZChnYW1lRGF0YSwgc3RlcC50YXJnZXQpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RlcCBpbnN0YW5jZW9mIE1vdmVYUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlVG9YQ29tbWFuZChnYW1lRGF0YSwgc3RlcC50YXJnZXQpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RlcCBpbnN0YW5jZW9mIE1vdmVZUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlVG9ZQ29tbWFuZChnYW1lRGF0YSwgc3RlcC50YXJnZXQpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RlcCBpbnN0YW5jZW9mIERyb3BQbGFjaW5nU3RlcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IERyb3BGaWd1cmVzQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRGlyZWN0aW9uU3RlcEVycm9yKFwiVW5rbm93biBzdGVwIFwiICsgc3RlcC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1c30gZnJvbSBcIi4uL1RldHJpcy9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUmVzb2x2ZXJ9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci9GaWd1cmVQbGFjaW5nUmVzb2x2ZXJcIjtcbmltcG9ydCB7QW5pbWF0ZWRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyL0FuaW1hdGVkRmlndXJlUGxhY2luZ1BlcmZvcm1lclwiO1xuaW1wb3J0IHtDYWxjdWxhdG9yQWdncmVnYXRlfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3IvQ2FsY3VsYXRvckFnZ3JlZ2F0ZVwiO1xuaW1wb3J0IHtTcXVhc2hlZFJvd3NDYWxjdWxhdG9yfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3IvU3F1YXNoZWRSb3dzL1NxdWFzaGVkUm93c0NhbGN1bGF0b3JcIjtcbmltcG9ydCB7RmlsbGFibGVDZWxsc0NhbGN1bGF0b3J9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9GaWxsYWJsZUNlbGxzL0ZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yXCI7XG5pbXBvcnQge0hvbGVzVjFDYWxjdWxhdG9yfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3IvSG9sZXMvSG9sZXNWMUNhbGN1bGF0b3JcIjtcbmltcG9ydCB7SG9sZXNWMkNhbGN1bGF0b3J9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9Ib2xlcy9Ib2xlc1YyQ2FsY3VsYXRvclwiO1xuaW1wb3J0IHtGaWxsZWRIZWlnaHRDYWxjdWxhdG9yfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3IvRmlsbGVkSGVpZ2h0L0ZpbGxlZEhlaWdodENhbGN1bGF0b3JcIjtcbmltcG9ydCB7VHVubmVsc0NhbGN1bGF0b3J9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9UdW5uZWxzL1R1bm5lbHNDYWxjdWxhdG9yXCI7XG5pbXBvcnQge1RldHJpc1NvbHZlcn0gZnJvbSBcIi4vVGV0cmlzU29sdmVyXCI7XG5pbXBvcnQge0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4uL1RldHJpcy9UaW1pbmdzSGFuZGxlci9MZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7SW5zdGFudEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJ9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIvSW5zdGFudEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJcIjtcblxuZXhwb3J0IGNsYXNzIFRldHJpc1NvbHZlckZhY2FkZSB7XG4gICAgc3RhdGljIGluaXRTb2x2ZXIoXG4gICAgICAgIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUZXRyaXNTb2x2ZXIoXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBuZXcgRmlndXJlUGxhY2luZ1Jlc29sdmVyKFxuICAgICAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICAgICAgbmV3IENhbGN1bGF0b3JBZ2dyZWdhdGUoW1xuICAgICAgICAgICAgICAgICAgICBuZXcgRmlsbGFibGVDZWxsc0NhbGN1bGF0b3IoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZpbGxlZEhlaWdodENhbGN1bGF0b3IoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IEhvbGVzVjFDYWxjdWxhdG9yKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTcXVhc2hlZFJvd3NDYWxjdWxhdG9yKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUdW5uZWxzQ2FsY3VsYXRvcigpLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIC8vIG5ldyBBbmltYXRlZEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIoXG4gICAgICAgICAgICAvLyAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIC8vICAgICBuZXcgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyKDEwMCwgMC45KSxcbiAgICAgICAgICAgIC8vICksXG4gICAgICAgICAgICBuZXcgSW5zdGFudEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIoY29tbWFuZEJ1cyksXG4gICAgICAgIClcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzfSBmcm9tIFwiLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1c30gZnJvbSBcIi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtUZXRyaXNGYWNhZGV9IGZyb20gJy4vVGV0cmlzL1RldHJpc0ZhY2FkZSdcbmltcG9ydCB7VGV0cmlzU29sdmVyRmFjYWRlfSBmcm9tIFwiLi9UZXRyaXNTb2x2ZXIvVGV0cmlzU29sdmVyRmFjYWRlXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKTtcbiAgICBjb25zdCBjb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoKTtcbiAgICBsZXQgdGV0cmlzID0gbmV3IFRldHJpc0ZhY2FkZShldmVudEJ1cywgY29tbWFuZEJ1cyk7XG4gICAgVGV0cmlzU29sdmVyRmFjYWRlLmluaXRTb2x2ZXIoZXZlbnRCdXMsIGNvbW1hbmRCdXMpO1xuXG4gICAgdGV0cmlzLnN0YXJ0KCk7XG59KTtcbiJdLCJuYW1lcyI6WyJFdmVudFR5cGUiLCJDb21tYW5kVHlwZSIsIkZpZ3VyZVR1cm5TdGF0ZSIsIkZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQiLCJnYW1lRGF0YSIsInRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzIiwic3F1YXNoZWRMaW5lcyIsImRyb3BwZWRMaW5lcyIsImNvbnN0cnVjdG9yIiwiZ2V0RXZlbnRUeXBlIiwiRmFsbGluZ1RpY2tQcm9jZXNzZWQiLCJHYW1lT3ZlckV2ZW50IiwiR2FtZU92ZXIiLCJGaWd1cmVzTW92ZWRFdmVudCIsIkZpZ3VyZXNNb3ZlZCIsIkZpZ3VyZXNTcGF3bmVkRXZlbnQiLCJuZXdGaWd1cmVzIiwiRmlndXJlc1NwYXduZWQiLCJFdmVudEJ1cyIsImhhbmRsZXJzIiwiTWFwIiwib24iLCJldmVudCIsImhhbmRsZXIiLCJ1bmlxdWUiLCJ0aGlzIiwiZ2V0Iiwic29tZSIsImJvdW5kSGFuZGxlciIsInB1c2giLCJzZXQiLCJvZmYiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJmaXJlIiwiZXZlbnRQYXlsb2FkIiwiZm9yRWFjaCIsIkluaXRHYW1lQ29tbWFuZCIsImdldENvbW1hbmRUeXBlIiwiSW5pdEdhbWUiLCJSZXN1bWVHYW1lQ29tbWFuZCIsIlJlc3VtZUdhbWUiLCJQYXVzZUdhbWVDb21tYW5kIiwiUGF1c2VHYW1lIiwiRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCIsIkZpZ3VyZXNGYWxsVGljayIsIkdhbWVPdmVyQ29tbWFuZCIsIlJlbmRlckNvbW1hbmQiLCJSZW5kZXIiLCJNb3ZlTGVmdENvbW1hbmQiLCJNb3ZlTGVmdCIsIk1vdmVSaWdodENvbW1hbmQiLCJNb3ZlUmlnaHQiLCJUdXJuQ2xvY2t3aXNlQ29tbWFuZCIsIlR1cm5DbG9ja3dpc2UiLCJNb3ZlRG93bkNvbW1hbmQiLCJNb3ZlRG93biIsIk1vdmVUb1hDb21tYW5kIiwieCIsIk1vdmVUb1giLCJNb3ZlVG9ZQ29tbWFuZCIsInkiLCJNb3ZlVG9ZIiwiVHVyblRvU3RhdGVDb21tYW5kIiwidHVyblN0YXRlIiwiVHVyblRvU3RhdGUiLCJEcm9wRmlndXJlc0NvbW1hbmQiLCJGaWd1cmVzRmFsbERvd24iLCJDb21tYW5kQnVzIiwiYWRkSGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJydW4iLCJwYXlsb2FkIiwiQWJzdHJhY3RGaWd1cmUiLCJnZXRUdXJuIiwiZmlndXJlVHVyblN0YXRlIiwiT25lIiwiZ2V0Rmlyc3RUdXJuIiwiVHdvIiwiZ2V0U2Vjb25kVHVybiIsIlRocmVlIiwiZ2V0VGhpcmRUdXJuIiwiRm91ciIsImdldEZvcnRoVHVybiIsIlNpbXBseVJvdGF0YWJsZUZpZ3VyZSIsImdldE5vcm1hbGl6ZWRGaWd1cmUiLCJmaWd1cmUiLCJnZXRGaWd1cmUiLCJ0aGVMb25nZXN0Um93U2l6ZSIsInJlZHVjZSIsInByZXZpb3VzIiwiY3VycmVudCIsIk1hdGgiLCJtYXgiLCJsZW5ndGgiLCJtYXAiLCJyb3ciLCJvcmlnaW5hbExlbmd0aCIsImZpbGwiLCJvcmlnaW5hbEZpZ3VyZSIsInR1cm5lZEZpZ3VyZSIsIm9yaWdpbmFsRmlndXJlSGVpZ2h0Iiwib3JpZ2luYWxGaWd1cmVXaWR0aCIsIkFycmF5IiwicmV2ZXJzZSIsIlRGaWd1cmUiLCJzcGxpdCIsIml0ZW0iLCJSaWdodExGaWd1cmUiLCJMZWZ0TEZpZ3VyZSIsIlNxdWFyZUZpZ3VyZSIsIlN0aWNrRmlndXJlIiwiTFpGaWd1cmUiLCJSWkZpZ3VyZSIsIkNvb3JkaW5hdGUiLCJGYWxsaW5nRmlndXJlIiwicG9zaXRpb24iLCJjb2xvciIsIkdhbWVTZXR0aW5ncyIsImZpZWxkV2lkdGgiLCJmaWVsZEhlaWdodCIsImZpZ3VyZXMiLCJTdGF0cyIsImZpZ3VyZXNGYWxsZW4iLCJsaW5lc1NxdWFzaGVkIiwiR2FtZURhdGEiLCJpc0luaXRpYWxpemVkIiwiaXNHYW1lT3ZlciIsImZhbGxpbmdGaWd1cmVzIiwibWF0cml4IiwibmV4dFRpY2tUaW1lb3V0SWQiLCJzZXR0aW5ncyIsImxldmVsIiwic2NvcmUiLCJjb21ibyIsInN0YXRzIiwic2V0VGltZW91dCIsInN0YXRpYyIsIndpZHRoIiwiaGVpZ2h0IiwiXyIsIkdhbWVDb250cm9sbGVyIiwidGltaW5nc0hhbmRsZXIiLCJldmVudEJ1cyIsImNvbW1hbmRCdXMiLCJtYWtlU2ltcGxlIiwiaW5pdEdhbWVIYW5kbGVyIiwiYmluZCIsInJlc3VtZUdhbWVIYW5kbGVyIiwicGF1c2VHYW1lSGFuZGxlciIsImdhbWVPdmVySGFuZGxlciIsImNvbW1hbmQiLCJvbkZhbGxUaWNrUHJvY2Vzc2VkIiwiZmFsbFRpY2siLCJjbGVhclRpbWVvdXQiLCJkZWxheSIsImdldERlbGF5Rm9yTmV4dFRpY2tNcyIsIkluZmluaXR5IiwiRmlndXJlUGxhY2luZ0NoZWNrZXIiLCJ0YXJnZXRGaWd1cmVNYXRyaXgiLCJ0YXJnZXRQb3NpdGlvbiIsImV2ZXJ5IiwidmFsdWUiLCJyZWFsWSIsInJlYWxYIiwiVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzIiwiZmlsbGVkIiwiZmlsbGVkR2FtZU92ZXIiLCJlbXB0eSIsIlRhYmxlUmVuZGVyZXJTZXR0aW5ncyIsImNvbnRhaW5lckVsZW1lbnQiLCJyZW5kZXJQcm9qZWN0aW9uRmlndXJlcyIsIm1hdHJpeENlbGxDb2xvcnMiLCJmYWxsaW5nRmlndXJlQ2VsbENvbG9ycyIsInByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzIiwiQ2VsbENvbG9ycyIsIlRhYmxlUmVuZGVyZXIiLCJyZW5kZXJTZXR0aW5ncyIsImNlbGxzSHRtbEVsZW1lbnRzTWFwIiwidGFibGUiLCJzY29yZURpc3BsYXkiLCJpbml0SGFuZGxlciIsInJlbmRlckNvbW1hbmRIYW5kbGVyIiwiY3JlYXRlSHRtbEVsZW1lbnQiLCJjZWxsIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJvbkdhbWVPdmVyIiwib25GaWd1cmVzTW92ZWQiLCJyZW5kZXJTdGF0ZSIsInJlcGFpbnRNYXRyaXhDZWxscyIsInJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbiIsInJlbmRlckZhbGxpbmdGaWd1cmVzIiwicmVuZGVyU3RhdHMiLCJmYWxsaW5nRmlndXJlIiwicmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMiLCJmaWd1cmVNYXRyaXgiLCJwcm9qZWN0aW9uRmlndXJlWCIsInByb2plY3Rpb25GaWd1cmVZIiwiY2FuRmlndXJlQmVQbGFjZWQiLCJyZXBhaW50UHJvamVjdGlvbkZpZ3VyZXNDZWxscyIsImluZGVudCIsImNvbG9ycyIsInJlcGFpbnRDZWxscyIsImNlbGxDb2xvcnMiLCJzdHlsZSIsImJhY2tncm91bmQiLCJsZXZlbFNwYW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2NvcmVTcGFuIiwiY29tYm9TcGFuIiwidG9TdHJpbmciLCJodG1sIiwiY29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNoaWxkcmVuIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJIVE1MRWxlbWVudCIsIkZhbGxpbmdSZXN1bHQiLCJ0cmFuc2ZlcnJlZEZpZ3VyZXMiLCJSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJwcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCIsInByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQiLCJmYWxsaW5nUmVzdWx0IiwiZmFsbEZpZ3VyZXNGb3JPbmVDZWxsIiwic3F1YXNoTGluZXMiLCJvbmVDZWxsRmFsbGluZ1Jlc3VsdCIsImZpZ3VyZUNhbkZhbGwiLCJmaWd1cmVHYW1lT3ZlclJlc3VsdCIsInRyYW5zZmVyRmlndXJlVG9NYXRyaXgiLCJmaWd1cmVDZWxsWSIsImNlbGxWYWx1ZSIsImZpZ3VyZUNlbGxYIiwibWF0cml4WCIsIm1hdHJpeFkiLCJsaW5lc1RvU3F1YXNoIiwidW5zaGlmdCIsIkVudW1IZWxwZXIiLCJ2YWwiLCJPYmplY3QiLCJrZXlzIiwibiIsIk51bWJlciIsInBhcnNlSW50IiwiZmlsdGVyIiwiaXNOYU4iLCJ2YWx1ZXMiLCJUb0FycmF5IiwiZmxvb3IiLCJyYW5kb20iLCJBbHdheXNPbmVGaWd1cmVTcGF3bmVyIiwicHJvY2Vzc09uRmFsbFRpY2siLCJhZGRGaWd1cmUiLCJmaWd1cmVJbmRleCIsIkdldFJhbmRvbSIsImZpZ3VyZVdpZHRoIiwiY29vcmRpbmF0ZSIsImNlaWwiLCJNb3ZpbmdIYW5kbGVyIiwicHJvY2Vzc01vdmVMZWZ0Q29tbWFuZCIsInByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kIiwicHJvY2Vzc01vdmVEb3duQ29tbWFuZCIsInByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZCIsInByb2Nlc3NNb3ZlVG9YQ29tbWFuZCIsInByb2Nlc3NNb3ZlVG9ZQ29tbWFuZCIsInByb2Nlc3NUdXJuVG9TdGF0ZUNvbW1hbmQiLCJhbGxUdXJuU3RhdGVzIiwibmV4dFR1cm5TdGF0ZSIsIm1vdmluZ01vZGlmaWVyIiwiRmFsbFRpY2tTY29yZUNvdW50ZXIiLCJzcXVhc2hlZFJvd3NSZXdhcmRUaHJlc2hvbGRzTWFwIiwicmV3YXJkT25Db21ibyIsIm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQiLCJwcmV2aW91c1RocmVzaG9sZFJld2FyZCIsInJld2FyZCIsInJvd3NTcXVhc2hlZFRocmVzaG9sZCIsIlNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciIsImxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlciIsIm1heExldmVscyIsInNxdWFzaGVkUm93c0NvdW50ZXIiLCJwcm9jZXNzSW5pdEdhbWVDb21tYW5kIiwibWluIiwiQ29tYm9Db3VudGVyIiwiQ29uc3RUaW1pbmdzSGFuZGxlciIsImRlbGF5TXMiLCJTdGF0c0NvdW50ZXIiLCJLZXlib2FyZENvbnRyb2xsZXIiLCJ3aW5kb3ciLCJvbmtleWRvd24iLCJjb2RlIiwiVGV0cmlzRmFjYWRlIiwiZ2FtZUNvbnRyb2xsZXIiLCJtb3ZpbmdIYW5kbGVyIiwia2V5Ym9hcmRDb250cm9sbGVyIiwiZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJmaWd1cmVzU3Bhd25lciIsImxldmVsQ291bnRlciIsImNvbWJvQ291bnRlciIsInNjb3JlQ291bnRlciIsInN0YXRzQ291bnRlciIsInRhYmxlUmVuZGVyZXIiLCJib2R5Iiwic3RhcnQiLCJyZXN1bWUiLCJwYXVzZSIsIlR1cm5QbGFjaW5nU3RlcCIsInRhcmdldCIsIl9wZXJzaXN0ZWQiLCJwZXJzaXN0ZWQiLCJNb3ZlWFBsYWNpbmdTdGVwIiwiTW92ZVlQbGFjaW5nU3RlcCIsIkRyb3BQbGFjaW5nU3RlcCIsIkZpZ3VyZVBsYWNpbmdSZXN1bHQiLCJmaWd1cmVzVGFyZ2V0U3RhdGVzIiwicGxhY2luZ1N0ZXBzIiwiSG9sZSIsImlzT3BlbmVkIiwiY2VsbHMiLCJIb2xlc0hlbHBlciIsImhvbGVzIiwiSG9sZUluUHJvY2VzcyIsInByZXZpb3VzUm93T3BlblhzIiwiY3VycmVudFJvd09wZW5YcyIsImNvbnRpbnVlcyIsImhvbGVzSW5Qcm9jZXNzIiwiY292ZXJlZENvbHVtbnMiLCJTZXQiLCJob2xlIiwiYWRkIiwiaGFzIiwicHJvY2Vzc2luZ0hvbGUiLCJmaW5kIiwicHJldlgiLCJ1bmRlZmluZWQiLCJkb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMiLCJob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZSIsImkiLCJpbml0aWFsQ29vcmRpbmF0ZSIsImZpbmRUaGVXYXlPdXRGcm9tSG9sZSIsImNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMiLCJhbGxDb2x1bW5zRnJlZVRvRmFsbCIsImNoZWNrRmFsbFgiLCJ0b1kiLCJjb2xsZWN0Q292ZXJlZENvbHVtbnMiLCJzaXplIiwiQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0Iiwib3JpZ2luYWxIb2xlcyIsIm9yaWdpbmFsQ292ZXJlZENvbHVtbnMiLCJpbWFnaW5hYmxlTWF0cml4IiwiaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zIiwic3F1YXNoZWRMaW5lc0NvdW50IiwiUGxhY2VSZXNvbHZpbmdFcnJvciIsIkVycm9yIiwiR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IiLCJGaWd1cmVQbGFjaW5nUmVzb2x2ZXIiLCJzY29yZUNhbGN1bGF0b3IiLCJyZXNvbHZlIiwibWF4U2NvcmUiLCJ0aGVCZXN0UmVzdWx0IiwicHJvY2Vzc1N0YXRlcyIsImltYWdpbmFibGVGaWd1cmUiLCJwbGFjaW5nRGlyZWN0aW9ucyIsIm9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMiLCJvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyIsImVudW1zIiwicG9wIiwibWF0cmljZXMiLCJzdHJpbmd5TWF0cmljZXMiLCJzdHJpbmd5RmlndXJlTWF0cml4Iiwiam9pbiIsIm9yaWdpbmFsTWF0cml4SG9sZXMiLCJjb2xsZWN0SG9sZXMiLCJpbWFnaW5lRmlndXJlRHJvcCIsImNhbGN1bGF0ZVNjb3JlUmVxdWVzdCIsImNhbGN1bGF0ZVNjb3JlIiwiZGlyZWN0aW9ucyIsIm1ha2VTaW1wbGVQbGFjaW5nU3RlcHMiLCJ0b3BZIiwibGVmdFgiLCJib3R0b21ZIiwicmlnaHRYIiwibWFrZVB1c2hJblBsYWNpbmdTdGVwcyIsImltYWdpbmVGaWd1cmVQbGFjaW5nIiwiZ2FtZU1hdHJpeCIsInRhcmdldFgiLCJ0YXJnZXRZIiwidGFyZ2V0Q29vcmRpbmF0ZSIsInN0cnVjdHVyZWRDbG9uZSIsImZpZ3VyZVkiLCJmaWd1cmVYIiwiQ2FsY3VsYXRvckFnZ3JlZ2F0ZSIsImNhbGN1bGF0b3JzIiwicmVxdWVzdCIsImNhbGN1bGF0b3IiLCJTcXVhc2hlZFJvd3NDYWxjdWxhdG9yUGFyYW1zIiwibXVsdGlwbGllciIsIlNxdWFzaGVkUm93c0NhbGN1bGF0b3IiLCJwYXJhbXMiLCJGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvclBhcmFtcyIsIm1pbmltdW1WYWx1YWJsZUhlaWdodCIsInBvd011bHRpcGxpZXIiLCJGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvciIsImZpbGxhYmxlQ2VsbHNDb3VudCIsImZpbGxhYmxlSGVpZ2h0IiwiY2FsY3VsYXRlRmlsbGFibGVTcGFjZSIsImZpbGxhYmxlQ2VsbHNTY29yZSIsInBvdyIsIkhvbGVzVjFDYWxjdWxhdG9yUGFyYW1zIiwiY291bnREZWNyZWFzZU11bHRpcGxpZXIiLCJjb3VudEluY3JlYXNlTXVsdGlwbGllciIsImNvdmVyZWRIZWlnaHRQb3dNdWx0aXBsaWVyIiwiY292ZXJlZEhlaWdodE11bHRpcGxpZXIiLCJIb2xlc1YxQ2FsY3VsYXRvciIsImhvbGVzQ291bnQiLCJob2xlc0NvdmVyZWRIZWlnaHQiLCJjYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQiLCJob2xlc0NvdW50RGVjcmVhc2UiLCJob2xlc1Njb3JlIiwicmVhbE1hdHJpeCIsIm9yaWdpbmFsVGhlSGlnaGVzdEhvbGVZIiwib3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwiY2FsY3VsYXRlVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSIsImNvdmVyZWRDb2x1bW5zWXMiLCJob2xlc0NvdmVyZWRIZWlnaHRzU3VtIiwiY292ZXJlZFkiLCJ0aGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwidGhlSGlnaGVzdEhvbGVZIiwiRmlsbGVkSGVpZ2h0Q2FsY3VsYXRvclBhcmFtcyIsIkZpbGxlZEhlaWdodENhbGN1bGF0b3IiLCJjYWxjdWxhdGVIZWlnaHQiLCJsb3dlc3RFbXB0eVkiLCJUdW5uZWxzQ2FsY3VsYXRvclBhcmFtcyIsImNvdW50TXVsdGlwbGllciIsImhlaWdodFBvd011bHRpcGxpZXIiLCJoZWlnaHRNdWx0aXBsaWVyIiwiVHVubmVsc0NhbGN1bGF0b3IiLCJ0dW5uZWxzU3VtSGVpZ2h0IiwidHVubmVsc0NvdW50IiwiY2FsY3VsYXRlVHVubmVsc0V4Y2VwdFVuY292ZXJlZCIsInJlYWxDb3ZlcmVkQ29sdW1ucyIsInR1bm5lbHMiLCJUZXRyaXNTb2x2ZXIiLCJmaWd1cmVQbGFjaW5nUmVzb2x2ZXIiLCJmaWd1cmVQbGFjaW5nUGVyZm9ybWVyIiwib25GaWd1cmVzU3Bhd25lZCIsInRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzIiwicGxhY2UiLCJQbGFjaW5nRXJyb3IiLCJJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yIiwiTm90U3VwcG9ydGVkRGlyZWN0aW9uU3RlcEVycm9yIiwiSW5zdGFudEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIiLCJwbGFjaW5nUmVzdWx0Iiwic2V0SW1tZWRpYXRlIiwicGxhY2VJbXBsIiwidGFyZ2V0RmlndXJlIiwic3RlcCIsIm5hbWUiLCJUZXRyaXNTb2x2ZXJGYWNhZGUiLCJhZGRFdmVudExpc3RlbmVyIiwidGV0cmlzIiwiaW5pdFNvbHZlciJdLCJzb3VyY2VSb290IjoiIn0=