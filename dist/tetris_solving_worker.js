/*! For license information please see tetris_solving_worker.js.LICENSE.txt */
(()=>{var __webpack_modules__={340:function(module){var __dirname="/",factory;"undefined"!=typeof self&&self,factory=function(){return function(){var __webpack_modules__={345:function(e,t,r){var n=r(219),s=r(751),o=r(828),i=new(r(833));function a(e,t){"string"==typeof e?this.script=e||null:(this.script=null,t=e),this.workers=[],this.tasks=[],t=t||{},this.forkArgs=Object.freeze(t.forkArgs||[]),this.forkOpts=Object.freeze(t.forkOpts||{}),this.workerThreadOpts=Object.freeze(t.workerThreadOpts||{}),this.debugPortStart=t.debugPortStart||43210,this.nodeWorker=t.nodeWorker,this.workerType=t.workerType||t.nodeWorker||"auto",this.maxQueueSize=t.maxQueueSize||1/0,this.onCreateWorker=t.onCreateWorker||function(){return null},this.onTerminateWorker=t.onTerminateWorker||function(){return null},t&&"maxWorkers"in t?(function(e){if(!u(e)||!c(e)||e<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}(t.maxWorkers),this.maxWorkers=t.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),t&&"minWorkers"in t&&("max"===t.minWorkers?this.minWorkers=this.maxWorkers:(function(e){if(!u(e)||!c(e)||e<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}(t.minWorkers),this.minWorkers=t.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),"thread"===this.workerType&&s.ensureWorkerThreads()}function u(e){return"number"==typeof e}function c(e){return Math.round(e)==e}a.prototype.exec=function(e,t,r){if(t&&!Array.isArray(t))throw new TypeError('Array expected as argument "params"');if("string"==typeof e){var s=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var o=this.tasks,i={method:e,params:t,resolver:s,timeout:null,options:r};o.push(i);var a=s.promise.timeout;return s.promise.timeout=function(e){return-1!==o.indexOf(i)?(i.timeout=e,s.promise):a.call(s.promise,e)},this._next(),s.promise}if("function"==typeof e)return this.exec("run",[String(e),t]);throw new TypeError('Function or string expected as argument "method"')},a.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var e=this;return this.exec("methods").then((function(t){var r={};return t.forEach((function(t){r[t]=function(){return e.exec(t,Array.prototype.slice.call(arguments))}})),r}))},a.prototype._next=function(){if(this.tasks.length>0){var e=this._getWorker();if(e){var t=this,r=this.tasks.shift();if(r.resolver.promise.pending){var n=e.exec(r.method,r.params,r.resolver,r.options).then(t._boundNext).catch((function(){if(e.terminated)return t._removeWorker(e)})).then((function(){t._next()}));"number"==typeof r.timeout&&n.timeout(r.timeout)}else t._next()}}},a.prototype._getWorker=function(){for(var e=this.workers,t=0;t<e.length;t++){var r=e[t];if(!1===r.busy())return r}return e.length<this.maxWorkers?(r=this._createWorkerHandler(),e.push(r),r):null},a.prototype._removeWorker=function(e){var t=this;return i.releasePort(e.debugPort),this._removeWorkerFromList(e),this._ensureMinWorkers(),new n((function(r,n){e.terminate(!1,(function(s){t.onTerminateWorker({forkArgs:e.forkArgs,forkOpts:e.forkOpts,script:e.script}),s?n(s):r(e)}))}))},a.prototype._removeWorkerFromList=function(e){var t=this.workers.indexOf(e);-1!==t&&this.workers.splice(t,1)},a.prototype.terminate=function(e,t){var r=this;this.tasks.forEach((function(e){e.resolver.reject(new Error("Pool terminated"))})),this.tasks.length=0;var s=function(e){i.releasePort(e.debugPort),this._removeWorkerFromList(e)}.bind(this),o=[];return this.workers.slice().forEach((function(n){var i=n.terminateAndNotify(e,t).then(s).always((function(){r.onTerminateWorker({forkArgs:n.forkArgs,forkOpts:n.forkOpts,script:n.script})}));o.push(i)})),n.all(o)},a.prototype.stats=function(){var e=this.workers.length,t=this.workers.filter((function(e){return e.busy()})).length;return{totalWorkers:e,busyWorkers:t,idleWorkers:e-t,pendingTasks:this.tasks.length,activeTasks:t}},a.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var e=this.workers.length;e<this.minWorkers;e++)this.workers.push(this._createWorkerHandler())},a.prototype._createWorkerHandler=function(){var e=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new s(e.script||this.script,{forkArgs:e.forkArgs||this.forkArgs,forkOpts:e.forkOpts||this.forkOpts,workerThreadOpts:e.workerThreadOpts||this.workerThreadOpts,debugPort:i.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType})},e.exports=a},219:function(e){"use strict";function t(e,o){var i=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new SyntaxError("Function parameter handler(resolve, reject) missing");var a=[],u=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var c=function(e,t){a.push(e),u.push(t)};this.then=function(e,n){return new t((function(t,s){var o=e?r(e,t,s):t,i=n?r(n,t,s):s;c(o,i)}),i)};var l=function(e){return i.resolved=!0,i.rejected=!1,i.pending=!1,a.forEach((function(t){t(e)})),c=function(t,r){t(e)},l=h=function(){},i},h=function(e){return i.resolved=!1,i.rejected=!0,i.pending=!1,u.forEach((function(t){t(e)})),c=function(t,r){r(e)},l=h=function(){},i};this.cancel=function(){return o?o.cancel():h(new n),i},this.timeout=function(e){if(o)o.timeout(e);else{var t=setTimeout((function(){h(new s("Promise timed out after "+e+" ms"))}),e);i.always((function(){clearTimeout(t)}))}return i},e((function(e){l(e)}),(function(e){h(e)}))}function r(e,t,r){return function(n){try{var s=e(n);s&&"function"==typeof s.then&&"function"==typeof s.catch?s.then(t,r):t(s)}catch(e){r(e)}}}function n(e){this.message=e||"promise cancelled",this.stack=(new Error).stack}function s(e){this.message=e||"timeout exceeded",this.stack=(new Error).stack}t.prototype.catch=function(e){return this.then(null,e)},t.prototype.always=function(e){return this.then(e,e)},t.all=function(e){return new t((function(t,r){var n=e.length,s=[];n?e.forEach((function(e,o){e.then((function(e){s[o]=e,0==--n&&t(s)}),(function(e){n=0,r(e)}))})):t(s)}))},t.defer=function(){var e={};return e.promise=new t((function(t,r){e.resolve=t,e.reject=r})),e},n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n,s.prototype=new Error,s.prototype.constructor=Error,s.prototype.name="TimeoutError",t.TimeoutError=s,e.exports=t},751:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var a=r(219),u=r(828),c=r(397),l="__workerpool-terminate__";function h(){var e=m();if(!e)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return e}function d(){if("function"!=typeof Worker&&("object"!==("undefined"==typeof Worker?"undefined":i(Worker))||"function"!=typeof Worker.prototype.constructor))throw new Error("WorkerPool: Web Workers not supported")}function m(){try{return c("worker_threads")}catch(e){if("object"===i(e)&&null!==e&&"MODULE_NOT_FOUND"===e.code)return null;throw e}}function p(e,t){var r=new t(e);return r.isBrowserWorker=!0,r.on=function(e,t){this.addEventListener(e,(function(e){t(e.data)}))},r.send=function(e){this.postMessage(e)},r}function f(e,t,r){var n=new t.Worker(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({stdout:!1,stderr:!1},r));return n.isWorkerThread=!0,n.send=function(e){this.postMessage(e)},n.kill=function(){return this.terminate(),!0},n.disconnect=function(){this.terminate()},n}function g(e,t,r){var n=r.fork(e,t.forkArgs,t.forkOpts);return n.isChildProcess=!0,n}function w(e){e=e||{};var t=process.execArgv.join(" "),r=-1!==t.indexOf("--inspect"),n=-1!==t.indexOf("--debug-brk"),s=[];return r&&(s.push("--inspect="+e.debugPort),n&&s.push("--debug-brk")),process.execArgv.forEach((function(e){e.indexOf("--max-old-space-size")>-1&&s.push(e)})),Object.assign({},e,{forkArgs:e.forkArgs,forkOpts:Object.assign({},e.forkOpts,{execArgv:(e.forkOpts&&e.forkOpts.execArgv||[]).concat(s)})})}function k(e,t){var s=this,o=t||{};function i(e){for(var t in s.terminated=!0,s.processing)void 0!==s.processing[t]&&s.processing[t].resolver.reject(e);s.processing=Object.create(null)}this.script=e||function(){if("browser"===u.platform){if("undefined"==typeof Blob)throw new Error("Blob not supported by the browser");if(!window.URL||"function"!=typeof window.URL.createObjectURL)throw new Error("URL.createObjectURL not supported by the browser");var e=new Blob([r(670)],{type:"text/javascript"});return window.URL.createObjectURL(e)}return __dirname+"/worker.js"}(),this.worker=function(e,t){if("web"===t.workerType)return d(),p(e,Worker);if("thread"===t.workerType)return f(e,r=h(),t.workerThreadOpts);if("process"!==t.workerType&&t.workerType){if("browser"===u.platform)return d(),p(e,Worker);var r=m();return r?f(e,r):g(e,w(t),c("child_process"))}return g(e,w(t),c("child_process"))}(this.script,o),this.debugPort=o.debugPort,this.forkOpts=o.forkOpts,this.forkArgs=o.forkArgs,this.workerThreadOpts=o.workerThreadOpts,e||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",(function(e){if(!s.terminated)if("string"==typeof e&&"ready"===e)s.worker.ready=!0,function(){var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var s=0,o=function(){};return{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(s.requestQueue.splice(0));try{for(t.s();!(e=t.n()).done;){var r=e.value;s.worker.send(r)}}catch(e){t.e(e)}finally{t.f()}}();else{var t=e.id,r=s.processing[t];void 0!==r&&(e.isEvent?r.options&&"function"==typeof r.options.on&&r.options.on(e.payload):(delete s.processing[t],!0===s.terminating&&s.terminate(),e.error?r.resolver.reject(function(e){for(var t=new Error(""),r=Object.keys(e),n=0;n<r.length;n++)t[r[n]]=e[r[n]];return t}(e.error)):r.resolver.resolve(e.result)))}}));var a=this.worker;this.worker.on("error",i),this.worker.on("exit",(function(e,t){var r="Workerpool Worker terminated Unexpectedly\n";r+="    exitCode: `"+e+"`\n",r+="    signalCode: `"+t+"`\n",r+="    workerpool.script: `"+s.script+"`\n",r+="    spawnArgs: `"+a.spawnargs+"`\n",r+="    spawnfile: `"+a.spawnfile+"`\n",r+="    stdout: `"+a.stdout+"`\n",r+="    stderr: `"+a.stderr+"`\n",i(new Error(r))})),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}k.prototype.methods=function(){return this.exec("methods")},k.prototype.exec=function(e,t,r,n){r||(r=a.defer());var s=++this.lastId;this.processing[s]={id:s,resolver:r,options:n};var o={id:s,method:e,params:t};this.terminated?r.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(o):this.requestQueue.push(o);var i=this;return r.promise.catch((function(e){if(e instanceof a.CancellationError||e instanceof a.TimeoutError)return delete i.processing[s],i.terminateAndNotify(!0).then((function(){throw e}),(function(e){throw e}));throw e}))},k.prototype.busy=function(){return Object.keys(this.processing).length>0},k.prototype.terminate=function(e,t){var r=this;if(e){for(var n in this.processing)void 0!==this.processing[n]&&this.processing[n].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if("function"==typeof t&&(this.terminationHandler=t),this.busy())this.terminating=!0;else{var s=function(e){if(r.terminated=!0,null!=r.worker&&r.worker.removeAllListeners&&r.worker.removeAllListeners("message"),r.worker=null,r.terminating=!1,r.terminationHandler)r.terminationHandler(e,r);else if(e)throw e};if(this.worker){if("function"==typeof this.worker.kill){if(this.worker.killed)return void s(new Error("worker already killed!"));if(this.worker.isChildProcess){var o=setTimeout((function(){r.worker&&r.worker.kill()}),1e3);this.worker.once("exit",(function(){clearTimeout(o),r.worker&&(r.worker.killed=!0),s()})),this.worker.ready?this.worker.send(l):this.requestQueue.push(l)}else this.worker.kill(),this.worker.killed=!0,s();return}if("function"!=typeof this.worker.terminate)throw new Error("Failed to terminate worker");this.worker.terminate(),this.worker.killed=!0}s()}},k.prototype.terminateAndNotify=function(e,t){var r=a.defer();return t&&(r.promise.timeout=t),this.terminate(e,(function(e,t){e?r.reject(e):r.resolve(t)})),r.promise},e.exports=k,e.exports._tryRequireWorkerThreads=m,e.exports._setupProcessWorker=g,e.exports._setupBrowserWorker=p,e.exports._setupWorkerThreadWorker=f,e.exports.ensureWorkerThreads=h},833:function(e){"use strict";function t(){this.ports=Object.create(null),this.length=0}e.exports=t,t.prototype.nextAvailableStartingAt=function(e){for(;!0===this.ports[e];)e++;if(e>=65535)throw new Error("WorkerPool debug port limit reached: "+e+">= 65535");return this.ports[e]=!0,this.length++,e},t.prototype.releasePort=function(e){delete this.ports[e],this.length--}},828:function(e,t,r){var n=r(397),s=function(e){return void 0!==e&&null!=e.versions&&null!=e.versions.node};e.exports.isNode=s,e.exports.platform="undefined"!=typeof process&&s(process)?"node":"browser";var o=function(e){try{return n("worker_threads")}catch(e){return null}}();e.exports.isMainThread="node"===e.exports.platform?(!o||o.isMainThread)&&!process.connected:"undefined"!=typeof Window,e.exports.cpus="browser"===e.exports.platform?self.navigator.hardwareConcurrency:n("os").cpus().length},670:function(e){e.exports='!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\" + module + \\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error(\'Unknown method "\'+e.method+\'"\');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();'},397:function(module){var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \" + module + \" not found.') }");module.exports=requireFoolWebpack},744:function(__unused_webpack_module,exports){function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \" + module + \" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}};if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(e,t){addEventListener(e,(function(e){t(e.data)}))},worker.send=function(e){postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if("object"!==_typeof(e)||null===e||"MODULE_NOT_FOUND"!==e.code)throw e}if(WorkerThreads&&null!==WorkerThreads.parentPort){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",(function(){process.exit(1)})),worker.exit=process.exit.bind(process)}function convertError(e){return Object.getOwnPropertyNames(e).reduce((function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})}),{})}function isPromise(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}worker.methods={},worker.methods.run=function(e,t){var r=new Function("return ("+e+").apply(null, arguments);");return r.apply(r,t)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",(function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var t=worker.methods[e.method];if(!t)throw new Error('Unknown method "'+e.method+'"');currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then((function(t){worker.send({id:e.id,result:t,error:null}),currentRequestId=null})).catch((function(t){worker.send({id:e.id,result:null,error:convertError(t)}),currentRequestId=null})):(worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}catch(t){worker.send({id:e.id,result:null,error:convertError(t)})}})),worker.register=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(worker.methods[t]=e[t]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __nested_webpack_require_50492__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__nested_webpack_require_50492__),r.exports}var __webpack_exports__={},exports,environment;return exports=__webpack_exports__,environment=__nested_webpack_require_50492__(828),exports.pool=function(e,t){return new(__nested_webpack_require_50492__(345))(e,t)},exports.worker=function(e){__nested_webpack_require_50492__(744).add(e)},exports.workerEmit=function(e){__nested_webpack_require_50492__(744).emit(e)},exports.Promise=__nested_webpack_require_50492__(219),exports.platform=environment.platform,exports.isMainThread=environment.isMainThread,exports.cpus=environment.cpus,__webpack_exports__}()},module.exports=factory()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};(()=>{"use strict";var e,t,r;!function(e){e[e.FallingTickProcessed=0]="FallingTickProcessed",e[e.GameOver=1]="GameOver",e[e.FiguresMoved=2]="FiguresMoved",e[e.LevelUp=3]="LevelUp",e[e.FiguresSpawned=4]="FiguresSpawned"}(e||(e={}));class n{gameData;transferredToMatrixFigures;squashedLines;droppedLines;constructor(e,t,r,n){this.gameData=e,this.transferredToMatrixFigures=t,this.squashedLines=r,this.droppedLines=n}getEventType(){return e.FallingTickProcessed}}class s{gameData;constructor(e){this.gameData=e}getEventType(){return e.GameOver}}class o{gameData;constructor(e){this.gameData=e}getEventType(){return e.FiguresMoved}}class i{gameData;newFigures;constructor(e,t){this.gameData=e,this.newFigures=t}getEventType(){return e.FiguresSpawned}}class a{handlers=new Map;on(e,t,r=!0){let n=this.handlers.get(e)||[];r&&n.some((e=>e===t))||(n.push(t),this.handlers.set(e,n))}off(e,t){let r=this.handlers.get(e)||[],n=r.indexOf(t);n>0&&r.splice(n,1),this.handlers.set(e,r)}fire(e){(this.handlers.get(e.getEventType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.InitGame=0]="InitGame",e[e.ResumeGame=1]="ResumeGame",e[e.PauseGame=2]="PauseGame",e[e.FiguresFallTick=3]="FiguresFallTick",e[e.GameOver=4]="GameOver",e[e.Render=5]="Render",e[e.MoveLeft=6]="MoveLeft",e[e.MoveRight=7]="MoveRight",e[e.TurnClockwise=8]="TurnClockwise",e[e.MoveDown=9]="MoveDown",e[e.FiguresFallDown=10]="FiguresFallDown",e[e.MoveToX=11]="MoveToX",e[e.MoveToY=12]="MoveToY",e[e.TurnToState=13]="TurnToState"}(t||(t={}));class u{gameData;constructor(e){this.gameData=e}getCommandType(){return t.InitGame}}class c{gameData;constructor(e){this.gameData=e}getCommandType(){return t.ResumeGame}}class l{gameData;constructor(e){this.gameData=e}getCommandType(){return t.PauseGame}}class h{gameData;constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallTick}}class d{gameData;constructor(e){this.gameData=e}getCommandType(){return t.GameOver}}class m{gameData;constructor(e){this.gameData=e}getCommandType(){return t.Render}}class p{gameData;x;constructor(e,t){this.gameData=e,this.x=t}getCommandType(){return t.MoveToX}}class f{gameData;y;constructor(e,t){this.gameData=e,this.y=t}getCommandType(){return t.MoveToY}}class g{gameData;turnState;constructor(e,t){this.gameData=e,this.turnState=t}getCommandType(){return t.TurnToState}}class w{gameData;constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallDown}}class k{handlers=new Map;addHandler(e,t,r=!0){let n=this.handlers.get(e)||[];r&&n.some((e=>e===t))||(n.push(t),this.handlers.set(e,n))}removeHandler(e,t){let r=this.handlers.get(e)||[],n=r.indexOf(t);n>0&&r.splice(n,1),this.handlers.set(e,r)}run(e){(this.handlers.get(e.getCommandType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(r||(r={}));class v{getTurn(e){switch(e){case r.One:return this.getFirstTurn();case r.Two:return this.getSecondTurn();case r.Three:return this.getThirdTurn();case r.Four:return this.getForthTurn()}}}class y extends v{getNormalizedFigure(){let e=this.getFigure(),t=e.reduce(((e,t)=>Math.max(e,t.length)),0);return e.map((e=>{let r=e.length;return e.length=t,e.fill(!1,r-1,t-1)}))}getFirstTurn(){return this.getNormalizedFigure()}getSecondTurn(){let e=this.getNormalizedFigure(),t=[],r=e.length,n=e[0].length;for(let s=0;s<n;s++){t[s]=new Array(r).fill(!1);for(let n=0;n<r;n++)t[s][r-n-1]=e[n][s]}return t}getThirdTurn(){return this.getFirstTurn().reverse().map((e=>e.reverse()))}getForthTurn(){return this.getSecondTurn().reverse().map((e=>e.reverse()))}}class _ extends y{getFigure(){return["###".split("").map((e=>"#"===e)),"-#-".split("").map((e=>"#"===e))]}}class b extends y{getFigure(){return["###".split("").map((e=>"#"===e)),"--#".split("").map((e=>"#"===e))]}}class T extends y{getFigure(){return["###".split("").map((e=>"#"===e)),"#--".split("").map((e=>"#"===e))]}}class x extends y{getFigure(){return["##".split("").map((e=>"#"===e)),"##".split("").map((e=>"#"===e))]}}class F extends y{getFigure(){return["####".split("").map((e=>"#"===e))]}}class O extends y{getFigure(){return["##-".split("").map((e=>"#"===e)),"-##".split("").map((e=>"#"===e))]}}class D extends y{getFigure(){return["-##".split("").map((e=>"#"===e)),"##-".split("").map((e=>"#"===e))]}}class M{x;y;constructor(e,t){this.x=e,this.y=t}}class E{figure;position;turnState;color;constructor(e,t,r,n){this.figure=e,this.position=t,this.turnState=r,this.color=n}}class P{fieldWidth;fieldHeight;figures;constructor(e,t,r){this.fieldWidth=e,this.fieldHeight=t,this.figures=r}}class C{figuresFallen=0;linesSquashed=0}class S{isInitialized;isGameOver;fallingFigures;matrix;nextTickTimeoutId;settings;level;score;combo;stats;constructor(e=!1,t=!1,r=[],n=[],s=setTimeout((()=>{})),o,i=1,a=0,u=0,c=new C){this.isInitialized=e,this.isGameOver=t,this.fallingFigures=r,this.matrix=n,this.nextTickTimeoutId=s,this.settings=o,this.level=i,this.score=a,this.combo=u,this.stats=c}static makeSimple(e=10,t=20){return new S(!1,!1,[],new Array(t).fill([]).map((t=>new Array(e).fill(!1))),setTimeout((()=>{})),new P(e,t,[new _,new b,new T,new x,new F,new O,new D]))}}class B{timingsHandler;eventBus;commandBus;gameData=S.makeSimple();constructor(e,r,n){this.timingsHandler=e,this.eventBus=r,this.commandBus=n,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(t.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(t.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(t.GameOver,this.gameOverHandler.bind(this))}initGameHandler(t){this.gameData=t.gameData,this.gameData.isInitialized=!0,this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}resumeGameHandler(e){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new u(e.gameData)),this.fallTick())}pauseGameHandler(e){this.gameData=e.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new m(this.gameData))}gameOverHandler(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new s(this.gameData))}fallTick(){this.commandBus.run(new h(this.gameData))}onFallTickProcessed(e){clearTimeout(this.gameData.nextTickTimeoutId);const t=this.timingsHandler.getDelayForNextTickMs(this.gameData);this.gameData.isGameOver||t==1/0||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))}}class W{static canFigureBePlaced(e,t,r){return e.every(((e,n)=>e.every(((e,s)=>{const o=t.y+n,i=t.x+s;return!e||o<0&&i>=0&&i<=r[0].length-1||o in r&&i in r[o]&&!r[o][i]}))))}}class H{static ToArray(e){return Object.keys(e).map((e=>Number.parseInt(e))).filter((e=>!Number.isNaN(e)))}static GetRandom(e){const t=H.ToArray(e);return t[Math.floor(Math.random()*t.length)]}}class q{commandBus;eventBus;constructor(e,r){this.commandBus=e,this.eventBus=r,this.commandBus.addHandler(t.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(t.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(t.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(t.TurnClockwise,this.processTurnClockwiseCommand.bind(this)),this.commandBus.addHandler(t.MoveToX,this.processMoveToXCommand.bind(this)),this.commandBus.addHandler(t.MoveToY,this.processMoveToYCommand.bind(this)),this.commandBus.addHandler(t.TurnToState,this.processTurnToStateCommand.bind(this))}processMoveLeftCommand(e){e.gameData.fallingFigures.forEach((t=>{W.canFigureBePlaced(t.figure.getTurn(t.turnState),new M(t.position.x-1,t.position.y),e.gameData.matrix)&&t.position.x--})),this.eventBus.fire(new o(e.gameData))}processMoveRightCommand(e){e.gameData.fallingFigures.forEach((t=>{W.canFigureBePlaced(t.figure.getTurn(t.turnState),new M(t.position.x+1,t.position.y),e.gameData.matrix)&&t.position.x++})),this.eventBus.fire(new o(e.gameData))}processTurnClockwiseCommand(e){const t=H.ToArray(r);e.gameData.fallingFigures.forEach((r=>{let n=r.turnState+1;n in t||(n=t[0]),W.canFigureBePlaced(r.figure.getTurn(n),r.position,e.gameData.matrix)&&(r.turnState=n)})),this.eventBus.fire(new o(e.gameData))}processMoveDownCommand(e){this.commandBus.run(new h(e.gameData))}processMoveToXCommand(e){e.x<0||e.x>e.gameData.settings.fieldWidth-1||(e.gameData.fallingFigures.forEach((t=>{const r=e.x>t.position.x?1:-1;for(;t.position.x!==e.x&&W.canFigureBePlaced(t.figure.getTurn(t.turnState),new M(t.position.x+r,t.position.y),e.gameData.matrix);)t.position.x+=r})),this.eventBus.fire(new o(e.gameData)))}processMoveToYCommand(e){e.y<0||(e.gameData.fallingFigures.forEach((t=>{for(;t.position.y<e.y&&W.canFigureBePlaced(t.figure.getTurn(t.turnState),new M(t.position.x,t.position.y+1),e.gameData.matrix);)t.position.y++})),this.eventBus.fire(new o(e.gameData)))}processTurnToStateCommand(e){e.gameData.fallingFigures.forEach((t=>{W.canFigureBePlaced(t.figure.getTurn(e.turnState),t.position,e.gameData.matrix)&&(t.turnState=e.turnState)})),this.eventBus.fire(new o(e.gameData))}}class R{eventBus;commandBus;constructor(e,r){this.eventBus=e,this.commandBus=r,this.commandBus.addHandler(t.InitGame,this.initHandler.bind(this))}initHandler(t){this.eventBus.on(e.FallingTickProcessed,this.processOnFallTick.bind(this))}processOnFallTick(e){this.addFigure(e.gameData)}addFigure(e){if(e.fallingFigures.length>0||e.isGameOver)return;const t=Math.floor(Math.random()*e.settings.figures.length),n=e.settings.figures[t],s=H.GetRandom(r),o=n.getTurn(s),a=Math.max(...o.map((e=>e.length))),u=new M(Math.ceil(e.settings.fieldWidth/2-a/2)-1,-o.length),c=new E(n,u,s);e.fallingFigures.push(c),this.eventBus.fire(new i(e,[c]))}}class I{eventBus;commandBus;levelIncreaseOnSquashedRowsNumber;maxLevels;squashedRowsCounter=0;constructor(e,r,n,s){this.eventBus=e,this.commandBus=r,this.levelIncreaseOnSquashedRowsNumber=n,this.maxLevels=s,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){0!==e.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,e.gameData.level=Math.min(this.maxLevels,e.gameData.level+1)))}}class G{commandBus;eventBus;constructor(e,r){this.commandBus=e,this.eventBus=r,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){e.transferredToMatrixFigures.length<=0||(e.squashedLines.length>0?e.gameData.combo+=1:e.gameData.combo=0)}}class j{commandBus;eventBus;squashedRowsRewardThresholdsMap;rewardOnCombo;constructor(e,r,n=new Map([[1,100],[2,300],[3,500],[4,800]]),s=50){this.commandBus=e,this.eventBus=r,this.squashedRowsRewardThresholdsMap=n,this.rewardOnCombo=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){if(e.squashedLines.length<0)return;let t=0;this.squashedRowsRewardThresholdsMap.forEach(((r,n)=>{n>e.squashedLines.length||(t=r)})),e.gameData.score+=t*e.gameData.level+this.rewardOnCombo*Math.max(0,e.gameData.combo-1)*e.gameData.level+2*e.droppedLines*e.gameData.level}}class A{commandBus;eventBus;constructor(e,r){this.commandBus=e,this.eventBus=r,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){e.gameData.stats.figuresFallen+=e.transferredToMatrixFigures.length,e.gameData.stats.linesSquashed+=e.squashedLines.length}}class L{delayMs;constructor(e){this.delayMs=e}getDelayForNextTickMs(e){return this.delayMs}}class N{eventBus;commandBus;figurePlacingResolver;figurePlacingPerformer;constructor(e,r,n,s){this.eventBus=e,this.commandBus=r,this.figurePlacingResolver=n,this.figurePlacingPerformer=s,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FiguresSpawned,this.onFiguresSpawned.bind(this))}onFiguresSpawned(e){const t=this.figurePlacingResolver.resolve(e.gameData);this.figurePlacingPerformer.place(e.gameData,t)}}class z{target;_persisted;constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class U{target;_persisted;constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class X{target;constructor(e){this.target=e}get persisted(){return!1}}class Q{get persisted(){return!1}}class Y{figuresTargetStates;placingSteps;constructor(e,t){this.figuresTargetStates=e,this.placingSteps=t}}class V{isOpened;cells;constructor(e,t){this.isOpened=e,this.cells=t}}class ${static collectHoles(e){let t=[];class r{cells;previousRowOpenXs;currentRowOpenXs;isOpened;continues;constructor(e=[],t=[],r=[],n=!1,s=!1){this.cells=e,this.previousRowOpenXs=t,this.currentRowOpenXs=r,this.isOpened=n,this.continues=s}}let n=[],s=new Set;return e.forEach(((o,i)=>{n.forEach((e=>e.continues=!1)),o.forEach(((t,o)=>{if(t)s.add(o);else if(s.has(o)){let t=n.find((e=>e.previousRowOpenXs.some((e=>e===o))||e.currentRowOpenXs.length>0&&e.currentRowOpenXs[e.currentRowOpenXs.length-1]===o));void 0===t&&(t=new r,n.push(t)),t.currentRowOpenXs.push(o),t.cells.push(new M(o,i)),t.continues=!0,t.isOpened=t.isOpened||this.doesTheWayOutFromHoleExists(e,new M(o,i),s,[[!0,!0]])}}));let a=[];n.forEach(((r,n)=>{r.continues&&(r.previousRowOpenXs=r.currentRowOpenXs,r.currentRowOpenXs=[]),r.continues&&i!=e.length-1||(t.push(new V(r.isOpened,r.cells)),a.push(n))})),a.reverse().forEach((e=>n.splice(e,1)))})),t}static doesTheWayOutFromHoleExists(e,t,r,n){return void 0!==this.findTheWayOutFromHole(e,t,r,n)}static findTheWayOutFromHole(e,t,r,n){r instanceof Map&&(r=$.convertCoveredColumnsToXs(r));for(let s=t.x-1;s>=0&&W.canFigureBePlaced(n,new M(s,t.y),e);s--){let e=!0;for(let t=s+n[0].length-1;t>=s;t--)if(r.has(t)){e=!1;break}if(e)return s}for(let s=t.x+1;s<e[0].length&&W.canFigureBePlaced(n,new M(s,t.y),e);s++){let e=!0;for(let t=s;t<s+n[0].length;t++)if(r.has(t)){e=!1;break}if(e)return s}}static collectCoveredColumnsXs(e,t){return $.convertCoveredColumnsToXs($.collectCoveredColumns(e,t))}static convertCoveredColumnsToXs(e){return new Set([...e.keys()])}static collectCoveredColumns(e,t){let r=new Map;return e.some(((n,s)=>(n.forEach(((e,t)=>{e&&r.set(t,s)})),void 0!==t&&s>=t||r.size==e[0].length))),r}}class J{gameData;originalHoles;originalCoveredColumns;imaginableMatrix;imaginableCoveredColumns;squashedLinesCount;constructor(e,t,r,n,s,o){this.gameData=e,this.originalHoles=t,this.originalCoveredColumns=r,this.imaginableMatrix=n,this.imaginableCoveredColumns=s,this.squashedLinesCount=o}}class K extends Error{}class Z extends K{}class ee{commandBus;scoreCalculator;constructor(e,t){this.commandBus=e,this.scoreCalculator=t}resolve(e){if(0===e.fallingFigures.length)return;if(1!==e.fallingFigures.length)throw new Z;const t=e.fallingFigures[0];let r=-1/0,n=new Y(new Map,[]);return this.processStates(e,((e,s,o)=>{s>r&&(r=s,n=new Y(new Map([[t,e]]),o))})),n}processStates(e,t,n){const s=e.fallingFigures[0];let o=H.ToArray(r);for(;o[0]!==s.turnState;)o.unshift(o.pop());let i=new Map,a=new Set;o.forEach((e=>{let t=s.figure.getTurn(e),r=t.map((e=>e.map((e=>e?"1":"0")).join())).join("\n");a.has(r)||(a.add(r),i.set(e,t))}));const u=$.collectHoles(e.matrix),c=$.collectCoveredColumns(e.matrix);i.forEach(((r,o)=>{for(let i=0;i<e.settings.fieldWidth-r[0].length+1;i++){let[a,l]=this.imagineFigureDrop(e.matrix,r,i),h=new M(i,a),d=this.squashLines(l),m=new E(s.figure,h,o);n&&n(m);let p=$.collectCoveredColumns(l),f=new J(e,u,c,l,p,d),g=this.scoreCalculator.calculateScore(f),w=this.makeSimplePlacingSteps(m);t&&t(m,g,w)}})),u.filter((e=>e.isOpened&&e.cells.length>0)).forEach((r=>{let o=e.settings.fieldHeight,a=e.settings.fieldWidth,l=-1,h=-1;r.cells.forEach((e=>{o=Math.min(o,e.y),a=Math.min(a,e.x),l=Math.max(l,e.y),h=Math.max(h,e.x)})),i.forEach(((r,i)=>{for(let d=Math.max(o-r.length+1,0);d<=l;d++)for(let o=Math.max(a-r[0].length+1,0);o<=h;o++){let a=new M(o,d),l=new E(s.figure,a,i);if(n&&n(l),W.canFigureBePlaced(r,a,e.matrix)){let n=this.makePushInPlacingSteps(e,l,c);if(void 0!==n){let s=this.imagineFigurePlacing(e.matrix,r,a),o=this.squashLines(s),i=$.collectCoveredColumns(s),h=new J(e,u,c,s,i,o),d=this.scoreCalculator.calculateScore(h);t&&t(l,d,n)}}}}))}))}squashLines(e){let t=[];return e.forEach(((e,r)=>{e.every((e=>e))&&t.push(r)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t.length}imagineFigureDrop(e,t,r){let n=-t.length;for(;W.canFigureBePlaced(t,new M(r,n+1),e);)n++;return[n,this.imagineFigurePlacing(e,t,new M(r,n))]}imagineFigurePlacing(e,t,r){let n=structuredClone(e);return t.forEach(((e,t)=>{e.forEach(((e,s)=>{const o=r.y+t,i=r.x+s;o in n&&i in n[o]&&e&&(n[o][i]=!0)}))})),n}makePushInPlacingSteps(e,t,r){let n=t.figure.getTurn(t.turnState),s=$.findTheWayOutFromHole(e.matrix,t.position,r,n);if(void 0!==s)return[new z(t.turnState,!0),new U(s,!1),new X(t.position.y),new U(t.position.x,!0),new Q]}makeSimplePlacingSteps(e){return[new z(e.turnState,!0),new U(e.position.x,!0),new Q]}}class te{calculators;constructor(e){this.calculators=e}calculateScore(e){return this.calculators.reduce(((t,r)=>t+r.calculateScore(e)),0)}}class re{minimumValuableHeight;powMultiplier;multiplier;constructor(e,t,r){this.minimumValuableHeight=e,this.powMultiplier=t,this.multiplier=r}}class ne{params;constructor(e=new re(5,1,1)){this.params=e}calculateScore(e){const t=e.gameData.settings.fieldHeight,r=e.gameData.settings.fieldWidth,[n,s]=this.calculateFillableSpace(e.imaginableMatrix,r);let o=0;return s>this.params.minimumValuableHeight&&(o=-n*Math.pow(n,n/(t*r)*this.params.powMultiplier)*this.params.multiplier),o}calculateFillableSpace(e,t){let r=new Set,n=0,s=0;return e.every((e=>(e.forEach(((e,t)=>{e&&r.add(t)})),e.forEach(((e,t)=>{!e&&r.size>0&&!r.has(t)&&n++})),r.size<t&&(r.size>0&&s++,!0)))),[n,s]}}class se{powMultiplier;multiplier;constructor(e,t){this.powMultiplier=e,this.multiplier=t}}class oe{params;constructor(e=new se(1,3)){this.params=e}calculateScore(e){const t=this.calculateHeight(e.imaginableMatrix);return-t*Math.pow(t,t/e.gameData.settings.fieldHeight*this.params.powMultiplier)*this.params.multiplier}calculateHeight(e){let t=-1;return e.every(((e,r)=>!!e.every((e=>!e))&&(t=r,!0))),e.length-t-1}}class ie{countDecreaseMultiplier;countIncreaseMultiplier;coveredHeightPowMultiplier;coveredHeightMultiplier;constructor(e,t,r,n){this.countDecreaseMultiplier=e,this.countIncreaseMultiplier=t,this.coveredHeightPowMultiplier=r,this.coveredHeightMultiplier=n}}class ae{params;constructor(e=new ie(150,70,1,5)){this.params=e}calculateScore(e){const[t,r]=this.calculateHolesAndCoveredHeight(e.imaginableMatrix,e.gameData.matrix),n=e.originalHoles.length-t;let s=n>0?n*this.params.countDecreaseMultiplier:n*this.params.countIncreaseMultiplier;return 0!==r&&0!==t&&(s-=r*Math.pow(r,r/(e.gameData.settings.fieldHeight*t)*this.params.coveredHeightPowMultiplier)*this.params.coveredHeightMultiplier),s}calculateHolesAndCoveredHeight(e,t){const[r,n]=this.calculateTheHighestHoleCoveredY(t);let s=new Map,o=0,i=0;return e.forEach(((e,t)=>{e.forEach(((e,a)=>{e&&!s.has(a)&&s.set(a,t);let u=s.get(a);void 0===u||e||(i++,void 0!==r&&void 0!==n&&(t<r?o+=t-u:u<n&&(o+=n-u)))}))})),[i,o]}calculateTheHighestHoleCoveredY(e){let t,r,n=new Map;return e.some(((e,s)=>e.some(((e,o)=>{e&&!n.has(o)&&n.set(o,s);let i=n.get(o);return void 0!==i&&!e&&(r=s,t=i,!0)})))),[r,t]}}class ue{multiplier;constructor(e){this.multiplier=e}}class ce{params;constructor(e=new ue(5)){this.params=e}calculateScore(e){return e.squashedLinesCount*this.params.multiplier}}class le{minimumValuableHeight;countMultiplier;heightPowMultiplier;heightMultiplier;constructor(e,t,r,n){this.minimumValuableHeight=e,this.countMultiplier=t,this.heightPowMultiplier=r,this.heightMultiplier=n}}class he{params;constructor(e=new le(3,70,1,7)){this.params=e}calculateScore(e){const[t,r]=this.calculateTunnelsExceptUncovered(e.imaginableMatrix,e.gameData.matrix);return 0===r?0:-r*this.params.countMultiplier-t*Math.pow(t,t/(e.gameData.settings.fieldHeight*r)*this.params.heightPowMultiplier)*this.params.heightMultiplier}calculateTunnelsExceptUncovered(e,t){let r=new Set;t.every((e=>{e.forEach(((e,t)=>{e&&r.add(t)}))}));let n=new Set,s=new Map;const o=e[0].length;e.every(((e,t)=>(e.forEach(((e,t)=>{e&&n.add(t)})),e.forEach(((e,t)=>{e||n.has(t)||r.has(t)||0!==t&&!n.has(t-1)||t!==o-1&&!n.has(t+1)||s.set(t,(s.get(t)||0)+1)})),n.size<o)));let i=0,a=0;return s.forEach((e=>{e>=this.params.minimumValuableHeight&&(i+=e,a++)})),[i,a]}}class de extends Error{}class me extends de{}class pe extends de{}class fe extends de{}class ge{commandBus;constructor(e){this.commandBus=e}place(e,t){"undefined"!=typeof setImmediate?setImmediate((()=>this.placeImpl(e,t))):setTimeout((()=>this.placeImpl(e,t)),0)}placeImpl(e,t){if(0===e.fallingFigures.length)return;if(1!==e.fallingFigures.length)throw new me;if(void 0===t)return;const r=e.fallingFigures[0],n=t.figuresTargetStates.get(r);if(n){if(r.figure!==n.figure)throw new pe("Both of the original and the target falling figures must have the same figure in it.");t.placingSteps.forEach((t=>{if(t instanceof z)this.commandBus.run(new g(e,t.target));else if(t instanceof U)this.commandBus.run(new p(e,t.target));else if(t instanceof X)this.commandBus.run(new f(e,t.target));else{if(!(t instanceof Q))throw new fe("Unknown step "+t.constructor.name);this.commandBus.run(new w(e))}}))}}}class we{transferredFigures=[];isGameOver=!1}class ke{commandBus;eventBus;constructor(e,r){this.commandBus=e,this.eventBus=r,this.commandBus.addHandler(t.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(t.FiguresFallDown,this.processDropFiguresCommand.bind(this))}processFiguresFallTickCommand(e){const t=this.fallFiguresForOneCell(e.gameData);let r=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new d(e.gameData)),this.eventBus.fire(new n(e.gameData,t.transferredFigures,r,0))}processDropFiguresCommand(e){let t=new we,r=0;for(;e.gameData.fallingFigures.length>0;){const n=this.fallFiguresForOneCell(e.gameData);t.transferredFigures.push(...n.transferredFigures),t.isGameOver=t.isGameOver||n.isGameOver,r++}let s=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new d(e.gameData)),this.eventBus.fire(new n(e.gameData,t.transferredFigures,s,r-1))}fallFiguresForOneCell(e){let t=new we;return e.fallingFigures.forEach(((r,n)=>{if(this.figureCanFall(e.matrix,r))r.position.y++;else{let s=this.transferFigureToMatrix(e.matrix,r);t.transferredFigures.push(...e.fallingFigures.splice(n,1)),t.isGameOver=t.isGameOver||s}})),t}figureCanFall(e,t){return W.canFigureBePlaced(t.figure.getTurn(t.turnState),new M(t.position.x,t.position.y+1),e)}transferFigureToMatrix(e,t){let r=!1;return t.figure.getTurn(t.turnState).forEach(((n,s)=>{n.forEach(((n,o)=>{if(!n)return;let i=t.position.x+o,a=t.position.y+s;a in e&&i in e[a]&&!e[a][i]?e[a][i]=!0:r=!0}))})),r}squashLines(e){let t=[];return e.forEach(((e,r)=>{e.every((e=>e))&&t.push(r)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t}}class ve{benchRunParameters;eventBus;commandBus;gameController;movingHandler;fallingFiguresProcessor;figuresSpawner;levelCounter;comboCounter;scoreCounter;statsCounter;gameData;tetrisSolver;constructor(e,t=new a,r=new k,n=new B(new L(1/0),t,r),s=new q(r,t),o=new ke(r,t),i=new R(t,r),u=new I(t,r,8,15),c=new G(r,t),l=new j(r,t),h=new A(r,t),d=S.makeSimple(),m=new N(t,r,new ee(r,new te([new ne(e.fillableCellsCalculatorParams),new oe(e.filledHeightCalculatorParams),new ae(e.holesV1CalculatorParams),new ce(e.squashedRowsCalculatorParams),new he(e.tunnelsCalculatorParams)])),new ge(r))){this.benchRunParameters=e,this.eventBus=t,this.commandBus=r,this.gameController=n,this.movingHandler=s,this.fallingFiguresProcessor=o,this.figuresSpawner=i,this.levelCounter=u,this.comboCounter=c,this.scoreCounter=l,this.statsCounter=h,this.gameData=d,this.tetrisSolver=m}start(e){this.gameData=e||S.makeSimple(),this.commandBus.run(new u(this.gameData)),this.commandBus.run(new c(this.gameData))}pause(){this.commandBus.run(new l(this.gameData))}}__webpack_require__(340).worker({solveTetris:async function(t){const r=new a;let n=new ve(t,r);return n.start(),await new Promise((t=>{r.on(e.FallingTickProcessed,(e=>{e.gameData.stats.figuresFallen>=1e6&&(n.pause(),t(e.gameData.stats.figuresFallen))})),r.on(e.GameOver,(e=>{t(e.gameData.stats.figuresFallen)}))}))}})})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDTjNrQixFQUFReUYsRUFBTXlJLFNBQVNyTixNQUFNb1QsbUJBR3JDa0IsRUFBUzNQLEdBQUdzSSxFQUFVVyxVQUFXaEosSUFDN0J6RixFQUFReUYsRUFBTXlJLFNBQVNyTixNQUFNb1QsY0FBYyxHQUM3QyxHQUVWIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dvcmtlcnBvb2wvZGlzdC93b3JrZXJwb29sLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmlndXJlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0dhbWVDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9VdGlscy9FbnVtSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvTW92aW5nSGFuZGxlci9Nb3ZpbmdIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmlndXJlc1NwYXduZXIvQWx3YXlzT25lRmlndXJlU3Bhd25lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0xldmVsQ291bnRlci9TcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvU2NvcmVDb3VudGVyL0ZhbGxUaWNrU2NvcmVDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvU3RhdHNDb3VudGVyL1N0YXRzQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9Db21tb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9VdGlscy9Ib2xlc0hlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9GaWd1cmVQbGFjaW5nUmVzb2x2ZXIvRmlndXJlUGxhY2luZ1Jlc29sdmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL0NhbGN1bGF0b3JBZ2dyZWdhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9TY29yZUNhbGN1bGF0b3IvRmlsbGFibGVDZWxscy9GaWxsYWJsZUNlbGxzQ2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9GaWxsZWRIZWlnaHQvRmlsbGVkSGVpZ2h0Q2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9Ib2xlcy9Ib2xlc1YxQ2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9TcXVhc2hlZFJvd3MvU3F1YXNoZWRSb3dzQ2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9UdW5uZWxzL1R1bm5lbHNDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1BlcmZvcm1lci9GaWd1cmVQbGFjaW5nUGVyZm9ybWVySW50ZXJmYWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1BlcmZvcm1lci9JbnN0YW50RmlndXJlUGxhY2luZ1BlcmZvcm1lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yL1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3Nvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmluZ0JlbmNoL0JlbmNoU29sdmVyRmFjYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy90ZXRyaXNfc29sdmluZ193b3JrZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiB3b3JrZXJwb29sLmpzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vam9zZGVqb25nL3dvcmtlcnBvb2xcbiAqXG4gKiBPZmZsb2FkIHRhc2tzIHRvIGEgcG9vbCBvZiB3b3JrZXJzIG9uIG5vZGUuanMgYW5kIGluIHRoZSBicm93c2VyLlxuICpcbiAqIEB2ZXJzaW9uIDYuMy4xXG4gKiBAZGF0ZSAgICAyMDIyLTExLTA3XG4gKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoQykgMjAxNC0yMDIyIEpvcyBkZSBKb25nIDx3am9zZGVqb25nQGdtYWlsLmNvbT5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdFxuICogdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXG4gKiBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGVcbiAqIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyXG4gKiB0aGUgTGljZW5zZS5cbiAqL1xuXG4oZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIndvcmtlcnBvb2xcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wid29ya2VycG9vbFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ3b3JrZXJwb29sXCJdID0gZmFjdG9yeSgpO1xufSkoKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKSwgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKCkgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdHZhciBfX3dlYnBhY2tfbW9kdWxlc19fID0gKHtcblxuLyoqKi8gMzQ1OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX191bnVzZWRfd2VicGFja19leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBQcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTkpO1xudmFyIFdvcmtlckhhbmRsZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1MSk7XG52YXIgZW52aXJvbm1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyOCk7XG52YXIgRGVidWdQb3J0QWxsb2NhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MzMpO1xudmFyIERFQlVHX1BPUlRfQUxMT0NBVE9SID0gbmV3IERlYnVnUG9ydEFsbG9jYXRvcigpO1xuLyoqXG4gKiBBIHBvb2wgdG8gbWFuYWdlIHdvcmtlcnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBbc2NyaXB0XSAgIE9wdGlvbmFsIHdvcmtlciBzY3JpcHRcbiAqIEBwYXJhbSB7V29ya2VyUG9vbE9wdGlvbnN9IFtvcHRpb25zXSAgU2VlIGRvY3NcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBQb29sKHNjcmlwdCwgb3B0aW9ucykge1xuICBpZiAodHlwZW9mIHNjcmlwdCA9PT0gJ3N0cmluZycpIHtcbiAgICB0aGlzLnNjcmlwdCA9IHNjcmlwdCB8fCBudWxsO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuc2NyaXB0ID0gbnVsbDtcbiAgICBvcHRpb25zID0gc2NyaXB0O1xuICB9XG4gIHRoaXMud29ya2VycyA9IFtdOyAvLyBxdWV1ZSB3aXRoIGFsbCB3b3JrZXJzXG4gIHRoaXMudGFza3MgPSBbXTsgLy8gcXVldWUgd2l0aCB0YXNrcyBhd2FpdGluZyBleGVjdXRpb25cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5mb3JrQXJncyA9IE9iamVjdC5mcmVlemUob3B0aW9ucy5mb3JrQXJncyB8fCBbXSk7XG4gIHRoaXMuZm9ya09wdHMgPSBPYmplY3QuZnJlZXplKG9wdGlvbnMuZm9ya09wdHMgfHwge30pO1xuICB0aGlzLndvcmtlclRocmVhZE9wdHMgPSBPYmplY3QuZnJlZXplKG9wdGlvbnMud29ya2VyVGhyZWFkT3B0cyB8fCB7fSk7XG4gIHRoaXMuZGVidWdQb3J0U3RhcnQgPSBvcHRpb25zLmRlYnVnUG9ydFN0YXJ0IHx8IDQzMjEwO1xuICB0aGlzLm5vZGVXb3JrZXIgPSBvcHRpb25zLm5vZGVXb3JrZXI7XG4gIHRoaXMud29ya2VyVHlwZSA9IG9wdGlvbnMud29ya2VyVHlwZSB8fCBvcHRpb25zLm5vZGVXb3JrZXIgfHwgJ2F1dG8nO1xuICB0aGlzLm1heFF1ZXVlU2l6ZSA9IG9wdGlvbnMubWF4UXVldWVTaXplIHx8IEluZmluaXR5O1xuICB0aGlzLm9uQ3JlYXRlV29ya2VyID0gb3B0aW9ucy5vbkNyZWF0ZVdvcmtlciB8fCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG4gIHRoaXMub25UZXJtaW5hdGVXb3JrZXIgPSBvcHRpb25zLm9uVGVybWluYXRlV29ya2VyIHx8IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvLyBjb25maWd1cmF0aW9uXG4gIGlmIChvcHRpb25zICYmICdtYXhXb3JrZXJzJyBpbiBvcHRpb25zKSB7XG4gICAgdmFsaWRhdGVNYXhXb3JrZXJzKG9wdGlvbnMubWF4V29ya2Vycyk7XG4gICAgdGhpcy5tYXhXb3JrZXJzID0gb3B0aW9ucy5tYXhXb3JrZXJzO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubWF4V29ya2VycyA9IE1hdGgubWF4KChlbnZpcm9ubWVudC5jcHVzIHx8IDQpIC0gMSwgMSk7XG4gIH1cbiAgaWYgKG9wdGlvbnMgJiYgJ21pbldvcmtlcnMnIGluIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5taW5Xb3JrZXJzID09PSAnbWF4Jykge1xuICAgICAgdGhpcy5taW5Xb3JrZXJzID0gdGhpcy5tYXhXb3JrZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWxpZGF0ZU1pbldvcmtlcnMob3B0aW9ucy5taW5Xb3JrZXJzKTtcbiAgICAgIHRoaXMubWluV29ya2VycyA9IG9wdGlvbnMubWluV29ya2VycztcbiAgICAgIHRoaXMubWF4V29ya2VycyA9IE1hdGgubWF4KHRoaXMubWluV29ya2VycywgdGhpcy5tYXhXb3JrZXJzKTsgLy8gaW4gY2FzZSBtaW5Xb3JrZXJzIGlzIGhpZ2hlciB0aGFuIG1heFdvcmtlcnNcbiAgICB9XG5cbiAgICB0aGlzLl9lbnN1cmVNaW5Xb3JrZXJzKCk7XG4gIH1cbiAgdGhpcy5fYm91bmROZXh0ID0gdGhpcy5fbmV4dC5iaW5kKHRoaXMpO1xuICBpZiAodGhpcy53b3JrZXJUeXBlID09PSAndGhyZWFkJykge1xuICAgIFdvcmtlckhhbmRsZXIuZW5zdXJlV29ya2VyVGhyZWFkcygpO1xuICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZSBhIGZ1bmN0aW9uIG9uIGEgd29ya2VyLlxuICpcbiAqIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICB2YXIgcG9vbCA9IG5ldyBQb29sKClcbiAqXG4gKiAgIC8vIGNhbGwgYSBmdW5jdGlvbiBhdmFpbGFibGUgb24gdGhlIHdvcmtlclxuICogICBwb29sLmV4ZWMoJ2ZpYm9uYWNjaScsIFs2XSlcbiAqXG4gKiAgIC8vIG9mZmxvYWQgYSBmdW5jdGlvblxuICogICBmdW5jdGlvbiBhZGQoYSwgYikge1xuICogICAgIHJldHVybiBhICsgYlxuICogICB9O1xuICogICBwb29sLmV4ZWMoYWRkLCBbMiwgNF0pXG4gKiAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gKiAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7IC8vIG91dHB1dHMgNlxuICogICAgICAgfSlcbiAqICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICogICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gKiAgICAgICB9KTtcbiAqXG4gKiBAcGFyYW0ge1N0cmluZyB8IEZ1bmN0aW9ufSBtZXRob2QgIEZ1bmN0aW9uIG5hbWUgb3IgZnVuY3Rpb24uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIGBtZXRob2RgIGlzIGEgc3RyaW5nLCB0aGUgY29ycmVzcG9uZGluZ1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Qgb24gdGhlIHdvcmtlciB3aWxsIGJlIGV4ZWN1dGVkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIGBtZXRob2RgIGlzIGEgRnVuY3Rpb24sIHRoZSBmdW5jdGlvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGJlIHN0cmluZ2lmaWVkIGFuZCBleGVjdXRlZCB2aWEgdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlcnMgYnVpbHQtaW4gZnVuY3Rpb24gYHJ1bihmbiwgYXJncylgLlxuICogQHBhcmFtIHtBcnJheX0gW3BhcmFtc10gIEZ1bmN0aW9uIGFyZ3VtZW50cyBhcHBsaWVkIHdoZW4gY2FsbGluZyB0aGUgZnVuY3Rpb25cbiAqIEBwYXJhbSB7RXhlY09wdGlvbnN9IFtvcHRpb25zXSAgT3B0aW9ucyBvYmplY3RcbiAqIEByZXR1cm4ge1Byb21pc2UuPCosIEVycm9yPn0gcmVzdWx0XG4gKi9cblBvb2wucHJvdG90eXBlLmV4ZWMgPSBmdW5jdGlvbiAobWV0aG9kLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgLy8gdmFsaWRhdGUgdHlwZSBvZiBhcmd1bWVudHNcbiAgaWYgKHBhcmFtcyAmJiAhQXJyYXkuaXNBcnJheShwYXJhbXMpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkgZXhwZWN0ZWQgYXMgYXJndW1lbnQgXCJwYXJhbXNcIicpO1xuICB9XG4gIGlmICh0eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJykge1xuICAgIHZhciByZXNvbHZlciA9IFByb21pc2UuZGVmZXIoKTtcbiAgICBpZiAodGhpcy50YXNrcy5sZW5ndGggPj0gdGhpcy5tYXhRdWV1ZVNpemUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWF4IHF1ZXVlIHNpemUgb2YgJyArIHRoaXMubWF4UXVldWVTaXplICsgJyByZWFjaGVkJyk7XG4gICAgfVxuXG4gICAgLy8gYWRkIGEgbmV3IHRhc2sgdG8gdGhlIHF1ZXVlXG4gICAgdmFyIHRhc2tzID0gdGhpcy50YXNrcztcbiAgICB2YXIgdGFzayA9IHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICByZXNvbHZlcjogcmVzb2x2ZXIsXG4gICAgICB0aW1lb3V0OiBudWxsLFxuICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgIH07XG4gICAgdGFza3MucHVzaCh0YXNrKTtcblxuICAgIC8vIHJlcGxhY2UgdGhlIHRpbWVvdXQgbWV0aG9kIG9mIHRoZSBQcm9taXNlIHdpdGggb3VyIG93bixcbiAgICAvLyB3aGljaCBzdGFydHMgdGhlIHRpbWVyIGFzIHNvb24gYXMgdGhlIHRhc2sgaXMgYWN0dWFsbHkgc3RhcnRlZFxuICAgIHZhciBvcmlnaW5hbFRpbWVvdXQgPSByZXNvbHZlci5wcm9taXNlLnRpbWVvdXQ7XG4gICAgcmVzb2x2ZXIucHJvbWlzZS50aW1lb3V0ID0gZnVuY3Rpb24gdGltZW91dChkZWxheSkge1xuICAgICAgaWYgKHRhc2tzLmluZGV4T2YodGFzaykgIT09IC0xKSB7XG4gICAgICAgIC8vIHRhc2sgaXMgc3RpbGwgcXVldWVkIC0+IHN0YXJ0IHRoZSB0aW1lciBsYXRlciBvblxuICAgICAgICB0YXNrLnRpbWVvdXQgPSBkZWxheTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyLnByb21pc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB0YXNrIGlzIGFscmVhZHkgYmVpbmcgZXhlY3V0ZWQgLT4gc3RhcnQgdGltZXIgaW1tZWRpYXRlbHlcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsVGltZW91dC5jYWxsKHJlc29sdmVyLnByb21pc2UsIGRlbGF5KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gdHJpZ2dlciB0YXNrIGV4ZWN1dGlvblxuICAgIHRoaXMuX25leHQoKTtcbiAgICByZXR1cm4gcmVzb2x2ZXIucHJvbWlzZTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gc2VuZCBzdHJpbmdpZmllZCBmdW5jdGlvbiBhbmQgZnVuY3Rpb24gYXJndW1lbnRzIHRvIHdvcmtlclxuICAgIHJldHVybiB0aGlzLmV4ZWMoJ3J1bicsIFtTdHJpbmcobWV0aG9kKSwgcGFyYW1zXSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24gb3Igc3RyaW5nIGV4cGVjdGVkIGFzIGFyZ3VtZW50IFwibWV0aG9kXCInKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBwcm94eSBmb3IgY3VycmVudCB3b3JrZXIuIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsXG4gKiBtZXRob2RzIGF2YWlsYWJsZSBvbiB0aGUgd29ya2VyLiBUaGUgbWV0aG9kcyBhbHdheXMgcmV0dXJuIGEgcHJvbWlzZS5cbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlLjxPYmplY3QsIEVycm9yPn0gcHJveHlcbiAqL1xuUG9vbC5wcm90b3R5cGUucHJveHkgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gYXJndW1lbnRzIGV4cGVjdGVkJyk7XG4gIH1cbiAgdmFyIHBvb2wgPSB0aGlzO1xuICByZXR1cm4gdGhpcy5leGVjKCdtZXRob2RzJykudGhlbihmdW5jdGlvbiAobWV0aG9kcykge1xuICAgIHZhciBwcm94eSA9IHt9O1xuICAgIG1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICBwcm94eVttZXRob2RdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcG9vbC5leGVjKG1ldGhvZCwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBwcm94eTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgbmV3IGFycmF5IHdpdGggdGhlIHJlc3VsdHMgb2YgY2FsbGluZyBhIHByb3ZpZGVkIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKiBvbiBldmVyeSBlbGVtZW50IGluIHRoaXMgYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgIEZ1bmN0aW9uIHRha2luZyB0d28gYXJndW1lbnRzOlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBjYWxsYmFjayhjdXJyZW50VmFsdWUsIGluZGV4KWBcbiAqIEByZXR1cm4ge1Byb21pc2UuPEFycmF5Pn0gUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgIHdpdGggYW4gQXJyYXlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmluZyB0aGUgcmVzdWx0cyBvZiB0aGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZWQgZm9yIGVhY2ggb2YgdGhlIGFycmF5IGVsZW1lbnRzLlxuICovXG4vKiBUT0RPOiBpbXBsZW1lbnQgbWFwXG5Qb29sLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoYXJyYXksIGNhbGxiYWNrKSB7XG59O1xuKi9cblxuLyoqXG4gKiBHcmFiIHRoZSBmaXJzdCB0YXNrIGZyb20gdGhlIHF1ZXVlLCBmaW5kIGEgZnJlZSB3b3JrZXIsIGFuZCBhc3NpZ24gdGhlXG4gKiB3b3JrZXIgdG8gdGhlIHRhc2suXG4gKiBAcHJvdGVjdGVkXG4gKi9cblBvb2wucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy50YXNrcy5sZW5ndGggPiAwKSB7XG4gICAgLy8gdGhlcmUgYXJlIHRhc2tzIGluIHRoZSBxdWV1ZVxuXG4gICAgLy8gZmluZCBhbiBhdmFpbGFibGUgd29ya2VyXG4gICAgdmFyIHdvcmtlciA9IHRoaXMuX2dldFdvcmtlcigpO1xuICAgIGlmICh3b3JrZXIpIHtcbiAgICAgIC8vIGdldCB0aGUgZmlyc3QgdGFzayBmcm9tIHRoZSBxdWV1ZVxuICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgIHZhciB0YXNrID0gdGhpcy50YXNrcy5zaGlmdCgpO1xuXG4gICAgICAvLyBjaGVjayBpZiB0aGUgdGFzayBpcyBzdGlsbCBwZW5kaW5nIChhbmQgbm90IGNhbmNlbGxlZCAtPiBwcm9taXNlIHJlamVjdGVkKVxuICAgICAgaWYgKHRhc2sucmVzb2x2ZXIucHJvbWlzZS5wZW5kaW5nKSB7XG4gICAgICAgIC8vIHNlbmQgdGhlIHJlcXVlc3QgdG8gdGhlIHdvcmtlclxuICAgICAgICB2YXIgcHJvbWlzZSA9IHdvcmtlci5leGVjKHRhc2subWV0aG9kLCB0YXNrLnBhcmFtcywgdGFzay5yZXNvbHZlciwgdGFzay5vcHRpb25zKS50aGVuKG1lLl9ib3VuZE5leHQpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGlmIHRoZSB3b3JrZXIgY3Jhc2hlZCBhbmQgdGVybWluYXRlZCwgcmVtb3ZlIGl0IGZyb20gdGhlIHBvb2xcbiAgICAgICAgICBpZiAod29ya2VyLnRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBtZS5fcmVtb3ZlV29ya2VyKHdvcmtlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBtZS5fbmV4dCgpOyAvLyB0cmlnZ2VyIG5leHQgdGFzayBpbiB0aGUgcXVldWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc3RhcnQgcXVldWVkIHRpbWVyIG5vd1xuICAgICAgICBpZiAodHlwZW9mIHRhc2sudGltZW91dCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBwcm9taXNlLnRpbWVvdXQodGFzay50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhlIHRhc2sgdGFrZW4gd2FzIGFscmVhZHkgY29tcGxldGUgKGVpdGhlciByZWplY3RlZCBvciByZXNvbHZlZCksIHNvIGp1c3QgdHJpZ2dlciBuZXh0IHRhc2sgaW4gdGhlIHF1ZXVlXG4gICAgICAgIG1lLl9uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEdldCBhbiBhdmFpbGFibGUgd29ya2VyLiBJZiBubyB3b3JrZXIgaXMgYXZhaWxhYmxlIGFuZCB0aGUgbWF4aW11bSBudW1iZXJcbiAqIG9mIHdvcmtlcnMgaXNuJ3QgeWV0IHJlYWNoZWQsIGEgbmV3IHdvcmtlciB3aWxsIGJlIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxuICogSWYgbm8gd29ya2VyIGlzIGF2YWlsYWJsZSBhbmQgdGhlIG1heGltdW0gbnVtYmVyIG9mIHdvcmtlcnMgaXMgcmVhY2hlZCxcbiAqIG51bGwgd2lsbCBiZSByZXR1cm5lZC5cbiAqXG4gKiBAcmV0dXJuIHtXb3JrZXJIYW5kbGVyIHwgbnVsbH0gd29ya2VyXG4gKiBAcHJpdmF0ZVxuICovXG5Qb29sLnByb3RvdHlwZS5fZ2V0V29ya2VyID0gZnVuY3Rpb24gKCkge1xuICAvLyBmaW5kIGEgbm9uLWJ1c3kgd29ya2VyXG4gIHZhciB3b3JrZXJzID0gdGhpcy53b3JrZXJzO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmtlcnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgd29ya2VyID0gd29ya2Vyc1tpXTtcbiAgICBpZiAod29ya2VyLmJ1c3koKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiB3b3JrZXI7XG4gICAgfVxuICB9XG4gIGlmICh3b3JrZXJzLmxlbmd0aCA8IHRoaXMubWF4V29ya2Vycykge1xuICAgIC8vIGNyZWF0ZSBhIG5ldyB3b3JrZXJcbiAgICB3b3JrZXIgPSB0aGlzLl9jcmVhdGVXb3JrZXJIYW5kbGVyKCk7XG4gICAgd29ya2Vycy5wdXNoKHdvcmtlcik7XG4gICAgcmV0dXJuIHdvcmtlcjtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGEgd29ya2VyIGZyb20gdGhlIHBvb2wuXG4gKiBBdHRlbXB0cyB0byB0ZXJtaW5hdGUgd29ya2VyIGlmIG5vdCBhbHJlYWR5IHRlcm1pbmF0ZWQsIGFuZCBlbnN1cmVzIHRoZSBtaW5pbXVtXG4gKiBwb29sIHNpemUgaXMgbWV0LlxuICogQHBhcmFtIHtXb3JrZXJIYW5kbGVyfSB3b3JrZXJcbiAqIEByZXR1cm4ge1Byb21pc2U8V29ya2VySGFuZGxlcj59XG4gKiBAcHJvdGVjdGVkXG4gKi9cblBvb2wucHJvdG90eXBlLl9yZW1vdmVXb3JrZXIgPSBmdW5jdGlvbiAod29ya2VyKSB7XG4gIHZhciBtZSA9IHRoaXM7XG4gIERFQlVHX1BPUlRfQUxMT0NBVE9SLnJlbGVhc2VQb3J0KHdvcmtlci5kZWJ1Z1BvcnQpO1xuICAvLyBfcmVtb3ZlV29ya2VyIHdpbGwgY2FsbCB0aGlzLCBidXQgd2UgbmVlZCBpdCB0byBiZSByZW1vdmVkIHN5bmNocm9ub3VzbHlcbiAgdGhpcy5fcmVtb3ZlV29ya2VyRnJvbUxpc3Qod29ya2VyKTtcbiAgLy8gSWYgbWluV29ya2VycyBzZXQsIHNwaW4gdXAgbmV3IHdvcmtlcnMgdG8gcmVwbGFjZSB0aGUgY3Jhc2hlZCBvbmVzXG4gIHRoaXMuX2Vuc3VyZU1pbldvcmtlcnMoKTtcbiAgLy8gdGVybWluYXRlIHRoZSB3b3JrZXIgKGlmIG5vdCBhbHJlYWR5IHRlcm1pbmF0ZWQpXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgd29ya2VyLnRlcm1pbmF0ZShmYWxzZSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgbWUub25UZXJtaW5hdGVXb3JrZXIoe1xuICAgICAgICBmb3JrQXJnczogd29ya2VyLmZvcmtBcmdzLFxuICAgICAgICBmb3JrT3B0czogd29ya2VyLmZvcmtPcHRzLFxuICAgICAgICBzY3JpcHQ6IHdvcmtlci5zY3JpcHRcbiAgICAgIH0pO1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUod29ya2VyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIHdvcmtlciBmcm9tIHRoZSBwb29sIGxpc3QuXG4gKiBAcGFyYW0ge1dvcmtlckhhbmRsZXJ9IHdvcmtlclxuICogQHByb3RlY3RlZFxuICovXG5Qb29sLnByb3RvdHlwZS5fcmVtb3ZlV29ya2VyRnJvbUxpc3QgPSBmdW5jdGlvbiAod29ya2VyKSB7XG4gIC8vIHJlbW92ZSBmcm9tIHRoZSBsaXN0IHdpdGggd29ya2Vyc1xuICB2YXIgaW5kZXggPSB0aGlzLndvcmtlcnMuaW5kZXhPZih3b3JrZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgdGhpcy53b3JrZXJzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2xvc2UgYWxsIGFjdGl2ZSB3b3JrZXJzLiBUYXNrcyBjdXJyZW50bHkgYmVpbmcgZXhlY3V0ZWQgd2lsbCBiZSBmaW5pc2hlZCBmaXJzdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ZvcmNlPWZhbHNlXSAgIElmIGZhbHNlIChkZWZhdWx0KSwgdGhlIHdvcmtlcnMgYXJlIHRlcm1pbmF0ZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIGZpbmlzaGluZyBhbGwgdGFza3MgY3VycmVudGx5IGluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy4gSWYgdHJ1ZSwgdGhlIHdvcmtlcnMgd2lsbCBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybWluYXRlZCBpbW1lZGlhdGVseS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZW91dF0gICAgICAgIElmIHByb3ZpZGVkIGFuZCBub24temVybywgd29ya2VyIHRlcm1pbmF0aW9uIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgdGltZW91dCBpZiB3b3JrZXIgcHJvY2VzcyBoYXMgbm90IGJlZW4gdGVybWluYXRlZC5cbiAqIEByZXR1cm4ge1Byb21pc2UuPHZvaWQsIEVycm9yPn1cbiAqL1xuUG9vbC5wcm90b3R5cGUudGVybWluYXRlID0gZnVuY3Rpb24gKGZvcmNlLCB0aW1lb3V0KSB7XG4gIHZhciBtZSA9IHRoaXM7XG5cbiAgLy8gY2FuY2VsIGFueSBwZW5kaW5nIHRhc2tzXG4gIHRoaXMudGFza3MuZm9yRWFjaChmdW5jdGlvbiAodGFzaykge1xuICAgIHRhc2sucmVzb2x2ZXIucmVqZWN0KG5ldyBFcnJvcignUG9vbCB0ZXJtaW5hdGVkJykpO1xuICB9KTtcbiAgdGhpcy50YXNrcy5sZW5ndGggPSAwO1xuICB2YXIgZiA9IGZ1bmN0aW9uIGYod29ya2VyKSB7XG4gICAgREVCVUdfUE9SVF9BTExPQ0FUT1IucmVsZWFzZVBvcnQod29ya2VyLmRlYnVnUG9ydCk7XG4gICAgdGhpcy5fcmVtb3ZlV29ya2VyRnJvbUxpc3Qod29ya2VyKTtcbiAgfTtcbiAgdmFyIHJlbW92ZVdvcmtlciA9IGYuYmluZCh0aGlzKTtcbiAgdmFyIHByb21pc2VzID0gW107XG4gIHZhciB3b3JrZXJzID0gdGhpcy53b3JrZXJzLnNsaWNlKCk7XG4gIHdvcmtlcnMuZm9yRWFjaChmdW5jdGlvbiAod29ya2VyKSB7XG4gICAgdmFyIHRlcm1Qcm9taXNlID0gd29ya2VyLnRlcm1pbmF0ZUFuZE5vdGlmeShmb3JjZSwgdGltZW91dCkudGhlbihyZW1vdmVXb3JrZXIpLmFsd2F5cyhmdW5jdGlvbiAoKSB7XG4gICAgICBtZS5vblRlcm1pbmF0ZVdvcmtlcih7XG4gICAgICAgIGZvcmtBcmdzOiB3b3JrZXIuZm9ya0FyZ3MsXG4gICAgICAgIGZvcmtPcHRzOiB3b3JrZXIuZm9ya09wdHMsXG4gICAgICAgIHNjcmlwdDogd29ya2VyLnNjcmlwdFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcHJvbWlzZXMucHVzaCh0ZXJtUHJvbWlzZSk7XG4gIH0pO1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSBzdGF0aXN0aWNzIG9uIHRhc2tzIGFuZCB3b3JrZXJzLlxuICogQHJldHVybiB7e3RvdGFsV29ya2VyczogbnVtYmVyLCBidXN5V29ya2VyczogbnVtYmVyLCBpZGxlV29ya2VyczogbnVtYmVyLCBwZW5kaW5nVGFza3M6IG51bWJlciwgYWN0aXZlVGFza3M6IG51bWJlcn19IFJldHVybnMgYW4gb2JqZWN0IHdpdGggc3RhdGlzdGljc1xuICovXG5Qb29sLnByb3RvdHlwZS5zdGF0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRvdGFsV29ya2VycyA9IHRoaXMud29ya2Vycy5sZW5ndGg7XG4gIHZhciBidXN5V29ya2VycyA9IHRoaXMud29ya2Vycy5maWx0ZXIoZnVuY3Rpb24gKHdvcmtlcikge1xuICAgIHJldHVybiB3b3JrZXIuYnVzeSgpO1xuICB9KS5sZW5ndGg7XG4gIHJldHVybiB7XG4gICAgdG90YWxXb3JrZXJzOiB0b3RhbFdvcmtlcnMsXG4gICAgYnVzeVdvcmtlcnM6IGJ1c3lXb3JrZXJzLFxuICAgIGlkbGVXb3JrZXJzOiB0b3RhbFdvcmtlcnMgLSBidXN5V29ya2VycyxcbiAgICBwZW5kaW5nVGFza3M6IHRoaXMudGFza3MubGVuZ3RoLFxuICAgIGFjdGl2ZVRhc2tzOiBidXN5V29ya2Vyc1xuICB9O1xufTtcblxuLyoqXG4gKiBFbnN1cmVzIHRoYXQgYSBtaW5pbXVtIG9mIG1pbldvcmtlcnMgaXMgdXAgYW5kIHJ1bm5pbmdcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuUG9vbC5wcm90b3R5cGUuX2Vuc3VyZU1pbldvcmtlcnMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLm1pbldvcmtlcnMpIHtcbiAgICBmb3IgKHZhciBpID0gdGhpcy53b3JrZXJzLmxlbmd0aDsgaSA8IHRoaXMubWluV29ya2VyczsgaSsrKSB7XG4gICAgICB0aGlzLndvcmtlcnMucHVzaCh0aGlzLl9jcmVhdGVXb3JrZXJIYW5kbGVyKCkpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgbmV3IFdvcmtlckhhbmRsZXIgYW5kIHBhc3MgYWxsIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtXb3JrZXJIYW5kbGVyfVxuICogQHByaXZhdGVcbiAqL1xuUG9vbC5wcm90b3R5cGUuX2NyZWF0ZVdvcmtlckhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBvdmVycmlkZW5QYXJhbXMgPSB0aGlzLm9uQ3JlYXRlV29ya2VyKHtcbiAgICBmb3JrQXJnczogdGhpcy5mb3JrQXJncyxcbiAgICBmb3JrT3B0czogdGhpcy5mb3JrT3B0cyxcbiAgICB3b3JrZXJUaHJlYWRPcHRzOiB0aGlzLndvcmtlclRocmVhZE9wdHMsXG4gICAgc2NyaXB0OiB0aGlzLnNjcmlwdFxuICB9KSB8fCB7fTtcbiAgcmV0dXJuIG5ldyBXb3JrZXJIYW5kbGVyKG92ZXJyaWRlblBhcmFtcy5zY3JpcHQgfHwgdGhpcy5zY3JpcHQsIHtcbiAgICBmb3JrQXJnczogb3ZlcnJpZGVuUGFyYW1zLmZvcmtBcmdzIHx8IHRoaXMuZm9ya0FyZ3MsXG4gICAgZm9ya09wdHM6IG92ZXJyaWRlblBhcmFtcy5mb3JrT3B0cyB8fCB0aGlzLmZvcmtPcHRzLFxuICAgIHdvcmtlclRocmVhZE9wdHM6IG92ZXJyaWRlblBhcmFtcy53b3JrZXJUaHJlYWRPcHRzIHx8IHRoaXMud29ya2VyVGhyZWFkT3B0cyxcbiAgICBkZWJ1Z1BvcnQ6IERFQlVHX1BPUlRfQUxMT0NBVE9SLm5leHRBdmFpbGFibGVTdGFydGluZ0F0KHRoaXMuZGVidWdQb3J0U3RhcnQpLFxuICAgIHdvcmtlclR5cGU6IHRoaXMud29ya2VyVHlwZVxuICB9KTtcbn07XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgdGhlIG1heFdvcmtlcnMgb3B0aW9uIGlzIGFuIGludGVnZXIgPj0gMVxuICogQHBhcmFtIHsqfSBtYXhXb3JrZXJzXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gcmV0dXJucyB0cnVlIG1heFdvcmtlcnMgaGFzIGEgdmFsaWQgdmFsdWVcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVNYXhXb3JrZXJzKG1heFdvcmtlcnMpIHtcbiAgaWYgKCFpc051bWJlcihtYXhXb3JrZXJzKSB8fCAhaXNJbnRlZ2VyKG1heFdvcmtlcnMpIHx8IG1heFdvcmtlcnMgPCAxKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT3B0aW9uIG1heFdvcmtlcnMgbXVzdCBiZSBhbiBpbnRlZ2VyIG51bWJlciA+PSAxJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgdGhhdCB0aGUgbWluV29ya2VycyBvcHRpb24gaXMgYW4gaW50ZWdlciA+PSAwXG4gKiBAcGFyYW0geyp9IG1pbldvcmtlcnNcbiAqIEByZXR1cm5zIHtib29sZWFufSByZXR1cm5zIHRydWUgd2hlbiBtaW5Xb3JrZXJzIGhhcyBhIHZhbGlkIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlTWluV29ya2VycyhtaW5Xb3JrZXJzKSB7XG4gIGlmICghaXNOdW1iZXIobWluV29ya2VycykgfHwgIWlzSW50ZWdlcihtaW5Xb3JrZXJzKSB8fCBtaW5Xb3JrZXJzIDwgMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ09wdGlvbiBtaW5Xb3JrZXJzIG11c3QgYmUgYW4gaW50ZWdlciBudW1iZXIgPj0gMCcpO1xuICB9XG59XG5cbi8qKlxuICogVGVzdCB3aGV0aGVyIGEgdmFyaWFibGUgaXMgYSBudW1iZXJcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm5zIHtib29sZWFufSByZXR1cm5zIHRydWUgd2hlbiB2YWx1ZSBpcyBhIG51bWJlclxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJztcbn1cblxuLyoqXG4gKiBUZXN0IHdoZXRoZXIgYSBudW1iZXIgaXMgYW4gaW50ZWdlclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHZhbHVlIGlzIGFuIGludGVnZXJcbiAqL1xuZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7XG4gIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKSA9PSB2YWx1ZTtcbn1cbm1vZHVsZS5leHBvcnRzID0gUG9vbDtcblxuLyoqKi8gfSksXG5cbi8qKiovIDIxOTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUpIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLyoqXG4gKiBQcm9taXNlXG4gKlxuICogSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vUnViYVhhLzg1MDEzNTkgZnJvbSBSdWJhWGEgPHRyYXNoQHJ1YmF4YS5vcmc+XG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciAgIENhbGxlZCBhcyBoYW5kbGVyKHJlc29sdmU6IEZ1bmN0aW9uLCByZWplY3Q6IEZ1bmN0aW9uKVxuICogQHBhcmFtIHtQcm9taXNlfSBbcGFyZW50XSAgIFBhcmVudCBwcm9taXNlIGZvciBwcm9wYWdhdGlvbiBvZiBjYW5jZWwgYW5kIHRpbWVvdXRcbiAqL1xuZnVuY3Rpb24gUHJvbWlzZShoYW5kbGVyLCBwYXJlbnQpIHtcbiAgdmFyIG1lID0gdGhpcztcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdDb25zdHJ1Y3RvciBtdXN0IGJlIGNhbGxlZCB3aXRoIHRoZSBuZXcgb3BlcmF0b3InKTtcbiAgfVxuICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ0Z1bmN0aW9uIHBhcmFtZXRlciBoYW5kbGVyKHJlc29sdmUsIHJlamVjdCkgbWlzc2luZycpO1xuICB9XG4gIHZhciBfb25TdWNjZXNzID0gW107XG4gIHZhciBfb25GYWlsID0gW107XG5cbiAgLy8gc3RhdHVzXG4gIHRoaXMucmVzb2x2ZWQgPSBmYWxzZTtcbiAgdGhpcy5yZWplY3RlZCA9IGZhbHNlO1xuICB0aGlzLnBlbmRpbmcgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzIG9uU3VjY2VzcyBhbmQgb25GYWlsIGNhbGxiYWNrczogYWRkIHRoZW0gdG8gdGhlIHF1ZXVlLlxuICAgKiBPbmNlIHRoZSBwcm9taXNlIGlzIHJlc29sdmUsIHRoZSBmdW5jdGlvbiBfcHJvbWlzZSBpcyByZXBsYWNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblN1Y2Nlc3NcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25GYWlsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB2YXIgX3Byb2Nlc3MgPSBmdW5jdGlvbiBfcHJvY2VzcyhvblN1Y2Nlc3MsIG9uRmFpbCkge1xuICAgIF9vblN1Y2Nlc3MucHVzaChvblN1Y2Nlc3MpO1xuICAgIF9vbkZhaWwucHVzaChvbkZhaWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgYW4gb25TdWNjZXNzIGNhbGxiYWNrIGFuZCBvcHRpb25hbGx5IGFuIG9uRmFpbCBjYWxsYmFjayB0byB0aGUgUHJvbWlzZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblN1Y2Nlc3NcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRmFpbF1cbiAgICogQHJldHVybnMge1Byb21pc2V9IHByb21pc2VcbiAgICovXG4gIHRoaXMudGhlbiA9IGZ1bmN0aW9uIChvblN1Y2Nlc3MsIG9uRmFpbCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcyA9IG9uU3VjY2VzcyA/IF90aGVuKG9uU3VjY2VzcywgcmVzb2x2ZSwgcmVqZWN0KSA6IHJlc29sdmU7XG4gICAgICB2YXIgZiA9IG9uRmFpbCA/IF90aGVuKG9uRmFpbCwgcmVzb2x2ZSwgcmVqZWN0KSA6IHJlamVjdDtcbiAgICAgIF9wcm9jZXNzKHMsIGYpO1xuICAgIH0sIG1lKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVzb2x2ZSB0aGUgcHJvbWlzZVxuICAgKiBAcGFyYW0geyp9IHJlc3VsdFxuICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAqL1xuICB2YXIgX3Jlc29sdmUyID0gZnVuY3Rpb24gX3Jlc29sdmUocmVzdWx0KSB7XG4gICAgLy8gdXBkYXRlIHN0YXR1c1xuICAgIG1lLnJlc29sdmVkID0gdHJ1ZTtcbiAgICBtZS5yZWplY3RlZCA9IGZhbHNlO1xuICAgIG1lLnBlbmRpbmcgPSBmYWxzZTtcbiAgICBfb25TdWNjZXNzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICBmbihyZXN1bHQpO1xuICAgIH0pO1xuICAgIF9wcm9jZXNzID0gZnVuY3Rpb24gX3Byb2Nlc3Mob25TdWNjZXNzLCBvbkZhaWwpIHtcbiAgICAgIG9uU3VjY2VzcyhyZXN1bHQpO1xuICAgIH07XG4gICAgX3Jlc29sdmUyID0gX3JlamVjdDIgPSBmdW5jdGlvbiBfcmVqZWN0KCkge307XG4gICAgcmV0dXJuIG1lO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWplY3QgdGhlIHByb21pc2VcbiAgICogQHBhcmFtIHtFcnJvcn0gZXJyb3JcbiAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgKi9cbiAgdmFyIF9yZWplY3QyID0gZnVuY3Rpb24gX3JlamVjdChlcnJvcikge1xuICAgIC8vIHVwZGF0ZSBzdGF0dXNcbiAgICBtZS5yZXNvbHZlZCA9IGZhbHNlO1xuICAgIG1lLnJlamVjdGVkID0gdHJ1ZTtcbiAgICBtZS5wZW5kaW5nID0gZmFsc2U7XG4gICAgX29uRmFpbC5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgZm4oZXJyb3IpO1xuICAgIH0pO1xuICAgIF9wcm9jZXNzID0gZnVuY3Rpb24gX3Byb2Nlc3Mob25TdWNjZXNzLCBvbkZhaWwpIHtcbiAgICAgIG9uRmFpbChlcnJvcik7XG4gICAgfTtcbiAgICBfcmVzb2x2ZTIgPSBfcmVqZWN0MiA9IGZ1bmN0aW9uIF9yZWplY3QoKSB7fTtcbiAgICByZXR1cm4gbWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbmNlbCB0ZSBwcm9taXNlLiBUaGlzIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlIHdpdGggYSBDYW5jZWxsYXRpb25FcnJvclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gc2VsZlxuICAgKi9cbiAgdGhpcy5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50LmNhbmNlbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfcmVqZWN0MihuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XG4gICAgfVxuICAgIHJldHVybiBtZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IGEgdGltZW91dCBmb3IgdGhlIHByb21pc2UuIElmIHRoZSBwcm9taXNlIGlzIG5vdCByZXNvbHZlZCB3aXRoaW5cbiAgICogdGhlIHRpbWUsIHRoZSBwcm9taXNlIHdpbGwgYmUgY2FuY2VsbGVkIGFuZCBhIFRpbWVvdXRFcnJvciBpcyB0aHJvd24uXG4gICAqIElmIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkIGluIHRpbWUsIHRoZSB0aW1lb3V0IGlzIHJlbW92ZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSAgICAgRGVsYXkgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBzZWxmXG4gICAqL1xuICB0aGlzLnRpbWVvdXQgPSBmdW5jdGlvbiAoZGVsYXkpIHtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBwYXJlbnQudGltZW91dChkZWxheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfcmVqZWN0MihuZXcgVGltZW91dEVycm9yKCdQcm9taXNlIHRpbWVkIG91dCBhZnRlciAnICsgZGVsYXkgKyAnIG1zJykpO1xuICAgICAgfSwgZGVsYXkpO1xuICAgICAgbWUuYWx3YXlzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWU7XG4gIH07XG5cbiAgLy8gYXR0YWNoIGhhbmRsZXIgcGFzc2luZyB0aGUgcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9uc1xuICBoYW5kbGVyKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICBfcmVzb2x2ZTIocmVzdWx0KTtcbiAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgX3JlamVjdDIoZXJyb3IpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlIGdpdmVuIGNhbGxiYWNrLCB0aGVuIGNhbGwgcmVzb2x2ZS9yZWplY3QgYmFzZWQgb24gdGhlIHJldHVybmVkIHJlc3VsdFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdFxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX3RoZW4oY2FsbGJhY2ssIHJlc29sdmUsIHJlamVjdCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgcmVzID0gY2FsbGJhY2socmVzdWx0KTtcbiAgICAgIGlmIChyZXMgJiYgdHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiByZXNbJ2NhdGNoJ10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbWV0aG9kIHJldHVybmVkIGEgcHJvbWlzZVxuICAgICAgICByZXMudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBBZGQgYW4gb25GYWlsIGNhbGxiYWNrIHRvIHRoZSBQcm9taXNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZhaWxcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKi9cblByb21pc2UucHJvdG90eXBlWydjYXRjaCddID0gZnVuY3Rpb24gKG9uRmFpbCkge1xuICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uRmFpbCk7XG59O1xuXG4vLyBUT0RPOiBhZGQgc3VwcG9ydCBmb3IgUHJvbWlzZS5jYXRjaChFcnJvciwgY2FsbGJhY2spXG4vLyBUT0RPOiBhZGQgc3VwcG9ydCBmb3IgUHJvbWlzZS5jYXRjaChFcnJvciwgRXJyb3IsIGNhbGxiYWNrKVxuXG4vKipcbiAqIEV4ZWN1dGUgZ2l2ZW4gY2FsbGJhY2sgd2hlbiB0aGUgcHJvbWlzZSBlaXRoZXIgcmVzb2x2ZXMgb3IgcmVqZWN0cy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gcHJvbWlzZVxuICovXG5Qcm9taXNlLnByb3RvdHlwZS5hbHdheXMgPSBmdW5jdGlvbiAoZm4pIHtcbiAgcmV0dXJuIHRoaXMudGhlbihmbiwgZm4pO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIHByb3ZpZGVkIHByb21pc2VzIGFyZSByZXNvbHZlZCxcbiAqIGFuZCBmYWlscyB3aGVuIGFueSBvZiB0aGUgcHJvbWlzZXMgcmVzb2x2ZXMuXG4gKiBAcGFyYW0ge1Byb21pc2VbXX0gcHJvbWlzZXNcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBwcm9taXNlXG4gKi9cblByb21pc2UuYWxsID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlbWFpbmluZyA9IHByb21pc2VzLmxlbmd0aCxcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICBpZiAocmVtYWluaW5nKSB7XG4gICAgICBwcm9taXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChwLCBpKSB7XG4gICAgICAgIHAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgcmVzdWx0c1tpXSA9IHJlc3VsdDtcbiAgICAgICAgICByZW1haW5pbmctLTtcbiAgICAgICAgICBpZiAocmVtYWluaW5nID09IDApIHtcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICByZW1haW5pbmcgPSAwO1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUocmVzdWx0cyk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgcHJvbWlzZSByZXNvbHZlclxuICogQHJldHVybnMge3twcm9taXNlOiBQcm9taXNlLCByZXNvbHZlOiBGdW5jdGlvbiwgcmVqZWN0OiBGdW5jdGlvbn19IHJlc29sdmVyXG4gKi9cblByb21pc2UuZGVmZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciByZXNvbHZlciA9IHt9O1xuICByZXNvbHZlci5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlc29sdmVyLnJlc29sdmUgPSByZXNvbHZlO1xuICAgIHJlc29sdmVyLnJlamVjdCA9IHJlamVjdDtcbiAgfSk7XG4gIHJldHVybiByZXNvbHZlcjtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgY2FuY2VsbGF0aW9uIGVycm9yXG4gKiBAcGFyYW0ge1N0cmluZ30gW21lc3NhZ2VdXG4gKiBAZXh0ZW5kcyBFcnJvclxuICovXG5mdW5jdGlvbiBDYW5jZWxsYXRpb25FcnJvcihtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ3Byb21pc2UgY2FuY2VsbGVkJztcbiAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xufVxuQ2FuY2VsbGF0aW9uRXJyb3IucHJvdG90eXBlID0gbmV3IEVycm9yKCk7XG5DYW5jZWxsYXRpb25FcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBFcnJvcjtcbkNhbmNlbGxhdGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0NhbmNlbGxhdGlvbkVycm9yJztcblByb21pc2UuQ2FuY2VsbGF0aW9uRXJyb3IgPSBDYW5jZWxsYXRpb25FcnJvcjtcblxuLyoqXG4gKiBDcmVhdGUgYSB0aW1lb3V0IGVycm9yXG4gKiBAcGFyYW0ge1N0cmluZ30gW21lc3NhZ2VdXG4gKiBAZXh0ZW5kcyBFcnJvclxuICovXG5mdW5jdGlvbiBUaW1lb3V0RXJyb3IobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICd0aW1lb3V0IGV4Y2VlZGVkJztcbiAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xufVxuVGltZW91dEVycm9yLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpO1xuVGltZW91dEVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEVycm9yO1xuVGltZW91dEVycm9yLnByb3RvdHlwZS5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG5Qcm9taXNlLlRpbWVvdXRFcnJvciA9IFRpbWVvdXRFcnJvcjtcbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDc1MTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fdW51c2VkX3dlYnBhY2tfZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0W1wicmV0dXJuXCJdICE9IG51bGwpIGl0W1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5mdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9XG52YXIgUHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjE5KTtcbnZhciBlbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODI4KTtcbnZhciByZXF1aXJlRm9vbFdlYnBhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5Nyk7XG5cbi8qKlxuICogU3BlY2lhbCBtZXNzYWdlIHNlbnQgYnkgcGFyZW50IHdoaWNoIGNhdXNlcyBhIGNoaWxkIHByb2Nlc3Mgd29ya2VyIHRvIHRlcm1pbmF0ZSBpdHNlbGYuXG4gKiBOb3QgYSBcIm1lc3NhZ2Ugb2JqZWN0XCI7IHRoaXMgc3RyaW5nIGlzIHRoZSBlbnRpcmUgbWVzc2FnZS5cbiAqL1xudmFyIFRFUk1JTkFURV9NRVRIT0RfSUQgPSAnX193b3JrZXJwb29sLXRlcm1pbmF0ZV9fJztcblxuLyoqXG4gKiBJZiBzZW5kaW5nIGBURVJNSU5BVEVfTUVUSE9EX0lEYCBkb2VzIG5vdCBjYXVzZSB0aGUgY2hpbGQgcHJvY2VzcyB0byBleGl0IGluIHRoaXMgbWFueSBtaWxsaXNlY29uZHMsXG4gKiBmb3JjZS1raWxsIHRoZSBjaGlsZCBwcm9jZXNzLlxuICovXG52YXIgQ0hJTERfUFJPQ0VTU19FWElUX1RJTUVPVVQgPSAxMDAwO1xuZnVuY3Rpb24gZW5zdXJlV29ya2VyVGhyZWFkcygpIHtcbiAgdmFyIFdvcmtlclRocmVhZHMgPSB0cnlSZXF1aXJlV29ya2VyVGhyZWFkcygpO1xuICBpZiAoIVdvcmtlclRocmVhZHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtlclBvb2w6IHdvcmtlclR5cGUgPSBcXCd0aHJlYWRcXCcgaXMgbm90IHN1cHBvcnRlZCwgTm9kZSA+PSAxMS43LjAgcmVxdWlyZWQnKTtcbiAgfVxuICByZXR1cm4gV29ya2VyVGhyZWFkcztcbn1cblxuLy8gY2hlY2sgd2hldGhlciBXb3JrZXIgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyXG5mdW5jdGlvbiBlbnN1cmVXZWJXb3JrZXIoKSB7XG4gIC8vIFdvcmthcm91bmQgZm9yIGEgYnVnIGluIFBoYW50b21KUyAoT3IgUXRXZWJraXQpOiBodHRwczovL2dpdGh1Yi5jb20vYXJpeWEvcGhhbnRvbWpzL2lzc3Vlcy8xNDUzNFxuICBpZiAodHlwZW9mIFdvcmtlciAhPT0gJ2Z1bmN0aW9uJyAmJiAoKHR5cGVvZiBXb3JrZXIgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihXb3JrZXIpKSAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIFdvcmtlci5wcm90b3R5cGUuY29uc3RydWN0b3IgIT09ICdmdW5jdGlvbicpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdXb3JrZXJQb29sOiBXZWIgV29ya2VycyBub3Qgc3VwcG9ydGVkJyk7XG4gIH1cbn1cbmZ1bmN0aW9uIHRyeVJlcXVpcmVXb3JrZXJUaHJlYWRzKCkge1xuICB0cnkge1xuICAgIHJldHVybiByZXF1aXJlRm9vbFdlYnBhY2soJ3dvcmtlcl90aHJlYWRzJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKF90eXBlb2YoZXJyb3IpID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiBlcnJvci5jb2RlID09PSAnTU9EVUxFX05PVF9GT1VORCcpIHtcbiAgICAgIC8vIG5vIHdvcmtlcl90aHJlYWRzIGF2YWlsYWJsZSAob2xkIHZlcnNpb24gb2Ygbm9kZS5qcylcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuLy8gZ2V0IHRoZSBkZWZhdWx0IHdvcmtlciBzY3JpcHRcbmZ1bmN0aW9uIGdldERlZmF1bHRXb3JrZXIoKSB7XG4gIGlmIChlbnZpcm9ubWVudC5wbGF0Zm9ybSA9PT0gJ2Jyb3dzZXInKSB7XG4gICAgLy8gdGVzdCB3aGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIGFsbCBmZWF0dXJlcyB0aGF0IHdlIG5lZWRcbiAgICBpZiAodHlwZW9mIEJsb2IgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jsb2Igbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcicpO1xuICAgIH1cbiAgICBpZiAoIXdpbmRvdy5VUkwgfHwgdHlwZW9mIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSTC5jcmVhdGVPYmplY3RVUkwgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcicpO1xuICAgIH1cblxuICAgIC8vIHVzZSBlbWJlZGRlZCB3b3JrZXIuanNcbiAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtfX3dlYnBhY2tfcmVxdWlyZV9fKDY3MCldLCB7XG4gICAgICB0eXBlOiAndGV4dC9qYXZhc2NyaXB0J1xuICAgIH0pO1xuICAgIHJldHVybiB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgfSBlbHNlIHtcbiAgICAvLyB1c2UgZXh0ZXJuYWwgd29ya2VyLmpzIGluIGN1cnJlbnQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIF9fZGlybmFtZSArICcvd29ya2VyLmpzJztcbiAgfVxufVxuZnVuY3Rpb24gc2V0dXBXb3JrZXIoc2NyaXB0LCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLndvcmtlclR5cGUgPT09ICd3ZWInKSB7XG4gICAgLy8gYnJvd3NlciBvbmx5XG4gICAgZW5zdXJlV2ViV29ya2VyKCk7XG4gICAgcmV0dXJuIHNldHVwQnJvd3NlcldvcmtlcihzY3JpcHQsIFdvcmtlcik7XG4gIH0gZWxzZSBpZiAob3B0aW9ucy53b3JrZXJUeXBlID09PSAndGhyZWFkJykge1xuICAgIC8vIG5vZGUuanMgb25seVxuICAgIFdvcmtlclRocmVhZHMgPSBlbnN1cmVXb3JrZXJUaHJlYWRzKCk7XG4gICAgcmV0dXJuIHNldHVwV29ya2VyVGhyZWFkV29ya2VyKHNjcmlwdCwgV29ya2VyVGhyZWFkcywgb3B0aW9ucy53b3JrZXJUaHJlYWRPcHRzKTtcbiAgfSBlbHNlIGlmIChvcHRpb25zLndvcmtlclR5cGUgPT09ICdwcm9jZXNzJyB8fCAhb3B0aW9ucy53b3JrZXJUeXBlKSB7XG4gICAgLy8gbm9kZS5qcyBvbmx5XG4gICAgcmV0dXJuIHNldHVwUHJvY2Vzc1dvcmtlcihzY3JpcHQsIHJlc29sdmVGb3JrT3B0aW9ucyhvcHRpb25zKSwgcmVxdWlyZUZvb2xXZWJwYWNrKCdjaGlsZF9wcm9jZXNzJykpO1xuICB9IGVsc2Uge1xuICAgIC8vIG9wdGlvbnMud29ya2VyVHlwZSA9PT0gJ2F1dG8nIG9yIHVuZGVmaW5lZFxuICAgIGlmIChlbnZpcm9ubWVudC5wbGF0Zm9ybSA9PT0gJ2Jyb3dzZXInKSB7XG4gICAgICBlbnN1cmVXZWJXb3JrZXIoKTtcbiAgICAgIHJldHVybiBzZXR1cEJyb3dzZXJXb3JrZXIoc2NyaXB0LCBXb3JrZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBlbnZpcm9ubWVudC5wbGF0Zm9ybSA9PT0gJ25vZGUnXG4gICAgICB2YXIgV29ya2VyVGhyZWFkcyA9IHRyeVJlcXVpcmVXb3JrZXJUaHJlYWRzKCk7XG4gICAgICBpZiAoV29ya2VyVGhyZWFkcykge1xuICAgICAgICByZXR1cm4gc2V0dXBXb3JrZXJUaHJlYWRXb3JrZXIoc2NyaXB0LCBXb3JrZXJUaHJlYWRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZXR1cFByb2Nlc3NXb3JrZXIoc2NyaXB0LCByZXNvbHZlRm9ya09wdGlvbnMob3B0aW9ucyksIHJlcXVpcmVGb29sV2VicGFjaygnY2hpbGRfcHJvY2VzcycpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHNldHVwQnJvd3NlcldvcmtlcihzY3JpcHQsIFdvcmtlcikge1xuICAvLyBjcmVhdGUgdGhlIHdlYiB3b3JrZXJcbiAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoc2NyaXB0KTtcbiAgd29ya2VyLmlzQnJvd3NlcldvcmtlciA9IHRydWU7XG4gIC8vIGFkZCBub2RlLmpzIEFQSSB0byB0aGUgd2ViIHdvcmtlclxuICB3b3JrZXIub24gPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgY2FsbGJhY2sobWVzc2FnZS5kYXRhKTtcbiAgICB9KTtcbiAgfTtcbiAgd29ya2VyLnNlbmQgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHRoaXMucG9zdE1lc3NhZ2UobWVzc2FnZSk7XG4gIH07XG4gIHJldHVybiB3b3JrZXI7XG59XG5mdW5jdGlvbiBzZXR1cFdvcmtlclRocmVhZFdvcmtlcihzY3JpcHQsIFdvcmtlclRocmVhZHMsIHdvcmtlclRocmVhZE9wdGlvbnMpIHtcbiAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXJUaHJlYWRzLldvcmtlcihzY3JpcHQsIF9vYmplY3RTcHJlYWQoe1xuICAgIHN0ZG91dDogZmFsc2UsXG4gICAgLy8gYXV0b21hdGljYWxseSBwaXBlIHdvcmtlci5TVERPVVQgdG8gcHJvY2Vzcy5TVERPVVRcbiAgICBzdGRlcnI6IGZhbHNlXG4gIH0sIHdvcmtlclRocmVhZE9wdGlvbnMpKTtcbiAgd29ya2VyLmlzV29ya2VyVGhyZWFkID0gdHJ1ZTtcbiAgLy8gbWFrZSB0aGUgd29ya2VyIG1pbWljIGEgY2hpbGRfcHJvY2Vzc1xuICB3b3JrZXIuc2VuZCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdGhpcy5wb3N0TWVzc2FnZShtZXNzYWdlKTtcbiAgfTtcbiAgd29ya2VyLmtpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy50ZXJtaW5hdGUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgd29ya2VyLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy50ZXJtaW5hdGUoKTtcbiAgfTtcbiAgcmV0dXJuIHdvcmtlcjtcbn1cbmZ1bmN0aW9uIHNldHVwUHJvY2Vzc1dvcmtlcihzY3JpcHQsIG9wdGlvbnMsIGNoaWxkX3Byb2Nlc3MpIHtcbiAgLy8gbm8gV29ya2VyVGhyZWFkcywgZmFsbGJhY2sgdG8gc3ViLXByb2Nlc3MgYmFzZWQgd29ya2Vyc1xuICB2YXIgd29ya2VyID0gY2hpbGRfcHJvY2Vzcy5mb3JrKHNjcmlwdCwgb3B0aW9ucy5mb3JrQXJncywgb3B0aW9ucy5mb3JrT3B0cyk7XG4gIHdvcmtlci5pc0NoaWxkUHJvY2VzcyA9IHRydWU7XG4gIHJldHVybiB3b3JrZXI7XG59XG5cbi8vIGFkZCBkZWJ1ZyBmbGFncyB0byBjaGlsZCBwcm9jZXNzZXMgaWYgdGhlIG5vZGUgaW5zcGVjdG9yIGlzIGFjdGl2ZVxuZnVuY3Rpb24gcmVzb2x2ZUZvcmtPcHRpb25zKG9wdHMpIHtcbiAgb3B0cyA9IG9wdHMgfHwge307XG4gIHZhciBwcm9jZXNzRXhlY0FyZ3YgPSBwcm9jZXNzLmV4ZWNBcmd2LmpvaW4oJyAnKTtcbiAgdmFyIGluc3BlY3RvckFjdGl2ZSA9IHByb2Nlc3NFeGVjQXJndi5pbmRleE9mKCctLWluc3BlY3QnKSAhPT0gLTE7XG4gIHZhciBkZWJ1Z0JyayA9IHByb2Nlc3NFeGVjQXJndi5pbmRleE9mKCctLWRlYnVnLWJyaycpICE9PSAtMTtcbiAgdmFyIGV4ZWNBcmd2ID0gW107XG4gIGlmIChpbnNwZWN0b3JBY3RpdmUpIHtcbiAgICBleGVjQXJndi5wdXNoKCctLWluc3BlY3Q9JyArIG9wdHMuZGVidWdQb3J0KTtcbiAgICBpZiAoZGVidWdCcmspIHtcbiAgICAgIGV4ZWNBcmd2LnB1c2goJy0tZGVidWctYnJrJyk7XG4gICAgfVxuICB9XG4gIHByb2Nlc3MuZXhlY0FyZ3YuZm9yRWFjaChmdW5jdGlvbiAoYXJnKSB7XG4gICAgaWYgKGFyZy5pbmRleE9mKCctLW1heC1vbGQtc3BhY2Utc2l6ZScpID4gLTEpIHtcbiAgICAgIGV4ZWNBcmd2LnB1c2goYXJnKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgb3B0cywge1xuICAgIGZvcmtBcmdzOiBvcHRzLmZvcmtBcmdzLFxuICAgIGZvcmtPcHRzOiBPYmplY3QuYXNzaWduKHt9LCBvcHRzLmZvcmtPcHRzLCB7XG4gICAgICBleGVjQXJndjogKG9wdHMuZm9ya09wdHMgJiYgb3B0cy5mb3JrT3B0cy5leGVjQXJndiB8fCBbXSkuY29uY2F0KGV4ZWNBcmd2KVxuICAgIH0pXG4gIH0pO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc2VyaWFsaXplZCBlcnJvciB0byBFcnJvclxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBFcnJvciB0aGF0IGhhcyBiZWVuIHNlcmlhbGl6ZWQgYW5kIHBhcnNlZCB0byBvYmplY3RcbiAqIEByZXR1cm4ge0Vycm9yfSBUaGUgZXF1aXZhbGVudCBFcnJvci5cbiAqL1xuZnVuY3Rpb24gb2JqZWN0VG9FcnJvcihvYmopIHtcbiAgdmFyIHRlbXAgPSBuZXcgRXJyb3IoJycpO1xuICB2YXIgcHJvcHMgPSBPYmplY3Qua2V5cyhvYmopO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdGVtcFtwcm9wc1tpXV0gPSBvYmpbcHJvcHNbaV1dO1xuICB9XG4gIHJldHVybiB0ZW1wO1xufVxuXG4vKipcbiAqIEEgV29ya2VySGFuZGxlciBjb250cm9scyBhIHNpbmdsZSB3b3JrZXIuIFRoaXMgd29ya2VyIGNhbiBiZSBhIGNoaWxkIHByb2Nlc3NcbiAqIG9uIG5vZGUuanMgb3IgYSBXZWJXb3JrZXIgaW4gYSBicm93c2VyIGVudmlyb25tZW50LlxuICogQHBhcmFtIHtTdHJpbmd9IFtzY3JpcHRdIElmIG5vIHNjcmlwdCBpcyBwcm92aWRlZCwgYSBkZWZhdWx0IHdvcmtlciB3aXRoIGFcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBydW4gd2lsbCBiZSBjcmVhdGVkLlxuICogQHBhcmFtIHtXb3JrZXJQb29sT3B0aW9uc30gX29wdGlvbnMgU2VlIGRvY3NcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBXb3JrZXJIYW5kbGVyKHNjcmlwdCwgX29wdGlvbnMpIHtcbiAgdmFyIG1lID0gdGhpcztcbiAgdmFyIG9wdGlvbnMgPSBfb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5zY3JpcHQgPSBzY3JpcHQgfHwgZ2V0RGVmYXVsdFdvcmtlcigpO1xuICB0aGlzLndvcmtlciA9IHNldHVwV29ya2VyKHRoaXMuc2NyaXB0LCBvcHRpb25zKTtcbiAgdGhpcy5kZWJ1Z1BvcnQgPSBvcHRpb25zLmRlYnVnUG9ydDtcbiAgdGhpcy5mb3JrT3B0cyA9IG9wdGlvbnMuZm9ya09wdHM7XG4gIHRoaXMuZm9ya0FyZ3MgPSBvcHRpb25zLmZvcmtBcmdzO1xuICB0aGlzLndvcmtlclRocmVhZE9wdHMgPSBvcHRpb25zLndvcmtlclRocmVhZE9wdHM7XG5cbiAgLy8gVGhlIHJlYWR5IG1lc3NhZ2UgaXMgb25seSBzZW50IGlmIHRoZSB3b3JrZXIuYWRkIG1ldGhvZCBpcyBjYWxsZWQgKEFuZCB0aGUgZGVmYXVsdCBzY3JpcHQgaXMgbm90IHVzZWQpXG4gIGlmICghc2NyaXB0KSB7XG4gICAgdGhpcy53b3JrZXIucmVhZHkgPSB0cnVlO1xuICB9XG5cbiAgLy8gcXVldWUgZm9yIHJlcXVlc3RzIHRoYXQgYXJlIHJlY2VpdmVkIGJlZm9yZSB0aGUgd29ya2VyIGlzIHJlYWR5XG4gIHRoaXMucmVxdWVzdFF1ZXVlID0gW107XG4gIHRoaXMud29ya2VyLm9uKCdtZXNzYWdlJywgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgaWYgKG1lLnRlcm1pbmF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZXNwb25zZSA9PT0gJ3N0cmluZycgJiYgcmVzcG9uc2UgPT09ICdyZWFkeScpIHtcbiAgICAgIG1lLndvcmtlci5yZWFkeSA9IHRydWU7XG4gICAgICBkaXNwYXRjaFF1ZXVlZFJlcXVlc3RzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGZpbmQgdGhlIHRhc2sgZnJvbSB0aGUgcHJvY2Vzc2luZyBxdWV1ZSwgYW5kIHJ1biB0aGUgdGFza3MgY2FsbGJhY2tcbiAgICAgIHZhciBpZCA9IHJlc3BvbnNlLmlkO1xuICAgICAgdmFyIHRhc2sgPSBtZS5wcm9jZXNzaW5nW2lkXTtcbiAgICAgIGlmICh0YXNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmlzRXZlbnQpIHtcbiAgICAgICAgICBpZiAodGFzay5vcHRpb25zICYmIHR5cGVvZiB0YXNrLm9wdGlvbnMub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRhc2sub3B0aW9ucy5vbihyZXNwb25zZS5wYXlsb2FkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmVtb3ZlIHRoZSB0YXNrIGZyb20gdGhlIHF1ZXVlXG4gICAgICAgICAgZGVsZXRlIG1lLnByb2Nlc3NpbmdbaWRdO1xuXG4gICAgICAgICAgLy8gdGVzdCBpZiB3ZSBuZWVkIHRvIHRlcm1pbmF0ZVxuICAgICAgICAgIGlmIChtZS50ZXJtaW5hdGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gY29tcGxldGUgd29ya2VyIHRlcm1pbmF0aW9uIGlmIGFsbCB0YXNrcyBhcmUgZmluaXNoZWRcbiAgICAgICAgICAgIG1lLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJlc29sdmUgdGhlIHRhc2sncyBwcm9taXNlXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICB0YXNrLnJlc29sdmVyLnJlamVjdChvYmplY3RUb0Vycm9yKHJlc3BvbnNlLmVycm9yKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2sucmVzb2x2ZXIucmVzb2x2ZShyZXNwb25zZS5yZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gcmVqZWN0IGFsbCBydW5uaW5nIHRhc2tzIG9uIHdvcmtlciBlcnJvclxuICBmdW5jdGlvbiBvbkVycm9yKGVycm9yKSB7XG4gICAgbWUudGVybWluYXRlZCA9IHRydWU7XG4gICAgZm9yICh2YXIgaWQgaW4gbWUucHJvY2Vzc2luZykge1xuICAgICAgaWYgKG1lLnByb2Nlc3NpbmdbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbWUucHJvY2Vzc2luZ1tpZF0ucmVzb2x2ZXIucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbWUucHJvY2Vzc2luZyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICAvLyBzZW5kIGFsbCBxdWV1ZWQgcmVxdWVzdHMgdG8gd29ya2VyXG4gIGZ1bmN0aW9uIGRpc3BhdGNoUXVldWVkUmVxdWVzdHMoKSB7XG4gICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1lLnJlcXVlc3RRdWV1ZS5zcGxpY2UoMCkpLFxuICAgICAgX3N0ZXA7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gX3N0ZXAudmFsdWU7XG4gICAgICAgIG1lLndvcmtlci5zZW5kKHJlcXVlc3QpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgX2l0ZXJhdG9yLmYoKTtcbiAgICB9XG4gIH1cbiAgdmFyIHdvcmtlciA9IHRoaXMud29ya2VyO1xuICAvLyBsaXN0ZW4gZm9yIHdvcmtlciBtZXNzYWdlcyBlcnJvciBhbmQgZXhpdFxuICB0aGlzLndvcmtlci5vbignZXJyb3InLCBvbkVycm9yKTtcbiAgdGhpcy53b3JrZXIub24oJ2V4aXQnLCBmdW5jdGlvbiAoZXhpdENvZGUsIHNpZ25hbENvZGUpIHtcbiAgICB2YXIgbWVzc2FnZSA9ICdXb3JrZXJwb29sIFdvcmtlciB0ZXJtaW5hdGVkIFVuZXhwZWN0ZWRseVxcbic7XG4gICAgbWVzc2FnZSArPSAnICAgIGV4aXRDb2RlOiBgJyArIGV4aXRDb2RlICsgJ2BcXG4nO1xuICAgIG1lc3NhZ2UgKz0gJyAgICBzaWduYWxDb2RlOiBgJyArIHNpZ25hbENvZGUgKyAnYFxcbic7XG4gICAgbWVzc2FnZSArPSAnICAgIHdvcmtlcnBvb2wuc2NyaXB0OiBgJyArIG1lLnNjcmlwdCArICdgXFxuJztcbiAgICBtZXNzYWdlICs9ICcgICAgc3Bhd25BcmdzOiBgJyArIHdvcmtlci5zcGF3bmFyZ3MgKyAnYFxcbic7XG4gICAgbWVzc2FnZSArPSAnICAgIHNwYXduZmlsZTogYCcgKyB3b3JrZXIuc3Bhd25maWxlICsgJ2BcXG4nO1xuICAgIG1lc3NhZ2UgKz0gJyAgICBzdGRvdXQ6IGAnICsgd29ya2VyLnN0ZG91dCArICdgXFxuJztcbiAgICBtZXNzYWdlICs9ICcgICAgc3RkZXJyOiBgJyArIHdvcmtlci5zdGRlcnIgKyAnYFxcbic7XG4gICAgb25FcnJvcihuZXcgRXJyb3IobWVzc2FnZSkpO1xuICB9KTtcbiAgdGhpcy5wcm9jZXNzaW5nID0gT2JqZWN0LmNyZWF0ZShudWxsKTsgLy8gcXVldWUgd2l0aCB0YXNrcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3NcblxuICB0aGlzLnRlcm1pbmF0aW5nID0gZmFsc2U7XG4gIHRoaXMudGVybWluYXRlZCA9IGZhbHNlO1xuICB0aGlzLnRlcm1pbmF0aW9uSGFuZGxlciA9IG51bGw7XG4gIHRoaXMubGFzdElkID0gMDtcbn1cblxuLyoqXG4gKiBHZXQgYSBsaXN0IHdpdGggbWV0aG9kcyBhdmFpbGFibGUgb24gdGhlIHdvcmtlci5cbiAqIEByZXR1cm4ge1Byb21pc2UuPFN0cmluZ1tdLCBFcnJvcj59IG1ldGhvZHNcbiAqL1xuV29ya2VySGFuZGxlci5wcm90b3R5cGUubWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZXhlYygnbWV0aG9kcycpO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlIGEgbWV0aG9kIHdpdGggZ2l2ZW4gcGFyYW1ldGVycyBvbiB0aGUgd29ya2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kXG4gKiBAcGFyYW0ge0FycmF5fSBbcGFyYW1zXVxuICogQHBhcmFtIHt7cmVzb2x2ZTogRnVuY3Rpb24sIHJlamVjdDogRnVuY3Rpb259fSBbcmVzb2x2ZXJdXG4gKiBAcGFyYW0ge0V4ZWNPcHRpb25zfSAgW29wdGlvbnNdXG4gKiBAcmV0dXJuIHtQcm9taXNlLjwqLCBFcnJvcj59IHJlc3VsdFxuICovXG5Xb3JrZXJIYW5kbGVyLnByb3RvdHlwZS5leGVjID0gZnVuY3Rpb24gKG1ldGhvZCwgcGFyYW1zLCByZXNvbHZlciwgb3B0aW9ucykge1xuICBpZiAoIXJlc29sdmVyKSB7XG4gICAgcmVzb2x2ZXIgPSBQcm9taXNlLmRlZmVyKCk7XG4gIH1cblxuICAvLyBnZW5lcmF0ZSBhIHVuaXF1ZSBpZCBmb3IgdGhlIHRhc2tcbiAgdmFyIGlkID0gKyt0aGlzLmxhc3RJZDtcblxuICAvLyByZWdpc3RlciBhIG5ldyB0YXNrIGFzIGJlaW5nIGluIHByb2dyZXNzXG4gIHRoaXMucHJvY2Vzc2luZ1tpZF0gPSB7XG4gICAgaWQ6IGlkLFxuICAgIHJlc29sdmVyOiByZXNvbHZlcixcbiAgICBvcHRpb25zOiBvcHRpb25zXG4gIH07XG5cbiAgLy8gYnVpbGQgYSBKU09OLVJQQyByZXF1ZXN0XG4gIHZhciByZXF1ZXN0ID0ge1xuICAgIGlkOiBpZCxcbiAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICBwYXJhbXM6IHBhcmFtc1xuICB9O1xuICBpZiAodGhpcy50ZXJtaW5hdGVkKSB7XG4gICAgcmVzb2x2ZXIucmVqZWN0KG5ldyBFcnJvcignV29ya2VyIGlzIHRlcm1pbmF0ZWQnKSk7XG4gIH0gZWxzZSBpZiAodGhpcy53b3JrZXIucmVhZHkpIHtcbiAgICAvLyBzZW5kIHRoZSByZXF1ZXN0IHRvIHRoZSB3b3JrZXJcbiAgICB0aGlzLndvcmtlci5zZW5kKHJlcXVlc3QpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucmVxdWVzdFF1ZXVlLnB1c2gocmVxdWVzdCk7XG4gIH1cblxuICAvLyBvbiBjYW5jZWxsYXRpb24sIGZvcmNlIHRoZSB3b3JrZXIgdG8gdGVybWluYXRlXG4gIHZhciBtZSA9IHRoaXM7XG4gIHJldHVybiByZXNvbHZlci5wcm9taXNlW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvbWlzZS5DYW5jZWxsYXRpb25FcnJvciB8fCBlcnJvciBpbnN0YW5jZW9mIFByb21pc2UuVGltZW91dEVycm9yKSB7XG4gICAgICAvLyByZW1vdmUgdGhpcyB0YXNrIGZyb20gdGhlIHF1ZXVlLiBJdCBpcyBhbHJlYWR5IHJlamVjdGVkIChoZW5jZSB0aGlzXG4gICAgICAvLyBjYXRjaCBldmVudCksIGFuZCBlbHNlIGl0IHdpbGwgYmUgcmVqZWN0ZWQgYWdhaW4gd2hlbiB0ZXJtaW5hdGluZ1xuICAgICAgZGVsZXRlIG1lLnByb2Nlc3NpbmdbaWRdO1xuXG4gICAgICAvLyB0ZXJtaW5hdGUgd29ya2VyXG4gICAgICByZXR1cm4gbWUudGVybWluYXRlQW5kTm90aWZ5KHRydWUpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIFRlc3Qgd2hldGhlciB0aGUgd29ya2VyIGlzIHdvcmtpbmcgb3Igbm90XG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIHdvcmtlciBpcyBidXN5XG4gKi9cbldvcmtlckhhbmRsZXIucHJvdG90eXBlLmJ1c3kgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnByb2Nlc3NpbmcpLmxlbmd0aCA+IDA7XG59O1xuXG4vKipcbiAqIFRlcm1pbmF0ZSB0aGUgd29ya2VyLlxuICogQHBhcmFtIHtib29sZWFufSBbZm9yY2U9ZmFsc2VdICAgSWYgZmFsc2UgKGRlZmF1bHQpLCB0aGUgd29ya2VyIGlzIHRlcm1pbmF0ZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIGZpbmlzaGluZyBhbGwgdGFza3MgY3VycmVudGx5IGluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy4gSWYgdHJ1ZSwgdGhlIHdvcmtlciB3aWxsIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hdGVkIGltbWVkaWF0ZWx5LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW2NhbGxiYWNrPW51bGxdIElmIHByb3ZpZGVkLCB3aWxsIGJlIGNhbGxlZCB3aGVuIHByb2Nlc3MgdGVybWluYXRlcy5cbiAqL1xuV29ya2VySGFuZGxlci5wcm90b3R5cGUudGVybWluYXRlID0gZnVuY3Rpb24gKGZvcmNlLCBjYWxsYmFjaykge1xuICB2YXIgbWUgPSB0aGlzO1xuICBpZiAoZm9yY2UpIHtcbiAgICAvLyBjYW5jZWwgYWxsIHRhc2tzIGluIHByb2dyZXNzXG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy5wcm9jZXNzaW5nKSB7XG4gICAgICBpZiAodGhpcy5wcm9jZXNzaW5nW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc2luZ1tpZF0ucmVzb2x2ZXIucmVqZWN0KG5ldyBFcnJvcignV29ya2VyIHRlcm1pbmF0ZWQnKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucHJvY2Vzc2luZyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMudGVybWluYXRpb25IYW5kbGVyID0gY2FsbGJhY2s7XG4gIH1cbiAgaWYgKCF0aGlzLmJ1c3koKSkge1xuICAgIC8vIGFsbCB0YXNrcyBhcmUgZmluaXNoZWQuIGtpbGwgdGhlIHdvcmtlclxuICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24gY2xlYW51cChlcnIpIHtcbiAgICAgIG1lLnRlcm1pbmF0ZWQgPSB0cnVlO1xuICAgICAgaWYgKG1lLndvcmtlciAhPSBudWxsICYmIG1lLndvcmtlci5yZW1vdmVBbGxMaXN0ZW5lcnMpIHtcbiAgICAgICAgLy8gcmVtb3ZlQWxsTGlzdGVuZXJzIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBjaGlsZF9wcm9jZXNzXG4gICAgICAgIG1lLndvcmtlci5yZW1vdmVBbGxMaXN0ZW5lcnMoJ21lc3NhZ2UnKTtcbiAgICAgIH1cbiAgICAgIG1lLndvcmtlciA9IG51bGw7XG4gICAgICBtZS50ZXJtaW5hdGluZyA9IGZhbHNlO1xuICAgICAgaWYgKG1lLnRlcm1pbmF0aW9uSGFuZGxlcikge1xuICAgICAgICBtZS50ZXJtaW5hdGlvbkhhbmRsZXIoZXJyLCBtZSk7XG4gICAgICB9IGVsc2UgaWYgKGVycikge1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodGhpcy53b3JrZXIpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy53b3JrZXIua2lsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAodGhpcy53b3JrZXIua2lsbGVkKSB7XG4gICAgICAgICAgY2xlYW51cChuZXcgRXJyb3IoJ3dvcmtlciBhbHJlYWR5IGtpbGxlZCEnKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLndvcmtlci5pc0NoaWxkUHJvY2Vzcykge1xuICAgICAgICAgIHZhciBjbGVhbkV4aXRUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobWUud29ya2VyKSB7XG4gICAgICAgICAgICAgIG1lLndvcmtlci5raWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgQ0hJTERfUFJPQ0VTU19FWElUX1RJTUVPVVQpO1xuICAgICAgICAgIHRoaXMud29ya2VyLm9uY2UoJ2V4aXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoY2xlYW5FeGl0VGltZW91dCk7XG4gICAgICAgICAgICBpZiAobWUud29ya2VyKSB7XG4gICAgICAgICAgICAgIG1lLndvcmtlci5raWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICh0aGlzLndvcmtlci5yZWFkeSkge1xuICAgICAgICAgICAgdGhpcy53b3JrZXIuc2VuZChURVJNSU5BVEVfTUVUSE9EX0lEKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0UXVldWUucHVzaChURVJNSU5BVEVfTUVUSE9EX0lEKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gd29ya2VyX3RocmVhZFxuICAgICAgICAgIHRoaXMud29ya2VyLmtpbGwoKTtcbiAgICAgICAgICB0aGlzLndvcmtlci5raWxsZWQgPSB0cnVlO1xuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLndvcmtlci50ZXJtaW5hdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy53b3JrZXIudGVybWluYXRlKCk7IC8vIHdlYiB3b3JrZXJcbiAgICAgICAgdGhpcy53b3JrZXIua2lsbGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHRlcm1pbmF0ZSB3b3JrZXInKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICB9IGVsc2Uge1xuICAgIC8vIHdlIGNhbid0IHRlcm1pbmF0ZSBpbW1lZGlhdGVseSwgdGhlcmUgYXJlIHN0aWxsIHRhc2tzIGJlaW5nIGV4ZWN1dGVkXG4gICAgdGhpcy50ZXJtaW5hdGluZyA9IHRydWU7XG4gIH1cbn07XG5cbi8qKlxuICogVGVybWluYXRlIHRoZSB3b3JrZXIsIHJldHVybmluZyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSB0ZXJtaW5hdGlvbiBoYXMgYmVlbiBkb25lLlxuICogQHBhcmFtIHtib29sZWFufSBbZm9yY2U9ZmFsc2VdICAgSWYgZmFsc2UgKGRlZmF1bHQpLCB0aGUgd29ya2VyIGlzIHRlcm1pbmF0ZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIGZpbmlzaGluZyBhbGwgdGFza3MgY3VycmVudGx5IGluXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy4gSWYgdHJ1ZSwgdGhlIHdvcmtlciB3aWxsIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hdGVkIGltbWVkaWF0ZWx5LlxuICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lb3V0XSAgICAgICAgSWYgcHJvdmlkZWQgYW5kIG5vbi16ZXJvLCB3b3JrZXIgdGVybWluYXRpb24gcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciB0aW1lb3V0IGlmIHdvcmtlciBwcm9jZXNzIGhhcyBub3QgYmVlbiB0ZXJtaW5hdGVkLlxuICogQHJldHVybiB7UHJvbWlzZS48V29ya2VySGFuZGxlciwgRXJyb3I+fVxuICovXG5Xb3JrZXJIYW5kbGVyLnByb3RvdHlwZS50ZXJtaW5hdGVBbmROb3RpZnkgPSBmdW5jdGlvbiAoZm9yY2UsIHRpbWVvdXQpIHtcbiAgdmFyIHJlc29sdmVyID0gUHJvbWlzZS5kZWZlcigpO1xuICBpZiAodGltZW91dCkge1xuICAgIHJlc29sdmVyLnByb21pc2UudGltZW91dCA9IHRpbWVvdXQ7XG4gIH1cbiAgdGhpcy50ZXJtaW5hdGUoZm9yY2UsIGZ1bmN0aW9uIChlcnIsIHdvcmtlcikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJlc29sdmVyLnJlamVjdChlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlci5yZXNvbHZlKHdvcmtlcik7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc29sdmVyLnByb21pc2U7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBXb3JrZXJIYW5kbGVyO1xubW9kdWxlLmV4cG9ydHMuX3RyeVJlcXVpcmVXb3JrZXJUaHJlYWRzID0gdHJ5UmVxdWlyZVdvcmtlclRocmVhZHM7XG5tb2R1bGUuZXhwb3J0cy5fc2V0dXBQcm9jZXNzV29ya2VyID0gc2V0dXBQcm9jZXNzV29ya2VyO1xubW9kdWxlLmV4cG9ydHMuX3NldHVwQnJvd3NlcldvcmtlciA9IHNldHVwQnJvd3Nlcldvcmtlcjtcbm1vZHVsZS5leHBvcnRzLl9zZXR1cFdvcmtlclRocmVhZFdvcmtlciA9IHNldHVwV29ya2VyVGhyZWFkV29ya2VyO1xubW9kdWxlLmV4cG9ydHMuZW5zdXJlV29ya2VyVGhyZWFkcyA9IGVuc3VyZVdvcmtlclRocmVhZHM7XG5cbi8qKiovIH0pLFxuXG4vKioqLyA4MzM6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBNQVhfUE9SVFMgPSA2NTUzNTtcbm1vZHVsZS5leHBvcnRzID0gRGVidWdQb3J0QWxsb2NhdG9yO1xuZnVuY3Rpb24gRGVidWdQb3J0QWxsb2NhdG9yKCkge1xuICB0aGlzLnBvcnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5sZW5ndGggPSAwO1xufVxuRGVidWdQb3J0QWxsb2NhdG9yLnByb3RvdHlwZS5uZXh0QXZhaWxhYmxlU3RhcnRpbmdBdCA9IGZ1bmN0aW9uIChzdGFydGluZykge1xuICB3aGlsZSAodGhpcy5wb3J0c1tzdGFydGluZ10gPT09IHRydWUpIHtcbiAgICBzdGFydGluZysrO1xuICB9XG4gIGlmIChzdGFydGluZyA+PSBNQVhfUE9SVFMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtlclBvb2wgZGVidWcgcG9ydCBsaW1pdCByZWFjaGVkOiAnICsgc3RhcnRpbmcgKyAnPj0gJyArIE1BWF9QT1JUUyk7XG4gIH1cbiAgdGhpcy5wb3J0c1tzdGFydGluZ10gPSB0cnVlO1xuICB0aGlzLmxlbmd0aCsrO1xuICByZXR1cm4gc3RhcnRpbmc7XG59O1xuRGVidWdQb3J0QWxsb2NhdG9yLnByb3RvdHlwZS5yZWxlYXNlUG9ydCA9IGZ1bmN0aW9uIChwb3J0KSB7XG4gIGRlbGV0ZSB0aGlzLnBvcnRzW3BvcnRdO1xuICB0aGlzLmxlbmd0aC0tO1xufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDgyODpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fdW51c2VkX3dlYnBhY2tfZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgcmVxdWlyZUZvb2xXZWJwYWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOTcpO1xuXG4vLyBzb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9mbGV4ZGluZXNoL2Jyb3dzZXItb3Itbm9kZVxudmFyIGlzTm9kZSA9IGZ1bmN0aW9uIGlzTm9kZShub2RlUHJvY2Vzcykge1xuICByZXR1cm4gdHlwZW9mIG5vZGVQcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBub2RlUHJvY2Vzcy52ZXJzaW9ucyAhPSBudWxsICYmIG5vZGVQcm9jZXNzLnZlcnNpb25zLm5vZGUgIT0gbnVsbDtcbn07XG5tb2R1bGUuZXhwb3J0cy5pc05vZGUgPSBpc05vZGU7XG5cbi8vIGRldGVybWluZXMgdGhlIEphdmFTY3JpcHQgcGxhdGZvcm06IGJyb3dzZXIgb3Igbm9kZVxubW9kdWxlLmV4cG9ydHMucGxhdGZvcm0gPSB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNOb2RlKHByb2Nlc3MpID8gJ25vZGUnIDogJ2Jyb3dzZXInO1xuXG4vLyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGNvZGUgaXMgcnVubmluZyBpbiBtYWluIHRocmVhZCBvciBub3Rcbi8vIG5vdGUgdGhhdCBpbiBub2RlLmpzIHdlIGhhdmUgdG8gY2hlY2sgYm90aCB3b3JrZXJfdGhyZWFkIGFuZCBjaGlsZF9wcm9jZXNzXG52YXIgd29ya2VyX3RocmVhZHMgPSB0cnlSZXF1aXJlRm9vbFdlYnBhY2soJ3dvcmtlcl90aHJlYWRzJyk7XG5tb2R1bGUuZXhwb3J0cy5pc01haW5UaHJlYWQgPSBtb2R1bGUuZXhwb3J0cy5wbGF0Zm9ybSA9PT0gJ25vZGUnID8gKCF3b3JrZXJfdGhyZWFkcyB8fCB3b3JrZXJfdGhyZWFkcy5pc01haW5UaHJlYWQpICYmICFwcm9jZXNzLmNvbm5lY3RlZCA6IHR5cGVvZiBXaW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBkZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgY3B1cyBhdmFpbGFibGVcbm1vZHVsZS5leHBvcnRzLmNwdXMgPSBtb2R1bGUuZXhwb3J0cy5wbGF0Zm9ybSA9PT0gJ2Jyb3dzZXInID8gc2VsZi5uYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeSA6IHJlcXVpcmVGb29sV2VicGFjaygnb3MnKS5jcHVzKCkubGVuZ3RoO1xuZnVuY3Rpb24gdHJ5UmVxdWlyZUZvb2xXZWJwYWNrKG1vZHVsZSkge1xuICB0cnkge1xuICAgIHJldHVybiByZXF1aXJlRm9vbFdlYnBhY2sobW9kdWxlKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqKi8gfSksXG5cbi8qKiovIDY3MDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUpIHtcblxuLyoqXG4gKiBlbWJlZGRlZFdvcmtlci5qcyBjb250YWlucyBhbiBlbWJlZGRlZCB2ZXJzaW9uIG9mIHdvcmtlci5qcy5cbiAqIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCxcbiAqIGNoYW5nZXMgbWFkZSBpbiB0aGlzIGZpbGUgd2lsbCBiZSBvdmVyd3JpdHRlbi5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBcIiFmdW5jdGlvbigpe3ZhciBfX3dlYnBhY2tfZXhwb3J0c19fPXt9OyFmdW5jdGlvbigpe3ZhciBleHBvcnRzPV9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3VudXNlZF9leHBvcnRfXztmdW5jdGlvbiBfdHlwZW9mKHIpe3JldHVybihfdHlwZW9mPVxcXCJmdW5jdGlvblxcXCI9PXR5cGVvZiBTeW1ib2wmJlxcXCJzeW1ib2xcXFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHIpe3JldHVybiB0eXBlb2Ygcn06ZnVuY3Rpb24ocil7cmV0dXJuIHImJlxcXCJmdW5jdGlvblxcXCI9PXR5cGVvZiBTeW1ib2wmJnIuY29uc3RydWN0b3I9PT1TeW1ib2wmJnIhPT1TeW1ib2wucHJvdG90eXBlP1xcXCJzeW1ib2xcXFwiOnR5cGVvZiByfSkocil9dmFyIHJlcXVpcmVGb29sV2VicGFjaz1ldmFsKFxcXCJ0eXBlb2YgcmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcgPyByZXF1aXJlIDogZnVuY3Rpb24gKG1vZHVsZSkgeyB0aHJvdyBuZXcgRXJyb3IoJ01vZHVsZSBcXFxcXFxcIiArIG1vZHVsZSArIFxcXFxcXFwiIG5vdCBmb3VuZC4nKSB9XFxcIiksVEVSTUlOQVRFX01FVEhPRF9JRD1cXFwiX193b3JrZXJwb29sLXRlcm1pbmF0ZV9fXFxcIix3b3JrZXI9e2V4aXQ6ZnVuY3Rpb24oKXt9fSxXb3JrZXJUaHJlYWRzLHBhcmVudFBvcnQ7aWYoXFxcInVuZGVmaW5lZFxcXCIhPXR5cGVvZiBzZWxmJiZcXFwiZnVuY3Rpb25cXFwiPT10eXBlb2YgcG9zdE1lc3NhZ2UmJlxcXCJmdW5jdGlvblxcXCI9PXR5cGVvZiBhZGRFdmVudExpc3RlbmVyKXdvcmtlci5vbj1mdW5jdGlvbihyLGUpe2FkZEV2ZW50TGlzdGVuZXIocixmdW5jdGlvbihyKXtlKHIuZGF0YSl9KX0sd29ya2VyLnNlbmQ9ZnVuY3Rpb24ocil7cG9zdE1lc3NhZ2Uocil9O2Vsc2V7aWYoXFxcInVuZGVmaW5lZFxcXCI9PXR5cGVvZiBwcm9jZXNzKXRocm93IG5ldyBFcnJvcihcXFwiU2NyaXB0IG11c3QgYmUgZXhlY3V0ZWQgYXMgYSB3b3JrZXJcXFwiKTt0cnl7V29ya2VyVGhyZWFkcz1yZXF1aXJlRm9vbFdlYnBhY2soXFxcIndvcmtlcl90aHJlYWRzXFxcIil9Y2F0Y2goZXJyb3Ipe2lmKFxcXCJvYmplY3RcXFwiIT09X3R5cGVvZihlcnJvcil8fG51bGw9PT1lcnJvcnx8XFxcIk1PRFVMRV9OT1RfRk9VTkRcXFwiIT09ZXJyb3IuY29kZSl0aHJvdyBlcnJvcn1Xb3JrZXJUaHJlYWRzJiZudWxsIT09V29ya2VyVGhyZWFkcy5wYXJlbnRQb3J0PyhwYXJlbnRQb3J0PVdvcmtlclRocmVhZHMucGFyZW50UG9ydCx3b3JrZXIuc2VuZD1wYXJlbnRQb3J0LnBvc3RNZXNzYWdlLmJpbmQocGFyZW50UG9ydCksd29ya2VyLm9uPXBhcmVudFBvcnQub24uYmluZChwYXJlbnRQb3J0KSk6KHdvcmtlci5vbj1wcm9jZXNzLm9uLmJpbmQocHJvY2Vzcyksd29ya2VyLnNlbmQ9cHJvY2Vzcy5zZW5kLmJpbmQocHJvY2Vzcyksd29ya2VyLm9uKFxcXCJkaXNjb25uZWN0XFxcIixmdW5jdGlvbigpe3Byb2Nlc3MuZXhpdCgxKX0pLHdvcmtlci5leGl0PXByb2Nlc3MuZXhpdC5iaW5kKHByb2Nlc3MpKX1mdW5jdGlvbiBjb252ZXJ0RXJyb3Iobyl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG8pLnJlZHVjZShmdW5jdGlvbihyLGUpe3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkocixlLHt2YWx1ZTpvW2VdLGVudW1lcmFibGU6ITB9KX0se30pfWZ1bmN0aW9uIGlzUHJvbWlzZShyKXtyZXR1cm4gciYmXFxcImZ1bmN0aW9uXFxcIj09dHlwZW9mIHIudGhlbiYmXFxcImZ1bmN0aW9uXFxcIj09dHlwZW9mIHIuY2F0Y2h9d29ya2VyLm1ldGhvZHM9e30sd29ya2VyLm1ldGhvZHMucnVuPWZ1bmN0aW9uKHIsZSl7cj1uZXcgRnVuY3Rpb24oXFxcInJldHVybiAoXFxcIityK1xcXCIpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XFxcIik7cmV0dXJuIHIuYXBwbHkocixlKX0sd29ya2VyLm1ldGhvZHMubWV0aG9kcz1mdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh3b3JrZXIubWV0aG9kcyl9O3ZhciBjdXJyZW50UmVxdWVzdElkPW51bGw7d29ya2VyLm9uKFxcXCJtZXNzYWdlXFxcIixmdW5jdGlvbihlKXtpZihlPT09VEVSTUlOQVRFX01FVEhPRF9JRClyZXR1cm4gd29ya2VyLmV4aXQoMCk7dHJ5e3ZhciByPXdvcmtlci5tZXRob2RzW2UubWV0aG9kXTtpZighcil0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbWV0aG9kIFxcXCInK2UubWV0aG9kKydcXFwiJyk7Y3VycmVudFJlcXVlc3RJZD1lLmlkO3ZhciBvPXIuYXBwbHkocixlLnBhcmFtcyk7aXNQcm9taXNlKG8pP28udGhlbihmdW5jdGlvbihyKXt3b3JrZXIuc2VuZCh7aWQ6ZS5pZCxyZXN1bHQ6cixlcnJvcjpudWxsfSksY3VycmVudFJlcXVlc3RJZD1udWxsfSkuY2F0Y2goZnVuY3Rpb24ocil7d29ya2VyLnNlbmQoe2lkOmUuaWQscmVzdWx0Om51bGwsZXJyb3I6Y29udmVydEVycm9yKHIpfSksY3VycmVudFJlcXVlc3RJZD1udWxsfSk6KHdvcmtlci5zZW5kKHtpZDplLmlkLHJlc3VsdDpvLGVycm9yOm51bGx9KSxjdXJyZW50UmVxdWVzdElkPW51bGwpfWNhdGNoKHIpe3dvcmtlci5zZW5kKHtpZDplLmlkLHJlc3VsdDpudWxsLGVycm9yOmNvbnZlcnRFcnJvcihyKX0pfX0pLHdvcmtlci5yZWdpc3Rlcj1mdW5jdGlvbihyKXtpZihyKWZvcih2YXIgZSBpbiByKXIuaGFzT3duUHJvcGVydHkoZSkmJih3b3JrZXIubWV0aG9kc1tlXT1yW2VdKTt3b3JrZXIuc2VuZChcXFwicmVhZHlcXFwiKX0sd29ya2VyLmVtaXQ9ZnVuY3Rpb24ocil7Y3VycmVudFJlcXVlc3RJZCYmd29ya2VyLnNlbmQoe2lkOmN1cnJlbnRSZXF1ZXN0SWQsaXNFdmVudDohMCxwYXlsb2FkOnJ9KX0sX193ZWJwYWNrX3VudXNlZF9leHBvcnRfXz13b3JrZXIucmVnaXN0ZXIsd29ya2VyLmVtaXR9KCl9KCk7XCI7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzOTc6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlKSB7XG5cbi8vIHNvdXJjZSBvZiBpbnNwaXJhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9yZXF1aXJlLWZvb2wtd2VicGFja1xudmFyIHJlcXVpcmVGb29sV2VicGFjayA9IGV2YWwoJ3R5cGVvZiByZXF1aXJlICE9PSBcXCd1bmRlZmluZWRcXCcgJyArICc/IHJlcXVpcmUgJyArICc6IGZ1bmN0aW9uIChtb2R1bGUpIHsgdGhyb3cgbmV3IEVycm9yKFxcJ01vZHVsZSBcIiArIG1vZHVsZSArIFwiIG5vdCBmb3VuZC5cXCcpIH0nKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZUZvb2xXZWJwYWNrO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNzQ0OlxuLyoqKi8gKGZ1bmN0aW9uKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBleHBvcnRzKSB7XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9LCBfdHlwZW9mKG9iaik7IH1cbi8qKlxuICogd29ya2VyIG11c3QgYmUgc3RhcnRlZCBhcyBhIGNoaWxkIHByb2Nlc3Mgb3IgYSB3ZWIgd29ya2VyLlxuICogSXQgbGlzdGVucyBmb3IgUlBDIG1lc3NhZ2VzIGZyb20gdGhlIHBhcmVudCBwcm9jZXNzLlxuICovXG5cbi8vIHNvdXJjZSBvZiBpbnNwaXJhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9yZXF1aXJlLWZvb2wtd2VicGFja1xudmFyIHJlcXVpcmVGb29sV2VicGFjayA9IGV2YWwoJ3R5cGVvZiByZXF1aXJlICE9PSBcXCd1bmRlZmluZWRcXCcnICsgJyA/IHJlcXVpcmUnICsgJyA6IGZ1bmN0aW9uIChtb2R1bGUpIHsgdGhyb3cgbmV3IEVycm9yKFxcJ01vZHVsZSBcIiArIG1vZHVsZSArIFwiIG5vdCBmb3VuZC5cXCcpIH0nKTtcblxuLyoqXG4gKiBTcGVjaWFsIG1lc3NhZ2Ugc2VudCBieSBwYXJlbnQgd2hpY2ggY2F1c2VzIHRoZSB3b3JrZXIgdG8gdGVybWluYXRlIGl0c2VsZi5cbiAqIE5vdCBhIFwibWVzc2FnZSBvYmplY3RcIjsgdGhpcyBzdHJpbmcgaXMgdGhlIGVudGlyZSBtZXNzYWdlLlxuICovXG52YXIgVEVSTUlOQVRFX01FVEhPRF9JRCA9ICdfX3dvcmtlcnBvb2wtdGVybWluYXRlX18nO1xuXG4vLyB2YXIgbm9kZU9TUGxhdGZvcm0gPSByZXF1aXJlKCcuL2Vudmlyb25tZW50Jykubm9kZU9TUGxhdGZvcm07XG5cbi8vIGNyZWF0ZSBhIHdvcmtlciBBUEkgZm9yIHNlbmRpbmcgYW5kIHJlY2VpdmluZyBtZXNzYWdlcyB3aGljaCB3b3JrcyBib3RoIG9uXG4vLyBub2RlLmpzIGFuZCBpbiB0aGUgYnJvd3NlclxudmFyIHdvcmtlciA9IHtcbiAgZXhpdDogZnVuY3Rpb24gZXhpdCgpIHt9XG59O1xuaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcG9zdE1lc3NhZ2UgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gd29ya2VyIGluIHRoZSBicm93c2VyXG4gIHdvcmtlci5vbiA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICBhZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgY2FsbGJhY2sobWVzc2FnZS5kYXRhKTtcbiAgICB9KTtcbiAgfTtcbiAgd29ya2VyLnNlbmQgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuICB9O1xufSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgLy8gbm9kZS5qc1xuXG4gIHZhciBXb3JrZXJUaHJlYWRzO1xuICB0cnkge1xuICAgIFdvcmtlclRocmVhZHMgPSByZXF1aXJlRm9vbFdlYnBhY2soJ3dvcmtlcl90aHJlYWRzJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKF90eXBlb2YoZXJyb3IpID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiBlcnJvci5jb2RlID09PSAnTU9EVUxFX05PVF9GT1VORCcpIHtcbiAgICAgIC8vIG5vIHdvcmtlcl90aHJlYWRzLCBmYWxsYmFjayB0byBzdWItcHJvY2VzcyBiYXNlZCB3b3JrZXJzXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICBpZiAoV29ya2VyVGhyZWFkcyAmJiAvKiBpZiB0aGVyZSBpcyBhIHBhcmVudFBvcnQsIHdlIGFyZSBpbiBhIFdvcmtlclRocmVhZCAqL1xuICBXb3JrZXJUaHJlYWRzLnBhcmVudFBvcnQgIT09IG51bGwpIHtcbiAgICB2YXIgcGFyZW50UG9ydCA9IFdvcmtlclRocmVhZHMucGFyZW50UG9ydDtcbiAgICB3b3JrZXIuc2VuZCA9IHBhcmVudFBvcnQucG9zdE1lc3NhZ2UuYmluZChwYXJlbnRQb3J0KTtcbiAgICB3b3JrZXIub24gPSBwYXJlbnRQb3J0Lm9uLmJpbmQocGFyZW50UG9ydCk7XG4gIH0gZWxzZSB7XG4gICAgd29ya2VyLm9uID0gcHJvY2Vzcy5vbi5iaW5kKHByb2Nlc3MpO1xuICAgIHdvcmtlci5zZW5kID0gcHJvY2Vzcy5zZW5kLmJpbmQocHJvY2Vzcyk7XG4gICAgLy8gcmVnaXN0ZXIgZGlzY29ubmVjdCBoYW5kbGVyIG9ubHkgZm9yIHN1YnByb2Nlc3Mgd29ya2VyIHRvIGV4aXQgd2hlbiBwYXJlbnQgaXMga2lsbGVkIHVuZXhwZWN0ZWRseVxuICAgIHdvcmtlci5vbignZGlzY29ubmVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcbiAgICB3b3JrZXIuZXhpdCA9IHByb2Nlc3MuZXhpdC5iaW5kKHByb2Nlc3MpO1xuICB9XG59IGVsc2Uge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1NjcmlwdCBtdXN0IGJlIGV4ZWN1dGVkIGFzIGEgd29ya2VyJyk7XG59XG5mdW5jdGlvbiBjb252ZXJ0RXJyb3IoZXJyb3IpIHtcbiAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGVycm9yKS5yZWR1Y2UoZnVuY3Rpb24gKHByb2R1Y3QsIG5hbWUpIHtcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb2R1Y3QsIG5hbWUsIHtcbiAgICAgIHZhbHVlOiBlcnJvcltuYW1lXSxcbiAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICB9KTtcbiAgfSwge30pO1xufVxuXG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIHZhbHVlIGlzIGEgUHJvbWlzZSB2aWEgZHVjayB0eXBpbmcuXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIHdoZW4gZ2l2ZW4gdmFsdWUgaXMgYW4gb2JqZWN0XG4gKiAgICAgICAgICAgICAgICAgICAgaGF2aW5nIGZ1bmN0aW9ucyBgdGhlbmAgYW5kIGBjYXRjaGAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvbWlzZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHZhbHVlW1wiY2F0Y2hcIl0gPT09ICdmdW5jdGlvbic7XG59XG5cbi8vIGZ1bmN0aW9ucyBhdmFpbGFibGUgZXh0ZXJuYWxseVxud29ya2VyLm1ldGhvZHMgPSB7fTtcblxuLyoqXG4gKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2l0aCBwcm92aWRlZCBhcmd1bWVudHNcbiAqIEBwYXJhbSB7U3RyaW5nfSBmbiAgICAgU3RyaW5naWZpZWQgZnVuY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXl9IFthcmdzXSAgRnVuY3Rpb24gYXJndW1lbnRzXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xud29ya2VyLm1ldGhvZHMucnVuID0gZnVuY3Rpb24gcnVuKGZuLCBhcmdzKSB7XG4gIHZhciBmID0gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gKCcgKyBmbiArICcpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7Jyk7XG4gIHJldHVybiBmLmFwcGx5KGYsIGFyZ3MpO1xufTtcblxuLyoqXG4gKiBHZXQgYSBsaXN0IHdpdGggbWV0aG9kcyBhdmFpbGFibGUgb24gdGhpcyB3b3JrZXJcbiAqIEByZXR1cm4ge1N0cmluZ1tdfSBtZXRob2RzXG4gKi9cbndvcmtlci5tZXRob2RzLm1ldGhvZHMgPSBmdW5jdGlvbiBtZXRob2RzKCkge1xuICByZXR1cm4gT2JqZWN0LmtleXMod29ya2VyLm1ldGhvZHMpO1xufTtcbnZhciBjdXJyZW50UmVxdWVzdElkID0gbnVsbDtcbndvcmtlci5vbignbWVzc2FnZScsIGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG4gIGlmIChyZXF1ZXN0ID09PSBURVJNSU5BVEVfTUVUSE9EX0lEKSB7XG4gICAgcmV0dXJuIHdvcmtlci5leGl0KDApO1xuICB9XG4gIHRyeSB7XG4gICAgdmFyIG1ldGhvZCA9IHdvcmtlci5tZXRob2RzW3JlcXVlc3QubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kKSB7XG4gICAgICBjdXJyZW50UmVxdWVzdElkID0gcmVxdWVzdC5pZDtcblxuICAgICAgLy8gZXhlY3V0ZSB0aGUgZnVuY3Rpb25cbiAgICAgIHZhciByZXN1bHQgPSBtZXRob2QuYXBwbHkobWV0aG9kLCByZXF1ZXN0LnBhcmFtcyk7XG4gICAgICBpZiAoaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgLy8gcHJvbWlzZSByZXR1cm5lZCwgcmVzb2x2ZSB0aGlzIGFuZCB0aGVuIHJldHVyblxuICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgd29ya2VyLnNlbmQoe1xuICAgICAgICAgICAgaWQ6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICByZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgICAgIGVycm9yOiBudWxsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY3VycmVudFJlcXVlc3RJZCA9IG51bGw7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHdvcmtlci5zZW5kKHtcbiAgICAgICAgICAgIGlkOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgcmVzdWx0OiBudWxsLFxuICAgICAgICAgICAgZXJyb3I6IGNvbnZlcnRFcnJvcihlcnIpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY3VycmVudFJlcXVlc3RJZCA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW1tZWRpYXRlIHJlc3VsdFxuICAgICAgICB3b3JrZXIuc2VuZCh7XG4gICAgICAgICAgaWQ6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgcmVzdWx0OiByZXN1bHQsXG4gICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgfSk7XG4gICAgICAgIGN1cnJlbnRSZXF1ZXN0SWQgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbWV0aG9kIFwiJyArIHJlcXVlc3QubWV0aG9kICsgJ1wiJyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICB3b3JrZXIuc2VuZCh7XG4gICAgICBpZDogcmVxdWVzdC5pZCxcbiAgICAgIHJlc3VsdDogbnVsbCxcbiAgICAgIGVycm9yOiBjb252ZXJ0RXJyb3IoZXJyKVxuICAgIH0pO1xuICB9XG59KTtcblxuLyoqXG4gKiBSZWdpc3RlciBtZXRob2RzIHRvIHRoZSB3b3JrZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBtZXRob2RzXG4gKi9cbndvcmtlci5yZWdpc3RlciA9IGZ1bmN0aW9uIChtZXRob2RzKSB7XG4gIGlmIChtZXRob2RzKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiBtZXRob2RzKSB7XG4gICAgICBpZiAobWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICB3b3JrZXIubWV0aG9kc1tuYW1lXSA9IG1ldGhvZHNbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHdvcmtlci5zZW5kKCdyZWFkeScpO1xufTtcbndvcmtlci5lbWl0ID0gZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgaWYgKGN1cnJlbnRSZXF1ZXN0SWQpIHtcbiAgICB3b3JrZXIuc2VuZCh7XG4gICAgICBpZDogY3VycmVudFJlcXVlc3RJZCxcbiAgICAgIGlzRXZlbnQ6IHRydWUsXG4gICAgICBwYXlsb2FkOiBwYXlsb2FkXG4gICAgfSk7XG4gIH1cbn07XG5pZiAodHJ1ZSkge1xuICBleHBvcnRzLmFkZCA9IHdvcmtlci5yZWdpc3RlcjtcbiAgZXhwb3J0cy5lbWl0ID0gd29ya2VyLmVtaXQ7XG59XG5cbi8qKiovIH0pXG5cbi8qKioqKiovIFx0fSk7XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcbi8qKioqKiovIFx0XHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi8gXHRcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IHt9O1xuLy8gVGhpcyBlbnRyeSBuZWVkIHRvIGJlIHdyYXBwZWQgaW4gYW4gSUlGRSBiZWNhdXNlIGl0IG5lZWQgdG8gYmUgaXNvbGF0ZWQgYWdhaW5zdCBvdGhlciBtb2R1bGVzIGluIHRoZSBjaHVuay5cbiFmdW5jdGlvbigpIHtcbnZhciBleHBvcnRzID0gX193ZWJwYWNrX2V4cG9ydHNfXztcbnZhciBlbnZpcm9ubWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODI4KTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgd29ya2VyIHBvb2xcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc2NyaXB0XVxuICogQHBhcmFtIHtXb3JrZXJQb29sT3B0aW9uc30gW29wdGlvbnNdXG4gKiBAcmV0dXJucyB7UG9vbH0gcG9vbFxuICovXG5leHBvcnRzLnBvb2wgPSBmdW5jdGlvbiBwb29sKHNjcmlwdCwgb3B0aW9ucykge1xuICB2YXIgUG9vbCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ1KTtcbiAgcmV0dXJuIG5ldyBQb29sKHNjcmlwdCwgb3B0aW9ucyk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHdvcmtlciBhbmQgb3B0aW9uYWxseSByZWdpc3RlciBhIHNldCBvZiBtZXRob2RzIHRvIHRoZSB3b3JrZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gW21ldGhvZHNdXG4gKi9cbmV4cG9ydHMud29ya2VyID0gZnVuY3Rpb24gd29ya2VyKG1ldGhvZHMpIHtcbiAgdmFyIHdvcmtlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzQ0KTtcbiAgd29ya2VyLmFkZChtZXRob2RzKTtcbn07XG5cbi8qKlxuICogU2VuZHMgYW4gZXZlbnQgdG8gdGhlIHBhcmVudCB3b3JrZXIgcG9vbC5cbiAqIEBwYXJhbSB7YW55fSBwYXlsb2FkIFxuICovXG5leHBvcnRzLndvcmtlckVtaXQgPSBmdW5jdGlvbiB3b3JrZXJFbWl0KHBheWxvYWQpIHtcbiAgdmFyIHdvcmtlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzQ0KTtcbiAgd29ya2VyLmVtaXQocGF5bG9hZCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHByb21pc2UuXG4gKiBAdHlwZSB7UHJvbWlzZX0gcHJvbWlzZVxuICovXG5leHBvcnRzLlByb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOSk7XG5leHBvcnRzLnBsYXRmb3JtID0gZW52aXJvbm1lbnQucGxhdGZvcm07XG5leHBvcnRzLmlzTWFpblRocmVhZCA9IGVudmlyb25tZW50LmlzTWFpblRocmVhZDtcbmV4cG9ydHMuY3B1cyA9IGVudmlyb25tZW50LmNwdXM7XG59KCk7XG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfZXhwb3J0c19fO1xuLyoqKioqKi8gfSkoKVxuO1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13b3JrZXJwb29sLmpzLm1hcCIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQge0ZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBlbnVtIEV2ZW50VHlwZSB7XG4gICAgRmFsbGluZ1RpY2tQcm9jZXNzZWQsXG4gICAgR2FtZU92ZXIsXG4gICAgRmlndXJlc01vdmVkLFxuICAgIExldmVsVXAsXG4gICAgRmlndXJlc1NwYXduZWQsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcblxuICAgIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGU7XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgdHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSxcbiAgICAgICAgcHVibGljIHNxdWFzaGVkTGluZXM6IG51bWJlcltdLFxuICAgICAgICBwdWJsaWMgZHJvcHBlZExpbmVzOiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVPdmVyRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkdhbWVPdmVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNNb3ZlZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5GaWd1cmVzTW92ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGV2ZWxVcEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5MZXZlbFVwO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNTcGF3bmVkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIHB1YmxpYyBuZXdGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10sXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZpZ3VyZXNTcGF3bmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV2ZW50QnVzIHtcbiAgICBwcml2YXRlIGhhbmRsZXJzOiBNYXA8RXZlbnRUeXBlLCAoKC4uLl86IGFueSkgPT4gdm9pZClbXT4gPSBuZXcgTWFwKCk7XG5cbiAgICBwdWJsaWMgb24oZXZlbnQ6IEV2ZW50VHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCwgdW5pcXVlOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGlmICh1bmlxdWUgJiYgaGFuZGxlcnMuc29tZShib3VuZEhhbmRsZXIgPT4gYm91bmRIYW5kbGVyID09PSBoYW5kbGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIG9mZihldmVudDogRXZlbnRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgbGV0IGluZGV4ID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIGZpcmUoZXZlbnRQYXlsb2FkOiBFdmVudCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudFBheWxvYWQuZ2V0RXZlbnRUeXBlKCkpIHx8IFtdO1xuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge2hhbmRsZXIoZXZlbnRQYXlsb2FkKX0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vRmlndXJlc1wiO1xuXG5leHBvcnQgZW51bSBDb21tYW5kVHlwZSB7XG4gICAgSW5pdEdhbWUsXG4gICAgUmVzdW1lR2FtZSxcbiAgICBQYXVzZUdhbWUsXG4gICAgRmlndXJlc0ZhbGxUaWNrLFxuICAgIEdhbWVPdmVyLFxuICAgIFJlbmRlcixcbiAgICBNb3ZlTGVmdCxcbiAgICBNb3ZlUmlnaHQsXG4gICAgVHVybkNsb2Nrd2lzZSxcbiAgICBNb3ZlRG93bixcbiAgICBGaWd1cmVzRmFsbERvd24sXG4gICAgTW92ZVRvWCxcbiAgICBNb3ZlVG9ZLFxuICAgIFR1cm5Ub1N0YXRlLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcblxuICAgIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgSW5pdEdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkluaXRHYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlc3VtZUdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlJlc3VtZUdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGF1c2VHYW1lQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5QYXVzZUdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbFRpY2s7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZU92ZXJDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkdhbWVPdmVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlckNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUmVuZGVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVMZWZ0Q29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlTGVmdDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlUmlnaHRDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVSaWdodDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUdXJuQ2xvY2t3aXNlQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVEb3duQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlRG93bjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlVG9YQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgeDogbnVtYmVyXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVUb1g7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVRvWUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZVRvWTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUdXJuVG9TdGF0ZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIHR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlR1cm5Ub1N0YXRlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERyb3BGaWd1cmVzQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJ1cyB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPENvbW1hbmRUeXBlLCAoKHBheWxvYWQ6IENvbW1hbmQpID0+IHZvaWQpW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIGFkZEhhbmRsZXIoZXZlbnQ6IENvbW1hbmRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSGFuZGxlcihldmVudDogQ29tbWFuZFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuKHBheWxvYWQ6IENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQocGF5bG9hZC5nZXRDb21tYW5kVHlwZSgpKSB8fCBbXTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtoYW5kbGVyKHBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gRmlndXJlVHVyblN0YXRlIHtcbiAgICBPbmUsXG4gICAgVHdvLFxuICAgIFRocmVlLFxuICAgIEZvdXIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlndXJlIHtcbiAgICAvKipcbiAgICAgKiBBbnkgZmlndXJlIG11c3QgYmUgYWJsZSB0byB0dXJuIDQgdGltZXMgaW4gMiBkaW1lbnNpb25zLlxuICAgICAqIEFsbCB0dXJucyBhcmUgY2xvY2t3aXNlLlxuICAgICAqL1xuICAgIGdldFR1cm4oZmlndXJlVHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUpOiBib29sZWFuW11bXTtcbiAgICBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RGaWd1cmUgaW1wbGVtZW50cyBGaWd1cmV7XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW107XG5cbiAgICBnZXRUdXJuKGZpZ3VyZVR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBzd2l0Y2ggKGZpZ3VyZVR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuT25lOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuVHdvOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKTtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLlRocmVlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRoaXJkVHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuRm91cjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3J0aFR1cm4oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdpdmVzIGFuIGVhc3kgd2F5IHRvIGRlZmluZSBmaWd1cmVzIGZvciB0ZXRyaXMuXG4gKiBKdXN0IGltcGxlbWVudCB0aGUgZ2V0RmlndXJlIG1ldGhvZCBhbmQgcmV0dXJuIGZpZ3VyZSBsaWtlIHRoaXM6XG4gKiBgYGAodHMpXG4gKiBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAqICAgICByZXR1cm4gW1xuICogICAgICAgICBbdHJ1ZSwgIHRydWUsIHRydWVdLFxuICogICAgICAgICBbZmFsc2UsIHRydWUsIGZhbHNlXSxcbiAqICAgICAgICAgW3RydWUsICB0cnVlLCB0cnVlXSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKlxuICogT3IgZGVmaW5lIGl0IGxpa2UgdGhpcyBmb3IgbW9yZSB2aXN1YWwgcHJlc2VudGF0aW9uOlxuICogYGBgKHRzKVxuICogcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gKiAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgICAgIFwiLSMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUgZXh0ZW5kcyBBYnN0cmFjdEZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldEZpZ3VyZSgpOiBib29sZWFuW11bXTtcblxuICAgIHByaXZhdGUgZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIGxldCBmaWd1cmUgPSB0aGlzLmdldEZpZ3VyZSgpO1xuICAgICAgICBsZXQgdGhlTG9uZ2VzdFJvd1NpemUgPSBmaWd1cmUucmVkdWNlKFxuICAgICAgICAgICAgKHByZXZpb3VzLCBjdXJyZW50KSA9PiBNYXRoLm1heChwcmV2aW91cywgY3VycmVudC5sZW5ndGgpLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmlndXJlLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsTGVuZ3RoID0gcm93Lmxlbmd0aDtcbiAgICAgICAgICAgIHJvdy5sZW5ndGggPSB0aGVMb25nZXN0Um93U2l6ZTtcbiAgICAgICAgICAgIHJldHVybiByb3cuZmlsbChmYWxzZSwgb3JpZ2luYWxMZW5ndGggLSAxLCB0aGVMb25nZXN0Um93U2l6ZSAtIDEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlID0gdGhpcy5nZXROb3JtYWxpemVkRmlndXJlKCk7XG4gICAgICAgIGxldCB0dXJuZWRGaWd1cmU6IGJvb2xlYW5bXVtdID0gW107XG4gICAgICAgIGxldCBvcmlnaW5hbEZpZ3VyZUhlaWdodCA9IG9yaWdpbmFsRmlndXJlLmxlbmd0aDtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlV2lkdGggPSBvcmlnaW5hbEZpZ3VyZVswXS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgb3JpZ2luYWxGaWd1cmVXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICB0dXJuZWRGaWd1cmVbeF0gPSBuZXcgQXJyYXkob3JpZ2luYWxGaWd1cmVIZWlnaHQpLmZpbGwoZmFsc2UpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBvcmlnaW5hbEZpZ3VyZUhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdHVybmVkRmlndXJlW3hdW29yaWdpbmFsRmlndXJlSGVpZ2h0IC0geSAtIDFdID0gb3JpZ2luYWxGaWd1cmVbeV1beF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR1cm5lZEZpZ3VyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RUdXJuKCkucmV2ZXJzZSgpLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKS5yZXZlcnNlKCkubWFwKHJvdyA9PiByb3cucmV2ZXJzZSgpKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBURmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmlnaHRMRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItLSNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGVmdExGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIiMtLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTcXVhcmVGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RpY2tGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExaRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBSWkZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIi0jI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RmlndXJlLCBGaWd1cmVUdXJuU3RhdGUsIExlZnRMRmlndXJlLCBMWkZpZ3VyZSwgUmlnaHRMRmlndXJlLCBSWkZpZ3VyZSwgU3F1YXJlRmlndXJlLCBTdGlja0ZpZ3VyZSwgVEZpZ3VyZX0gZnJvbSBcIi4vRmlndXJlc1wiO1xuXG4vKipcbiAqIHggZm9yIGhvcml6b250YWwgcG9zaXRpb25pbmdcbiAqIHkgZm9yIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBDb29yZGluYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHg6IG51bWJlcixcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsaW5nRmlndXJlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZ3VyZTogRmlndXJlLFxuICAgICAgICBwdWJsaWMgcG9zaXRpb246IENvb3JkaW5hdGUsXG4gICAgICAgIHB1YmxpYyB0dXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHVibGljIGNvbG9yOiBzdHJpbmd8dW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWVsZFdpZHRoOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBmaWVsZEhlaWdodDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgZmlndXJlczogRmlndXJlW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgU3RhdHMge1xuICAgIHB1YmxpYyBmaWd1cmVzRmFsbGVuID0gMDtcbiAgICBwdWJsaWMgbGluZXNTcXVhc2hlZCA9IDA7XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lRGF0YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBpc0dhbWVPdmVyOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBmYWxsaW5nRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBtYXRyaXg6IGJvb2xlYW5bXVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBuZXh0VGlja1RpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgfSksXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nczogR2FtZVNldHRpbmdzLFxuICAgICAgICBwdWJsaWMgbGV2ZWw6IG51bWJlciA9IDEsXG4gICAgICAgIHB1YmxpYyBzY29yZTogbnVtYmVyID0gMCxcbiAgICAgICAgcHVibGljIGNvbWJvOiBudW1iZXIgPSAwLFxuICAgICAgICBwdWJsaWMgc3RhdHM6IFN0YXRzID0gbmV3IFN0YXRzKCksXG4gICAgKSB7fVxuXG4gICAgc3RhdGljIG1ha2VTaW1wbGUod2lkdGg6IG51bWJlciA9IDEwLCBoZWlnaHQ6IG51bWJlciA9IDIwKTogR2FtZURhdGEge1xuICAgICAgICByZXR1cm4gbmV3IEdhbWVEYXRhKFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgbmV3IEFycmF5KGhlaWdodCkuZmlsbChbXSlcbiAgICAgICAgICAgICAgICAubWFwKF8gPT4gbmV3IEFycmF5KHdpZHRoKS5maWxsKGZhbHNlKSksXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IEdhbWVTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmlnaHRMRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBMZWZ0TEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgU3F1YXJlRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTdGlja0ZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgTFpGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJaRmlndXJlKCksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc01vdmVkRXZlbnQsIEdhbWVPdmVyRXZlbnR9IGZyb20gXCIuL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlbmRlckNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgR2FtZUNvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgZ2FtZURhdGE6IEdhbWVEYXRhID0gR2FtZURhdGEubWFrZVNpbXBsZSgpO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBwcml2YXRlIHRpbWluZ3NIYW5kbGVyOiBUaW1pbmdzSGFuZGxlcixcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5SZXN1bWVHYW1lLCB0aGlzLnJlc3VtZUdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5QYXVzZUdhbWUsIHRoaXMucGF1c2VHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuR2FtZU92ZXIsIHRoaXMuZ2FtZU92ZXJIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gY29tbWFuZC5nYW1lRGF0YTtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc3VtZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFJlc3VtZUdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhbGxUaWNrKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXVzZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFBhdXNlR2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGNvbW1hbmQuZ2FtZURhdGE7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnYW1lT3ZlckhhbmRsZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgR2FtZU92ZXJFdmVudCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmYWxsVGljaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKTtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIgJiYgZGVsYXkgIT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgIHRoaXMuZmFsbFRpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ0NoZWNrZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgY2FuRmlndXJlQmVQbGFjZWQodGFyZ2V0RmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0UG9zaXRpb246IENvb3JkaW5hdGUsIG1hdHJpeDogYm9vbGVhbltdW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldEZpZ3VyZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcm93LmV2ZXJ5KCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0gdGFyZ2V0UG9zaXRpb24ueSArIHk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRQb3NpdGlvbi54ICsgeDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXZhbHVlXG4gICAgICAgICAgICAgICAgICAgIHx8IChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxZIDwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPj0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPD0gbWF0cml4WzBdLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgKSB8fCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsWSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIG1hdHJpeFtyZWFsWV1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFtYXRyaXhbcmVhbFldW3JlYWxYXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBFbnVtSGVscGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIFRvQXJyYXkodmFsOiBhbnkpOiB0eXBlb2YgdmFsW10ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKVxuICAgICAgICAgICAgLm1hcChuID0+IE51bWJlci5wYXJzZUludChuKSlcbiAgICAgICAgICAgIC5maWx0ZXIobiA9PiAhTnVtYmVyLmlzTmFOKG4pKSBhcyB1bmtub3duIGFzIHR5cGVvZiB2YWxbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIEdldFJhbmRvbSh2YWw6IGFueSk6IHR5cGVvZiB2YWwge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBFbnVtSGVscGVyLlRvQXJyYXkodmFsKTtcbiAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWx1ZXMubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlc1tyYW5kb21JbmRleF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDb21tYW5kQnVzLFxuICAgIENvbW1hbmRUeXBlLFxuICAgIE1vdmVMZWZ0Q29tbWFuZCxcbiAgICBNb3ZlUmlnaHRDb21tYW5kLFxuICAgIFR1cm5DbG9ja3dpc2VDb21tYW5kLFxuICAgIE1vdmVEb3duQ29tbWFuZCxcbiAgICBGaWd1cmVzRmFsbFRpY2tDb21tYW5kLFxuICAgIE1vdmVUb1hDb21tYW5kLFxuICAgIE1vdmVUb1lDb21tYW5kLFxuICAgIFR1cm5Ub1N0YXRlQ29tbWFuZFxufSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEZpZ3VyZXNNb3ZlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9VdGlscy9FbnVtSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZpbmdIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZUxlZnQsIHRoaXMucHJvY2Vzc01vdmVMZWZ0Q29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZVJpZ2h0LCB0aGlzLnByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlRG93biwgdGhpcy5wcm9jZXNzTW92ZURvd25Db21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlLCB0aGlzLnByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZVRvWCwgdGhpcy5wcm9jZXNzTW92ZVRvWENvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVUb1ksIHRoaXMucHJvY2Vzc01vdmVUb1lDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5UdXJuVG9TdGF0ZSwgdGhpcy5wcm9jZXNzVHVyblRvU3RhdGVDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVMZWZ0Q29tbWFuZChjb21tYW5kOiBNb3ZlTGVmdENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkTGVmdCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCAtIDEsIGZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZU1vdmVkTGVmdCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbi54LS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kKGNvbW1hbmQ6IE1vdmVSaWdodENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkUmlnaHQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4oZmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmlndXJlLnBvc2l0aW9uLnggKyAxLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVNb3ZlZFJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLngrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQ6IFR1cm5DbG9ja3dpc2VDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFsbFR1cm5TdGF0ZXMgPSBFbnVtSGVscGVyLlRvQXJyYXkoRmlndXJlVHVyblN0YXRlKTtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV4dFR1cm5TdGF0ZSA9IGZpZ3VyZS50dXJuU3RhdGUgKyAxO1xuICAgICAgICAgICAgaWYgKCEobmV4dFR1cm5TdGF0ZSBpbiBhbGxUdXJuU3RhdGVzKSkge1xuICAgICAgICAgICAgICAgIG5leHRUdXJuU3RhdGUgPSBhbGxUdXJuU3RhdGVzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FuQmVUdXJuZWQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4obmV4dFR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlVHVybmVkKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnR1cm5TdGF0ZSA9IG5leHRUdXJuU3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlRG93bkNvbW1hbmQoY29tbWFuZDogTW92ZURvd25Db21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVUb1hDb21tYW5kKGNvbW1hbmQ6IE1vdmVUb1hDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmIChjb21tYW5kLnggPCAwIHx8IGNvbW1hbmQueCA+IChjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSAxKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW92aW5nTW9kaWZpZXIgPSBjb21tYW5kLnggPiBmaWd1cmUucG9zaXRpb24ueCA/IDEgOiAtMTtcbiAgICAgICAgICAgIHdoaWxlIChmaWd1cmUucG9zaXRpb24ueCAhPT0gY29tbWFuZC54ICYmIEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCArIG1vdmluZ01vZGlmaWVyLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24ueCArPSBtb3ZpbmdNb2RpZmllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVUb1lDb21tYW5kKGNvbW1hbmQ6IE1vdmVUb1lDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmIChjb21tYW5kLnkgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICB3aGlsZSAoZmlndXJlLnBvc2l0aW9uLnkgPCBjb21tYW5kLnkgJiYgRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZpZ3VyZS5wb3NpdGlvbi54LCBmaWd1cmUucG9zaXRpb24ueSArIDEpLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLnkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R1cm5Ub1N0YXRlQ29tbWFuZChjb21tYW5kOiBUdXJuVG9TdGF0ZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZVR1cm5lZCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihjb21tYW5kLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlVHVybmVkKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnR1cm5TdGF0ZSA9IGNvbW1hbmQudHVyblN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50LCBGaWd1cmVzU3Bhd25lZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vRmlndXJlc1wiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9VdGlscy9FbnVtSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBBbHdheXNPbmVGaWd1cmVTcGF3bmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0SGFuZGxlcihldmVudDogSW5pdEdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oXG4gICAgICAgICAgICBFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NPbkZhbGxUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzT25GYWxsVGljayhldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFkZEZpZ3VyZShldmVudC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRGaWd1cmUoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPiAwIHx8IGdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpZ3VyZUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ2FtZURhdGEuc2V0dGluZ3MuZmlndXJlcy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBmaWd1cmUgPSBnYW1lRGF0YS5zZXR0aW5ncy5maWd1cmVzW2ZpZ3VyZUluZGV4XTtcbiAgICAgICAgY29uc3QgdHVyblN0YXRlID0gRW51bUhlbHBlci5HZXRSYW5kb20oRmlndXJlVHVyblN0YXRlKTtcbiAgICAgICAgY29uc3QgZmlndXJlTWF0cml4ID0gZmlndXJlLmdldFR1cm4odHVyblN0YXRlKTtcbiAgICAgICAgY29uc3QgZmlndXJlV2lkdGggPSBNYXRoLm1heCguLi5maWd1cmVNYXRyaXgubWFwKHJvdyA9PiByb3cubGVuZ3RoKSk7XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBuZXcgQ29vcmRpbmF0ZShcbiAgICAgICAgICAgIE1hdGguY2VpbChnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoIC8gMiAtIGZpZ3VyZVdpZHRoIC8gMikgLSAxLFxuICAgICAgICAgICAgLWZpZ3VyZU1hdHJpeC5sZW5ndGgsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZhbGxpbmdGaWd1cmUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShcbiAgICAgICAgICAgIGZpZ3VyZSxcbiAgICAgICAgICAgIGNvb3JkaW5hdGUsXG4gICAgICAgICAgICB0dXJuU3RhdGVcbiAgICAgICAgKTtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMucHVzaChmYWxsaW5nRmlndXJlKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzU3Bhd25lZEV2ZW50KGdhbWVEYXRhLCBbZmFsbGluZ0ZpZ3VyZV0pKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIge1xuICAgIHByaXZhdGUgc3F1YXNoZWRSb3dzQ291bnRlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBsZXZlbEluY3JlYXNlT25TcXVhc2hlZFJvd3NOdW1iZXI6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBtYXhMZXZlbHM6IG51bWJlcixcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMucHJvY2Vzc0luaXRHYW1lQ29tbWFuZC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0luaXRHYW1lQ29tbWFuZChjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIrKztcbiAgICAgICAgaWYgKHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlciA+PSB0aGlzLmxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlcikge1xuICAgICAgICAgICAgdGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyID0gMDtcbiAgICAgICAgICAgIGV2ZW50LmdhbWVEYXRhLmxldmVsID0gTWF0aC5taW4odGhpcy5tYXhMZXZlbHMsIGV2ZW50LmdhbWVEYXRhLmxldmVsICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21ib0NvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHVibGljIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbFRpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEuY29tYm8gKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50LmdhbWVEYXRhLmNvbWJvID0gMDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIEZhbGxUaWNrU2NvcmVDb3VudGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBzcXVhc2hlZFJvd3NSZXdhcmRUaHJlc2hvbGRzTWFwOiBNYXA8bnVtYmVyLCBudW1iZXI+ID0gbmV3IE1hcChbXG4gICAgICAgICAgICBbMSwgMTAwXSxcbiAgICAgICAgICAgIFsyLCAzMDBdLFxuICAgICAgICAgICAgWzMsIDUwMF0sXG4gICAgICAgICAgICBbNCwgODAwXSxcbiAgICAgICAgXSksXG4gICAgICAgIHByaXZhdGUgcmV3YXJkT25Db21ibyA9IDUwLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxpbmdUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsaW5nVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBsZXQgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgPSAwO1xuICAgICAgICB0aGlzLnNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXAuZm9yRWFjaCgocmV3YXJkLCByb3dzU3F1YXNoZWRUaHJlc2hvbGQpID0+IHtcbiAgICAgICAgICAgIGlmIChyb3dzU3F1YXNoZWRUaHJlc2hvbGQgPiBldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZpb3VzVGhyZXNob2xkUmV3YXJkID0gcmV3YXJkO1xuICAgICAgICB9KTtcbiAgICAgICAgZXZlbnQuZ2FtZURhdGEuc2NvcmUgKz1cbiAgICAgICAgICAgIHByZXZpb3VzVGhyZXNob2xkUmV3YXJkICogZXZlbnQuZ2FtZURhdGEubGV2ZWxcbiAgICAgICAgICAgICsgdGhpcy5yZXdhcmRPbkNvbWJvICogTWF0aC5tYXgoMCwgZXZlbnQuZ2FtZURhdGEuY29tYm8gLSAxKSAqIGV2ZW50LmdhbWVEYXRhLmxldmVsXG4gICAgICAgICAgICArIGV2ZW50LmRyb3BwZWRMaW5lcyAqIDIgKiBldmVudC5nYW1lRGF0YS5sZXZlbDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGF0c0NvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxpbmdUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsaW5nVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zdGF0cy5maWd1cmVzRmFsbGVuICs9IGV2ZW50LnRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzLmxlbmd0aDtcbiAgICAgICAgZXZlbnQuZ2FtZURhdGEuc3RhdHMubGluZXNTcXVhc2hlZCArPSBldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aDtcbiAgICB9XG59XG4iLCJpbXBvcnQge1RpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgQ29uc3RUaW1pbmdzSGFuZGxlciBpbXBsZW1lbnRzIFRpbWluZ3NIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGRlbGF5TXM6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBnZXREZWxheUZvck5leHRUaWNrTXMoZ2FtZURhdGE6IEdhbWVEYXRhKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsYXlNcztcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZpZ3VyZXNTcGF3bmVkRXZlbnR9IGZyb20gXCIuLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1Jlc29sdmVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUmVzb2x2ZXIvRmlndXJlUGxhY2luZ1Jlc29sdmVyXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2V9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIvRmlndXJlUGxhY2luZ1BlcmZvcm1lckludGVyZmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzU29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBmaWd1cmVQbGFjaW5nUmVzb2x2ZXI6IEZpZ3VyZVBsYWNpbmdSZXNvbHZlcixcbiAgICAgICAgcHJpdmF0ZSBmaWd1cmVQbGFjaW5nUGVyZm9ybWVyOiBGaWd1cmVQbGFjaW5nUGVyZm9ybWVySW50ZXJmYWNlLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZpZ3VyZXNTcGF3bmVkLCB0aGlzLm9uRmlndXJlc1NwYXduZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZpZ3VyZXNTcGF3bmVkKGV2ZW50OiBGaWd1cmVzU3Bhd25lZEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzID0gdGhpcy5maWd1cmVQbGFjaW5nUmVzb2x2ZXIucmVzb2x2ZShldmVudC5nYW1lRGF0YSk7XG4gICAgICAgIHRoaXMuZmlndXJlUGxhY2luZ1BlcmZvcm1lci5wbGFjZShldmVudC5nYW1lRGF0YSwgdGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vVGV0cmlzL0ZpZ3VyZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBGaWd1cmVQbGFjaW5nU3RlcCB7XG4gICAgZ2V0IHBlcnNpc3RlZCgpOiBib29sZWFuLFxufVxuXG5leHBvcnQgY2xhc3MgVHVyblBsYWNpbmdTdGVwIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1N0ZXB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB0YXJnZXQ6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHJpdmF0ZSBfcGVyc2lzdGVkOiBib29sZWFuLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVhQbGFjaW5nU3RlcCBpbXBsZW1lbnRzIEZpZ3VyZVBsYWNpbmdTdGVwe1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgdGFyZ2V0OiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgX3BlcnNpc3RlZDogYm9vbGVhbixcbiAgICApIHt9XG5cbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc2lzdGVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVZUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHRhcmdldDogbnVtYmVyLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEcm9wUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWd1cmVzVGFyZ2V0U3RhdGVzOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4sXG4gICAgICAgIHB1YmxpYyBwbGFjaW5nU3RlcHM6IEZpZ3VyZVBsYWNpbmdTdGVwW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgSG9sZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpc09wZW5lZDogYm9vbGVhbixcbiAgICAgICAgcHVibGljIGNlbGxzOiBDb29yZGluYXRlW10sXG4gICAgKSB7fVxufVxuIiwiaW1wb3J0IHtIb2xlfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0Nvb3JkaW5hdGV9IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vLi4vVGV0cmlzL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBIb2xlc0hlbHBlciB7XG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0SG9sZXMobWF0cml4OiBib29sZWFuW11bXSk6IEhvbGVbXSB7XG4gICAgICAgIGxldCBob2xlczogSG9sZVtdID0gW107XG5cbiAgICAgICAgY2xhc3MgSG9sZUluUHJvY2VzcyB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgICAgICAgICBwdWJsaWMgY2VsbHM6IENvb3JkaW5hdGVbXSA9IFtdLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBwcmV2aW91c1Jvd09wZW5YczogbnVtYmVyW10gPSBbXSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgY3VycmVudFJvd09wZW5YczogbnVtYmVyW10gPSBbXSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgaXNPcGVuZWQ6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgY29udGludWVzOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBob2xlc0luUHJvY2VzczogSG9sZUluUHJvY2Vzc1tdID0gW107XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uczogU2V0PG51bWJlcj4gPSBuZXcgU2V0KCk7XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGhvbGVzSW5Qcm9jZXNzLmZvckVhY2goaG9sZSA9PiBob2xlLmNvbnRpbnVlcyA9IGZhbHNlKTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvY2Vzc2luZ0hvbGUgPSBob2xlc0luUHJvY2Vzcy5maW5kKGhvbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvbGUucHJldmlvdXNSb3dPcGVuWHMuc29tZShwcmV2WCA9PiBwcmV2WCA9PT0geClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoaG9sZS5jdXJyZW50Um93T3BlblhzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgaG9sZS5jdXJyZW50Um93T3BlblhzW2hvbGUuY3VycmVudFJvd09wZW5Ycy5sZW5ndGggLSAxXSA9PT0geCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc2luZ0hvbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUgPSBuZXcgSG9sZUluUHJvY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNJblByb2Nlc3MucHVzaChwcm9jZXNzaW5nSG9sZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuY3VycmVudFJvd09wZW5Ycy5wdXNoKHgpO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nSG9sZS5jZWxscy5wdXNoKG5ldyBDb29yZGluYXRlKHgsIHkpKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuY29udGludWVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuaXNPcGVuZWQgPSBwcm9jZXNzaW5nSG9sZS5pc09wZW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5kb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMobWF0cml4LCBuZXcgQ29vcmRpbmF0ZSh4LCB5KSwgY292ZXJlZENvbHVtbnMsIFtbdHJ1ZSwgdHJ1ZV1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZTogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgICAgIGhvbGVzSW5Qcm9jZXNzLmZvckVhY2goKGhvbGUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaG9sZS5jb250aW51ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZS5wcmV2aW91c1Jvd09wZW5YcyA9IGhvbGUuY3VycmVudFJvd09wZW5YcztcbiAgICAgICAgICAgICAgICAgICAgaG9sZS5jdXJyZW50Um93T3BlblhzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaG9sZS5jb250aW51ZXMgfHwgeSA9PSBtYXRyaXgubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBob2xlcy5wdXNoKG5ldyBIb2xlKFxuICAgICAgICAgICAgICAgICAgICAgICAgaG9sZS5pc09wZW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGUuY2VsbHMsXG4gICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgICAgICBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZS5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaG9sZXNJblByb2dyZXNzVG9SZW1vdmUucmV2ZXJzZSgpLmZvckVhY2goaSA9PiBob2xlc0luUHJvY2Vzcy5zcGxpY2UoaSwgMSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGhvbGVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZG9lc1RoZVdheU91dEZyb21Ib2xlRXhpc3RzKG1hdHJpeDogYm9vbGVhbltdW10sIGluaXRpYWxDb29yZGluYXRlOiBDb29yZGluYXRlLCBjb3ZlcmVkQ29sdW1uczogU2V0PG51bWJlcj4sIGZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZFRoZVdheU91dEZyb21Ib2xlKG1hdHJpeCwgaW5pdGlhbENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zLCBmaWd1cmVNYXRyaXgpICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmaW5kVGhlV2F5T3V0RnJvbUhvbGUobWF0cml4OiBib29sZWFuW11bXSwgaW5pdGlhbENvb3JkaW5hdGU6IENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zOiBTZXQ8bnVtYmVyPnxNYXA8bnVtYmVyLCBudW1iZXI+LCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucyA9IEhvbGVzSGVscGVyLmNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMoY292ZXJlZENvbHVtbnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRyeWluZyB0byBmaW5kIHRoZSB3YXkgb3V0IGZyb20gdGhlIGxlZnQgc2lkZVxuICAgICAgICBsZXQgdGFyZ2V0WENhbmRpZGF0ZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGxldCB4ID0gaW5pdGlhbENvb3JkaW5hdGUueCAtIDE7IHggPj0gMDsgeC0tKSB7XG4gICAgICAgICAgICBpZiAoIUZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUoeCwgaW5pdGlhbENvb3JkaW5hdGUueSksIG1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBjaGVja0ZhbGxYID0geCArIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGggLSAxOyBjaGVja0ZhbGxYID49IHg7IGNoZWNrRmFsbFgtLSkge1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5oYXMoY2hlY2tGYWxsWCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsQ29sdW1uc0ZyZWVUb0ZhbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFsbENvbHVtbnNGcmVlVG9GYWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0cnlpbmcgdG8gZmluZCB0aGUgd2F5IG91dCBmcm9tIHRoZSByaWdodCBzaWRlXG4gICAgICAgIGZvciAobGV0IHggPSBpbml0aWFsQ29vcmRpbmF0ZS54ICsgMTsgeCA8IG1hdHJpeFswXS5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgaWYgKCFGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHgsIGluaXRpYWxDb29yZGluYXRlLnkpLCBtYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYWxsQ29sdW1uc0ZyZWVUb0ZhbGwgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgY2hlY2tGYWxsWCA9IHg7IGNoZWNrRmFsbFggPCB4ICsgZmlndXJlTWF0cml4WzBdLmxlbmd0aDsgY2hlY2tGYWxsWCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyhjaGVja0ZhbGxYKSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWxsQ29sdW1uc0ZyZWVUb0ZhbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0Q292ZXJlZENvbHVtbnNYcyhtYXRyaXg6IGJvb2xlYW5bXVtdLCB0b1k/OiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgICAgIHJldHVybiBIb2xlc0hlbHBlci5jb252ZXJ0Q292ZXJlZENvbHVtbnNUb1hzKFxuICAgICAgICAgICAgSG9sZXNIZWxwZXIuY29sbGVjdENvdmVyZWRDb2x1bW5zKG1hdHJpeCwgdG9ZKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMoY292ZXJlZENvbHVtbnM6IE1hcDxudW1iZXIsIG51bWJlcj4pOiBTZXQ8bnVtYmVyPiB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KFsuLi5jb3ZlcmVkQ29sdW1ucy5rZXlzKCldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDQvNCw0L/RgyB4OiB5XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0Q292ZXJlZENvbHVtbnMobWF0cml4OiBib29sZWFuW11bXSwgdG9ZPzogbnVtYmVyKTogTWFwPG51bWJlciwgbnVtYmVyPiB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uczogTWFwPG51bWJlciwgbnVtYmVyPiA9IG5ldyBNYXAoKTtcbiAgICAgICAgbWF0cml4LnNvbWUoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICh0b1kgIT09IHVuZGVmaW5lZCAmJiB5ID49IHRvWSlcbiAgICAgICAgICAgICAgICB8fCBjb3ZlcmVkQ29sdW1ucy5zaXplID09IG1hdHJpeFswXS5sZW5ndGg7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY292ZXJlZENvbHVtbnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uLy4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7SG9sZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIG9yaWdpbmFsSG9sZXM6IEhvbGVbXSxcbiAgICAgICAgcHVibGljIG9yaWdpbmFsQ292ZXJlZENvbHVtbnM6IE1hcDxudW1iZXIsIG51bWJlcj4sXG4gICAgICAgIHB1YmxpYyBpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSxcbiAgICAgICAgcHVibGljIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1uczogTWFwPG51bWJlciwgbnVtYmVyPixcbiAgICAgICAgcHVibGljIHNxdWFzaGVkTGluZXNDb3VudDogbnVtYmVyLFxuICAgICkge31cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlcjtcbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi8uLi9UZXRyaXMvVXRpbHMvRW51bUhlbHBlclwiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi8uLi9UZXRyaXMvRmlndXJlc1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uLy4uL1RldHJpcy9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBSZW5kZXJDb21tYW5kfSBmcm9tIFwiLi4vLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtEcm9wUGxhY2luZ1N0ZXAsIEZpZ3VyZVBsYWNpbmdSZXN1bHQsIEZpZ3VyZVBsYWNpbmdTdGVwLCBNb3ZlWFBsYWNpbmdTdGVwLCBNb3ZlWVBsYWNpbmdTdGVwLCBUdXJuUGxhY2luZ1N0ZXB9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7Q2FsY3VsYXRvckFnZ3JlZ2F0ZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvci9DYWxjdWxhdG9yQWdncmVnYXRlXCI7XG5pbXBvcnQge0hvbGVzSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvSG9sZXNIZWxwZXJcIjtcbmltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0fSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9yL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuXG5jbGFzcyBQbGFjZVJlc29sdmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuXG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNlUmVzb2x2aW5nRXJyb3Ige1xufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIHNjb3JlQ2FsY3VsYXRvcjogQ2FsY3VsYXRvckFnZ3JlZ2F0ZSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcmVzb2x2ZShnYW1lRGF0YTogR2FtZURhdGEpOiBGaWd1cmVQbGFjaW5nUmVzdWx0fHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuXG4gICAgICAgIGxldCBtYXhTY29yZSA9IC1JbmZpbml0eTtcbiAgICAgICAgbGV0IHRoZUJlc3RSZXN1bHQgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc3VsdChuZXcgTWFwKCksIFtdKTtcblxuICAgICAgICB0aGlzLnByb2Nlc3NTdGF0ZXMoZ2FtZURhdGEsIChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlLCBzY29yZTogbnVtYmVyLCBwbGFjaW5nRGlyZWN0aW9uczogRmlndXJlUGxhY2luZ1N0ZXBbXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNjb3JlID4gbWF4U2NvcmUpIHtcbiAgICAgICAgICAgICAgICBtYXhTY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgICAgIHRoZUJlc3RSZXN1bHQgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc3VsdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IE1hcChbW29yaWdpbmFsRmlndXJlLCBpbWFnaW5hYmxlRmlndXJlXV0pLFxuICAgICAgICAgICAgICAgICAgICBwbGFjaW5nRGlyZWN0aW9uc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gbGV0IGRlYnVnTW9kZSA9IHRydWU7XG4gICAgICAgIC8qbGV0IGRlYnVnTW9kZSA9ICdkZWJ1Z01vZGUnIGluIHdpbmRvdyAmJiB3aW5kb3cuZGVidWdNb2RlO1xuICAgICAgICBsZXQgaW1hZ2luYWJsZUZpZ3VyZSA9IHRoZUJlc3RSZXN1bHQuZmlndXJlc1RhcmdldFN0YXRlcy5nZXQob3JpZ2luYWxGaWd1cmUpO1xuICAgICAgICBpZiAoZGVidWdNb2RlICYmIGltYWdpbmFibGVGaWd1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IGZha2VHYW1lRGF0YSA9IHN0cnVjdHVyZWRDbG9uZShnYW1lRGF0YSk7XG4gICAgICAgICAgICBpbWFnaW5hYmxlRmlndXJlLmNvbG9yID0gJyNmMDAnO1xuICAgICAgICAgICAgZmFrZUdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzID0gW2ltYWdpbmFibGVGaWd1cmVdO1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZChmYWtlR2FtZURhdGEpKTtcblxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzU3RhdGVzKGdhbWVEYXRhLCB1bmRlZmluZWQsIChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgaW1hZ2luYWJsZUZpZ3VyZS5jb2xvciA9ICcjMDBmJztcbiAgICAgICAgICAgICAgICBmYWtlR2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMgPSBbaW1hZ2luYWJsZUZpZ3VyZV07XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZChmYWtlR2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0qL1xuXG4gICAgICAgIHJldHVybiB0aGVCZXN0UmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1N0YXRlcyhcbiAgICAgICAgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBvbkFmdGVyU2NvcmVDYWxjdWxhdGVzPzogKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUsIHNjb3JlOiBudW1iZXIsIHBsYWNpbmdEaXJlY3Rpb25zOiBGaWd1cmVQbGFjaW5nU3RlcFtdKSA9PiB2b2lkLFxuICAgICAgICBvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcz86IChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlKSA9PiB2b2lkLFxuICAgICkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuXG4gICAgICAgIGxldCBlbnVtcyA9IEVudW1IZWxwZXIuVG9BcnJheShGaWd1cmVUdXJuU3RhdGUpO1xuICAgICAgICB3aGlsZSAoZW51bXNbMF0gIT09IG9yaWdpbmFsRmlndXJlLnR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgZW51bXMudW5zaGlmdChlbnVtcy5wb3AoKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1hdHJpY2VzOiBNYXA8RmlndXJlVHVyblN0YXRlLCBib29sZWFuW11bXT4gPSBuZXcgTWFwKCk7XG4gICAgICAgIGxldCBzdHJpbmd5TWF0cmljZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICAgICAgICBlbnVtcy5mb3JFYWNoKHR1cm5TdGF0ZSA9PiB7XG4gICAgICAgICAgICBsZXQgZmlndXJlTWF0cml4ID0gb3JpZ2luYWxGaWd1cmUuZmlndXJlLmdldFR1cm4odHVyblN0YXRlKTtcbiAgICAgICAgICAgIGxldCBzdHJpbmd5RmlndXJlTWF0cml4ID0gZmlndXJlTWF0cml4Lm1hcChyb3cgPT4gcm93Lm1hcCh2YWwgPT4gdmFsID8gXCIxXCIgOiBcIjBcIikuam9pbigpKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgaWYgKCFzdHJpbmd5TWF0cmljZXMuaGFzKHN0cmluZ3lGaWd1cmVNYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5neU1hdHJpY2VzLmFkZChzdHJpbmd5RmlndXJlTWF0cml4KTtcbiAgICAgICAgICAgICAgICBtYXRyaWNlcy5zZXQodHVyblN0YXRlLCBmaWd1cmVNYXRyaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBvcmlnaW5hbE1hdHJpeEhvbGVzID0gSG9sZXNIZWxwZXIuY29sbGVjdEhvbGVzKGdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQ292ZXJlZENvbHVtbnMgPSBIb2xlc0hlbHBlci5jb2xsZWN0Q292ZXJlZENvbHVtbnMoZ2FtZURhdGEubWF0cml4KTtcblxuICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoIC0gZmlndXJlTWF0cml4WzBdLmxlbmd0aCArIDE7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBbeSwgaW1hZ2luYWJsZU1hdHJpeF0gPSB0aGlzLmltYWdpbmVGaWd1cmVEcm9wKGdhbWVEYXRhLm1hdHJpeCwgZmlndXJlTWF0cml4LCB4KTtcbiAgICAgICAgICAgICAgICBsZXQgY29vcmRpbmF0ZSA9IG5ldyBDb29yZGluYXRlKHgsIHkpO1xuICAgICAgICAgICAgICAgIGxldCBzcXVhc2hlZExpbmVzQ291bnQgPSB0aGlzLnNxdWFzaExpbmVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlRmlndXJlID0gbmV3IEZhbGxpbmdGaWd1cmUob3JpZ2luYWxGaWd1cmUuZmlndXJlLCBjb29yZGluYXRlLCB0dXJuU3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmIChvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICBvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyhpbWFnaW5hYmxlRmlndXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyA9IEhvbGVzSGVscGVyLmNvbGxlY3RDb3ZlcmVkQ29sdW1ucyhpbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlU2NvcmVSZXF1ZXN0ID0gbmV3IENhbGN1bGF0ZVNjb3JlUmVxdWVzdChcbiAgICAgICAgICAgICAgICAgICAgZ2FtZURhdGEsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWF0cml4SG9sZXMsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ292ZXJlZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVNYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgc3F1YXNoZWRMaW5lc0NvdW50XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLnNjb3JlQ2FsY3VsYXRvci5jYWxjdWxhdGVTY29yZShjYWxjdWxhdGVTY29yZVJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb25zID0gdGhpcy5tYWtlU2ltcGxlUGxhY2luZ1N0ZXBzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgIGlmIChvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMoaW1hZ2luYWJsZUZpZ3VyZSwgc2NvcmUsIGRpcmVjdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3JpZ2luYWxNYXRyaXhIb2xlcy5maWx0ZXIoaG9sZSA9PiBob2xlLmlzT3BlbmVkICYmIGhvbGUuY2VsbHMubGVuZ3RoID4gMCkuZm9yRWFjaChob2xlID0+IHtcbiAgICAgICAgICAgIGxldCB0b3BZID0gZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQsXG4gICAgICAgICAgICAgICAgbGVmdFggPSBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoLFxuICAgICAgICAgICAgICAgIGJvdHRvbVkgPSAtMSxcbiAgICAgICAgICAgICAgICByaWdodFggPSAtMTtcbiAgICAgICAgICAgIGhvbGUuY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICB0b3BZID0gTWF0aC5taW4odG9wWSwgY2VsbC55KTtcbiAgICAgICAgICAgICAgICBsZWZ0WCA9IE1hdGgubWluKGxlZnRYLCBjZWxsLngpO1xuICAgICAgICAgICAgICAgIGJvdHRvbVkgPSBNYXRoLm1heChib3R0b21ZLCBjZWxsLnkpO1xuICAgICAgICAgICAgICAgIHJpZ2h0WCA9IE1hdGgubWF4KHJpZ2h0WCwgY2VsbC54KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSBNYXRoLm1heCh0b3BZIC0gZmlndXJlTWF0cml4Lmxlbmd0aCArIDEsIDApOyB5IDw9IGJvdHRvbVk7IHkrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gTWF0aC5tYXgobGVmdFggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMSwgMCk7IHggPD0gcmlnaHRYOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoeCwgeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2luYWJsZUZpZ3VyZSA9IG5ldyBGYWxsaW5nRmlndXJlKG9yaWdpbmFsRmlndXJlLmZpZ3VyZSwgY29vcmRpbmF0ZSwgdHVyblN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgY29vcmRpbmF0ZSwgZ2FtZURhdGEubWF0cml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb25zID0gdGhpcy5tYWtlUHVzaEluUGxhY2luZ1N0ZXBzKGdhbWVEYXRhLCBpbWFnaW5hYmxlRmlndXJlLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlTWF0cml4ID0gdGhpcy5pbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lRGF0YS5tYXRyaXgsIGZpZ3VyZU1hdHJpeCwgY29vcmRpbmF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhc2hlZExpbmVzQ291bnQgPSB0aGlzLnNxdWFzaExpbmVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zID0gSG9sZXNIZWxwZXIuY29sbGVjdENvdmVyZWRDb2x1bW5zKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlU2NvcmVSZXF1ZXN0ID0gbmV3IENhbGN1bGF0ZVNjb3JlUmVxdWVzdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYXRyaXhIb2xlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ292ZXJlZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlTWF0cml4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXNoZWRMaW5lc0NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuc2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKGNhbGN1bGF0ZVNjb3JlUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUsIHNjb3JlLCBkaXJlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNxdWFzaExpbmVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIge1xuICAgICAgICBsZXQgbGluZXNUb1NxdWFzaDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbkJlU3F1YXNoZWQgPSByb3cuZXZlcnkoY2VsbCA9PiBjZWxsKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVNxdWFzaGVkKSB7XG4gICAgICAgICAgICAgICAgbGluZXNUb1NxdWFzaC5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGluZXNUb1NxdWFzaC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgICAgbWF0cml4LnNwbGljZSh5LCAxKTtcbiAgICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KG5ldyBBcnJheShtYXRyaXhbMF0ubGVuZ3RoKS5maWxsKGZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZXNUb1NxdWFzaC5sZW5ndGg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbWFnaW5lRmlndXJlRHJvcChnYW1lTWF0cml4OiBib29sZWFuW11bXSwgZmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0WDogbnVtYmVyKTogW251bWJlciwgYm9vbGVhbltdW11dIHtcbiAgICAgICAgbGV0IHRhcmdldFkgPSAtZmlndXJlTWF0cml4Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUodGFyZ2V0WCwgdGFyZ2V0WSArIDEpLCBnYW1lTWF0cml4KSkge1xuICAgICAgICAgICAgdGFyZ2V0WSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB0YXJnZXRZLFxuICAgICAgICAgICAgdGhpcy5pbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lTWF0cml4LCBmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHRhcmdldFgsIHRhcmdldFkpKSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGltYWdpbmVGaWd1cmVQbGFjaW5nKGdhbWVNYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdLCB0YXJnZXRDb29yZGluYXRlOiBDb29yZGluYXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBsZXQgaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10gPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZU1hdHJpeCk7XG4gICAgICAgIGZpZ3VyZU1hdHJpeC5mb3JFYWNoKChyb3csIGZpZ3VyZVkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIGZpZ3VyZVgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHRhcmdldENvb3JkaW5hdGUueSArIGZpZ3VyZVk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRDb29yZGluYXRlLnggKyBmaWd1cmVYO1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiBpbWFnaW5hYmxlTWF0cml4XG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIGltYWdpbmFibGVNYXRyaXhbcmVhbFldXG4gICAgICAgICAgICAgICAgICAgICYmIHZhbFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlTWF0cml4W3JlYWxZXVtyZWFsWF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW1hZ2luYWJsZU1hdHJpeDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1ha2VQdXNoSW5QbGFjaW5nU3RlcHMoZ2FtZURhdGE6IEdhbWVEYXRhLCBpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zOiBNYXA8bnVtYmVyLCBudW1iZXI+KTogRmlndXJlUGxhY2luZ1N0ZXBbXSB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBmaWd1cmVNYXRyaXggPSBpbWFnaW5hYmxlRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGltYWdpbmFibGVGaWd1cmUudHVyblN0YXRlKTtcbiAgICAgICAgbGV0IHRhcmdldFggPSBIb2xlc0hlbHBlci5maW5kVGhlV2F5T3V0RnJvbUhvbGUoZ2FtZURhdGEubWF0cml4LCBpbWFnaW5hYmxlRmlndXJlLnBvc2l0aW9uLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zLCBmaWd1cmVNYXRyaXgpO1xuICAgICAgICBpZiAodGFyZ2V0WCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBUdXJuUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS50dXJuU3RhdGUsIHRydWUpLFxuICAgICAgICAgICAgbmV3IE1vdmVYUGxhY2luZ1N0ZXAodGFyZ2V0WCwgZmFsc2UpLFxuICAgICAgICAgICAgbmV3IE1vdmVZUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgIG5ldyBNb3ZlWFBsYWNpbmdTdGVwKGltYWdpbmFibGVGaWd1cmUucG9zaXRpb24ueCwgdHJ1ZSksXG4gICAgICAgICAgICBuZXcgRHJvcFBsYWNpbmdTdGVwKCksXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYWtlU2ltcGxlUGxhY2luZ1N0ZXBzKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBGaWd1cmVQbGFjaW5nU3RlcFtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBUdXJuUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS50dXJuU3RhdGUsIHRydWUpLFxuICAgICAgICAgICAgbmV3IE1vdmVYUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS5wb3NpdGlvbi54LCB0cnVlKSxcbiAgICAgICAgICAgIG5ldyBEcm9wUGxhY2luZ1N0ZXAoKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIENhbGN1bGF0b3JBZ2dyZWdhdGUgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNhbGN1bGF0b3JzOiBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VbXVxuICAgICkge31cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdG9ycy5yZWR1Y2UoKHNjb3JlLCBjYWxjdWxhdG9yKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc2NvcmUgKyBjYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKHJlcXVlc3QpO1xuICAgICAgICB9LCAwKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvclBhcmFtcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBtaW5pbXVtVmFsdWFibGVIZWlnaHQ6IG51bWJlcixcbiAgICAgICAgcHVibGljIHBvd011bHRpcGxpZXI6IG51bWJlcixcbiAgICAgICAgcHVibGljIG11bHRpcGxpZXI6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvciBpbXBsZW1lbnRzIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcGFyYW1zID0gbmV3IEZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yUGFyYW1zKDUsIDEsIDEpLFxuICAgICkge31cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBmaWVsZEhlaWdodCA9IHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSByZXF1ZXN0LmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGg7XG4gICAgICAgIGNvbnN0IFtmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlSGVpZ2h0XSA9IHRoaXMuY2FsY3VsYXRlRmlsbGFibGVTcGFjZShyZXF1ZXN0LmltYWdpbmFibGVNYXRyaXgsIGZpZWxkV2lkdGgpO1xuICAgICAgICBsZXQgZmlsbGFibGVDZWxsc1Njb3JlID0gMDtcbiAgICAgICAgaWYgKGZpbGxhYmxlSGVpZ2h0ID4gdGhpcy5wYXJhbXMubWluaW11bVZhbHVhYmxlSGVpZ2h0KSB7XG4gICAgICAgICAgICBmaWxsYWJsZUNlbGxzU2NvcmUgPSAtZmlsbGFibGVDZWxsc0NvdW50XG4gICAgICAgICAgICAgICAgKiBNYXRoLnBvdyhcbiAgICAgICAgICAgICAgICAgICAgZmlsbGFibGVDZWxsc0NvdW50LFxuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUNlbGxzQ291bnQgLyAoZmllbGRIZWlnaHQgKiBmaWVsZFdpZHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgKiB0aGlzLnBhcmFtcy5wb3dNdWx0aXBsaWVyXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICogdGhpcy5wYXJhbXMubXVsdGlwbGllcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsbGFibGVDZWxsc1Njb3JlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlRmlsbGFibGVTcGFjZShtYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWVsZFdpZHRoOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGxldCBmaWxsYWJsZUNlbGxzQ291bnQgPSAwO1xuICAgICAgICBsZXQgZmlsbGFibGVIZWlnaHQgPSAwO1xuICAgICAgICBtYXRyaXguZXZlcnkocm93ID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbCAmJiBjb3ZlcmVkQ29sdW1ucy5zaXplID4gMCAmJiAhY292ZXJlZENvbHVtbnMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlQ2VsbHNDb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLnNpemUgPCBmaWVsZFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlSGVpZ2h0Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlSGVpZ2h0XTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWxsZWRIZWlnaHRDYWxjdWxhdG9yUGFyYW1zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHBvd011bHRpcGxpZXI6IG51bWJlcixcbiAgICAgICAgcHVibGljIG11bHRpcGxpZXI6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWxsZWRIZWlnaHRDYWxjdWxhdG9yIGltcGxlbWVudHMgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwYXJhbXMgPSBuZXcgRmlsbGVkSGVpZ2h0Q2FsY3VsYXRvclBhcmFtcygxLCAzKSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgY2FsY3VsYXRlU2NvcmUocmVxdWVzdDogQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0KTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jYWxjdWxhdGVIZWlnaHQocmVxdWVzdC5pbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgcmV0dXJuIC1oZWlnaHRcbiAgICAgICAgICAgICogTWF0aC5wb3coXG4gICAgICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGhlaWdodCAvIHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHRcbiAgICAgICAgICAgICAgICAqIHRoaXMucGFyYW1zLnBvd011bHRpcGxpZXJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICogdGhpcy5wYXJhbXMubXVsdGlwbGllcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhlaWdodChtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxvd2VzdEVtcHR5WSA9IC0xO1xuICAgICAgICBtYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvdy5ldmVyeSh2YWwgPT4gIXZhbCkpIHtcbiAgICAgICAgICAgICAgICBsb3dlc3RFbXB0eVkgPSB5O1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWF0cml4Lmxlbmd0aCAtIGxvd2VzdEVtcHR5WSAtIDE7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDYWxjdWxhdGVTY29yZVJlcXVlc3QsIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgSG9sZXNWMUNhbGN1bGF0b3JQYXJhbXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgY291bnREZWNyZWFzZU11bHRpcGxpZXI6IG51bWJlcixcbiAgICAgICAgcHVibGljIGNvdW50SW5jcmVhc2VNdWx0aXBsaWVyOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBjb3ZlcmVkSGVpZ2h0UG93TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgY292ZXJlZEhlaWdodE11bHRpcGxpZXI6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBIb2xlc1YxQ2FsY3VsYXRvciBpbXBsZW1lbnRzIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcGFyYW1zID0gbmV3IEhvbGVzVjFDYWxjdWxhdG9yUGFyYW1zKDE1MCwgNzAsIDEsIDUpLFxuICAgICkge31cblxuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IFtob2xlc0NvdW50LCBob2xlc0NvdmVyZWRIZWlnaHRdID0gdGhpcy5jYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQocmVxdWVzdC5pbWFnaW5hYmxlTWF0cml4LCByZXF1ZXN0LmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IGhvbGVzQ291bnREZWNyZWFzZSA9IHJlcXVlc3Qub3JpZ2luYWxIb2xlcy5sZW5ndGggLSBob2xlc0NvdW50O1xuICAgICAgICBsZXQgaG9sZXNTY29yZSA9IGhvbGVzQ291bnREZWNyZWFzZSA+IDBcbiAgICAgICAgICAgID8gaG9sZXNDb3VudERlY3JlYXNlICogdGhpcy5wYXJhbXMuY291bnREZWNyZWFzZU11bHRpcGxpZXJcbiAgICAgICAgICAgIDogaG9sZXNDb3VudERlY3JlYXNlICogdGhpcy5wYXJhbXMuY291bnRJbmNyZWFzZU11bHRpcGxpZXI7XG4gICAgICAgIGlmIChob2xlc0NvdmVyZWRIZWlnaHQgIT09IDAgJiYgaG9sZXNDb3VudCAhPT0gMCkge1xuICAgICAgICAgICAgaG9sZXNTY29yZSAtPVxuICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodFxuICAgICAgICAgICAgICAgICogTWF0aC5wb3coXG4gICAgICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3ZlcmVkSGVpZ2h0IC8gKHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQgKiBob2xlc0NvdW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgKiB0aGlzLnBhcmFtcy5jb3ZlcmVkSGVpZ2h0UG93TXVsdGlwbGllclxuICAgICAgICAgICAgICAgICkgKiB0aGlzLnBhcmFtcy5jb3ZlcmVkSGVpZ2h0TXVsdGlwbGllcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaG9sZXNTY29yZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhvbGVzQW5kQ292ZXJlZEhlaWdodChpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSwgcmVhbE1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgY29uc3QgW29yaWdpbmFsVGhlSGlnaGVzdEhvbGVZLCBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFldID0gdGhpcy5jYWxjdWxhdGVUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKHJlYWxNYXRyaXgpO1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnNZcyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBsZXQgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSA9IDA7XG4gICAgICAgIGxldCBob2xlc0NvdW50ID0gMDtcbiAgICAgICAgaW1hZ2luYWJsZU1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmICFjb3ZlcmVkQ29sdW1uc1lzLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1uc1lzLnNldCh4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvdmVyZWRZID0gY292ZXJlZENvbHVtbnNZcy5nZXQoeCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRZICE9PSB1bmRlZmluZWQgJiYgIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICBob2xlc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSAhPT0gdW5kZWZpbmVkICYmIG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSArPSB5IC0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdmVyZWRZIDwgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSArPSBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgLSBjb3ZlcmVkWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtob2xlc0NvdW50LCBob2xlc0NvdmVyZWRIZWlnaHRzU3VtXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkobWF0cml4OiBib29sZWFuW11bXSk6IFtudW1iZXJ8dW5kZWZpbmVkLCBudW1iZXJ8dW5kZWZpbmVkXSB7XG4gICAgICAgIGxldCB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgdGhlSGlnaGVzdEhvbGVZID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnNZcyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBtYXRyaXguc29tZSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcm93LnNvbWUoKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwgJiYgIWNvdmVyZWRDb2x1bW5zWXMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zWXMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY292ZXJlZFkgPSBjb3ZlcmVkQ29sdW1uc1lzLmdldCh4KTtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZFkgIT09IHVuZGVmaW5lZCAmJiAhdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoZUhpZ2hlc3RIb2xlWSA9IHk7XG4gICAgICAgICAgICAgICAgICAgIHRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgPSBjb3ZlcmVkWTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt0aGVIaWdoZXN0SG9sZVksIHRoZUhpZ2hlc3RIb2xlQ292ZXJlZFldO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0LCBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2V9IGZyb20gXCIuLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIFNxdWFzaGVkUm93c0NhbGN1bGF0b3JQYXJhbXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgbXVsdGlwbGllcjogbnVtYmVyXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgU3F1YXNoZWRSb3dzQ2FsY3VsYXRvciBpbXBsZW1lbnRzIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcGFyYW1zID0gbmV3IFNxdWFzaGVkUm93c0NhbGN1bGF0b3JQYXJhbXMoNSksXG4gICAgKSB7fVxuXG4gICAgY2FsY3VsYXRlU2NvcmUocmVxdWVzdDogQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0KTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Quc3F1YXNoZWRMaW5lc0NvdW50ICogdGhpcy5wYXJhbXMubXVsdGlwbGllcjtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBUdW5uZWxzQ2FsY3VsYXRvclBhcmFtcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBtaW5pbXVtVmFsdWFibGVIZWlnaHQ6IG51bWJlcixcbiAgICAgICAgcHVibGljIGNvdW50TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgaGVpZ2h0UG93TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgaGVpZ2h0TXVsdGlwbGllcjogbnVtYmVyLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFR1bm5lbHNDYWxjdWxhdG9yIGltcGxlbWVudHMgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwYXJhbXMgPSBuZXcgVHVubmVsc0NhbGN1bGF0b3JQYXJhbXMoMywgNzAsIDEsIDcpLFxuICAgICkge31cblxuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IFt0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzQ291bnRdID0gdGhpcy5jYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkKHJlcXVlc3QuaW1hZ2luYWJsZU1hdHJpeCwgcmVxdWVzdC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBpZiAodHVubmVsc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoLXR1bm5lbHNDb3VudCAqIHRoaXMucGFyYW1zLmNvdW50TXVsdGlwbGllcilcbiAgICAgICAgICAgIC0gKHR1bm5lbHNTdW1IZWlnaHRcbiAgICAgICAgICAgICAgICAqIE1hdGgucG93KFxuICAgICAgICAgICAgICAgICAgICB0dW5uZWxzU3VtSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB0dW5uZWxzU3VtSGVpZ2h0IC8gKHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQgKiB0dW5uZWxzQ291bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAqIHRoaXMucGFyYW1zLmhlaWdodFBvd011bHRpcGxpZXJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKiB0aGlzLnBhcmFtcy5oZWlnaHRNdWx0aXBsaWVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQoaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10sIHJlYWxNYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGxldCByZWFsQ292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICAgICAgcmVhbE1hdHJpeC5ldmVyeSgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZWFsQ292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGxldCB0dW5uZWxzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj47XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSBpbWFnaW5hYmxlTWF0cml4WzBdLmxlbmd0aDtcbiAgICAgICAgaW1hZ2luYWJsZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdmFsXG4gICAgICAgICAgICAgICAgICAgICYmICFpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHgpXG4gICAgICAgICAgICAgICAgICAgICYmICFyZWFsQ292ZXJlZENvbHVtbnMuaGFzKHgpXG4gICAgICAgICAgICAgICAgICAgICYmICh4ID09PSAwIHx8IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeCAtIDEpKVxuICAgICAgICAgICAgICAgICAgICAmJiAoeCA9PT0gZmllbGRXaWR0aCAtIDEgfHwgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4ICsgMSkpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHR1bm5lbHMuc2V0KHgsICh0dW5uZWxzLmdldCh4KSB8fCAwKSArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5zaXplIDwgZmllbGRXaWR0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCB0dW5uZWxzU3VtSGVpZ2h0ID0gMDtcbiAgICAgICAgbGV0IHR1bm5lbHNDb3VudCA9IDA7XG4gICAgICAgIHR1bm5lbHMuZm9yRWFjaChoZWlnaHQgPT4ge1xuICAgICAgICAgICAgaWYgKGhlaWdodCA+PSB0aGlzLnBhcmFtcy5taW5pbXVtVmFsdWFibGVIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0dW5uZWxzU3VtSGVpZ2h0ICs9IGhlaWdodDtcbiAgICAgICAgICAgICAgICB0dW5uZWxzQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbdHVubmVsc1N1bUhlaWdodCwgdHVubmVsc0NvdW50XTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUmVzdWx0fSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBQbGFjaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7fVxuZXhwb3J0IGNsYXNzIEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5leHBvcnQgY2xhc3MgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuZXhwb3J0IGNsYXNzIE5vdFN1cHBvcnRlZERpcmVjdGlvblN0ZXBFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2Uge1xuICAgIC8qKlxuICAgICAqIEB0aHJvd3MgUGxhY2luZ0Vycm9yXG4gICAgICovXG4gICAgcGxhY2UoZ2FtZURhdGE6IEdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0PzogRmlndXJlUGxhY2luZ1Jlc3VsdCk6IHZvaWQ7XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtcbiAgICBDb21tYW5kQnVzLFxuICAgIERyb3BGaWd1cmVzQ29tbWFuZCxcbiAgICBNb3ZlRG93bkNvbW1hbmQsXG4gICAgTW92ZUxlZnRDb21tYW5kLFxuICAgIE1vdmVSaWdodENvbW1hbmQsXG4gICAgTW92ZVRvWENvbW1hbmQsXG4gICAgTW92ZVRvWUNvbW1hbmQsXG4gICAgVHVybkNsb2Nrd2lzZUNvbW1hbmQsXG4gICAgVHVyblRvU3RhdGVDb21tYW5kXG59IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0Ryb3BQbGFjaW5nU3RlcCwgRmlndXJlUGxhY2luZ1Jlc3VsdCwgTW92ZVhQbGFjaW5nU3RlcCwgTW92ZVlQbGFjaW5nU3RlcCwgVHVyblBsYWNpbmdTdGVwfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2UsIEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yLCBJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yLCBOb3RTdXBwb3J0ZWREaXJlY3Rpb25TdGVwRXJyb3J9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIEluc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1BlcmZvcm1lckludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcGxhY2UoZ2FtZURhdGE6IEdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0PzogRmlndXJlUGxhY2luZ1Jlc3VsdCkge1xuICAgICAgICBpZiAodHlwZW9mIHNldEltbWVkaWF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNldEltbWVkaWF0ZSgoKSA9PiB0aGlzLnBsYWNlSW1wbChnYW1lRGF0YSwgcGxhY2luZ1Jlc3VsdCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnBsYWNlSW1wbChnYW1lRGF0YSwgcGxhY2luZ1Jlc3VsdCksIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwbGFjZUltcGwoZ2FtZURhdGE6IEdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0PzogRmlndXJlUGxhY2luZ1Jlc3VsdCkge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBsYWNpbmdSZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRmlndXJlID0gZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXNbMF07XG4gICAgICAgIGNvbnN0IHRhcmdldEZpZ3VyZSA9IHBsYWNpbmdSZXN1bHQuZmlndXJlc1RhcmdldFN0YXRlcy5nZXQob3JpZ2luYWxGaWd1cmUpO1xuICAgICAgICBpZiAoIXRhcmdldEZpZ3VyZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsRmlndXJlLmZpZ3VyZSAhPT0gdGFyZ2V0RmlndXJlLmZpZ3VyZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEluY29uc2lzdGVudFRhcmdldFN0YXRlRXJyb3IoXCJCb3RoIG9mIHRoZSBvcmlnaW5hbCBhbmQgdGhlIHRhcmdldCBmYWxsaW5nIGZpZ3VyZXMgbXVzdCBoYXZlIHRoZSBzYW1lIGZpZ3VyZSBpbiBpdC5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBwbGFjaW5nUmVzdWx0LnBsYWNpbmdTdGVwcy5mb3JFYWNoKHN0ZXAgPT4ge1xuICAgICAgICAgICAgaWYgKHN0ZXAgaW5zdGFuY2VvZiBUdXJuUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBUdXJuVG9TdGF0ZUNvbW1hbmQoZ2FtZURhdGEsIHN0ZXAudGFyZ2V0KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBNb3ZlWFBsYWNpbmdTdGVwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVRvWENvbW1hbmQoZ2FtZURhdGEsIHN0ZXAudGFyZ2V0KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBNb3ZlWVBsYWNpbmdTdGVwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVRvWUNvbW1hbmQoZ2FtZURhdGEsIHN0ZXAudGFyZ2V0KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBEcm9wUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBEcm9wRmlndXJlc0NvbW1hbmQoZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZERpcmVjdGlvblN0ZXBFcnJvcihcIlVua25vd24gc3RlcCBcIiArIHN0ZXAuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RHJvcEZpZ3VyZXNDb21tYW5kLCBDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgR2FtZU92ZXJDb21tYW5kLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuXG5jbGFzcyBGYWxsaW5nUmVzdWx0IHtcbiAgICBwdWJsaWMgdHJhbnNmZXJyZWRGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10gPSBbXTtcbiAgICBwdWJsaWMgaXNHYW1lT3ZlcjogYm9vbGVhbiA9IGZhbHNlO1xufVxuXG5leHBvcnQgY2xhc3MgUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxUaWNrLCB0aGlzLnByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd24sIHRoaXMucHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kKGNvbW1hbmQ6IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQpIHtcbiAgICAgICAgY29uc3QgZmFsbGluZ1Jlc3VsdCA9IHRoaXMuZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgICAgICBsZXQgc3F1YXNoZWRMaW5lcyA9IHRoaXMuc3F1YXNoTGluZXMoY29tbWFuZC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBpZiAoZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBHYW1lT3ZlckNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmFsbFRpY2tQcm9jZXNzZWRFdmVudChcbiAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEsXG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyxcbiAgICAgICAgICAgIHNxdWFzaGVkTGluZXMsXG4gICAgICAgICAgICAwXG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZChjb21tYW5kOiBEcm9wRmlndXJlc0NvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGZhbGxpbmdSZXN1bHQgPSBuZXcgRmFsbGluZ1Jlc3VsdCgpO1xuICAgICAgICBsZXQgZHJvcHBlZExpbmVzID0gMDtcbiAgICAgICAgd2hpbGUgKGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgb25lQ2VsbEZhbGxpbmdSZXN1bHQgPSB0aGlzLmZhbGxGaWd1cmVzRm9yT25lQ2VsbChjb21tYW5kLmdhbWVEYXRhKTtcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLnB1c2goLi4ub25lQ2VsbEZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzKTtcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciA9IGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciB8fCBvbmVDZWxsRmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyO1xuICAgICAgICAgICAgZHJvcHBlZExpbmVzKys7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNxdWFzaGVkTGluZXMgPSB0aGlzLnNxdWFzaExpbmVzKGNvbW1hbmQuZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgaWYgKGZhbGxpbmdSZXN1bHQuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgR2FtZU92ZXJDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQoXG4gICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLFxuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMsXG4gICAgICAgICAgICBzcXVhc2hlZExpbmVzLFxuICAgICAgICAgICAgZHJvcHBlZExpbmVzIC0gMSxcbiAgICAgICAgKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmYWxsRmlndXJlc0Zvck9uZUNlbGwoZ2FtZURhdGE6IEdhbWVEYXRhKTogRmFsbGluZ1Jlc3VsdCB7XG4gICAgICAgIGxldCBmYWxsaW5nUmVzdWx0ID0gbmV3IEZhbGxpbmdSZXN1bHQoKTtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaCgoZmFsbGluZ0ZpZ3VyZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZ3VyZUNhbkZhbGwoZ2FtZURhdGEubWF0cml4LCBmYWxsaW5nRmlndXJlKSkge1xuICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlndXJlR2FtZU92ZXJSZXN1bHQgPSB0aGlzLnRyYW5zZmVyRmlndXJlVG9NYXRyaXgoXG4gICAgICAgICAgICAgICAgICAgIGdhbWVEYXRhLm1hdHJpeCxcbiAgICAgICAgICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMucHVzaCguLi5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5zcGxpY2UoaW5kZXgsIDEpKTtcbiAgICAgICAgICAgICAgICBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgPSBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgfHwgZmlndXJlR2FtZU92ZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsbGluZ1Jlc3VsdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpZ3VyZUNhbkZhbGwobWF0cml4OiBib29sZWFuW11bXSwgZmFsbGluZ0ZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueCwgZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55ICsgMSksXG4gICAgICAgICAgICBtYXRyaXhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZmVyRmlndXJlVG9NYXRyaXgobWF0cml4OiBib29sZWFuW11bXSwgZmFsbGluZ0ZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgaXNHYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKVxuICAgICAgICAgICAgLmZvckVhY2goKHJvdywgZmlndXJlQ2VsbFkpID0+IHtcbiAgICAgICAgICAgICAgICByb3cuZm9yRWFjaCgoY2VsbFZhbHVlLCBmaWd1cmVDZWxsWCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGxWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRyaXhYID0gZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi54ICsgZmlndXJlQ2VsbFg7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRyaXhZID0gZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55ICsgZmlndXJlQ2VsbFk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRyaXhZIGluIG1hdHJpeFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgbWF0cml4WCBpbiBtYXRyaXhbbWF0cml4WV1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFtYXRyaXhbbWF0cml4WV1bbWF0cml4WF1cbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXhbbWF0cml4WV1bbWF0cml4WF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNHYW1lT3ZlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNHYW1lT3ZlcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNxdWFzaExpbmVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXJbXSB7XG4gICAgICAgIGxldCBsaW5lc1RvU3F1YXNoOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBsZXQgY2FuQmVTcXVhc2hlZCA9IHJvdy5ldmVyeShjZWxsID0+IGNlbGwpO1xuICAgICAgICAgICAgaWYgKGNhbkJlU3F1YXNoZWQpIHtcbiAgICAgICAgICAgICAgICBsaW5lc1RvU3F1YXNoLnB1c2goeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgICBsaW5lc1RvU3F1YXNoLmZvckVhY2goeSA9PiB7XG4gICAgICAgICAgICBtYXRyaXguc3BsaWNlKHksIDEpO1xuICAgICAgICAgICAgbWF0cml4LnVuc2hpZnQobmV3IEFycmF5KG1hdHJpeFswXS5sZW5ndGgpLmZpbGwoZmFsc2UpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaW5lc1RvU3F1YXNoO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXN9IGZyb20gXCIuLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgSW5pdEdhbWVDb21tYW5kLCBQYXVzZUdhbWVDb21tYW5kLCBSZXN1bWVHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7R2FtZUNvbnRyb2xsZXJ9IGZyb20gXCIuLi9UZXRyaXMvR2FtZUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7TW92aW5nSGFuZGxlcn0gZnJvbSBcIi4uL1RldHJpcy9Nb3ZpbmdIYW5kbGVyL01vdmluZ0hhbmRsZXJcIjtcbmltcG9ydCB7QWx3YXlzT25lRmlndXJlU3Bhd25lcn0gZnJvbSBcIi4uL1RldHJpcy9GaWd1cmVzU3Bhd25lci9BbHdheXNPbmVGaWd1cmVTcGF3bmVyXCI7XG5pbXBvcnQge1NxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlcn0gZnJvbSBcIi4uL1RldHJpcy9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyXCI7XG5pbXBvcnQge0NvbWJvQ291bnRlcn0gZnJvbSBcIi4uL1RldHJpcy9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyXCI7XG5pbXBvcnQge0ZhbGxUaWNrU2NvcmVDb3VudGVyfSBmcm9tIFwiLi4vVGV0cmlzL1Njb3JlQ291bnRlci9GYWxsVGlja1Njb3JlQ291bnRlclwiO1xuaW1wb3J0IHtTdGF0c0NvdW50ZXJ9IGZyb20gXCIuLi9UZXRyaXMvU3RhdHNDb3VudGVyL1N0YXRzQ291bnRlclwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7Q29uc3RUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4uL1RldHJpcy9UaW1pbmdzSGFuZGxlci9Db25zdFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge1RldHJpc1NvbHZlcn0gZnJvbSBcIi4uL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXJcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1Jlc29sdmVyfSBmcm9tIFwiLi4vVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci9GaWd1cmVQbGFjaW5nUmVzb2x2ZXJcIjtcbmltcG9ydCB7Q2FsY3VsYXRvckFnZ3JlZ2F0ZX0gZnJvbSBcIi4uL1RldHJpc1NvbHZlci9TY29yZUNhbGN1bGF0b3IvQ2FsY3VsYXRvckFnZ3JlZ2F0ZVwiO1xuaW1wb3J0IHtGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvcn0gZnJvbSBcIi4uL1RldHJpc1NvbHZlci9TY29yZUNhbGN1bGF0b3IvRmlsbGFibGVDZWxscy9GaWxsYWJsZUNlbGxzQ2FsY3VsYXRvclwiO1xuaW1wb3J0IHtGaWxsZWRIZWlnaHRDYWxjdWxhdG9yfSBmcm9tIFwiLi4vVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9GaWxsZWRIZWlnaHQvRmlsbGVkSGVpZ2h0Q2FsY3VsYXRvclwiO1xuaW1wb3J0IHtIb2xlc1YxQ2FsY3VsYXRvcn0gZnJvbSBcIi4uL1RldHJpc1NvbHZlci9TY29yZUNhbGN1bGF0b3IvSG9sZXMvSG9sZXNWMUNhbGN1bGF0b3JcIjtcbmltcG9ydCB7U3F1YXNoZWRSb3dzQ2FsY3VsYXRvcn0gZnJvbSBcIi4uL1RldHJpc1NvbHZlci9TY29yZUNhbGN1bGF0b3IvU3F1YXNoZWRSb3dzL1NxdWFzaGVkUm93c0NhbGN1bGF0b3JcIjtcbmltcG9ydCB7VHVubmVsc0NhbGN1bGF0b3J9IGZyb20gXCIuLi9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL1R1bm5lbHMvVHVubmVsc0NhbGN1bGF0b3JcIjtcbmltcG9ydCB7SW5zdGFudEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJ9IGZyb20gXCIuLi9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1BlcmZvcm1lci9JbnN0YW50RmlndXJlUGxhY2luZ1BlcmZvcm1lclwiO1xuaW1wb3J0IHtSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3J9IGZyb20gXCIuLi9UZXRyaXMvRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IvUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yXCI7XG5pbXBvcnQge0JlbmNoUnVuUGFyYW1ldGVyc30gZnJvbSBcIi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBCZW5jaFNvbHZlckZhY2FkZSB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGJlbmNoUnVuUGFyYW1ldGVyczogQmVuY2hSdW5QYXJhbWV0ZXJzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzID0gbmV3IEV2ZW50QnVzKCksXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1cyA9IG5ldyBDb21tYW5kQnVzKCksXG4gICAgICAgIHByaXZhdGUgZ2FtZUNvbnRyb2xsZXIgPSBuZXcgR2FtZUNvbnRyb2xsZXIoXG4gICAgICAgICAgICBuZXcgQ29uc3RUaW1pbmdzSGFuZGxlcihJbmZpbml0eSksXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgbW92aW5nSGFuZGxlciA9IG5ldyBNb3ZpbmdIYW5kbGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yID0gbmV3IFJlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1c1xuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGZpZ3VyZXNTcGF3bmVyID0gbmV3IEFsd2F5c09uZUZpZ3VyZVNwYXduZXIoXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgbGV2ZWxDb3VudGVyID0gbmV3IFNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlcihcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIDgsXG4gICAgICAgICAgICAxNSxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBjb21ib0NvdW50ZXIgPSBuZXcgQ29tYm9Db3VudGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIHNjb3JlQ291bnRlciA9IG5ldyBGYWxsVGlja1Njb3JlQ291bnRlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBzdGF0c0NvdW50ZXIgPSBuZXcgU3RhdHNDb3VudGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGEgPSBHYW1lRGF0YS5tYWtlU2ltcGxlKCksXG4gICAgICAgIHB1YmxpYyB0ZXRyaXNTb2x2ZXIgPSBuZXcgVGV0cmlzU29sdmVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgbmV3IEZpZ3VyZVBsYWNpbmdSZXNvbHZlcihcbiAgICAgICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgICAgIG5ldyBDYWxjdWxhdG9yQWdncmVnYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yKGJlbmNoUnVuUGFyYW1ldGVycy5maWxsYWJsZUNlbGxzQ2FsY3VsYXRvclBhcmFtcyksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBGaWxsZWRIZWlnaHRDYWxjdWxhdG9yKGJlbmNoUnVuUGFyYW1ldGVycy5maWxsZWRIZWlnaHRDYWxjdWxhdG9yUGFyYW1zKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IEhvbGVzVjFDYWxjdWxhdG9yKGJlbmNoUnVuUGFyYW1ldGVycy5ob2xlc1YxQ2FsY3VsYXRvclBhcmFtcyksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTcXVhc2hlZFJvd3NDYWxjdWxhdG9yKGJlbmNoUnVuUGFyYW1ldGVycy5zcXVhc2hlZFJvd3NDYWxjdWxhdG9yUGFyYW1zKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFR1bm5lbHNDYWxjdWxhdG9yKGJlbmNoUnVuUGFyYW1ldGVycy50dW5uZWxzQ2FsY3VsYXRvclBhcmFtcyksXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgbmV3IEluc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyKGNvbW1hbmRCdXMpLFxuICAgICAgICApXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHN0YXJ0KGdhbWVEYXRhPzogR2FtZURhdGEpIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGdhbWVEYXRhIHx8IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgSW5pdEdhbWVDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVzdW1lR2FtZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUGF1c2VHYW1lQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtCZW5jaFNvbHZlckZhY2FkZX0gZnJvbSBcIi4vVGV0cmlzU29sdmluZ0JlbmNoL0JlbmNoU29sdmVyRmFjYWRlXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQsIEdhbWVPdmVyRXZlbnR9IGZyb20gXCIuL1RldHJpcy9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtCZW5jaFJ1blBhcmFtZXRlcnN9IGZyb20gXCIuL1RldHJpc1NvbHZpbmdCZW5jaC9Db21tb25cIjtcblxuY29uc3Qgd29ya2VycG9vbCA9IHJlcXVpcmUoJ3dvcmtlcnBvb2wnKTtcblxuYXN5bmMgZnVuY3Rpb24gc29sdmVUZXRyaXMocGFyYW1zOiBCZW5jaFJ1blBhcmFtZXRlcnMpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IGV2ZW50QnVzID0gbmV3IEV2ZW50QnVzKCk7XG4gICAgbGV0IGJlbmNoID0gbmV3IEJlbmNoU29sdmVyRmFjYWRlKHBhcmFtcywgZXZlbnRCdXMpO1xuICAgIGJlbmNoLnN0YXJ0KCk7XG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmdhbWVEYXRhLnN0YXRzLmZpZ3VyZXNGYWxsZW4gPj0gMV8wMDBfMDAwKSB7XG4gICAgICAgICAgICAgICAgYmVuY2gucGF1c2UoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGV2ZW50LmdhbWVEYXRhLnN0YXRzLmZpZ3VyZXNGYWxsZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZXZlbnRCdXMub24oRXZlbnRUeXBlLkdhbWVPdmVyLCAoZXZlbnQ6IEdhbWVPdmVyRXZlbnQpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoZXZlbnQuZ2FtZURhdGEuc3RhdHMuZmlndXJlc0ZhbGxlbik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vLyBjcmVhdGUgYSB3b3JrZXIgYW5kIHJlZ2lzdGVyIHB1YmxpYyBmdW5jdGlvbnNcbndvcmtlcnBvb2wud29ya2VyKHtcbiAgICBzb2x2ZVRldHJpczogc29sdmVUZXRyaXMsXG59KTtcbiJdLCJuYW1lcyI6WyJmYWN0b3J5Iiwic2VsZiIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtb2R1bGUiLCJfX3VudXNlZF93ZWJwYWNrX2V4cG9ydHMiLCJQcm9taXNlIiwiV29ya2VySGFuZGxlciIsImVudmlyb25tZW50IiwiREVCVUdfUE9SVF9BTExPQ0FUT1IiLCJQb29sIiwic2NyaXB0Iiwib3B0aW9ucyIsInRoaXMiLCJ3b3JrZXJzIiwidGFza3MiLCJmb3JrQXJncyIsIk9iamVjdCIsImZyZWV6ZSIsImZvcmtPcHRzIiwid29ya2VyVGhyZWFkT3B0cyIsImRlYnVnUG9ydFN0YXJ0Iiwibm9kZVdvcmtlciIsIndvcmtlclR5cGUiLCJtYXhRdWV1ZVNpemUiLCJJbmZpbml0eSIsIm9uQ3JlYXRlV29ya2VyIiwib25UZXJtaW5hdGVXb3JrZXIiLCJtYXhXb3JrZXJzIiwiaXNOdW1iZXIiLCJpc0ludGVnZXIiLCJUeXBlRXJyb3IiLCJ2YWxpZGF0ZU1heFdvcmtlcnMiLCJNYXRoIiwibWF4IiwiY3B1cyIsIm1pbldvcmtlcnMiLCJ2YWxpZGF0ZU1pbldvcmtlcnMiLCJfZW5zdXJlTWluV29ya2VycyIsIl9ib3VuZE5leHQiLCJfbmV4dCIsImJpbmQiLCJlbnN1cmVXb3JrZXJUaHJlYWRzIiwidmFsdWUiLCJyb3VuZCIsInByb3RvdHlwZSIsImV4ZWMiLCJtZXRob2QiLCJwYXJhbXMiLCJBcnJheSIsImlzQXJyYXkiLCJyZXNvbHZlciIsImRlZmVyIiwibGVuZ3RoIiwiRXJyb3IiLCJ0YXNrIiwidGltZW91dCIsInB1c2giLCJvcmlnaW5hbFRpbWVvdXQiLCJwcm9taXNlIiwiZGVsYXkiLCJpbmRleE9mIiwiY2FsbCIsIlN0cmluZyIsInByb3h5IiwiYXJndW1lbnRzIiwicG9vbCIsInRoZW4iLCJtZXRob2RzIiwiZm9yRWFjaCIsInNsaWNlIiwid29ya2VyIiwiX2dldFdvcmtlciIsIm1lIiwic2hpZnQiLCJwZW5kaW5nIiwidGVybWluYXRlZCIsIl9yZW1vdmVXb3JrZXIiLCJpIiwiYnVzeSIsIl9jcmVhdGVXb3JrZXJIYW5kbGVyIiwicmVsZWFzZVBvcnQiLCJkZWJ1Z1BvcnQiLCJfcmVtb3ZlV29ya2VyRnJvbUxpc3QiLCJyZXNvbHZlIiwicmVqZWN0IiwidGVybWluYXRlIiwiZXJyIiwiaW5kZXgiLCJzcGxpY2UiLCJmb3JjZSIsInJlbW92ZVdvcmtlciIsInByb21pc2VzIiwidGVybVByb21pc2UiLCJ0ZXJtaW5hdGVBbmROb3RpZnkiLCJhbHdheXMiLCJhbGwiLCJzdGF0cyIsInRvdGFsV29ya2VycyIsImJ1c3lXb3JrZXJzIiwiZmlsdGVyIiwiaWRsZVdvcmtlcnMiLCJwZW5kaW5nVGFza3MiLCJhY3RpdmVUYXNrcyIsIm92ZXJyaWRlblBhcmFtcyIsIm5leHRBdmFpbGFibGVTdGFydGluZ0F0IiwiZXhwb3J0cyIsImhhbmRsZXIiLCJwYXJlbnQiLCJTeW50YXhFcnJvciIsIl9vblN1Y2Nlc3MiLCJfb25GYWlsIiwicmVzb2x2ZWQiLCJyZWplY3RlZCIsIl9wcm9jZXNzIiwib25TdWNjZXNzIiwib25GYWlsIiwicyIsIl90aGVuIiwiZiIsIl9yZXNvbHZlMiIsInJlc3VsdCIsImZuIiwiX3JlamVjdDIiLCJlcnJvciIsImNhbmNlbCIsIkNhbmNlbGxhdGlvbkVycm9yIiwidGltZXIiLCJzZXRUaW1lb3V0IiwiVGltZW91dEVycm9yIiwiY2xlYXJUaW1lb3V0IiwiY2FsbGJhY2siLCJyZXMiLCJtZXNzYWdlIiwic3RhY2siLCJyZW1haW5pbmciLCJyZXN1bHRzIiwicCIsImNvbnN0cnVjdG9yIiwibmFtZSIsIl9hcnJheUxpa2VUb0FycmF5IiwiYXJyIiwibGVuIiwiYXJyMiIsIm93bktleXMiLCJvYmplY3QiLCJlbnVtZXJhYmxlT25seSIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJzeW1ib2xzIiwic3ltIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImFwcGx5IiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsInJlcXVpcmVGb29sV2VicGFjayIsIlRFUk1JTkFURV9NRVRIT0RfSUQiLCJXb3JrZXJUaHJlYWRzIiwidHJ5UmVxdWlyZVdvcmtlclRocmVhZHMiLCJlbnN1cmVXZWJXb3JrZXIiLCJXb3JrZXIiLCJjb2RlIiwic2V0dXBCcm93c2VyV29ya2VyIiwiaXNCcm93c2VyV29ya2VyIiwib24iLCJldmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkYXRhIiwic2VuZCIsInBvc3RNZXNzYWdlIiwic2V0dXBXb3JrZXJUaHJlYWRXb3JrZXIiLCJ3b3JrZXJUaHJlYWRPcHRpb25zIiwidGFyZ2V0Iiwic291cmNlIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJfb2JqZWN0U3ByZWFkIiwic3Rkb3V0Iiwic3RkZXJyIiwiaXNXb3JrZXJUaHJlYWQiLCJraWxsIiwiZGlzY29ubmVjdCIsInNldHVwUHJvY2Vzc1dvcmtlciIsImNoaWxkX3Byb2Nlc3MiLCJmb3JrIiwiaXNDaGlsZFByb2Nlc3MiLCJyZXNvbHZlRm9ya09wdGlvbnMiLCJvcHRzIiwicHJvY2Vzc0V4ZWNBcmd2IiwicHJvY2VzcyIsImV4ZWNBcmd2Iiwiam9pbiIsImluc3BlY3RvckFjdGl2ZSIsImRlYnVnQnJrIiwiYXJnIiwiYXNzaWduIiwiY29uY2F0IiwiX29wdGlvbnMiLCJvbkVycm9yIiwiaWQiLCJwcm9jZXNzaW5nIiwidW5kZWZpbmVkIiwiY3JlYXRlIiwicGxhdGZvcm0iLCJCbG9iIiwid2luZG93IiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiYmxvYiIsInR5cGUiLCJfX2Rpcm5hbWUiLCJnZXREZWZhdWx0V29ya2VyIiwic2V0dXBXb3JrZXIiLCJyZWFkeSIsInJlcXVlc3RRdWV1ZSIsInJlc3BvbnNlIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsIm1pbkxlbiIsIm4iLCJ0b1N0cmluZyIsImZyb20iLCJ0ZXN0IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwiRiIsImRvbmUiLCJlIiwiX2UiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwic3RlcCIsIm5leHQiLCJfZTIiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsInJlcXVlc3QiLCJkaXNwYXRjaFF1ZXVlZFJlcXVlc3RzIiwiaXNFdmVudCIsInBheWxvYWQiLCJ0ZXJtaW5hdGluZyIsInRlbXAiLCJwcm9wcyIsIm9iamVjdFRvRXJyb3IiLCJleGl0Q29kZSIsInNpZ25hbENvZGUiLCJzcGF3bmFyZ3MiLCJzcGF3bmZpbGUiLCJ0ZXJtaW5hdGlvbkhhbmRsZXIiLCJsYXN0SWQiLCJjbGVhbnVwIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwia2lsbGVkIiwiY2xlYW5FeGl0VGltZW91dCIsIm9uY2UiLCJfdHJ5UmVxdWlyZVdvcmtlclRocmVhZHMiLCJfc2V0dXBQcm9jZXNzV29ya2VyIiwiX3NldHVwQnJvd3NlcldvcmtlciIsIl9zZXR1cFdvcmtlclRocmVhZFdvcmtlciIsIkRlYnVnUG9ydEFsbG9jYXRvciIsInBvcnRzIiwic3RhcnRpbmciLCJwb3J0IiwiaXNOb2RlIiwibm9kZVByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJ3b3JrZXJfdGhyZWFkcyIsInRyeVJlcXVpcmVGb29sV2VicGFjayIsImlzTWFpblRocmVhZCIsImNvbm5lY3RlZCIsIldpbmRvdyIsIm5hdmlnYXRvciIsImhhcmR3YXJlQ29uY3VycmVuY3kiLCJldmFsIiwiX191bnVzZWRfd2VicGFja19tb2R1bGUiLCJleGl0IiwicGFyZW50UG9ydCIsImNvbnZlcnRFcnJvciIsImdldE93blByb3BlcnR5TmFtZXMiLCJyZWR1Y2UiLCJwcm9kdWN0IiwiaXNQcm9taXNlIiwicnVuIiwiYXJncyIsIkZ1bmN0aW9uIiwiY3VycmVudFJlcXVlc3RJZCIsInJlZ2lzdGVyIiwiaGFzT3duUHJvcGVydHkiLCJlbWl0IiwiYWRkIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwid29ya2VyRW1pdCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJFdmVudFR5cGUiLCJDb21tYW5kVHlwZSIsIkZpZ3VyZVR1cm5TdGF0ZSIsIkZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQiLCJnYW1lRGF0YSIsInRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzIiwic3F1YXNoZWRMaW5lcyIsImRyb3BwZWRMaW5lcyIsImdldEV2ZW50VHlwZSIsIkZhbGxpbmdUaWNrUHJvY2Vzc2VkIiwiR2FtZU92ZXJFdmVudCIsIkdhbWVPdmVyIiwiRmlndXJlc01vdmVkRXZlbnQiLCJGaWd1cmVzTW92ZWQiLCJGaWd1cmVzU3Bhd25lZEV2ZW50IiwibmV3RmlndXJlcyIsIkZpZ3VyZXNTcGF3bmVkIiwiRXZlbnRCdXMiLCJoYW5kbGVycyIsIk1hcCIsInVuaXF1ZSIsImdldCIsInNvbWUiLCJib3VuZEhhbmRsZXIiLCJzZXQiLCJvZmYiLCJmaXJlIiwiZXZlbnRQYXlsb2FkIiwiSW5pdEdhbWVDb21tYW5kIiwiZ2V0Q29tbWFuZFR5cGUiLCJJbml0R2FtZSIsIlJlc3VtZUdhbWVDb21tYW5kIiwiUmVzdW1lR2FtZSIsIlBhdXNlR2FtZUNvbW1hbmQiLCJQYXVzZUdhbWUiLCJGaWd1cmVzRmFsbFRpY2tDb21tYW5kIiwiRmlndXJlc0ZhbGxUaWNrIiwiR2FtZU92ZXJDb21tYW5kIiwiUmVuZGVyQ29tbWFuZCIsIlJlbmRlciIsIk1vdmVUb1hDb21tYW5kIiwieCIsIk1vdmVUb1giLCJNb3ZlVG9ZQ29tbWFuZCIsInkiLCJNb3ZlVG9ZIiwiVHVyblRvU3RhdGVDb21tYW5kIiwidHVyblN0YXRlIiwiVHVyblRvU3RhdGUiLCJEcm9wRmlndXJlc0NvbW1hbmQiLCJGaWd1cmVzRmFsbERvd24iLCJDb21tYW5kQnVzIiwiYWRkSGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJBYnN0cmFjdEZpZ3VyZSIsImdldFR1cm4iLCJmaWd1cmVUdXJuU3RhdGUiLCJPbmUiLCJnZXRGaXJzdFR1cm4iLCJUd28iLCJnZXRTZWNvbmRUdXJuIiwiVGhyZWUiLCJnZXRUaGlyZFR1cm4iLCJGb3VyIiwiZ2V0Rm9ydGhUdXJuIiwiU2ltcGx5Um90YXRhYmxlRmlndXJlIiwiZ2V0Tm9ybWFsaXplZEZpZ3VyZSIsImZpZ3VyZSIsImdldEZpZ3VyZSIsInRoZUxvbmdlc3RSb3dTaXplIiwicHJldmlvdXMiLCJjdXJyZW50IiwibWFwIiwicm93Iiwib3JpZ2luYWxMZW5ndGgiLCJmaWxsIiwib3JpZ2luYWxGaWd1cmUiLCJ0dXJuZWRGaWd1cmUiLCJvcmlnaW5hbEZpZ3VyZUhlaWdodCIsIm9yaWdpbmFsRmlndXJlV2lkdGgiLCJyZXZlcnNlIiwiVEZpZ3VyZSIsInNwbGl0IiwiaXRlbSIsIlJpZ2h0TEZpZ3VyZSIsIkxlZnRMRmlndXJlIiwiU3F1YXJlRmlndXJlIiwiU3RpY2tGaWd1cmUiLCJMWkZpZ3VyZSIsIlJaRmlndXJlIiwiQ29vcmRpbmF0ZSIsIkZhbGxpbmdGaWd1cmUiLCJwb3NpdGlvbiIsImNvbG9yIiwiR2FtZVNldHRpbmdzIiwiZmllbGRXaWR0aCIsImZpZWxkSGVpZ2h0IiwiZmlndXJlcyIsIlN0YXRzIiwiZmlndXJlc0ZhbGxlbiIsImxpbmVzU3F1YXNoZWQiLCJHYW1lRGF0YSIsImlzSW5pdGlhbGl6ZWQiLCJpc0dhbWVPdmVyIiwiZmFsbGluZ0ZpZ3VyZXMiLCJtYXRyaXgiLCJuZXh0VGlja1RpbWVvdXRJZCIsInNldHRpbmdzIiwibGV2ZWwiLCJzY29yZSIsImNvbWJvIiwic3RhdGljIiwid2lkdGgiLCJoZWlnaHQiLCJfIiwiR2FtZUNvbnRyb2xsZXIiLCJ0aW1pbmdzSGFuZGxlciIsImV2ZW50QnVzIiwiY29tbWFuZEJ1cyIsIm1ha2VTaW1wbGUiLCJpbml0R2FtZUhhbmRsZXIiLCJyZXN1bWVHYW1lSGFuZGxlciIsInBhdXNlR2FtZUhhbmRsZXIiLCJnYW1lT3ZlckhhbmRsZXIiLCJjb21tYW5kIiwib25GYWxsVGlja1Byb2Nlc3NlZCIsImZhbGxUaWNrIiwiZ2V0RGVsYXlGb3JOZXh0VGlja01zIiwiRmlndXJlUGxhY2luZ0NoZWNrZXIiLCJ0YXJnZXRGaWd1cmVNYXRyaXgiLCJ0YXJnZXRQb3NpdGlvbiIsImV2ZXJ5IiwicmVhbFkiLCJyZWFsWCIsIkVudW1IZWxwZXIiLCJ2YWwiLCJOdW1iZXIiLCJwYXJzZUludCIsImlzTmFOIiwidmFsdWVzIiwiVG9BcnJheSIsImZsb29yIiwicmFuZG9tIiwiTW92aW5nSGFuZGxlciIsIk1vdmVMZWZ0IiwicHJvY2Vzc01vdmVMZWZ0Q29tbWFuZCIsIk1vdmVSaWdodCIsInByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kIiwiTW92ZURvd24iLCJwcm9jZXNzTW92ZURvd25Db21tYW5kIiwiVHVybkNsb2Nrd2lzZSIsInByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZCIsInByb2Nlc3NNb3ZlVG9YQ29tbWFuZCIsInByb2Nlc3NNb3ZlVG9ZQ29tbWFuZCIsInByb2Nlc3NUdXJuVG9TdGF0ZUNvbW1hbmQiLCJjYW5GaWd1cmVCZVBsYWNlZCIsImFsbFR1cm5TdGF0ZXMiLCJuZXh0VHVyblN0YXRlIiwibW92aW5nTW9kaWZpZXIiLCJBbHdheXNPbmVGaWd1cmVTcGF3bmVyIiwiaW5pdEhhbmRsZXIiLCJwcm9jZXNzT25GYWxsVGljayIsImFkZEZpZ3VyZSIsImZpZ3VyZUluZGV4IiwiR2V0UmFuZG9tIiwiZmlndXJlTWF0cml4IiwiZmlndXJlV2lkdGgiLCJjb29yZGluYXRlIiwiY2VpbCIsImZhbGxpbmdGaWd1cmUiLCJTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIiLCJsZXZlbEluY3JlYXNlT25TcXVhc2hlZFJvd3NOdW1iZXIiLCJtYXhMZXZlbHMiLCJzcXVhc2hlZFJvd3NDb3VudGVyIiwicHJvY2Vzc0luaXRHYW1lQ29tbWFuZCIsIm1pbiIsIkNvbWJvQ291bnRlciIsIkZhbGxUaWNrU2NvcmVDb3VudGVyIiwic3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcCIsInJld2FyZE9uQ29tYm8iLCJvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkIiwicHJldmlvdXNUaHJlc2hvbGRSZXdhcmQiLCJyZXdhcmQiLCJyb3dzU3F1YXNoZWRUaHJlc2hvbGQiLCJTdGF0c0NvdW50ZXIiLCJDb25zdFRpbWluZ3NIYW5kbGVyIiwiZGVsYXlNcyIsIlRldHJpc1NvbHZlciIsImZpZ3VyZVBsYWNpbmdSZXNvbHZlciIsImZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIiLCJvbkZpZ3VyZXNTcGF3bmVkIiwidGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMiLCJwbGFjZSIsIlR1cm5QbGFjaW5nU3RlcCIsIl9wZXJzaXN0ZWQiLCJwZXJzaXN0ZWQiLCJNb3ZlWFBsYWNpbmdTdGVwIiwiTW92ZVlQbGFjaW5nU3RlcCIsIkRyb3BQbGFjaW5nU3RlcCIsIkZpZ3VyZVBsYWNpbmdSZXN1bHQiLCJmaWd1cmVzVGFyZ2V0U3RhdGVzIiwicGxhY2luZ1N0ZXBzIiwiSG9sZSIsImlzT3BlbmVkIiwiY2VsbHMiLCJIb2xlc0hlbHBlciIsImhvbGVzIiwiSG9sZUluUHJvY2VzcyIsInByZXZpb3VzUm93T3BlblhzIiwiY3VycmVudFJvd09wZW5YcyIsImNvbnRpbnVlcyIsImhvbGVzSW5Qcm9jZXNzIiwiY292ZXJlZENvbHVtbnMiLCJTZXQiLCJob2xlIiwiaGFzIiwicHJvY2Vzc2luZ0hvbGUiLCJmaW5kIiwicHJldlgiLCJkb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMiLCJob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZSIsImluaXRpYWxDb29yZGluYXRlIiwiZmluZFRoZVdheU91dEZyb21Ib2xlIiwiY29udmVydENvdmVyZWRDb2x1bW5zVG9YcyIsImFsbENvbHVtbnNGcmVlVG9GYWxsIiwiY2hlY2tGYWxsWCIsInRvWSIsImNvbGxlY3RDb3ZlcmVkQ29sdW1ucyIsInNpemUiLCJDYWxjdWxhdGVTY29yZVJlcXVlc3QiLCJvcmlnaW5hbEhvbGVzIiwib3JpZ2luYWxDb3ZlcmVkQ29sdW1ucyIsImltYWdpbmFibGVNYXRyaXgiLCJpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMiLCJzcXVhc2hlZExpbmVzQ291bnQiLCJQbGFjZVJlc29sdmluZ0Vycm9yIiwiR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IiLCJGaWd1cmVQbGFjaW5nUmVzb2x2ZXIiLCJzY29yZUNhbGN1bGF0b3IiLCJtYXhTY29yZSIsInRoZUJlc3RSZXN1bHQiLCJwcm9jZXNzU3RhdGVzIiwiaW1hZ2luYWJsZUZpZ3VyZSIsInBsYWNpbmdEaXJlY3Rpb25zIiwib25BZnRlclNjb3JlQ2FsY3VsYXRlcyIsIm9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzIiwiZW51bXMiLCJ1bnNoaWZ0IiwicG9wIiwibWF0cmljZXMiLCJzdHJpbmd5TWF0cmljZXMiLCJzdHJpbmd5RmlndXJlTWF0cml4Iiwib3JpZ2luYWxNYXRyaXhIb2xlcyIsImNvbGxlY3RIb2xlcyIsImltYWdpbmVGaWd1cmVEcm9wIiwic3F1YXNoTGluZXMiLCJjYWxjdWxhdGVTY29yZVJlcXVlc3QiLCJjYWxjdWxhdGVTY29yZSIsImRpcmVjdGlvbnMiLCJtYWtlU2ltcGxlUGxhY2luZ1N0ZXBzIiwidG9wWSIsImxlZnRYIiwiYm90dG9tWSIsInJpZ2h0WCIsImNlbGwiLCJtYWtlUHVzaEluUGxhY2luZ1N0ZXBzIiwiaW1hZ2luZUZpZ3VyZVBsYWNpbmciLCJsaW5lc1RvU3F1YXNoIiwiZ2FtZU1hdHJpeCIsInRhcmdldFgiLCJ0YXJnZXRZIiwidGFyZ2V0Q29vcmRpbmF0ZSIsInN0cnVjdHVyZWRDbG9uZSIsImZpZ3VyZVkiLCJmaWd1cmVYIiwiQ2FsY3VsYXRvckFnZ3JlZ2F0ZSIsImNhbGN1bGF0b3JzIiwiY2FsY3VsYXRvciIsIkZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yUGFyYW1zIiwibWluaW11bVZhbHVhYmxlSGVpZ2h0IiwicG93TXVsdGlwbGllciIsIm11bHRpcGxpZXIiLCJGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvciIsImZpbGxhYmxlQ2VsbHNDb3VudCIsImZpbGxhYmxlSGVpZ2h0IiwiY2FsY3VsYXRlRmlsbGFibGVTcGFjZSIsImZpbGxhYmxlQ2VsbHNTY29yZSIsInBvdyIsIkZpbGxlZEhlaWdodENhbGN1bGF0b3JQYXJhbXMiLCJGaWxsZWRIZWlnaHRDYWxjdWxhdG9yIiwiY2FsY3VsYXRlSGVpZ2h0IiwibG93ZXN0RW1wdHlZIiwiSG9sZXNWMUNhbGN1bGF0b3JQYXJhbXMiLCJjb3VudERlY3JlYXNlTXVsdGlwbGllciIsImNvdW50SW5jcmVhc2VNdWx0aXBsaWVyIiwiY292ZXJlZEhlaWdodFBvd011bHRpcGxpZXIiLCJjb3ZlcmVkSGVpZ2h0TXVsdGlwbGllciIsIkhvbGVzVjFDYWxjdWxhdG9yIiwiaG9sZXNDb3VudCIsImhvbGVzQ292ZXJlZEhlaWdodCIsImNhbGN1bGF0ZUhvbGVzQW5kQ292ZXJlZEhlaWdodCIsImhvbGVzQ291bnREZWNyZWFzZSIsImhvbGVzU2NvcmUiLCJyZWFsTWF0cml4Iiwib3JpZ2luYWxUaGVIaWdoZXN0SG9sZVkiLCJvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkiLCJjYWxjdWxhdGVUaGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwiY292ZXJlZENvbHVtbnNZcyIsImhvbGVzQ292ZXJlZEhlaWdodHNTdW0iLCJjb3ZlcmVkWSIsInRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkiLCJ0aGVIaWdoZXN0SG9sZVkiLCJTcXVhc2hlZFJvd3NDYWxjdWxhdG9yUGFyYW1zIiwiU3F1YXNoZWRSb3dzQ2FsY3VsYXRvciIsIlR1bm5lbHNDYWxjdWxhdG9yUGFyYW1zIiwiY291bnRNdWx0aXBsaWVyIiwiaGVpZ2h0UG93TXVsdGlwbGllciIsImhlaWdodE11bHRpcGxpZXIiLCJUdW5uZWxzQ2FsY3VsYXRvciIsInR1bm5lbHNTdW1IZWlnaHQiLCJ0dW5uZWxzQ291bnQiLCJjYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkIiwicmVhbENvdmVyZWRDb2x1bW5zIiwidHVubmVscyIsIlBsYWNpbmdFcnJvciIsIkluY29uc2lzdGVudFRhcmdldFN0YXRlRXJyb3IiLCJOb3RTdXBwb3J0ZWREaXJlY3Rpb25TdGVwRXJyb3IiLCJJbnN0YW50RmlndXJlUGxhY2luZ1BlcmZvcm1lciIsInBsYWNpbmdSZXN1bHQiLCJzZXRJbW1lZGlhdGUiLCJwbGFjZUltcGwiLCJ0YXJnZXRGaWd1cmUiLCJGYWxsaW5nUmVzdWx0IiwidHJhbnNmZXJyZWRGaWd1cmVzIiwiUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIiwicHJvY2Vzc0ZpZ3VyZXNGYWxsVGlja0NvbW1hbmQiLCJwcm9jZXNzRHJvcEZpZ3VyZXNDb21tYW5kIiwiZmFsbGluZ1Jlc3VsdCIsImZhbGxGaWd1cmVzRm9yT25lQ2VsbCIsIm9uZUNlbGxGYWxsaW5nUmVzdWx0IiwiZmlndXJlQ2FuRmFsbCIsImZpZ3VyZUdhbWVPdmVyUmVzdWx0IiwidHJhbnNmZXJGaWd1cmVUb01hdHJpeCIsImZpZ3VyZUNlbGxZIiwiY2VsbFZhbHVlIiwiZmlndXJlQ2VsbFgiLCJtYXRyaXhYIiwibWF0cml4WSIsIkJlbmNoU29sdmVyRmFjYWRlIiwiYmVuY2hSdW5QYXJhbWV0ZXJzIiwiZ2FtZUNvbnRyb2xsZXIiLCJtb3ZpbmdIYW5kbGVyIiwiZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJmaWd1cmVzU3Bhd25lciIsImxldmVsQ291bnRlciIsImNvbWJvQ291bnRlciIsInNjb3JlQ291bnRlciIsInN0YXRzQ291bnRlciIsInRldHJpc1NvbHZlciIsImZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yUGFyYW1zIiwiZmlsbGVkSGVpZ2h0Q2FsY3VsYXRvclBhcmFtcyIsImhvbGVzVjFDYWxjdWxhdG9yUGFyYW1zIiwic3F1YXNoZWRSb3dzQ2FsY3VsYXRvclBhcmFtcyIsInR1bm5lbHNDYWxjdWxhdG9yUGFyYW1zIiwic3RhcnQiLCJwYXVzZSIsInNvbHZlVGV0cmlzIiwiYXN5bmMiLCJiZW5jaCJdLCJzb3VyY2VSb290IjoiIn0=