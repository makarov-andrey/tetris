(()=>{"use strict";var t;!function(t){t[t.FallingTickProcessed=0]="FallingTickProcessed",t[t.GameOver=1]="GameOver",t[t.FiguresMoved=2]="FiguresMoved",t[t.LevelUp=3]="LevelUp",t[t.FiguresSpawned=4]="FiguresSpawned"}(t||(t={}));var e,n=function(){function e(t,e,n,i){this.gameData=t,this.transferredToMatrixFigures=e,this.squashedLines=n,this.droppedLines=i}return e.prototype.getEventType=function(){return t.FallingTickProcessed},e}(),i=function(){function e(t){this.gameData=t}return e.prototype.getEventType=function(){return t.GameOver},e}(),r=function(){function e(t){this.gameData=t}return e.prototype.getEventType=function(){return t.FiguresMoved},e}(),o=function(){function e(t,e){this.gameData=t,this.newFigures=e}return e.prototype.getEventType=function(){return t.FiguresSpawned},e}(),a=function(){function t(){this.handlers=new Map}return t.prototype.on=function(t,e,n){void 0===n&&(n=!0);var i=this.handlers.get(t)||[];n&&i.some((function(t){return t===e}))||(i.push(e),this.handlers.set(t,i))},t.prototype.off=function(t,e){var n=this.handlers.get(t)||[],i=n.indexOf(e);i>0&&n.splice(i,1),this.handlers.set(t,n)},t.prototype.fire=function(t){(this.handlers.get(t.getEventType())||[]).forEach((function(e){e(t)}))},t}();!function(t){t[t.InitGame=0]="InitGame",t[t.ResumeGame=1]="ResumeGame",t[t.PauseGame=2]="PauseGame",t[t.FiguresFallTick=3]="FiguresFallTick",t[t.GameOver=4]="GameOver",t[t.Render=5]="Render",t[t.MoveLeft=6]="MoveLeft",t[t.MoveRight=7]="MoveRight",t[t.TurnClockwise=8]="TurnClockwise",t[t.MoveDown=9]="MoveDown",t[t.FiguresFallDown=10]="FiguresFallDown"}(e||(e={}));var s,u,l=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.InitGame},t}(),c=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.ResumeGame},t}(),h=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.PauseGame},t}(),m=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.FiguresFallTick},t}(),f=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.GameOver},t}(),d=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.Render},t}(),p=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.MoveLeft},t}(),g=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.MoveRight},t}(),v=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.TurnClockwise},t}(),y=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.MoveDown},t}(),w=function(){function t(t){this.gameData=t}return t.prototype.getCommandType=function(){return e.FiguresFallDown},t}(),F=function(){function t(){this.handlers=new Map}return t.prototype.addHandler=function(t,e,n){void 0===n&&(n=!0);var i=this.handlers.get(t)||[];n&&i.some((function(t){return t===e}))||(i.push(e),this.handlers.set(t,i))},t.prototype.removeHandler=function(t,e){var n=this.handlers.get(t)||[],i=n.indexOf(e);i>0&&n.splice(i,1),this.handlers.set(t,n)},t.prototype.run=function(t){(this.handlers.get(t.getCommandType())||[]).forEach((function(e){e(t)}))},t}(),T=(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},s(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t[t.One=0]="One",t[t.Two=1]="Two",t[t.Three=2]="Three",t[t.Four=3]="Four"}(u||(u={}));var D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.getNormalizedFigure=function(){var t=this.getFigure(),e=t.reduce((function(t,e){return Math.max(t,e.length)}),0);return t.map((function(t){var n=t.length;return t.length=e,t.fill(!1,n-1,e-1)}))},e.prototype.getFirstTurn=function(){return this.getNormalizedFigure()},e.prototype.getSecondTurn=function(){for(var t=this.getNormalizedFigure(),e=[],n=t.length,i=t[0].length,r=0;r<i;r++){e[r]=new Array(n).fill(!1);for(var o=0;o<n;o++)e[r][n-o-1]=t[o][r]}return e},e.prototype.getThirdTurn=function(){return this.getFirstTurn().reverse().map((function(t){return t.reverse()}))},e.prototype.getForthTurn=function(){return this.getSecondTurn().reverse().map((function(t){return t.reverse()}))},e}(function(){function t(){}return t.prototype.getTurn=function(t){switch(t){case u.One:return this.getFirstTurn();case u.Two:return this.getSecondTurn();case u.Three:return this.getThirdTurn();case u.Four:return this.getForthTurn()}},t}()),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.getFigure=function(){return["###".split("").map((function(t){return"#"===t})),"-#-".split("").map((function(t){return"#"===t}))]},e}(D),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.getFigure=function(){return["###".split("").map((function(t){return"#"===t})),"--#".split("").map((function(t){return"#"===t}))]},e}(D),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.getFigure=function(){return["###".split("").map((function(t){return"#"===t})),"#--".split("").map((function(t){return"#"===t}))]},e}(D),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.getFigure=function(){return["##".split("").map((function(t){return"#"===t})),"##".split("").map((function(t){return"#"===t}))]},e}(D),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.getFigure=function(){return["####".split("").map((function(t){return"#"===t}))]},e}(D),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.getFigure=function(){return["##-".split("").map((function(t){return"#"===t})),"-##".split("").map((function(t){return"#"===t}))]},e}(D),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return T(e,t),e.prototype.getFigure=function(){return["-##".split("").map((function(t){return"#"===t})),"##-".split("").map((function(t){return"#"===t}))]},e}(D),E=function(t,e){this.x=t,this.y=e},G=function(t,e,n){this.figure=t,this.position=e,this.turnState=n},O=function(t,e,n){this.fieldWidth=t,this.fieldHeight=e,this.figures=n},k=function(){function t(t,e,n,i,r,o,a,s,u){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=setTimeout((function(){}))),void 0===a&&(a=1),void 0===s&&(s=0),void 0===u&&(u=0),this.isInitialized=t,this.isGameOver=e,this.fallingFigures=n,this.matrix=i,this.nextTickTimeoutId=r,this.settings=o,this.level=a,this.score=s,this.combo=u}return t.makeSimple=function(e,n){return void 0===e&&(e=10),void 0===n&&(n=20),new t(!1,!1,[],new Array(n).fill([]).map((function(t){return new Array(e).fill(!1)})),setTimeout((function(){})),new O(e,n,[new C,new B,new M,new H,new b,new S,new x]))},t}(),P=function(){function n(t,n,i){this.timingsHandler=t,this.eventBus=n,this.commandBus=i,this.gameData=k.makeSimple(),this.commandBus.addHandler(e.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(e.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(e.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(e.GameOver,this.gameOverHandler.bind(this))}return n.prototype.initGameHandler=function(e){this.gameData=e.gameData,this.gameData.isInitialized=!0,this.eventBus.on(t.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.resumeGameHandler=function(t){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new l(t.gameData)),this.fallTick())},n.prototype.pauseGameHandler=function(t){this.gameData=t.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new d(this.gameData))},n.prototype.gameOverHandler=function(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new i(this.gameData))},n.prototype.fallTick=function(){this.commandBus.run(new m(this.gameData))},n.prototype.onFallTickProcessed=function(t){clearTimeout(this.gameData.nextTickTimeoutId),this.gameData.isGameOver||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))},n}(),I=function(){function t(){}return t.canFigureBePlaced=function(t,e,n){return t.every((function(t,i){return t.every((function(t,r){var o=e.y+i,a=e.x+r;return!t||o<0&&a>=0&&a<=n[0].length-1||o in n&&a in n[o]&&!n[o][a]}))}))},t}(),L=function(t,e,n){this.filled=t,this.filledGameOver=e,this.empty=n},R=function(t,e,n,i,r){void 0===e&&(e=!0),void 0===n&&(n=new L("#007400","#780000","#fff")),void 0===i&&(i=new L("#007400","#780000",null)),void 0===r&&(r=new L("#b8e5e3",null,null)),this.containerElement=t,this.renderProjectionFigures=e,this.matrixCellColors=n,this.fallingFigureCellColors=i,this.projectionFigureCellColors=r},_=function(t,e){this.filled=t,this.empty=e},j=function(){function n(t,n,i){this.renderSettings=t,this.commandBus=n,this.eventBus=i,this.cellsHtmlElementsMap=[],n.addHandler(e.InitGame,this.initHandler.bind(this)),n.addHandler(e.Render,this.renderCommandHandler.bind(this))}return n.prototype.initHandler=function(e){this.table=n.createHtmlElement('<div style="float: left; display: table; border-collapse: collapse"></div>'),this.cellsHtmlElementsMap=[];for(var i=0;i<e.gameData.settings.fieldHeight;i++){var r=n.createHtmlElement('<div style="display: table-row"></div>');this.cellsHtmlElementsMap[i]=[];for(var o=0;o<e.gameData.settings.fieldWidth;o++){var a=n.createHtmlElement('<div style="display: table-cell; border: 1px solid #ccc; width: 20px; height: 20px"></div>');this.cellsHtmlElementsMap[i][o]=a,r.appendChild(a)}this.table.appendChild(r)}this.renderSettings.containerElement.innerHTML="",this.renderSettings.containerElement.appendChild(this.table),this.scoreDisplay=n.createHtmlElement('<div style="float: left; font-family: \'Helvetica Neue\', sans-serif; font-size: 20px; margin-left: 15px;">\n                Level: <span id="level"></span><br>\n                Score: <span id="score"></span><br>\n                Combo: <span id="combo"></span><br>\n            </div>'),this.renderSettings.containerElement.appendChild(this.scoreDisplay),this.renderSettings.containerElement.appendChild(n.createHtmlElement('<div style="clear: both"></div>')),this.eventBus.on(t.FallingTickProcessed,this.onFallTickProcessed.bind(this)),this.eventBus.on(t.GameOver,this.onGameOver.bind(this)),this.eventBus.on(t.FiguresMoved,this.onFiguresMoved.bind(this))},n.prototype.onFiguresMoved=function(t){this.renderState(t.gameData)},n.prototype.onFallTickProcessed=function(t){this.renderState(t.gameData)},n.prototype.onGameOver=function(t){this.renderState(t.gameData)},n.prototype.renderCommandHandler=function(t){this.renderState(t.gameData)},n.prototype.renderState=function(t){this.repaintMatrixCells(t.matrix,new E(0,0),t),this.renderSettings.renderProjectionFigures&&this.renderFallingFiguresProjection(t),this.renderFallingFigures(t),this.renderStats(t)},n.prototype.renderFallingFigures=function(t){var e=this;t.fallingFigures.forEach((function(n){e.repaintFallingFiguresCells(n.figure.getTurn(n.turnState),n.position,t)}))},n.prototype.renderFallingFiguresProjection=function(t){var e=this;t.fallingFigures.forEach((function(n){for(var i=n.figure.getTurn(n.turnState),r=n.position.x,o=n.position.y;I.canFigureBePlaced(i,new E(r,o+1),t.matrix);)o++;e.repaintProjectionFiguresCells(i,new E(r,o),t)}))},n.prototype.repaintMatrixCells=function(t,e,n){var i;i=n.isGameOver?new _(this.renderSettings.matrixCellColors.filledGameOver,this.renderSettings.matrixCellColors.empty):new _(this.renderSettings.matrixCellColors.filled,this.renderSettings.matrixCellColors.empty),this.repaintCells(t,e,i)},n.prototype.repaintFallingFiguresCells=function(t,e,n){var i;i=n.isGameOver?new _(this.renderSettings.fallingFigureCellColors.filledGameOver,this.renderSettings.fallingFigureCellColors.empty):new _(this.renderSettings.fallingFigureCellColors.filled,this.renderSettings.fallingFigureCellColors.empty),this.repaintCells(t,e,i)},n.prototype.repaintProjectionFiguresCells=function(t,e,n){var i;i=n.isGameOver?new _(this.renderSettings.projectionFigureCellColors.filledGameOver,this.renderSettings.projectionFigureCellColors.empty):new _(this.renderSettings.projectionFigureCellColors.filled,this.renderSettings.projectionFigureCellColors.empty),this.repaintCells(t,e,i)},n.prototype.repaintCells=function(t,e,n){var i=this;t.forEach((function(t,r){t.forEach((function(t,o){var a=r+e.y,s=o+e.x;if(a in i.cellsHtmlElementsMap&&s in i.cellsHtmlElementsMap[a]){var u=t?n.filled:n.empty;null!==u&&(i.cellsHtmlElementsMap[a][s].style.background=u)}}))}))},n.prototype.renderStats=function(t){var e=document.getElementById("level"),n=document.getElementById("score"),i=document.getElementById("combo");null!==e&&(e.innerHTML=t.level.toString()),null!==n&&(n.innerHTML=t.score.toString()),null!==i&&(i.innerHTML=t.combo.toString())},n.createHtmlElement=function(t){var e=document.createElement("div");if(e.innerHTML=t,e.children.length>1||null===e.firstElementChild)throw"The HTML must contain only one child";if(!(e.firstElementChild instanceof HTMLElement))throw"Something went wrong while trying to get HTMLElement child from div";return e.firstElementChild},n}(),q=function(){this.transferredFigures=[],this.isGameOver=!1},A=function(){function t(t,n){this.commandBus=t,this.eventBus=n,this.commandBus.addHandler(e.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(e.FiguresFallDown,this.processDropFiguresCommand.bind(this))}return t.prototype.processFiguresFallTickCommand=function(t){var e=this.fallFiguresForOneCell(t.gameData),i=this.squashLines(t.gameData.matrix);e.isGameOver&&this.commandBus.run(new f(t.gameData)),this.eventBus.fire(new n(t.gameData,e.transferredFigures,i,0))},t.prototype.processDropFiguresCommand=function(t){for(var e,i=new q,r=0;t.gameData.fallingFigures.length>0;){var o=this.fallFiguresForOneCell(t.gameData);(e=i.transferredFigures).push.apply(e,o.transferredFigures),i.isGameOver=i.isGameOver||o.isGameOver,r++}var a=this.squashLines(t.gameData.matrix);i.isGameOver&&this.commandBus.run(new f(t.gameData)),this.eventBus.fire(new n(t.gameData,i.transferredFigures,a,r-1))},t.prototype.fallFiguresForOneCell=function(t){var e=this,n=new q;return t.fallingFigures.forEach((function(i,r){var o;if(e.figureCanFall(t.matrix,i))i.position.y++;else{var a=e.transferFigureToMatrix(t.matrix,i);(o=n.transferredFigures).push.apply(o,t.fallingFigures.splice(r,1)),n.isGameOver=n.isGameOver||a}})),n},t.prototype.figureCanFall=function(t,e){return I.canFigureBePlaced(e.figure.getTurn(e.turnState),new E(e.position.x,e.position.y+1),t)},t.prototype.transferFigureToMatrix=function(t,e){var n=!1;return e.figure.getTurn(e.turnState).forEach((function(i,r){i.forEach((function(i,o){if(i){var a=e.position.x+o,s=e.position.y+r;s in t&&a in t[s]&&!t[s][a]?t[s][a]=!0:n=!0}}))})),n},t.prototype.squashLines=function(t){var e=[];return t.forEach((function(t,n){t.every((function(t){return t}))&&e.push(n)}),0),e.forEach((function(e){t.splice(e,1),t.unshift(new Array(t[0].length).fill(!1))})),e},t}(),N=function(){function t(){}return t.ToArray=function(t){return Object.keys(t).map((function(t){return Number.parseInt(t)})).filter((function(t){return!Number.isNaN(t)}))},t.GetRandom=function(e){var n=t.ToArray(e);return n[Math.floor(Math.random()*n.length)]},t}(),z=function(){function n(t,n){this.eventBus=t,this.commandBus=n,this.commandBus.addHandler(e.InitGame,this.initHandler.bind(this))}return n.prototype.initHandler=function(e){this.eventBus.on(t.FallingTickProcessed,this.processOnFallTick.bind(this))},n.prototype.processOnFallTick=function(t){this.addFigure(t.gameData)},n.prototype.addFigure=function(t){if(!(t.fallingFigures.length>0||t.isGameOver)){var e=Math.floor(Math.random()*t.settings.figures.length),n=t.settings.figures[e],i=N.GetRandom(u),r=n.getTurn(i),a=Math.max.apply(Math,r.map((function(t){return t.length}))),s=new E(Math.ceil(t.settings.fieldWidth/2-a/2)-1,-r.length),l=new G(n,s,i);t.fallingFigures.push(l),this.eventBus.fire(new o(t,[l]))}},n}(),U=function(){function t(t,n){this.commandBus=t,this.eventBus=n,this.commandBus.addHandler(e.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(e.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(e.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(e.TurnClockwise,this.processTurnClockwiseCommand.bind(this))}return t.prototype.processMoveLeftCommand=function(t){t.gameData.fallingFigures.forEach((function(e){I.canFigureBePlaced(e.figure.getTurn(e.turnState),new E(e.position.x-1,e.position.y),t.gameData.matrix)&&e.position.x--})),this.eventBus.fire(new r(t.gameData))},t.prototype.processMoveRightCommand=function(t){t.gameData.fallingFigures.forEach((function(e){I.canFigureBePlaced(e.figure.getTurn(e.turnState),new E(e.position.x+1,e.position.y),t.gameData.matrix)&&e.position.x++})),this.eventBus.fire(new r(t.gameData))},t.prototype.processTurnClockwiseCommand=function(t){var e=N.ToArray(u);t.gameData.fallingFigures.forEach((function(n){var i=n.turnState+1;i in e||(i=e[0]),I.canFigureBePlaced(n.figure.getTurn(i),n.position,t.gameData.matrix)&&(n.turnState=i)})),this.eventBus.fire(new r(t.gameData))},t.prototype.processMoveDownCommand=function(t){this.commandBus.run(new m(t.gameData))},t}(),W=function(){function t(t){this.commandBus=t,this.commandBus.addHandler(e.InitGame,this.processInitGameCommand.bind(this))}return t.prototype.processInitGameCommand=function(t){var e=this;window.onkeydown=function(n){"ArrowLeft"===n.code?e.commandBus.run(new p(t.gameData)):"ArrowRight"===n.code?e.commandBus.run(new g(t.gameData)):"ArrowUp"===n.code?e.commandBus.run(new v(t.gameData)):"ArrowDown"===n.code||"ArrowDown"===n.code?e.commandBus.run(new y(t.gameData)):"Space"===n.code&&e.commandBus.run(new w(t.gameData))}},t}(),J=function(){function t(t,e){void 0===e&&(e=.8),this.initialDelayMs=t,this.base=e}return t.prototype.getDelayForNextTickMs=function(t){return Math.pow(this.base-.007*(t.level-1),t.level-1)*this.initialDelayMs},t}(),K=function(){function n(t,n,i,r){void 0===i&&(i=new Map([[1,100],[2,300],[3,500],[4,800]])),void 0===r&&(r=50),this.commandBus=t,this.eventBus=n,this.squashedRowsRewardThresholdsMap=i,this.rewardOnCombo=r,t.addHandler(e.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(e){this.eventBus.on(t.FallingTickProcessed,this.onFallingTickProcessed.bind(this))},n.prototype.onFallingTickProcessed=function(t){if(!(t.squashedLines.length<0)){var e=0;this.squashedRowsRewardThresholdsMap.forEach((function(n,i){i>t.squashedLines.length||(e=n)})),t.gameData.score+=e*t.gameData.level+this.rewardOnCombo*Math.max(0,t.gameData.combo-1)*t.gameData.level+2*t.droppedLines*t.gameData.level}},n}(),Q=function(){function n(t,n,i,r){this.eventBus=t,this.commandBus=n,this.levelIncreaseOnSquashedRowsNumber=i,this.maxLevels=r,this.squashedRowsCounter=0,this.commandBus.addHandler(e.InitGame,this.processInitGameCommand.bind(this))}return n.prototype.processInitGameCommand=function(e){this.eventBus.on(t.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.onFallTickProcessed=function(t){0!==t.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,t.gameData.level=Math.min(this.maxLevels,t.gameData.level+1)))},n}(),V=function(){function n(t,n){this.commandBus=t,this.eventBus=n,t.addHandler(e.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(e){this.eventBus.on(t.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.onFallTickProcessed=function(t){t.transferredToMatrixFigures.length<=0||(t.squashedLines.length>0?t.gameData.combo+=1:t.gameData.combo=0)},n}(),X=function(){function t(t,e,n,i,r,o,s,u,l,c,h,m){void 0===t&&(t=new a),void 0===e&&(e=new F),void 0===n&&(n=new P(new J(2e3),t,e)),void 0===i&&(i=new U(e,t)),void 0===r&&(r=new W(e)),void 0===o&&(o=new A(e,t)),void 0===s&&(s=new z(t,e)),void 0===u&&(u=new Q(t,e,8,15)),void 0===l&&(l=new V(e,t)),void 0===c&&(c=new K(e,t)),void 0===h&&(h=new j(new R(document.body),e,t)),void 0===m&&(m=k.makeSimple()),this.eventBus=t,this.commandBus=e,this.gameController=n,this.movingHandler=i,this.movingController=r,this.fallingFiguresProcessor=o,this.figuresSpawner=s,this.levelCounter=u,this.comboCounter=l,this.scoreCounter=c,this.tableRenderer=h,this.gameData=m}return t.prototype.start=function(t){t=t||k.makeSimple(),this.commandBus.run(new l(t)),this.commandBus.run(new c(t))},t.prototype.resume=function(){this.commandBus.run(new c(this.gameData))},t.prototype.pause=function(){this.commandBus.run(new h(this.gameData))},t}(),Y=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Y(e,t),e}(Error)),$=function(){function t(){}return t.prototype.resolveTargetPosition=function(t){var e=this;if(0===t.fallingFigures.length)return new Map;if(1!==t.fallingFigures.length)throw new Z;var n=t.fallingFigures[0],i=new Map;N.ToArray(u).forEach((function(t){i.set(t,n.figure.getTurn(t))}));var r=-1/0,o=new G(n.figure,new E(n.position.x,n.position.y),n.turnState);return i.forEach((function(n,i){for(var a=0;a<t.settings.fieldWidth-n[0].length+1;a++){var s=e.imagineFigureDrop(t.matrix,n,a),u=s[0],l=s[1],c=e.calculateScore(t,l);c>r&&(r=c,o.turnState=i,o.position.x=a,o.position.y=u)}})),new Map([[n,o]])},t.prototype.calculateScore=function(t,e){var n,i=t.settings.fieldHeight,r=t.settings.fieldWidth,o=5*this.squashLines(e),a=this.calculateHoles(t.matrix),s=a[0],u=(a[1],this.calculateHoles(e)),l=u[0],c=u[1],h=s-l;n=0===l?h>0?100*h:50*h:(h>0?100*h:50*h)-c*Math.pow(c,c/(i*l))*3;var m=this.calculateHeight(e),f=-m*Math.pow(m,m/i)*3,d=this.calculateFillableSpace(e,r),p=d[0],g=0;d[1]>5&&(g=-p*Math.pow(p,p/(i*r)));var v,y=this.calculateTunnelsExceptUncovered(e,t.matrix),w=y[0],F=y[1],T=n+o+f+(v=0===F?0:100*-F-w*Math.pow(w,w/(i*F))*10)+g;return isNaN(T)&&console.log(e,n,o,f,v,g),T},t.prototype.squashLines=function(t){var e=[];return t.forEach((function(t,n){t.every((function(t){return t}))&&e.push(n)}),0),e.forEach((function(e){t.splice(e,1),t.unshift(new Array(t[0].length).fill(!1))})),e.length},t.prototype.imagineFigureDrop=function(t,e,n){for(var i=t.map((function(t){return t.slice()})),r=-e.length;I.canFigureBePlaced(e,new E(n,r+1),t);)r++;return e.forEach((function(t,e){t.forEach((function(t,o){var a=r+e,s=n+o;a in i&&s in i[a]&&t&&(i[a][s]=!0)}))})),[r,i]},t.prototype.calculateHoles=function(t){var e=new Map,n=0,i=0;return t.forEach((function(t){t.forEach((function(t,r){t&&!e.has(r)&&e.set(r,0);var o=e.get(r);void 0!==o&&(t||(i++,n+=o),e.set(r,o+1))}))})),[i,n]},t.prototype.calculateHeight=function(t){var e=-1;return t.every((function(t,n){return!!t.every((function(t){return!t}))&&(e=n,!0)})),t.length-e-1},t.prototype.calculateTunnelsExceptUncovered=function(t,e){var n=new Set;e.every((function(t){t.forEach((function(t,e){t&&n.add(e)}))}));var i=new Set,r=new Map,o=t[0].length;t.every((function(t,e){return t.forEach((function(t,e){t&&i.add(e)})),t.forEach((function(t,e){t||i.has(e)||n.has(e)||0!==e&&!i.has(e-1)||e!==o-1&&!i.has(e+1)||r.set(e,(r.get(e)||0)+1)})),i.size<o}));var a=0,s=0;return r.forEach((function(t){t>=3&&(a+=t,s++)})),[a,s]},t.prototype.calculateFillableSpace=function(t,e){var n=new Set,i=0,r=0;return t.every((function(t){return t.forEach((function(t,e){t&&n.add(e)})),t.forEach((function(t,e){!t&&n.size>0&&!n.has(e)&&i++})),n.size<e&&(n.size>0&&r++,!0)})),[i,r]},t}(),tt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e}(Error),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e}(et),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tt(e,t),e}(et),rt=function(){function t(t,e){void 0===e&&(e=new J(100,.9)),this.commandBus=t,this.timingsHandler=e,this.nextMoveTimeoutId=setTimeout((function(){})),this.targetFallingFiguresStates=new Map,this.gameData=k.makeSimple()}return t.prototype.place=function(t,e){this.gameData=t,this.targetFallingFiguresStates=e,clearTimeout(this.nextMoveTimeoutId),this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData))},t.prototype.processTick=function(){if(0!==this.gameData.fallingFigures.length){if(1!==this.gameData.fallingFigures.length)throw new nt;var t=this.gameData.fallingFigures[0],e=this.targetFallingFiguresStates.get(t);if(e){if(t.figure!==e.figure)throw new it("Both of the original and the target falling figures must have the same figure in it.");if(t.turnState!=e.turnState)this.commandBus.run(new v(this.gameData));else{if(t.position.x==e.position.x)return void this.commandBus.run(new w(this.gameData));t.position.x>e.position.x?this.commandBus.run(new p(this.gameData)):this.commandBus.run(new g(this.gameData))}this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData))}}},t}(),ot=function(){function n(t,n,i,r){void 0===i&&(i=new $),void 0===r&&(r=new rt(n)),this.eventBus=t,this.commandBus=n,this.fallingFigurePlacingResolver=i,this.fallingFiguresPlacer=r,this.commandBus.addHandler(e.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(e){this.eventBus.on(t.FiguresSpawned,this.onFiguresSpawned.bind(this))},n.prototype.onFiguresSpawned=function(t){var e=this.fallingFigurePlacingResolver.resolveTargetPosition(t.gameData);this.fallingFiguresPlacer.place(t.gameData,e)},n}();document.addEventListener("DOMContentLoaded",(function(){var t=new a,e=new F,n=new X(t,e);new ot(t,e),n.start()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WWdDLFNBQVVmLEtBQUsrRixnQkFBZ0JDLEtBQUtoRyxNQUMvRSxDQVVKLE9BUlksWUFBQStGLGdCQUFSLFNBQXdCSyxHQUNwQnBHLEtBQUs2RixTQUFTakcsR0FBR2QsRUFBVVcsZUFBZ0JPLEtBQUt3VSxpQkFBaUJ4TyxLQUFLaEcsTUFDMUUsRUFFUSxZQUFBd1UsaUJBQVIsU0FBeUIzVSxHQUNyQixJQUFNa1UsRUFBNkIvVCxLQUFLb1UsNkJBQTZCdEQsc0JBQXNCalIsRUFBTWIsVUFDakdnQixLQUFLcVUscUJBQXFCTCxNQUFNblUsRUFBTWIsU0FBVStVLEVBQ3BELEVBQ0osRUFsQkEsR0NBQS9KLFNBQVN5SyxpQkFBaUIsb0JBQW9CLFdBQzFDLElBQU01TyxFQUFXLElBQUk4SixFQUNmN0osRUFBYSxJQUFJOEosRUFDbkI4RSxFQUFTLElBQUlDLEVBQWE5TyxFQUFVQyxHQUMzQixJQUFJOE8sR0FBYS9PLEVBQVVDLEdBRXhDNE8sRUFBT2xFLE9BQ1gsRyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9GaWd1cmVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tbW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvR2FtZUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1JlbmRlcmVyL1RhYmxlUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9GYWxsaW5nRmlndXJlc1Byb2Nlc3Nvci9SZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9VdGlscy9FbnVtSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmlndXJlc1NwYXduZXIvQWx3YXlzT25lRmlndXJlU3Bhd25lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL01vdmluZ0hhbmRsZXIvTW92aW5nSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL01vdmluZ0NvbnRyb2xsZXIvTW92aW5nQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1Njb3JlQ291bnRlci9GYWxsVGlja1Njb3JlQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0xldmVsQ291bnRlci9TcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVGV0cmlzRmFjYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1Jlc29sdmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1BlcmZvcm1lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1RldHJpc1NvbHZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgZW51bSBFdmVudFR5cGUge1xuICAgIEZhbGxpbmdUaWNrUHJvY2Vzc2VkLFxuICAgIEdhbWVPdmVyLFxuICAgIEZpZ3VyZXNNb3ZlZCxcbiAgICBMZXZlbFVwLFxuICAgIEZpZ3VyZXNTcGF3bmVkLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50IHtcbiAgICBnYW1lRGF0YTogR2FtZURhdGE7XG5cbiAgICBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIHRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10sXG4gICAgICAgIHB1YmxpYyBzcXVhc2hlZExpbmVzOiBudW1iZXJbXSxcbiAgICAgICAgcHVibGljIGRyb3BwZWRMaW5lczogbnVtYmVyLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lT3ZlckV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5HYW1lT3ZlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVzTW92ZWRFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuRmlndXJlc01vdmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExldmVsVXBFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuTGV2ZWxVcDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVzU3Bhd25lZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgbmV3RmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5GaWd1cmVzU3Bhd25lZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFdmVudEJ1cyB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPEV2ZW50VHlwZSwgKCguLi5fOiBhbnkpID0+IHZvaWQpW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIG9uKGV2ZW50OiBFdmVudFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQsIHVuaXF1ZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBpZiAodW5pcXVlICYmIGhhbmRsZXJzLnNvbWUoYm91bmRIYW5kbGVyID0+IGJvdW5kSGFuZGxlciA9PT0gaGFuZGxlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChldmVudCwgaGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvZmYoZXZlbnQ6IEV2ZW50VHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGxldCBpbmRleCA9IGhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChldmVudCwgaGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBmaXJlKGV2ZW50UGF5bG9hZDogRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnRQYXlsb2FkLmdldEV2ZW50VHlwZSgpKSB8fCBbXTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtoYW5kbGVyKGV2ZW50UGF5bG9hZCl9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBlbnVtIENvbW1hbmRUeXBlIHtcbiAgICBJbml0R2FtZSxcbiAgICBSZXN1bWVHYW1lLFxuICAgIFBhdXNlR2FtZSxcbiAgICBGaWd1cmVzRmFsbFRpY2ssXG4gICAgR2FtZU92ZXIsXG4gICAgUmVuZGVyLFxuICAgIE1vdmVMZWZ0LFxuICAgIE1vdmVSaWdodCxcbiAgICBUdXJuQ2xvY2t3aXNlLFxuICAgIE1vdmVEb3duLFxuICAgIEZpZ3VyZXNGYWxsRG93bixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kIHtcbiAgICBnYW1lRGF0YTogR2FtZURhdGE7XG5cbiAgICBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZTtcbn1cblxuZXhwb3J0IGNsYXNzIEluaXRHYW1lQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Jbml0R2FtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZXN1bWVHYW1lQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5SZXN1bWVHYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBhdXNlR2FtZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUGF1c2VHYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxUaWNrO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVPdmVyQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5HYW1lT3ZlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlJlbmRlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlTGVmdENvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZUxlZnQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVJpZ2h0Q29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlUmlnaHQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVHVybkNsb2Nrd2lzZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuVHVybkNsb2Nrd2lzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlRG93bkNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZURvd247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRHJvcEZpZ3VyZXNDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsRG93bjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kQnVzIHtcbiAgICBwcml2YXRlIGhhbmRsZXJzOiBNYXA8Q29tbWFuZFR5cGUsICgocGF5bG9hZDogQ29tbWFuZCkgPT4gdm9pZClbXT4gPSBuZXcgTWFwKCk7XG5cbiAgICBwdWJsaWMgYWRkSGFuZGxlcihldmVudDogQ29tbWFuZFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQsIHVuaXF1ZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBpZiAodW5pcXVlICYmIGhhbmRsZXJzLnNvbWUoYm91bmRIYW5kbGVyID0+IGJvdW5kSGFuZGxlciA9PT0gaGFuZGxlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChldmVudCwgaGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVIYW5kbGVyKGV2ZW50OiBDb21tYW5kVHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGxldCBpbmRleCA9IGhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChldmVudCwgaGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBydW4ocGF5bG9hZDogQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChwYXlsb2FkLmdldENvbW1hbmRUeXBlKCkpIHx8IFtdO1xuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge2hhbmRsZXIocGF5bG9hZCl9KTtcbiAgICB9XG59XG4iLCJleHBvcnQgZW51bSBGaWd1cmVUdXJuU3RhdGUge1xuICAgIE9uZSxcbiAgICBUd28sXG4gICAgVGhyZWUsXG4gICAgRm91cixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWd1cmUge1xuICAgIC8qKlxuICAgICAqIEFueSBmaWd1cmUgbXVzdCBiZSBhYmxlIHRvIHR1cm4gNCB0aW1lcyBpbiAyIGRpbWVuc2lvbnMuXG4gICAgICogQWxsIHR1cm5zIGFyZSBjbG9ja3dpc2UuXG4gICAgICovXG4gICAgZ2V0VHVybihmaWd1cmVUdXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSk6IGJvb2xlYW5bXVtdO1xuICAgIGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIGdldFRoaXJkVHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW107XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdEZpZ3VyZSBpbXBsZW1lbnRzIEZpZ3VyZXtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXTtcblxuICAgIGdldFR1cm4oZmlndXJlVHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHN3aXRjaCAoZmlndXJlVHVyblN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIEZpZ3VyZVR1cm5TdGF0ZS5PbmU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RUdXJuKCk7XG4gICAgICAgICAgICBjYXNlIEZpZ3VyZVR1cm5TdGF0ZS5Ud286XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2Vjb25kVHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuVGhyZWU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGhpcmRUdXJuKCk7XG4gICAgICAgICAgICBjYXNlIEZpZ3VyZVR1cm5TdGF0ZS5Gb3VyOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZvcnRoVHVybigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2l2ZXMgYW4gZWFzeSB3YXkgdG8gZGVmaW5lIGZpZ3VyZXMgZm9yIHRldHJpcy5cbiAqIEp1c3QgaW1wbGVtZW50IHRoZSBnZXRGaWd1cmUgbWV0aG9kIGFuZCByZXR1cm4gZmlndXJlIGxpa2UgdGhpczpcbiAqIGBgYCh0cylcbiAqIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICogICAgIHJldHVybiBbXG4gKiAgICAgICAgIFt0cnVlLCAgdHJ1ZSwgdHJ1ZV0sXG4gKiAgICAgICAgIFtmYWxzZSwgdHJ1ZSwgZmFsc2VdLFxuICogICAgICAgICBbdHJ1ZSwgIHRydWUsIHRydWVdLFxuICogICAgIF07XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBPciBkZWZpbmUgaXQgbGlrZSB0aGlzIGZvciBtb3JlIHZpc3VhbCBwcmVzZW50YXRpb246XG4gKiBgYGAodHMpXG4gKiBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAqICAgICByZXR1cm4gW1xuICogICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICAgICAgXCItIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgIF07XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSBleHRlbmRzIEFic3RyYWN0RmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdO1xuXG4gICAgcHJpdmF0ZSBnZXROb3JtYWxpemVkRmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IGZpZ3VyZSA9IHRoaXMuZ2V0RmlndXJlKCk7XG4gICAgICAgIGxldCB0aGVMb25nZXN0Um93U2l6ZSA9IGZpZ3VyZS5yZWR1Y2UoXG4gICAgICAgICAgICAocHJldmlvdXMsIGN1cnJlbnQpID0+IE1hdGgubWF4KHByZXZpb3VzLCBjdXJyZW50Lmxlbmd0aCksXG4gICAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBmaWd1cmUubWFwKHJvdyA9PiB7XG4gICAgICAgICAgICBsZXQgb3JpZ2luYWxMZW5ndGggPSByb3cubGVuZ3RoO1xuICAgICAgICAgICAgcm93Lmxlbmd0aCA9IHRoZUxvbmdlc3RSb3dTaXplO1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5maWxsKGZhbHNlLCBvcmlnaW5hbExlbmd0aCAtIDEsIHRoZUxvbmdlc3RSb3dTaXplIC0gMSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXROb3JtYWxpemVkRmlndXJlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNlY29uZFR1cm4oKTogYm9vbGVhbltdW10ge1xuICAgICAgICBsZXQgb3JpZ2luYWxGaWd1cmUgPSB0aGlzLmdldE5vcm1hbGl6ZWRGaWd1cmUoKTtcbiAgICAgICAgbGV0IHR1cm5lZEZpZ3VyZTogYm9vbGVhbltdW10gPSBbXTtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlSGVpZ2h0ID0gb3JpZ2luYWxGaWd1cmUubGVuZ3RoO1xuICAgICAgICBsZXQgb3JpZ2luYWxGaWd1cmVXaWR0aCA9IG9yaWdpbmFsRmlndXJlWzBdLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBvcmlnaW5hbEZpZ3VyZVdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgIHR1cm5lZEZpZ3VyZVt4XSA9IG5ldyBBcnJheShvcmlnaW5hbEZpZ3VyZUhlaWdodCkuZmlsbChmYWxzZSk7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IG9yaWdpbmFsRmlndXJlSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICB0dXJuZWRGaWd1cmVbeF1bb3JpZ2luYWxGaWd1cmVIZWlnaHQgLSB5IC0gMV0gPSBvcmlnaW5hbEZpZ3VyZVt5XVt4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHVybmVkRmlndXJlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaXJzdFR1cm4oKS5yZXZlcnNlKCkubWFwKHJvdyA9PiByb3cucmV2ZXJzZSgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2Vjb25kVHVybigpLnJldmVyc2UoKS5tYXAocm93ID0+IHJvdy5yZXZlcnNlKCkpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIi0jLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSaWdodExGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIi0tI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMZWZ0TEZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIy0tXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNxdWFyZUZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCIjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTdGlja0ZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTFpGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIi0jI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGNsYXNzIFJaRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiLSMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCIjIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtGaWd1cmUsIEZpZ3VyZVR1cm5TdGF0ZSwgTGVmdExGaWd1cmUsIExaRmlndXJlLCBSaWdodExGaWd1cmUsIFJaRmlndXJlLCBTcXVhcmVGaWd1cmUsIFN0aWNrRmlndXJlLCBURmlndXJlfSBmcm9tIFwiLi9GaWd1cmVzXCI7XG5cbi8qKlxuICogeCBmb3IgaG9yaXpvbnRhbCBwb3NpdGlvbmluZ1xuICogeSBmb3IgdmVydGljYWwgcG9zaXRpb25pbmdcbiAqL1xuZXhwb3J0IGNsYXNzIENvb3JkaW5hdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgeDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgeTogbnVtYmVyLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEZhbGxpbmdGaWd1cmUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZmlndXJlOiBGaWd1cmUsXG4gICAgICAgIHB1YmxpYyBwb3NpdGlvbjogQ29vcmRpbmF0ZSxcbiAgICAgICAgcHVibGljIHR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWVsZFdpZHRoOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBmaWVsZEhlaWdodDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgZmlndXJlczogRmlndXJlW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZURhdGEge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlLFxuICAgICAgICBwdWJsaWMgaXNHYW1lT3ZlcjogYm9vbGVhbiA9IGZhbHNlLFxuICAgICAgICBwdWJsaWMgZmFsbGluZ0ZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSA9IFtdLFxuICAgICAgICBwdWJsaWMgbWF0cml4OiBib29sZWFuW11bXSA9IFtdLFxuICAgICAgICBwdWJsaWMgbmV4dFRpY2tUaW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIH0pLFxuICAgICAgICBwdWJsaWMgc2V0dGluZ3M6IEdhbWVTZXR0aW5ncyxcbiAgICAgICAgcHVibGljIGxldmVsOiBudW1iZXIgPSAxLFxuICAgICAgICBwdWJsaWMgc2NvcmU6IG51bWJlciA9IDAsXG4gICAgICAgIHB1YmxpYyBjb21ibzogbnVtYmVyID0gMCxcbiAgICApIHt9XG5cbiAgICBzdGF0aWMgbWFrZVNpbXBsZSh3aWR0aDogbnVtYmVyID0gMTAsIGhlaWdodDogbnVtYmVyID0gMjApOiBHYW1lRGF0YSB7XG4gICAgICAgIHJldHVybiBuZXcgR2FtZURhdGEoXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgW10sXG4gICAgICAgICAgICBuZXcgQXJyYXkoaGVpZ2h0KS5maWxsKFtdKVxuICAgICAgICAgICAgICAgIC5tYXAoXyA9PiBuZXcgQXJyYXkod2lkdGgpLmZpbGwoZmFsc2UpKSxcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgR2FtZVNldHRpbmdzKFxuICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBURmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSaWdodExGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IExlZnRMRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTcXVhcmVGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFN0aWNrRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBMWkZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgUlpGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKVxuICAgIH1cbn1cbiIsImltcG9ydCB7VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL1RpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQsIEZpZ3VyZXNNb3ZlZEV2ZW50LCBHYW1lT3ZlckV2ZW50fSBmcm9tIFwiLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCwgSW5pdEdhbWVDb21tYW5kLCBQYXVzZUdhbWVDb21tYW5kLCBSZW5kZXJDb21tYW5kLCBSZXN1bWVHYW1lQ29tbWFuZH0gZnJvbSBcIi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIEdhbWVDb250cm9sbGVyIHtcbiAgICBwcml2YXRlIGdhbWVEYXRhOiBHYW1lRGF0YSA9IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcblxuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgcHJpdmF0ZSB0aW1pbmdzSGFuZGxlcjogVGltaW5nc0hhbmRsZXIsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUmVzdW1lR2FtZSwgdGhpcy5yZXN1bWVHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUGF1c2VHYW1lLCB0aGlzLnBhdXNlR2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkdhbWVPdmVyLCB0aGlzLmdhbWVPdmVySGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGNvbW1hbmQuZ2FtZURhdGE7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbFRpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXN1bWVHYW1lSGFuZGxlcihjb21tYW5kOiBSZXN1bWVHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmdhbWVEYXRhLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEluaXRHYW1lQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mYWxsVGljaygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcGF1c2VHYW1lSGFuZGxlcihjb21tYW5kOiBQYXVzZUdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEgPSBjb21tYW5kLmdhbWVEYXRhO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2FtZU92ZXJIYW5kbGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEdhbWVPdmVyRXZlbnQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmFsbFRpY2soKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIGlmICghdGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICB0aGlzLmZhbGxUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgdGhpcy50aW1pbmdzSGFuZGxlci5nZXREZWxheUZvck5leHRUaWNrTXModGhpcy5nYW1lRGF0YSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0Nvb3JkaW5hdGV9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIEZpZ3VyZVBsYWNpbmdDaGVja2VyIHtcbiAgICBwdWJsaWMgc3RhdGljIGNhbkZpZ3VyZUJlUGxhY2VkKHRhcmdldEZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10sIHRhcmdldFBvc2l0aW9uOiBDb29yZGluYXRlLCBtYXRyaXg6IGJvb2xlYW5bXVtdKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0YXJnZXRGaWd1cmVNYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5ldmVyeSgodmFsdWUsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHRhcmdldFBvc2l0aW9uLnkgKyB5O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxYID0gdGFyZ2V0UG9zaXRpb24ueCArIHg7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB8fCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsWSA8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIDw9IG1hdHJpeFswXS5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgICkgfHwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhbFkgaW4gbWF0cml4XG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCBpbiBtYXRyaXhbcmVhbFldXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhbWF0cml4W3JlYWxZXVtyZWFsWF1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmQsIFJlbmRlckNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgR2FtZU92ZXJFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWxsZWQ6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZmlsbGVkR2FtZU92ZXI6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZW1wdHk6IHN0cmluZ3xudWxsLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXJTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb250YWluZXJFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICAgICAgcHVibGljIHJlbmRlclByb2plY3Rpb25GaWd1cmVzOiBib29sZWFuID0gdHJ1ZSxcbiAgICAgICAgcHVibGljIG1hdHJpeENlbGxDb2xvcnM6IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyA9IG5ldyBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MoXG4gICAgICAgICAgICAnIzAwNzQwMCcsXG4gICAgICAgICAgICAnIzc4MDAwMCcsXG4gICAgICAgICAgICAnI2ZmZicsXG4gICAgICAgICksXG4gICAgICAgIHB1YmxpYyBmYWxsaW5nRmlndXJlQ2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjMDA3NDAwJyxcbiAgICAgICAgICAgICcjNzgwMDAwJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICksXG4gICAgICAgIHB1YmxpYyBwcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjYjhlNWUzJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICApLFxuICAgICkge31cbn1cblxuY2xhc3MgQ2VsbENvbG9ycyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWxsZWQ6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZW1wdHk6IHN0cmluZ3xudWxsLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIge1xuICAgIHByaXZhdGUgY2VsbHNIdG1sRWxlbWVudHNNYXA6IEhUTUxFbGVtZW50W11bXSA9IFtdO1xuICAgIHByaXZhdGUgdGFibGU6IEhUTUxFbGVtZW50fHVuZGVmaW5lZDtcbiAgICBwcml2YXRlIHNjb3JlRGlzcGxheTogSFRNTEVsZW1lbnR8dW5kZWZpbmVkO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBwcml2YXRlIHJlbmRlclNldHRpbmdzOiBUYWJsZVJlbmRlcmVyU2V0dGluZ3MsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLlJlbmRlciwgdGhpcy5yZW5kZXJDb21tYW5kSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLnRhYmxlID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImZsb2F0OiBsZWZ0OyBkaXNwbGF5OiB0YWJsZTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZVwiPjwvZGl2PicpO1xuICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwID0gW107XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY29tbWFuZC5nYW1lRGF0YS5zZXR0aW5ncy5maWVsZEhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBsZXQgcm93ID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImRpc3BsYXk6IHRhYmxlLXJvd1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFt5XSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBjZWxsID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImRpc3BsYXk6IHRhYmxlLWNlbGw7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHhcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3ldW3hdID0gY2VsbDtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50YWJsZSk7XG5cbiAgICAgICAgdGhpcy5zY29yZURpc3BsYXkgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KFxuICAgICAgICAgICAgYDxkaXYgc3R5bGU9XCJmbG9hdDogbGVmdDsgZm9udC1mYW1pbHk6ICdIZWx2ZXRpY2EgTmV1ZScsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMjBweDsgbWFyZ2luLWxlZnQ6IDE1cHg7XCI+XG4gICAgICAgICAgICAgICAgTGV2ZWw6IDxzcGFuIGlkPVwibGV2ZWxcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIFNjb3JlOiA8c3BhbiBpZD1cInNjb3JlXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBDb21ibzogPHNwYW4gaWQ9XCJjb21ib1wiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICA8L2Rpdj5gKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc2NvcmVEaXNwbGF5KTtcblxuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImNsZWFyOiBib3RoXCI+PC9kaXY+JykpO1xuXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbFRpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkdhbWVPdmVyLCB0aGlzLm9uR2FtZU92ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZpZ3VyZXNNb3ZlZCwgdGhpcy5vbkZpZ3VyZXNNb3ZlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmlndXJlc01vdmVkKGNvbW1hbmQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbFRpY2tQcm9jZXNzZWQoY29tbWFuZDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25HYW1lT3Zlcihjb21tYW5kOiBHYW1lT3ZlckV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJDb21tYW5kSGFuZGxlcihjb21tYW5kOiBSZW5kZXJDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJTdGF0ZShnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBhaW50TWF0cml4Q2VsbHMoZ2FtZURhdGEubWF0cml4LCBuZXcgQ29vcmRpbmF0ZSgwLCAwKSwgZ2FtZURhdGEpO1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJTZXR0aW5ncy5yZW5kZXJQcm9qZWN0aW9uRmlndXJlcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGYWxsaW5nRmlndXJlc1Byb2plY3Rpb24oZ2FtZURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyRmFsbGluZ0ZpZ3VyZXMoZ2FtZURhdGEpO1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRzKGdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZhbGxpbmdGaWd1cmVzKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZhbGxpbmdGaWd1cmUgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXBhaW50RmFsbGluZ0ZpZ3VyZXNDZWxscyhcbiAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGdhbWVEYXRhXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbihnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdGlvbkZpZ3VyZVggPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBsZXQgcHJvamVjdGlvbkZpZ3VyZVkgPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnk7XG4gICAgICAgICAgICB3aGlsZShGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSArIDEpLCBnYW1lRGF0YS5tYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbkZpZ3VyZVkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMoXG4gICAgICAgICAgICAgICAgZmlndXJlTWF0cml4LFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSksXG4gICAgICAgICAgICAgICAgZ2FtZURhdGFcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludE1hdHJpeENlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZmlsbGVkR2FtZU92ZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhtYXRyaXgsIGluZGVudCwgY29sb3JzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRGYWxsaW5nRmlndXJlc0NlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmZpbGxlZEdhbWVPdmVyLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMobWF0cml4LCBpbmRlbnQsIGNvbG9ycyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50UHJvamVjdGlvbkZpZ3VyZXNDZWxscyhtYXRyaXg6IGJvb2xlYW5bXVtdLCBpbmRlbnQ6IENvb3JkaW5hdGUsIGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBsZXQgY29sb3JzOiBDZWxsQ29sb3JzO1xuICAgICAgICBpZiAoZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5maWxsZWRHYW1lT3ZlcixcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZmlsbGVkLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwYWludENlbGxzKG1hdHJpeCwgaW5kZW50LCBjb2xvcnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludENlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgY2VsbENvbG9yczogQ2VsbENvbG9ycyk6IHZvaWQge1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsdWUsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHkgKyBpbmRlbnQueTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWCA9IHggKyBpbmRlbnQueDtcbiAgICAgICAgICAgICAgICBpZiAocmVhbFkgaW4gdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFxuICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCBpbiB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3JlYWxZXVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9IHZhbHVlID8gY2VsbENvbG9ycy5maWxsZWQgOiBjZWxsQ29sb3JzLmVtcHR5O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbcmVhbFldW3JlYWxYXS5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJTdGF0cyhnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGV2ZWxTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xldmVsJyk7XG4gICAgICAgIGNvbnN0IHNjb3JlU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpO1xuICAgICAgICBjb25zdCBjb21ib1NwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tYm8nKTtcbiAgICAgICAgaWYgKGxldmVsU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV2ZWxTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmxldmVsLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjb3JlU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2NvcmVTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLnNjb3JlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbWJvU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29tYm9TcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmNvbWJvLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjcmVhdGVIdG1sRWxlbWVudChodG1sOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgIGlmIChjb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoID4gMSB8fCBjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93ICdUaGUgSFRNTCBtdXN0IGNvbnRhaW4gb25seSBvbmUgY2hpbGQnO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgJ1NvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIHRyeWluZyB0byBnZXQgSFRNTEVsZW1lbnQgY2hpbGQgZnJvbSBkaXYnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtEcm9wRmlndXJlc0NvbW1hbmQsIENvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBHYW1lT3ZlckNvbW1hbmQsIEZpZ3VyZXNGYWxsVGlja0NvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5cbmNsYXNzIEZhbGxpbmdSZXN1bHQge1xuICAgIHB1YmxpYyB0cmFuc2ZlcnJlZEZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSA9IFtdO1xuICAgIHB1YmxpYyBpc0dhbWVPdmVyOiBib29sZWFuID0gZmFsc2U7XG59XG5cbmV4cG9ydCBjbGFzcyBSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3Ige1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5GaWd1cmVzRmFsbFRpY2ssIHRoaXMucHJvY2Vzc0ZpZ3VyZXNGYWxsVGlja0NvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsRG93biwgdGhpcy5wcm9jZXNzRHJvcEZpZ3VyZXNDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0ZpZ3VyZXNGYWxsVGlja0NvbW1hbmQoY29tbWFuZDogRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCkge1xuICAgICAgICBjb25zdCBmYWxsaW5nUmVzdWx0ID0gdGhpcy5mYWxsRmlndXJlc0Zvck9uZUNlbGwoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgICAgIGxldCBzcXVhc2hlZExpbmVzID0gdGhpcy5zcXVhc2hMaW5lcyhjb21tYW5kLmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGlmIChmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEdhbWVPdmVyQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KFxuICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YSxcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLFxuICAgICAgICAgICAgc3F1YXNoZWRMaW5lcyxcbiAgICAgICAgICAgIDBcbiAgICAgICAgKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzRHJvcEZpZ3VyZXNDb21tYW5kKGNvbW1hbmQ6IERyb3BGaWd1cmVzQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBsZXQgZmFsbGluZ1Jlc3VsdCA9IG5ldyBGYWxsaW5nUmVzdWx0KCk7XG4gICAgICAgIGxldCBkcm9wcGVkTGluZXMgPSAwO1xuICAgICAgICB3aGlsZSAoY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBvbmVDZWxsRmFsbGluZ1Jlc3VsdCA9IHRoaXMuZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMucHVzaCguLi5vbmVDZWxsRmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMpO1xuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyID0gZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyIHx8IG9uZUNlbGxGYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXI7XG4gICAgICAgICAgICBkcm9wcGVkTGluZXMrKztcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3F1YXNoZWRMaW5lcyA9IHRoaXMuc3F1YXNoTGluZXMoY29tbWFuZC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBpZiAoZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBHYW1lT3ZlckNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmFsbFRpY2tQcm9jZXNzZWRFdmVudChcbiAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEsXG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyxcbiAgICAgICAgICAgIHNxdWFzaGVkTGluZXMsXG4gICAgICAgICAgICBkcm9wcGVkTGluZXMgLSAxLFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZhbGxGaWd1cmVzRm9yT25lQ2VsbChnYW1lRGF0YTogR2FtZURhdGEpOiBGYWxsaW5nUmVzdWx0IHtcbiAgICAgICAgbGV0IGZhbGxpbmdSZXN1bHQgPSBuZXcgRmFsbGluZ1Jlc3VsdCgpO1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKChmYWxsaW5nRmlndXJlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlndXJlQ2FuRmFsbChnYW1lRGF0YS5tYXRyaXgsIGZhbGxpbmdGaWd1cmUpKSB7XG4gICAgICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBmaWd1cmVHYW1lT3ZlclJlc3VsdCA9IHRoaXMudHJhbnNmZXJGaWd1cmVUb01hdHJpeChcbiAgICAgICAgICAgICAgICAgICAgZ2FtZURhdGEubWF0cml4LFxuICAgICAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcy5wdXNoKC4uLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLnNwbGljZShpbmRleCwgMSkpO1xuICAgICAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciA9IGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciB8fCBmaWd1cmVHYW1lT3ZlclJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxsaW5nUmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgZmlndXJlQ2FuRmFsbChtYXRyaXg6IGJvb2xlYW5bXVtdLCBmYWxsaW5nRmlndXJlOiBGYWxsaW5nRmlndXJlKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi54LCBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnkgKyAxKSxcbiAgICAgICAgICAgIG1hdHJpeFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmZXJGaWd1cmVUb01hdHJpeChtYXRyaXg6IGJvb2xlYW5bXVtdLCBmYWxsaW5nRmlndXJlOiBGYWxsaW5nRmlndXJlKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBpc0dhbWVPdmVyID0gZmFsc2U7XG4gICAgICAgIGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpXG4gICAgICAgICAgICAuZm9yRWFjaCgocm93LCBmaWd1cmVDZWxsWSkgPT4ge1xuICAgICAgICAgICAgICAgIHJvdy5mb3JFYWNoKChjZWxsVmFsdWUsIGZpZ3VyZUNlbGxYKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2VsbFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdHJpeFggPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnggKyBmaWd1cmVDZWxsWDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdHJpeFkgPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnkgKyBmaWd1cmVDZWxsWTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdHJpeFkgaW4gbWF0cml4XG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBtYXRyaXhYIGluIG1hdHJpeFttYXRyaXhZXVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIW1hdHJpeFttYXRyaXhZXVttYXRyaXhYXVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeFttYXRyaXhZXVttYXRyaXhYXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0dhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpc0dhbWVPdmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3F1YXNoTGluZXMobWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlcltdIHtcbiAgICAgICAgbGV0IGxpbmVzVG9TcXVhc2g6IG51bWJlcltdID0gW107XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGxldCBjYW5CZVNxdWFzaGVkID0gcm93LmV2ZXJ5KGNlbGwgPT4gY2VsbCk7XG4gICAgICAgICAgICBpZiAoY2FuQmVTcXVhc2hlZCkge1xuICAgICAgICAgICAgICAgIGxpbmVzVG9TcXVhc2gucHVzaCh5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGxpbmVzVG9TcXVhc2guZm9yRWFjaCh5ID0+IHtcbiAgICAgICAgICAgIG1hdHJpeC5zcGxpY2UoeSwgMSk7XG4gICAgICAgICAgICBtYXRyaXgudW5zaGlmdChuZXcgQXJyYXkobWF0cml4WzBdLmxlbmd0aCkuZmlsbChmYWxzZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpbmVzVG9TcXVhc2g7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEVudW1IZWxwZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgVG9BcnJheSh2YWw6IGFueSk6IHR5cGVvZiB2YWxbXSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpXG4gICAgICAgICAgICAubWFwKG4gPT4gTnVtYmVyLnBhcnNlSW50KG4pKVxuICAgICAgICAgICAgLmZpbHRlcihuID0+ICFOdW1iZXIuaXNOYU4obikpIGFzIHVua25vd24gYXMgdHlwZW9mIHZhbFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgR2V0UmFuZG9tKHZhbDogYW55KTogdHlwZW9mIHZhbCB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IEVudW1IZWxwZXIuVG9BcnJheSh2YWwpO1xuICAgICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZhbHVlcy5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gdmFsdWVzW3JhbmRvbUluZGV4XTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQsIEZpZ3VyZXNTcGF3bmVkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi9GaWd1cmVzXCI7XG5pbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RW51bUhlbHBlcn0gZnJvbSBcIi4uL1V0aWxzL0VudW1IZWxwZXJcIjtcblxuZXhwb3J0IGNsYXNzIEFsd2F5c09uZUZpZ3VyZVNwYXduZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRIYW5kbGVyKGV2ZW50OiBJbml0R2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihcbiAgICAgICAgICAgIEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCxcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc09uRmFsbFRpY2suYmluZCh0aGlzKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NPbkZhbGxUaWNrKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWRkRmlndXJlKGV2ZW50LmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZEZpZ3VyZShnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgaWYgKGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA+IDAgfHwgZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlndXJlSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBnYW1lRGF0YS5zZXR0aW5ncy5maWd1cmVzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZSA9IGdhbWVEYXRhLnNldHRpbmdzLmZpZ3VyZXNbZmlndXJlSW5kZXhdO1xuICAgICAgICBjb25zdCB0dXJuU3RhdGUgPSBFbnVtSGVscGVyLkdldFJhbmRvbShGaWd1cmVUdXJuU3RhdGUpO1xuICAgICAgICBjb25zdCBmaWd1cmVNYXRyaXggPSBmaWd1cmUuZ2V0VHVybih0dXJuU3RhdGUpO1xuICAgICAgICBjb25zdCBmaWd1cmVXaWR0aCA9IE1hdGgubWF4KC4uLmZpZ3VyZU1hdHJpeC5tYXAocm93ID0+IHJvdy5sZW5ndGgpKTtcbiAgICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IG5ldyBDb29yZGluYXRlKFxuICAgICAgICAgICAgTWF0aC5jZWlsKGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLyAyIC0gZmlndXJlV2lkdGggLyAyKSAtIDEsXG4gICAgICAgICAgICAtZmlndXJlTWF0cml4Lmxlbmd0aCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZmFsbGluZ0ZpZ3VyZSA9IG5ldyBGYWxsaW5nRmlndXJlKFxuICAgICAgICAgICAgZmlndXJlLFxuICAgICAgICAgICAgY29vcmRpbmF0ZSxcbiAgICAgICAgICAgIHR1cm5TdGF0ZVxuICAgICAgICApO1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5wdXNoKGZhbGxpbmdGaWd1cmUpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNTcGF3bmVkRXZlbnQoZ2FtZURhdGEsIFtmYWxsaW5nRmlndXJlXSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIE1vdmVMZWZ0Q29tbWFuZCwgTW92ZVJpZ2h0Q29tbWFuZCwgVHVybkNsb2Nrd2lzZUNvbW1hbmQsIE1vdmVEb3duQ29tbWFuZCwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi9GaWd1cmVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBGaWd1cmVzTW92ZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmV9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtFbnVtSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvRW51bUhlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgTW92aW5nSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVMZWZ0LCB0aGlzLnByb2Nlc3NNb3ZlTGVmdENvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVSaWdodCwgdGhpcy5wcm9jZXNzTW92ZVJpZ2h0Q29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZURvd24sIHRoaXMucHJvY2Vzc01vdmVEb3duQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuVHVybkNsb2Nrd2lzZSwgdGhpcy5wcm9jZXNzVHVybkNsb2Nrd2lzZUNvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzTW92ZUxlZnRDb21tYW5kKGNvbW1hbmQ6IE1vdmVMZWZ0Q29tbWFuZCk6IHZvaWQge1xuICAgICAgICBjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goZmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbkJlTW92ZWRMZWZ0ID0gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZpZ3VyZS5wb3NpdGlvbi54IC0gMSwgZmlndXJlLnBvc2l0aW9uLnkpLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlTW92ZWRMZWZ0KSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLngtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVSaWdodENvbW1hbmQoY29tbWFuZDogTW92ZVJpZ2h0Q29tbWFuZCk6IHZvaWQge1xuICAgICAgICBjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goZmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbkJlTW92ZWRSaWdodCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCArIDEsIGZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZU1vdmVkUmlnaHQpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24ueCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzVHVybkNsb2Nrd2lzZUNvbW1hbmQoY29tbWFuZDogVHVybkNsb2Nrd2lzZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWxsVHVyblN0YXRlcyA9IEVudW1IZWxwZXIuVG9BcnJheShGaWd1cmVUdXJuU3RhdGUpO1xuICAgICAgICBjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goZmlndXJlID0+IHtcbiAgICAgICAgICAgIGxldCBuZXh0VHVyblN0YXRlID0gZmlndXJlLnR1cm5TdGF0ZSArIDE7XG4gICAgICAgICAgICBpZiAoIShuZXh0VHVyblN0YXRlIGluIGFsbFR1cm5TdGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgbmV4dFR1cm5TdGF0ZSA9IGFsbFR1cm5TdGF0ZXNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjYW5CZVR1cm5lZCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihuZXh0VHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVUdXJuZWQpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUudHVyblN0YXRlID0gbmV4dFR1cm5TdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVEb3duQ29tbWFuZChjb21tYW5kOiBNb3ZlRG93bkNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgRHJvcEZpZ3VyZXNDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIE1vdmVMZWZ0Q29tbWFuZCwgTW92ZVJpZ2h0Q29tbWFuZCwgVHVybkNsb2Nrd2lzZUNvbW1hbmQsIE1vdmVEb3duQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgTW92aW5nQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1c1xuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5wcm9jZXNzSW5pdEdhbWVDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0luaXRHYW1lQ29tbWFuZChjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgd2luZG93Lm9ua2V5ZG93biA9IGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVMZWZ0Q29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVSaWdodENvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dVcCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBUdXJuQ2xvY2t3aXNlQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZURvd25Db21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlRG93bkNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnU3BhY2UnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRHJvcEZpZ3VyZXNDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1RpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyIGltcGxlbWVudHMgVGltaW5nc0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGluaXRpYWxEZWxheU1zOiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgYmFzZTogbnVtYmVyID0gMC44LFxuICAgICkge31cblxuICAgIGdldERlbGF5Rm9yTmV4dFRpY2tNcyhnYW1lRGF0YTogR2FtZURhdGEpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5wb3codGhpcy5iYXNlIC0gKGdhbWVEYXRhLmxldmVsIC0gMSkgKiAwLjAwNywgZ2FtZURhdGEubGV2ZWwgLSAxKSAqIHRoaXMuaW5pdGlhbERlbGF5TXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgRmFsbFRpY2tTY29yZUNvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIHNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXA6IE1hcDxudW1iZXIsIG51bWJlcj4gPSBuZXcgTWFwKFtcbiAgICAgICAgICAgIFsxLCAxMDBdLFxuICAgICAgICAgICAgWzIsIDMwMF0sXG4gICAgICAgICAgICBbMywgNTAwXSxcbiAgICAgICAgICAgIFs0LCA4MDBdLFxuICAgICAgICBdKSxcbiAgICAgICAgcHJpdmF0ZSByZXdhcmRPbkNvbWJvID0gNTAsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA8IDApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGxldCBwcmV2aW91c1RocmVzaG9sZFJld2FyZCA9IDA7XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcC5mb3JFYWNoKChyZXdhcmQsIHJvd3NTcXVhc2hlZFRocmVzaG9sZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvd3NTcXVhc2hlZFRocmVzaG9sZCA+IGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgPSByZXdhcmQ7XG4gICAgICAgIH0pO1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zY29yZSArPVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgKiBldmVudC5nYW1lRGF0YS5sZXZlbFxuICAgICAgICAgICAgKyB0aGlzLnJld2FyZE9uQ29tYm8gKiBNYXRoLm1heCgwLCBldmVudC5nYW1lRGF0YS5jb21ibyAtIDEpICogZXZlbnQuZ2FtZURhdGEubGV2ZWxcbiAgICAgICAgICAgICsgZXZlbnQuZHJvcHBlZExpbmVzICogMiAqIGV2ZW50LmdhbWVEYXRhLmxldmVsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIFNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciB7XG4gICAgcHJpdmF0ZSBzcXVhc2hlZFJvd3NDb3VudGVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlcjogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIG1heExldmVsczogbnVtYmVyLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5wcm9jZXNzSW5pdEdhbWVDb21tYW5kLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlcisrO1xuICAgICAgICBpZiAodGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyID49IHRoaXMubGV2ZWxJbmNyZWFzZU9uU3F1YXNoZWRSb3dzTnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIgPSAwO1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEubGV2ZWwgPSBNYXRoLm1pbih0aGlzLm1heExldmVscywgZXZlbnQuZ2FtZURhdGEubGV2ZWwgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIENvbWJvQ291bnRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwdWJsaWMgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBldmVudC5nYW1lRGF0YS5jb21ibyArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEuY29tYm8gPSAwO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lQ29udHJvbGxlcn0gZnJvbSAnLi9HYW1lQ29udHJvbGxlcidcbmltcG9ydCB7VGFibGVSZW5kZXJlciwgVGFibGVSZW5kZXJlclNldHRpbmdzfSBmcm9tICcuL1JlbmRlcmVyL1RhYmxlUmVuZGVyZXInXG5pbXBvcnQge1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3Nvcn0gZnJvbSBcIi4vRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IvUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yXCI7XG5pbXBvcnQge0Fsd2F5c09uZUZpZ3VyZVNwYXduZXJ9IGZyb20gXCIuL0ZpZ3VyZXNTcGF3bmVyL0Fsd2F5c09uZUZpZ3VyZVNwYXduZXJcIjtcbmltcG9ydCB7RXZlbnRCdXN9IGZyb20gXCIuL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIEluaXRHYW1lQ29tbWFuZCwgUGF1c2VHYW1lQ29tbWFuZCwgUmVzdW1lR2FtZUNvbW1hbmR9IGZyb20gXCIuL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtNb3ZpbmdIYW5kbGVyfSBmcm9tIFwiLi9Nb3ZpbmdIYW5kbGVyL01vdmluZ0hhbmRsZXJcIjtcbmltcG9ydCB7TW92aW5nQ29udHJvbGxlcn0gZnJvbSBcIi4vTW92aW5nQ29udHJvbGxlci9Nb3ZpbmdDb250cm9sbGVyXCI7XG5pbXBvcnQge0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0ZhbGxUaWNrU2NvcmVDb3VudGVyfSBmcm9tIFwiLi9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXJcIjtcbmltcG9ydCB7U3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyfSBmcm9tIFwiLi9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi9Db21tb25cIjtcbmltcG9ydCB7Q29tYm9Db3VudGVyfSBmcm9tIFwiLi9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBUZXRyaXNGYWNhZGUge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1cyA9IG5ldyBFdmVudEJ1cygpLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXMgPSBuZXcgQ29tbWFuZEJ1cygpLFxuICAgICAgICBwcml2YXRlIGdhbWVDb250cm9sbGVyID0gbmV3IEdhbWVDb250cm9sbGVyKFxuICAgICAgICAgICAgbmV3IExldmVsQmFzZWRUaW1pbmdzSGFuZGxlcigyMDAwKSxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBtb3ZpbmdIYW5kbGVyID0gbmV3IE1vdmluZ0hhbmRsZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgbW92aW5nQ29udHJvbGxlciA9IG5ldyBNb3ZpbmdDb250cm9sbGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBmYWxsaW5nRmlndXJlc1Byb2Nlc3NvciA9IG5ldyBSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXNcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBmaWd1cmVzU3Bhd25lciA9IG5ldyBBbHdheXNPbmVGaWd1cmVTcGF3bmVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGxldmVsQ291bnRlciA9IG5ldyBTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIoXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICA4LFxuICAgICAgICAgICAgMTUsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgY29tYm9Db3VudGVyID0gbmV3IENvbWJvQ291bnRlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBzY29yZUNvdW50ZXIgPSBuZXcgRmFsbFRpY2tTY29yZUNvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgdGFibGVSZW5kZXJlciA9IG5ldyBUYWJsZVJlbmRlcmVyKFxuICAgICAgICAgICAgbmV3IFRhYmxlUmVuZGVyZXJTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1c1xuICAgICAgICApLFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGEgPSBHYW1lRGF0YS5tYWtlU2ltcGxlKCksXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHN0YXJ0KGdhbWVEYXRhPzogR2FtZURhdGEpIHtcbiAgICAgICAgZ2FtZURhdGEgPSBnYW1lRGF0YSB8fCBHYW1lRGF0YS5tYWtlU2ltcGxlKCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEluaXRHYW1lQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZXN1bWVHYW1lQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXN1bWUoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlc3VtZUdhbWVDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFBhdXNlR2FtZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9UZXRyaXMvVXRpbHMvRW51bUhlbHBlclwiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi9UZXRyaXMvRmlndXJlc1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1RldHJpcy9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuXG5jbGFzcyBQbGFjZVJlc29sdmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuXG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNlUmVzb2x2aW5nRXJyb3Ige1xufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc29sdmVyIHtcbiAgICBwdWJsaWMgcmVzb2x2ZVRhcmdldFBvc2l0aW9uKGdhbWVEYXRhOiBHYW1lRGF0YSk6IE1hcDxGYWxsaW5nRmlndXJlLCBGYWxsaW5nRmlndXJlPiB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxGaWd1cmUgPSBnYW1lRGF0YS5mYWxsaW5nRmlndXJlc1swXTtcblxuICAgICAgICBsZXQgbWF0cmljZXM6IE1hcDxGaWd1cmVUdXJuU3RhdGUsIGJvb2xlYW5bXVtdPiA9IG5ldyBNYXAoKTtcbiAgICAgICAgRW51bUhlbHBlci5Ub0FycmF5KEZpZ3VyZVR1cm5TdGF0ZSkuZm9yRWFjaCh0dXJuU3RhdGUgPT4ge1xuICAgICAgICAgICAgbWF0cmljZXMuc2V0KHR1cm5TdGF0ZSwgb3JpZ2luYWxGaWd1cmUuZmlndXJlLmdldFR1cm4odHVyblN0YXRlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbWF4U2NvcmUgPSAtSW5maW5pdHk7XG4gICAgICAgIGxldCB0aGVCZXN0VGFyZ2V0RmlndXJlU3RhdGUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShcbiAgICAgICAgICAgIG9yaWdpbmFsRmlndXJlLmZpZ3VyZSxcbiAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKG9yaWdpbmFsRmlndXJlLnBvc2l0aW9uLngsIG9yaWdpbmFsRmlndXJlLnBvc2l0aW9uLnkpLFxuICAgICAgICAgICAgb3JpZ2luYWxGaWd1cmUudHVyblN0YXRlXG4gICAgICAgICk7XG4gICAgICAgIG1hdHJpY2VzLmZvckVhY2goKGZpZ3VyZU1hdHJpeCwgdHVyblN0YXRlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMTsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IFt5LCBpbWFnaW5hYmxlTWF0cml4XSA9IHRoaXMuaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZURhdGEubWF0cml4LCBmaWd1cmVNYXRyaXgsIHgpO1xuICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuY2FsY3VsYXRlU2NvcmUoZ2FtZURhdGEsIGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IG1heFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heFNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgICAgIHRoZUJlc3RUYXJnZXRGaWd1cmVTdGF0ZS50dXJuU3RhdGUgPSB0dXJuU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIHRoZUJlc3RUYXJnZXRGaWd1cmVTdGF0ZS5wb3NpdGlvbi54ID0geDtcbiAgICAgICAgICAgICAgICAgICAgdGhlQmVzdFRhcmdldEZpZ3VyZVN0YXRlLnBvc2l0aW9uLnkgPSB5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBNYXAoW1xuICAgICAgICAgICAgW29yaWdpbmFsRmlndXJlLCB0aGVCZXN0VGFyZ2V0RmlndXJlU3RhdGVdLFxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVNjb3JlKGdhbWVEYXRhOiBHYW1lRGF0YSwgaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIge1xuICAgICAgICBjb25zdCBmaWVsZEhlaWdodCA9IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0O1xuICAgICAgICBjb25zdCBmaWVsZFdpZHRoID0gZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aDtcbiAgICAgICAgY29uc3Qgc3F1YXNoZWRMaW5lc0NvdW50ID0gdGhpcy5zcXVhc2hMaW5lcyhpbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgY29uc3Qgc3F1YXNoZWRMaW5lc1Njb3JlID0gc3F1YXNoZWRMaW5lc0NvdW50ICogNTtcblxuICAgICAgICBjb25zdCBbb3JpZ2luYWxIb2xlc0NvdW50LCBfXSA9IHRoaXMuY2FsY3VsYXRlSG9sZXMoZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgY29uc3QgW2hvbGVzQ291bnQsIGhvbGVzQ292ZXJlZEhlaWdodF0gPSB0aGlzLmNhbGN1bGF0ZUhvbGVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICBjb25zdCBob2xlc0NvdW50RGVjcmVhc2UgPSBvcmlnaW5hbEhvbGVzQ291bnQgLSBob2xlc0NvdW50O1xuICAgICAgICBsZXQgaG9sZXNTY29yZTogbnVtYmVyO1xuICAgICAgICBpZiAoaG9sZXNDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgaG9sZXNTY29yZSA9IChob2xlc0NvdW50RGVjcmVhc2UgPiAwID8gaG9sZXNDb3VudERlY3JlYXNlICogMTAwIDogaG9sZXNDb3VudERlY3JlYXNlICogNTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaG9sZXNTY29yZSA9IChob2xlc0NvdW50RGVjcmVhc2UgPiAwID8gaG9sZXNDb3VudERlY3JlYXNlICogMTAwIDogaG9sZXNDb3VudERlY3JlYXNlICogNTApXG4gICAgICAgICAgICAgICAgLSBob2xlc0NvdmVyZWRIZWlnaHQgKiBNYXRoLnBvdyhob2xlc0NvdmVyZWRIZWlnaHQsIGhvbGVzQ292ZXJlZEhlaWdodCAvIChmaWVsZEhlaWdodCAqIGhvbGVzQ291bnQpKSAqIDM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmNhbGN1bGF0ZUhlaWdodChpbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgY29uc3QgaGVpZ2h0U2NvcmUgPSAtaGVpZ2h0ICogTWF0aC5wb3coaGVpZ2h0LCBoZWlnaHQgLyBmaWVsZEhlaWdodCkgKiAzO1xuXG4gICAgICAgIGNvbnN0IFtmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlSGVpZ2h0XSA9IHRoaXMuY2FsY3VsYXRlRmlsbGFibGVTcGFjZShpbWFnaW5hYmxlTWF0cml4LCBmaWVsZFdpZHRoKTtcbiAgICAgICAgbGV0IGZpbGxhYmxlQ2VsbHNTY29yZSA9IDA7XG4gICAgICAgIGlmIChmaWxsYWJsZUhlaWdodCA+IDUpIHtcbiAgICAgICAgICAgIGZpbGxhYmxlQ2VsbHNTY29yZSA9IC1maWxsYWJsZUNlbGxzQ291bnQgKiBNYXRoLnBvdyhmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlQ2VsbHNDb3VudCAvIChmaWVsZEhlaWdodCAqIGZpZWxkV2lkdGgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFt0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzQ291bnRdID0gdGhpcy5jYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkKGltYWdpbmFibGVNYXRyaXgsIGdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGxldCB0dW5uZWxzU2NvcmU6IG51bWJlcjtcbiAgICAgICAgaWYgKHR1bm5lbHNDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgdHVubmVsc1Njb3JlID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHR1bm5lbHNTY29yZSA9IC10dW5uZWxzQ291bnQgKiAxMDBcbiAgICAgICAgICAgICAgICAtIHR1bm5lbHNTdW1IZWlnaHQgKiBNYXRoLnBvdyh0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzU3VtSGVpZ2h0IC8gKGZpZWxkSGVpZ2h0ICogdHVubmVsc0NvdW50KSkgKiAxMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNjb3JlID0gaG9sZXNTY29yZSArIHNxdWFzaGVkTGluZXNTY29yZSArIGhlaWdodFNjb3JlICsgdHVubmVsc1Njb3JlICsgZmlsbGFibGVDZWxsc1Njb3JlO1xuICAgICAgICBpZiAoaXNOYU4oc2NvcmUpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpbWFnaW5hYmxlTWF0cml4LCBob2xlc1Njb3JlLCBzcXVhc2hlZExpbmVzU2NvcmUsIGhlaWdodFNjb3JlLCB0dW5uZWxzU2NvcmUsIGZpbGxhYmxlQ2VsbHNTY29yZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3JlO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3F1YXNoTGluZXMobWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlciB7XG4gICAgICAgIGxldCBsaW5lc1RvU3F1YXNoOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBsZXQgY2FuQmVTcXVhc2hlZCA9IHJvdy5ldmVyeShjZWxsID0+IGNlbGwpO1xuICAgICAgICAgICAgaWYgKGNhbkJlU3F1YXNoZWQpIHtcbiAgICAgICAgICAgICAgICBsaW5lc1RvU3F1YXNoLnB1c2goeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgICBsaW5lc1RvU3F1YXNoLmZvckVhY2goeSA9PiB7XG4gICAgICAgICAgICBtYXRyaXguc3BsaWNlKHksIDEpO1xuICAgICAgICAgICAgbWF0cml4LnVuc2hpZnQobmV3IEFycmF5KG1hdHJpeFswXS5sZW5ndGgpLmZpbGwoZmFsc2UpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaW5lc1RvU3F1YXNoLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGltYWdpbmVGaWd1cmVEcm9wKGdhbWVNYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdLCB0YXJnZXRYOiBudW1iZXIpOiBbbnVtYmVyLCBib29sZWFuW11bXV0ge1xuICAgICAgICBsZXQgaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10gPSBnYW1lTWF0cml4Lm1hcChyb3cgPT4gcm93LnNsaWNlKCkpO1xuICAgICAgICBsZXQgdGFyZ2V0WSA9IC1maWd1cmVNYXRyaXgubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoZmlndXJlTWF0cml4LCBuZXcgQ29vcmRpbmF0ZSh0YXJnZXRYLCB0YXJnZXRZICsgMSksIGdhbWVNYXRyaXgpKSB7XG4gICAgICAgICAgICB0YXJnZXRZKys7XG4gICAgICAgIH1cbiAgICAgICAgZmlndXJlTWF0cml4LmZvckVhY2goKHJvdywgZmlndXJlWSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgZmlndXJlWCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0gdGFyZ2V0WSArIGZpZ3VyZVk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRYICsgZmlndXJlWDtcbiAgICAgICAgICAgICAgICBpZiAocmVhbFkgaW4gaW1hZ2luYWJsZU1hdHJpeFxuICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCBpbiBpbWFnaW5hYmxlTWF0cml4W3JlYWxZXVxuICAgICAgICAgICAgICAgICAgICAmJiB2YWxcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZU1hdHJpeFtyZWFsWV1bcmVhbFhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt0YXJnZXRZLCBpbWFnaW5hYmxlTWF0cml4XTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhvbGVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zSGVpZ2h0cyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBsZXQgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSA9IDA7XG4gICAgICAgIGxldCBob2xlc0NvdW50ID0gMDtcbiAgICAgICAgbWF0cml4LmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmICFjb3ZlcmVkQ29sdW1uc0hlaWdodHMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zSGVpZ2h0cy5zZXQoeCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb3ZlcmVkSGVpZ2h0ID0gY292ZXJlZENvbHVtbnNIZWlnaHRzLmdldCh4KTtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZEhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob2xlc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBob2xlc0NvdmVyZWRIZWlnaHRzU3VtICs9IGNvdmVyZWRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnNIZWlnaHRzLnNldCh4LCBjb3ZlcmVkSGVpZ2h0ICsgMSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbaG9sZXNDb3VudCwgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bV07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVIZWlnaHQobWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlciB7XG4gICAgICAgIGxldCBsb3dlc3RFbXB0eVkgPSAtMTtcbiAgICAgICAgbWF0cml4LmV2ZXJ5KChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGlmIChyb3cuZXZlcnkodmFsID0+ICF2YWwpKSB7XG4gICAgICAgICAgICAgICAgbG93ZXN0RW1wdHlZID0geTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1hdHJpeC5sZW5ndGggLSBsb3dlc3RFbXB0eVkgLSAxO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlVHVubmVsc0V4Y2VwdFVuY292ZXJlZChpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSwgcmVhbE1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgbGV0IHJlYWxDb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICByZWFsTWF0cml4LmV2ZXJ5KChyb3cpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWxDb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICAgICAgbGV0IHR1bm5lbHMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPjtcbiAgICAgICAgY29uc3QgZmllbGRXaWR0aCA9IGltYWdpbmFibGVNYXRyaXhbMF0ubGVuZ3RoO1xuICAgICAgICBpbWFnaW5hYmxlTWF0cml4LmV2ZXJ5KChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWxcbiAgICAgICAgICAgICAgICAgICAgJiYgIWltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeClcbiAgICAgICAgICAgICAgICAgICAgJiYgIXJlYWxDb3ZlcmVkQ29sdW1ucy5oYXMoeClcbiAgICAgICAgICAgICAgICAgICAgJiYgKHggPT09IDAgfHwgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4IC0gMSkpXG4gICAgICAgICAgICAgICAgICAgICYmICh4ID09PSBmaWVsZFdpZHRoIC0gMSB8fCBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHggKyAxKSlcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgdHVubmVscy5zZXQoeCwgKHR1bm5lbHMuZ2V0KHgpIHx8IDApICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLnNpemUgPCBmaWVsZFdpZHRoO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHR1bm5lbHNTdW1IZWlnaHQgPSAwO1xuICAgICAgICBsZXQgdHVubmVsc0NvdW50ID0gMDtcbiAgICAgICAgdHVubmVscy5mb3JFYWNoKGhlaWdodCA9PiB7XG4gICAgICAgICAgICBpZiAoaGVpZ2h0ID49IDMpIHtcbiAgICAgICAgICAgICAgICB0dW5uZWxzU3VtSGVpZ2h0ICs9IGhlaWdodDtcbiAgICAgICAgICAgICAgICB0dW5uZWxzQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbdHVubmVsc1N1bUhlaWdodCwgdHVubmVsc0NvdW50XTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UobWF0cml4OiBib29sZWFuW11bXSwgZmllbGRXaWR0aDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICBsZXQgZmlsbGFibGVDZWxsc0NvdW50ID0gMDtcbiAgICAgICAgbGV0IGZpbGxhYmxlSGVpZ2h0ID0gMDtcbiAgICAgICAgbWF0cml4LmV2ZXJ5KHJvdyA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWwgJiYgY292ZXJlZENvbHVtbnMuc2l6ZSA+IDAgJiYgIWNvdmVyZWRDb2x1bW5zLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUNlbGxzQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5zaXplIDwgZmllbGRXaWR0aCkge1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUhlaWdodCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUhlaWdodF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgRHJvcEZpZ3VyZXNDb21tYW5kLCBNb3ZlTGVmdENvbW1hbmQsIE1vdmVSaWdodENvbW1hbmQsIFR1cm5DbG9ja3dpc2VDb21tYW5kfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuLi9UZXRyaXMvVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5cbmNsYXNzIFBsYWNpbmdFcnJvciBleHRlbmRzIEVycm9yIHt9XG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuY2xhc3MgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1BlcmZvcm1lciB7XG4gICAgcHJpdmF0ZSBuZXh0TW92ZVRpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gPSBzZXRUaW1lb3V0KCgpID0+IHt9KTtcbiAgICBwcml2YXRlIHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBnYW1lRGF0YTogR2FtZURhdGEgPSBHYW1lRGF0YS5tYWtlU2ltcGxlKCk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIHRpbWluZ3NIYW5kbGVyID0gbmV3IExldmVsQmFzZWRUaW1pbmdzSGFuZGxlcigxMDAsIDAuOSksXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHBsYWNlKGdhbWVEYXRhOiBHYW1lRGF0YSwgdGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXM6IE1hcDxGYWxsaW5nRmlndXJlLCBGYWxsaW5nRmlndXJlPikge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gZ2FtZURhdGE7XG4gICAgICAgIHRoaXMudGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMgPSB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcztcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubmV4dE1vdmVUaW1lb3V0SWQpO1xuICAgICAgICB0aGlzLm5leHRNb3ZlVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgIHRoaXMudGltaW5nc0hhbmRsZXIuZ2V0RGVsYXlGb3JOZXh0VGlja01zKHRoaXMuZ2FtZURhdGEpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1RpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxGaWd1cmUgPSB0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuICAgICAgICBjb25zdCB0YXJnZXRGaWd1cmUgPSB0aGlzLnRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzLmdldChvcmlnaW5hbEZpZ3VyZSk7XG4gICAgICAgIGlmICghdGFyZ2V0RmlndXJlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUuZmlndXJlICE9PSB0YXJnZXRGaWd1cmUuZmlndXJlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvcihcIkJvdGggb2YgdGhlIG9yaWdpbmFsIGFuZCB0aGUgdGFyZ2V0IGZhbGxpbmcgZmlndXJlcyBtdXN0IGhhdmUgdGhlIHNhbWUgZmlndXJlIGluIGl0LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS50dXJuU3RhdGUgIT0gdGFyZ2V0RmlndXJlLnR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgVHVybkNsb2Nrd2lzZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICB9IGVsc2UgaWYgKG9yaWdpbmFsRmlndXJlLnBvc2l0aW9uLnggIT0gdGFyZ2V0RmlndXJlLnBvc2l0aW9uLngpIHtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS5wb3NpdGlvbi54ID4gdGFyZ2V0RmlndXJlLnBvc2l0aW9uLngpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlTGVmdENvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlUmlnaHRDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IERyb3BGaWd1cmVzQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm5leHRNb3ZlVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgIHRoaXMudGltaW5nc0hhbmRsZXIuZ2V0RGVsYXlGb3JOZXh0VGlja01zKHRoaXMuZ2FtZURhdGEpLFxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmlndXJlc1NwYXduZWRFdmVudH0gZnJvbSBcIi4uL1RldHJpcy9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUmVzb2x2ZXJ9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlclwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUGVyZm9ybWVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBUZXRyaXNTb2x2ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGZhbGxpbmdGaWd1cmVQbGFjaW5nUmVzb2x2ZXIgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc29sdmVyKCksXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZXNQbGFjZXIgPSBuZXcgRmlndXJlUGxhY2luZ1BlcmZvcm1lcihjb21tYW5kQnVzKSxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GaWd1cmVzU3Bhd25lZCwgdGhpcy5vbkZpZ3VyZXNTcGF3bmVkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GaWd1cmVzU3Bhd25lZChldmVudDogRmlndXJlc1NwYXduZWRFdmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyA9IHRoaXMuZmFsbGluZ0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci5yZXNvbHZlVGFyZ2V0UG9zaXRpb24oZXZlbnQuZ2FtZURhdGEpO1xuICAgICAgICB0aGlzLmZhbGxpbmdGaWd1cmVzUGxhY2VyLnBsYWNlKGV2ZW50LmdhbWVEYXRhLCB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGV0cmlzRmFjYWRlIH0gZnJvbSAnLi9UZXRyaXMvVGV0cmlzRmFjYWRlJ1xuaW1wb3J0IHtFdmVudEJ1c30gZnJvbSBcIi4vVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXN9IGZyb20gXCIuL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7VGV0cmlzU29sdmVyfSBmcm9tIFwiLi9UZXRyaXNTb2x2ZXIvVGV0cmlzU29sdmVyXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKTtcbiAgICBjb25zdCBjb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoKTtcbiAgICBsZXQgdGV0cmlzID0gbmV3IFRldHJpc0ZhY2FkZShldmVudEJ1cywgY29tbWFuZEJ1cyk7XG4gICAgbGV0IHNvbHZlciA9IG5ldyBUZXRyaXNTb2x2ZXIoZXZlbnRCdXMsIGNvbW1hbmRCdXMpO1xuXG4gICAgdGV0cmlzLnN0YXJ0KCk7XG59KVxuIl0sIm5hbWVzIjpbIkV2ZW50VHlwZSIsIkNvbW1hbmRUeXBlIiwiZ2FtZURhdGEiLCJ0cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlcyIsInNxdWFzaGVkTGluZXMiLCJkcm9wcGVkTGluZXMiLCJnZXRFdmVudFR5cGUiLCJGYWxsaW5nVGlja1Byb2Nlc3NlZCIsIkdhbWVPdmVyIiwiRmlndXJlc01vdmVkIiwibmV3RmlndXJlcyIsIkZpZ3VyZXNTcGF3bmVkIiwiaGFuZGxlcnMiLCJNYXAiLCJvbiIsImV2ZW50IiwiaGFuZGxlciIsInVuaXF1ZSIsInRoaXMiLCJnZXQiLCJzb21lIiwiYm91bmRIYW5kbGVyIiwicHVzaCIsInNldCIsIm9mZiIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImZpcmUiLCJldmVudFBheWxvYWQiLCJmb3JFYWNoIiwiRmlndXJlVHVyblN0YXRlIiwiZ2V0Q29tbWFuZFR5cGUiLCJJbml0R2FtZSIsIlJlc3VtZUdhbWUiLCJQYXVzZUdhbWUiLCJGaWd1cmVzRmFsbFRpY2siLCJSZW5kZXIiLCJNb3ZlTGVmdCIsIk1vdmVSaWdodCIsIlR1cm5DbG9ja3dpc2UiLCJNb3ZlRG93biIsIkZpZ3VyZXNGYWxsRG93biIsImFkZEhhbmRsZXIiLCJyZW1vdmVIYW5kbGVyIiwicnVuIiwicGF5bG9hZCIsImdldE5vcm1hbGl6ZWRGaWd1cmUiLCJmaWd1cmUiLCJnZXRGaWd1cmUiLCJ0aGVMb25nZXN0Um93U2l6ZSIsInJlZHVjZSIsInByZXZpb3VzIiwiY3VycmVudCIsIk1hdGgiLCJtYXgiLCJsZW5ndGgiLCJtYXAiLCJyb3ciLCJvcmlnaW5hbExlbmd0aCIsImZpbGwiLCJnZXRGaXJzdFR1cm4iLCJnZXRTZWNvbmRUdXJuIiwib3JpZ2luYWxGaWd1cmUiLCJ0dXJuZWRGaWd1cmUiLCJvcmlnaW5hbEZpZ3VyZUhlaWdodCIsIm9yaWdpbmFsRmlndXJlV2lkdGgiLCJ4IiwiQXJyYXkiLCJ5IiwiZ2V0VGhpcmRUdXJuIiwicmV2ZXJzZSIsImdldEZvcnRoVHVybiIsImdldFR1cm4iLCJmaWd1cmVUdXJuU3RhdGUiLCJPbmUiLCJUd28iLCJUaHJlZSIsIkZvdXIiLCJzcGxpdCIsIml0ZW0iLCJTaW1wbHlSb3RhdGFibGVGaWd1cmUiLCJwb3NpdGlvbiIsInR1cm5TdGF0ZSIsImZpZWxkV2lkdGgiLCJmaWVsZEhlaWdodCIsImZpZ3VyZXMiLCJpc0luaXRpYWxpemVkIiwiaXNHYW1lT3ZlciIsImZhbGxpbmdGaWd1cmVzIiwibWF0cml4IiwibmV4dFRpY2tUaW1lb3V0SWQiLCJzZXR0aW5ncyIsImxldmVsIiwic2NvcmUiLCJjb21ibyIsInNldFRpbWVvdXQiLCJtYWtlU2ltcGxlIiwid2lkdGgiLCJoZWlnaHQiLCJHYW1lRGF0YSIsIl8iLCJHYW1lU2V0dGluZ3MiLCJURmlndXJlIiwiUmlnaHRMRmlndXJlIiwiTGVmdExGaWd1cmUiLCJTcXVhcmVGaWd1cmUiLCJTdGlja0ZpZ3VyZSIsIkxaRmlndXJlIiwiUlpGaWd1cmUiLCJ0aW1pbmdzSGFuZGxlciIsImV2ZW50QnVzIiwiY29tbWFuZEJ1cyIsImluaXRHYW1lSGFuZGxlciIsImJpbmQiLCJyZXN1bWVHYW1lSGFuZGxlciIsInBhdXNlR2FtZUhhbmRsZXIiLCJnYW1lT3ZlckhhbmRsZXIiLCJjb21tYW5kIiwib25GYWxsVGlja1Byb2Nlc3NlZCIsIkluaXRHYW1lQ29tbWFuZCIsImZhbGxUaWNrIiwiY2xlYXJUaW1lb3V0IiwiUmVuZGVyQ29tbWFuZCIsIkdhbWVPdmVyRXZlbnQiLCJGaWd1cmVzRmFsbFRpY2tDb21tYW5kIiwiZ2V0RGVsYXlGb3JOZXh0VGlja01zIiwiY2FuRmlndXJlQmVQbGFjZWQiLCJ0YXJnZXRGaWd1cmVNYXRyaXgiLCJ0YXJnZXRQb3NpdGlvbiIsImV2ZXJ5IiwidmFsdWUiLCJyZWFsWSIsInJlYWxYIiwiZmlsbGVkIiwiZmlsbGVkR2FtZU92ZXIiLCJlbXB0eSIsImNvbnRhaW5lckVsZW1lbnQiLCJyZW5kZXJQcm9qZWN0aW9uRmlndXJlcyIsIm1hdHJpeENlbGxDb2xvcnMiLCJmYWxsaW5nRmlndXJlQ2VsbENvbG9ycyIsInByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzIiwiVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzIiwicmVuZGVyU2V0dGluZ3MiLCJjZWxsc0h0bWxFbGVtZW50c01hcCIsImluaXRIYW5kbGVyIiwicmVuZGVyQ29tbWFuZEhhbmRsZXIiLCJ0YWJsZSIsIlRhYmxlUmVuZGVyZXIiLCJjcmVhdGVIdG1sRWxlbWVudCIsImNlbGwiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsInNjb3JlRGlzcGxheSIsIm9uR2FtZU92ZXIiLCJvbkZpZ3VyZXNNb3ZlZCIsInJlbmRlclN0YXRlIiwicmVwYWludE1hdHJpeENlbGxzIiwiQ29vcmRpbmF0ZSIsInJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbiIsInJlbmRlckZhbGxpbmdGaWd1cmVzIiwicmVuZGVyU3RhdHMiLCJmYWxsaW5nRmlndXJlIiwicmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMiLCJmaWd1cmVNYXRyaXgiLCJwcm9qZWN0aW9uRmlndXJlWCIsInByb2plY3Rpb25GaWd1cmVZIiwiRmlndXJlUGxhY2luZ0NoZWNrZXIiLCJyZXBhaW50UHJvamVjdGlvbkZpZ3VyZXNDZWxscyIsImluZGVudCIsImNvbG9ycyIsIkNlbGxDb2xvcnMiLCJyZXBhaW50Q2VsbHMiLCJjZWxsQ29sb3JzIiwiY29sb3IiLCJzdHlsZSIsImJhY2tncm91bmQiLCJsZXZlbFNwYW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2NvcmVTcGFuIiwiY29tYm9TcGFuIiwidG9TdHJpbmciLCJodG1sIiwiY29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNoaWxkcmVuIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJIVE1MRWxlbWVudCIsInRyYW5zZmVycmVkRmlndXJlcyIsInByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kIiwicHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZCIsImZhbGxpbmdSZXN1bHQiLCJmYWxsRmlndXJlc0Zvck9uZUNlbGwiLCJzcXVhc2hMaW5lcyIsIkdhbWVPdmVyQ29tbWFuZCIsIkZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQiLCJGYWxsaW5nUmVzdWx0Iiwib25lQ2VsbEZhbGxpbmdSZXN1bHQiLCJmaWd1cmVDYW5GYWxsIiwiZmlndXJlR2FtZU92ZXJSZXN1bHQiLCJ0cmFuc2ZlckZpZ3VyZVRvTWF0cml4IiwiZmlndXJlQ2VsbFkiLCJjZWxsVmFsdWUiLCJmaWd1cmVDZWxsWCIsIm1hdHJpeFgiLCJtYXRyaXhZIiwibGluZXNUb1NxdWFzaCIsInVuc2hpZnQiLCJUb0FycmF5IiwidmFsIiwiT2JqZWN0Iiwia2V5cyIsIm4iLCJOdW1iZXIiLCJwYXJzZUludCIsImZpbHRlciIsImlzTmFOIiwiR2V0UmFuZG9tIiwidmFsdWVzIiwiRW51bUhlbHBlciIsImZsb29yIiwicmFuZG9tIiwicHJvY2Vzc09uRmFsbFRpY2siLCJhZGRGaWd1cmUiLCJmaWd1cmVJbmRleCIsImZpZ3VyZVdpZHRoIiwiY29vcmRpbmF0ZSIsImNlaWwiLCJGYWxsaW5nRmlndXJlIiwiRmlndXJlc1NwYXduZWRFdmVudCIsInByb2Nlc3NNb3ZlTGVmdENvbW1hbmQiLCJwcm9jZXNzTW92ZVJpZ2h0Q29tbWFuZCIsInByb2Nlc3NNb3ZlRG93bkNvbW1hbmQiLCJwcm9jZXNzVHVybkNsb2Nrd2lzZUNvbW1hbmQiLCJGaWd1cmVzTW92ZWRFdmVudCIsImFsbFR1cm5TdGF0ZXMiLCJuZXh0VHVyblN0YXRlIiwicHJvY2Vzc0luaXRHYW1lQ29tbWFuZCIsIndpbmRvdyIsIm9ua2V5ZG93biIsImNvZGUiLCJNb3ZlTGVmdENvbW1hbmQiLCJNb3ZlUmlnaHRDb21tYW5kIiwiVHVybkNsb2Nrd2lzZUNvbW1hbmQiLCJNb3ZlRG93bkNvbW1hbmQiLCJEcm9wRmlndXJlc0NvbW1hbmQiLCJpbml0aWFsRGVsYXlNcyIsImJhc2UiLCJwb3ciLCJzcXVhc2hlZFJvd3NSZXdhcmRUaHJlc2hvbGRzTWFwIiwicmV3YXJkT25Db21ibyIsIm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQiLCJwcmV2aW91c1RocmVzaG9sZFJld2FyZCIsInJld2FyZCIsInJvd3NTcXVhc2hlZFRocmVzaG9sZCIsImxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlciIsIm1heExldmVscyIsInNxdWFzaGVkUm93c0NvdW50ZXIiLCJtaW4iLCJnYW1lQ29udHJvbGxlciIsIm1vdmluZ0hhbmRsZXIiLCJtb3ZpbmdDb250cm9sbGVyIiwiZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJmaWd1cmVzU3Bhd25lciIsImxldmVsQ291bnRlciIsImNvbWJvQ291bnRlciIsInNjb3JlQ291bnRlciIsInRhYmxlUmVuZGVyZXIiLCJFdmVudEJ1cyIsIkNvbW1hbmRCdXMiLCJHYW1lQ29udHJvbGxlciIsIkxldmVsQmFzZWRUaW1pbmdzSGFuZGxlciIsIk1vdmluZ0hhbmRsZXIiLCJNb3ZpbmdDb250cm9sbGVyIiwiUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIiwiQWx3YXlzT25lRmlndXJlU3Bhd25lciIsIlNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciIsIkNvbWJvQ291bnRlciIsIkZhbGxUaWNrU2NvcmVDb3VudGVyIiwiVGFibGVSZW5kZXJlclNldHRpbmdzIiwiYm9keSIsInN0YXJ0IiwiUmVzdW1lR2FtZUNvbW1hbmQiLCJyZXN1bWUiLCJwYXVzZSIsIlBhdXNlR2FtZUNvbW1hbmQiLCJFcnJvciIsInJlc29sdmVUYXJnZXRQb3NpdGlvbiIsIkdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yIiwibWF0cmljZXMiLCJtYXhTY29yZSIsInRoZUJlc3RUYXJnZXRGaWd1cmVTdGF0ZSIsImltYWdpbmVGaWd1cmVEcm9wIiwiaW1hZ2luYWJsZU1hdHJpeCIsImNhbGN1bGF0ZVNjb3JlIiwiaG9sZXNTY29yZSIsInNxdWFzaGVkTGluZXNTY29yZSIsImNhbGN1bGF0ZUhvbGVzIiwib3JpZ2luYWxIb2xlc0NvdW50IiwiaG9sZXNDb3VudCIsImhvbGVzQ292ZXJlZEhlaWdodCIsImhvbGVzQ291bnREZWNyZWFzZSIsImNhbGN1bGF0ZUhlaWdodCIsImhlaWdodFNjb3JlIiwiY2FsY3VsYXRlRmlsbGFibGVTcGFjZSIsImZpbGxhYmxlQ2VsbHNDb3VudCIsImZpbGxhYmxlQ2VsbHNTY29yZSIsInR1bm5lbHNTY29yZSIsImNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQiLCJ0dW5uZWxzU3VtSGVpZ2h0IiwidHVubmVsc0NvdW50IiwiY29uc29sZSIsImxvZyIsImdhbWVNYXRyaXgiLCJ0YXJnZXRYIiwic2xpY2UiLCJ0YXJnZXRZIiwiZmlndXJlWSIsImZpZ3VyZVgiLCJjb3ZlcmVkQ29sdW1uc0hlaWdodHMiLCJob2xlc0NvdmVyZWRIZWlnaHRzU3VtIiwiaGFzIiwiY292ZXJlZEhlaWdodCIsInVuZGVmaW5lZCIsImxvd2VzdEVtcHR5WSIsInJlYWxNYXRyaXgiLCJyZWFsQ292ZXJlZENvbHVtbnMiLCJTZXQiLCJhZGQiLCJpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMiLCJ0dW5uZWxzIiwic2l6ZSIsImNvdmVyZWRDb2x1bW5zIiwiZmlsbGFibGVIZWlnaHQiLCJQbGFjaW5nRXJyb3IiLCJuZXh0TW92ZVRpbWVvdXRJZCIsInRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzIiwicGxhY2UiLCJwcm9jZXNzVGljayIsInRhcmdldEZpZ3VyZSIsIkluY29uc2lzdGVudFRhcmdldFN0YXRlRXJyb3IiLCJmYWxsaW5nRmlndXJlUGxhY2luZ1Jlc29sdmVyIiwiZmFsbGluZ0ZpZ3VyZXNQbGFjZXIiLCJGaWd1cmVQbGFjaW5nUmVzb2x2ZXIiLCJGaWd1cmVQbGFjaW5nUGVyZm9ybWVyIiwib25GaWd1cmVzU3Bhd25lZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0ZXRyaXMiLCJUZXRyaXNGYWNhZGUiLCJUZXRyaXNTb2x2ZXIiXSwic291cmNlUm9vdCI6IiJ9