(()=>{"use strict";var e;!function(e){e[e.FallingTickProcessed=0]="FallingTickProcessed",e[e.GameOver=1]="GameOver",e[e.FiguresMoved=2]="FiguresMoved",e[e.LevelUp=3]="LevelUp",e[e.FiguresSpawned=4]="FiguresSpawned"}(e||(e={}));var t,n=function(){function t(e,t,n,i){this.gameData=e,this.transferredToMatrixFigures=t,this.squashedLines=n,this.droppedLines=i}return t.prototype.getEventType=function(){return e.FallingTickProcessed},t}(),i=function(){function t(e){this.gameData=e}return t.prototype.getEventType=function(){return e.GameOver},t}(),r=function(){function t(e){this.gameData=e}return t.prototype.getEventType=function(){return e.FiguresMoved},t}(),o=function(){function t(e,t){this.gameData=e,this.newFigures=t}return t.prototype.getEventType=function(){return e.FiguresSpawned},t}(),a=function(){function e(){this.handlers=new Map}return e.prototype.on=function(e,t,n){void 0===n&&(n=!0);var i=this.handlers.get(e)||[];n&&i.some((function(e){return e===t}))||(i.push(t),this.handlers.set(e,i))},e.prototype.off=function(e,t){var n=this.handlers.get(e)||[],i=n.indexOf(t);i>0&&n.splice(i,1),this.handlers.set(e,n)},e.prototype.fire=function(e){(this.handlers.get(e.getEventType())||[]).forEach((function(t){t(e)}))},e}();!function(e){e[e.InitGame=0]="InitGame",e[e.ResumeGame=1]="ResumeGame",e[e.PauseGame=2]="PauseGame",e[e.FiguresFallTick=3]="FiguresFallTick",e[e.GameOver=4]="GameOver",e[e.Render=5]="Render",e[e.MoveLeft=6]="MoveLeft",e[e.MoveRight=7]="MoveRight",e[e.TurnClockwise=8]="TurnClockwise",e[e.MoveDown=9]="MoveDown",e[e.FiguresFallDown=10]="FiguresFallDown"}(t||(t={}));var s,u,l=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.InitGame},e}(),c=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.ResumeGame},e}(),h=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.PauseGame},e}(),d=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.FiguresFallTick},e}(),f=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.GameOver},e}(),m=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.Render},e}(),p=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveLeft},e}(),g=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveRight},e}(),v=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.TurnClockwise},e}(),y=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveDown},e}(),w=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.FiguresFallDown},e}(),F=function(){function e(){this.handlers=new Map}return e.prototype.addHandler=function(e,t,n){void 0===n&&(n=!0);var i=this.handlers.get(e)||[];n&&i.some((function(e){return e===t}))||(i.push(t),this.handlers.set(e,i))},e.prototype.removeHandler=function(e,t){var n=this.handlers.get(e)||[],i=n.indexOf(t);i>0&&n.splice(i,1),this.handlers.set(e,n)},e.prototype.run=function(e){(this.handlers.get(e.getCommandType())||[]).forEach((function(t){t(e)}))},e}(),T=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(u||(u={}));var D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getNormalizedFigure=function(){var e=this.getFigure(),t=e.reduce((function(e,t){return Math.max(e,t.length)}),0);return e.map((function(e){var n=e.length;return e.length=t,e.fill(!1,n-1,t-1)}))},t.prototype.getFirstTurn=function(){return this.getNormalizedFigure()},t.prototype.getSecondTurn=function(){for(var e=this.getNormalizedFigure(),t=[],n=e.length,i=e[0].length,r=0;r<i;r++){t[r]=new Array(n).fill(!1);for(var o=0;o<n;o++)t[r][n-o-1]=e[o][r]}return t},t.prototype.getThirdTurn=function(){return this.getFirstTurn().reverse().map((function(e){return e.reverse()}))},t.prototype.getForthTurn=function(){return this.getSecondTurn().reverse().map((function(e){return e.reverse()}))},t}(function(){function e(){}return e.prototype.getTurn=function(e){switch(e){case u.One:return this.getFirstTurn();case u.Two:return this.getSecondTurn();case u.Three:return this.getThirdTurn();case u.Four:return this.getForthTurn()}},e}()),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"-#-".split("").map((function(e){return"#"===e}))]},t}(D),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"--#".split("").map((function(e){return"#"===e}))]},t}(D),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"#--".split("").map((function(e){return"#"===e}))]},t}(D),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["##".split("").map((function(e){return"#"===e})),"##".split("").map((function(e){return"#"===e}))]},t}(D),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["####".split("").map((function(e){return"#"===e}))]},t}(D),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["##-".split("").map((function(e){return"#"===e})),"-##".split("").map((function(e){return"#"===e}))]},t}(D),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["-##".split("").map((function(e){return"#"===e})),"##-".split("").map((function(e){return"#"===e}))]},t}(D),x=function(e,t){this.x=e,this.y=t},G=function(e,t,n,i){void 0===i&&(i=void 0),this.figure=e,this.position=t,this.turnState=n,this.color=i},O=function(e,t,n){this.fieldWidth=e,this.fieldHeight=t,this.figures=n},k=function(){this.figuresFallen=0,this.linesSquashed=0},P=function(){function e(e,t,n,i,r,o,a,s,u,l){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=setTimeout((function(){}))),void 0===a&&(a=1),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=new k),this.isInitialized=e,this.isGameOver=t,this.fallingFigures=n,this.matrix=i,this.nextTickTimeoutId=r,this.settings=o,this.level=a,this.score=s,this.combo=u,this.stats=l}return e.makeSimple=function(t,n){return void 0===t&&(t=10),void 0===n&&(n=20),new e(!1,!1,[],new Array(n).fill([]).map((function(e){return new Array(t).fill(!1)})),setTimeout((function(){})),new O(t,n,[new C,new B,new M,new H,new S,new b,new E]))},e}(),L=function(){function n(e,n,i){this.timingsHandler=e,this.eventBus=n,this.commandBus=i,this.gameData=P.makeSimple(),this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(t.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(t.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(t.GameOver,this.gameOverHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.gameData=t.gameData,this.gameData.isInitialized=!0,this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.resumeGameHandler=function(e){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new l(e.gameData)),this.fallTick())},n.prototype.pauseGameHandler=function(e){this.gameData=e.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new m(this.gameData))},n.prototype.gameOverHandler=function(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new i(this.gameData))},n.prototype.fallTick=function(){this.commandBus.run(new d(this.gameData))},n.prototype.onFallTickProcessed=function(e){clearTimeout(this.gameData.nextTickTimeoutId),this.gameData.isGameOver||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))},n}(),I=function(){function e(){}return e.canFigureBePlaced=function(e,t,n){return e.every((function(e,i){return e.every((function(e,r){var o=t.y+i,a=t.x+r;return!e||o<0&&a>=0&&a<=n[0].length-1||o in n&&a in n[o]&&!n[o][a]}))}))},e}(),R=function(e,t,n){this.filled=e,this.filledGameOver=t,this.empty=n},_=function(e,t,n,i,r){void 0===t&&(t=!0),void 0===n&&(n=new R("#007400","#780000","#fff")),void 0===i&&(i=new R("#007400","#780000",null)),void 0===r&&(r=new R("#b8e5e3",null,null)),this.containerElement=e,this.renderProjectionFigures=t,this.matrixCellColors=n,this.fallingFigureCellColors=i,this.projectionFigureCellColors=r},q=function(e,t){this.filled=e,this.empty=t},j=function(){function n(e,n,i){this.renderSettings=e,this.commandBus=n,this.eventBus=i,this.cellsHtmlElementsMap=[],n.addHandler(t.InitGame,this.initHandler.bind(this)),n.addHandler(t.Render,this.renderCommandHandler.bind(this))}return n.prototype.initHandler=function(t){this.table=n.createHtmlElement('<div style="float: left; display: table; border-collapse: collapse"></div>'),this.cellsHtmlElementsMap=[];for(var i=0;i<t.gameData.settings.fieldHeight;i++){var r=n.createHtmlElement('<div style="display: table-row"></div>');this.cellsHtmlElementsMap[i]=[];for(var o=0;o<t.gameData.settings.fieldWidth;o++){var a=n.createHtmlElement('<div style="display: table-cell; border: 1px solid #ccc; width: 20px; height: 20px"></div>');this.cellsHtmlElementsMap[i][o]=a,r.appendChild(a)}this.table.appendChild(r)}this.renderSettings.containerElement.innerHTML="",this.renderSettings.containerElement.appendChild(this.table),this.scoreDisplay=n.createHtmlElement('<div style="float: left; font-family: \'Helvetica Neue\', sans-serif; font-size: 20px; margin-left: 15px;">\n                Level: <span id="level"></span><br>\n                Score: <span id="score"></span><br>\n                Combo: <span id="combo"></span><br>\n                Figures fallen: <span id="figures_fallen"></span><br>\n                Lines squashed: <span id="lines_squashed"></span><br>\n            </div>'),this.renderSettings.containerElement.appendChild(this.scoreDisplay),this.renderSettings.containerElement.appendChild(n.createHtmlElement('<div style="clear: both"></div>')),this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this)),this.eventBus.on(e.GameOver,this.onGameOver.bind(this)),this.eventBus.on(e.FiguresMoved,this.onFiguresMoved.bind(this))},n.prototype.onFiguresMoved=function(e){this.renderState(e.gameData)},n.prototype.onFallTickProcessed=function(e){this.renderState(e.gameData)},n.prototype.onGameOver=function(e){this.renderState(e.gameData)},n.prototype.renderCommandHandler=function(e){this.renderState(e.gameData)},n.prototype.renderState=function(e){this.repaintMatrixCells(e.matrix,new x(0,0),e),this.renderSettings.renderProjectionFigures&&this.renderFallingFiguresProjection(e),this.renderFallingFigures(e),this.renderStats(e)},n.prototype.renderFallingFigures=function(e){var t=this;e.fallingFigures.forEach((function(n){t.repaintFallingFiguresCells(n,e)}))},n.prototype.renderFallingFiguresProjection=function(e){var t=this;e.fallingFigures.forEach((function(n){for(var i=n.figure.getTurn(n.turnState),r=n.position.x,o=n.position.y;I.canFigureBePlaced(i,new x(r,o+1),e.matrix);)o++;t.repaintProjectionFiguresCells(i,new x(r,o),e)}))},n.prototype.repaintMatrixCells=function(e,t,n){var i;i=n.isGameOver?new q(this.renderSettings.matrixCellColors.filledGameOver,this.renderSettings.matrixCellColors.empty):new q(this.renderSettings.matrixCellColors.filled,this.renderSettings.matrixCellColors.empty),this.repaintCells(e,t,i)},n.prototype.repaintFallingFiguresCells=function(e,t){var n;n=t.isGameOver?new q(this.renderSettings.fallingFigureCellColors.filledGameOver,this.renderSettings.fallingFigureCellColors.empty):new q(e.color||this.renderSettings.fallingFigureCellColors.filled,this.renderSettings.fallingFigureCellColors.empty),this.repaintCells(e.figure.getTurn(e.turnState),e.position,n)},n.prototype.repaintProjectionFiguresCells=function(e,t,n){var i;i=n.isGameOver?new q(this.renderSettings.projectionFigureCellColors.filledGameOver,this.renderSettings.projectionFigureCellColors.empty):new q(this.renderSettings.projectionFigureCellColors.filled,this.renderSettings.projectionFigureCellColors.empty),this.repaintCells(e,t,i)},n.prototype.repaintCells=function(e,t,n){var i=this;e.forEach((function(e,r){e.forEach((function(e,o){var a=r+t.y,s=o+t.x;if(a in i.cellsHtmlElementsMap&&s in i.cellsHtmlElementsMap[a]){var u=e?n.filled:n.empty;null!==u&&(i.cellsHtmlElementsMap[a][s].style.background=u)}}))}))},n.prototype.renderStats=function(e){var t=document.getElementById("level"),n=document.getElementById("score"),i=document.getElementById("combo"),r=document.getElementById("figures_fallen"),o=document.getElementById("lines_squashed");null!==t&&(t.innerHTML=e.level.toString()),null!==n&&(n.innerHTML=e.score.toString()),null!==i&&(i.innerHTML=e.combo.toString()),null!==r&&(r.innerHTML=e.stats.figuresFallen.toString()),null!==o&&(o.innerHTML=e.stats.linesSquashed.toString())},n.createHtmlElement=function(e){var t=document.createElement("div");if(t.innerHTML=e,t.children.length>1||null===t.firstElementChild)throw"The HTML must contain only one child";if(!(t.firstElementChild instanceof HTMLElement))throw"Something went wrong while trying to get HTMLElement child from div";return t.firstElementChild},n}(),A=function(){this.transferredFigures=[],this.isGameOver=!1},N=function(){function e(e,n){this.commandBus=e,this.eventBus=n,this.commandBus.addHandler(t.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(t.FiguresFallDown,this.processDropFiguresCommand.bind(this))}return e.prototype.processFiguresFallTickCommand=function(e){var t=this.fallFiguresForOneCell(e.gameData),i=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new f(e.gameData)),this.eventBus.fire(new n(e.gameData,t.transferredFigures,i,0))},e.prototype.processDropFiguresCommand=function(e){for(var t,i=new A,r=0;e.gameData.fallingFigures.length>0;){var o=this.fallFiguresForOneCell(e.gameData);(t=i.transferredFigures).push.apply(t,o.transferredFigures),i.isGameOver=i.isGameOver||o.isGameOver,r++}var a=this.squashLines(e.gameData.matrix);i.isGameOver&&this.commandBus.run(new f(e.gameData)),this.eventBus.fire(new n(e.gameData,i.transferredFigures,a,r-1))},e.prototype.fallFiguresForOneCell=function(e){var t=this,n=new A;return e.fallingFigures.forEach((function(i,r){var o;if(t.figureCanFall(e.matrix,i))i.position.y++;else{var a=t.transferFigureToMatrix(e.matrix,i);(o=n.transferredFigures).push.apply(o,e.fallingFigures.splice(r,1)),n.isGameOver=n.isGameOver||a}})),n},e.prototype.figureCanFall=function(e,t){return I.canFigureBePlaced(t.figure.getTurn(t.turnState),new x(t.position.x,t.position.y+1),e)},e.prototype.transferFigureToMatrix=function(e,t){var n=!1;return t.figure.getTurn(t.turnState).forEach((function(i,r){i.forEach((function(i,o){if(i){var a=t.position.x+o,s=t.position.y+r;s in e&&a in e[s]&&!e[s][a]?e[s][a]=!0:n=!0}}))})),n},e.prototype.squashLines=function(e){var t=[];return e.forEach((function(e,n){e.every((function(e){return e}))&&t.push(n)}),0),t.forEach((function(t){e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t},e}(),z=function(){function e(){}return e.ToArray=function(e){return Object.keys(e).map((function(e){return Number.parseInt(e)})).filter((function(e){return!Number.isNaN(e)}))},e.GetRandom=function(t){var n=e.ToArray(t);return n[Math.floor(Math.random()*n.length)]},e}(),W=function(){function n(e,n){this.eventBus=e,this.commandBus=n,this.commandBus.addHandler(t.InitGame,this.initHandler.bind(this))}return n.prototype.initHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.processOnFallTick.bind(this))},n.prototype.processOnFallTick=function(e){this.addFigure(e.gameData)},n.prototype.addFigure=function(e){if(!(e.fallingFigures.length>0||e.isGameOver)){var t=Math.floor(Math.random()*e.settings.figures.length),n=e.settings.figures[t],i=z.GetRandom(u),r=n.getTurn(i),a=Math.max.apply(Math,r.map((function(e){return e.length}))),s=new x(Math.ceil(e.settings.fieldWidth/2-a/2)-1,-r.length),l=new G(n,s,i);e.fallingFigures.push(l),this.eventBus.fire(new o(e,[l]))}},n}(),U=function(){function e(e,n){this.commandBus=e,this.eventBus=n,this.commandBus.addHandler(t.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(t.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(t.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(t.TurnClockwise,this.processTurnClockwiseCommand.bind(this))}return e.prototype.processMoveLeftCommand=function(e){e.gameData.fallingFigures.forEach((function(t){I.canFigureBePlaced(t.figure.getTurn(t.turnState),new x(t.position.x-1,t.position.y),e.gameData.matrix)&&t.position.x--})),this.eventBus.fire(new r(e.gameData))},e.prototype.processMoveRightCommand=function(e){e.gameData.fallingFigures.forEach((function(t){I.canFigureBePlaced(t.figure.getTurn(t.turnState),new x(t.position.x+1,t.position.y),e.gameData.matrix)&&t.position.x++})),this.eventBus.fire(new r(e.gameData))},e.prototype.processTurnClockwiseCommand=function(e){var t=z.ToArray(u);e.gameData.fallingFigures.forEach((function(n){var i=n.turnState+1;i in t||(i=t[0]),I.canFigureBePlaced(n.figure.getTurn(i),n.position,e.gameData.matrix)&&(n.turnState=i)})),this.eventBus.fire(new r(e.gameData))},e.prototype.processMoveDownCommand=function(e){this.commandBus.run(new d(e.gameData))},e}(),Y=function(){function e(e){this.commandBus=e,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}return e.prototype.processInitGameCommand=function(e){var t=this;window.onkeydown=function(n){"ArrowLeft"===n.code?t.commandBus.run(new p(e.gameData)):"ArrowRight"===n.code?t.commandBus.run(new g(e.gameData)):"ArrowUp"===n.code?t.commandBus.run(new v(e.gameData)):"ArrowDown"===n.code||"ArrowDown"===n.code?t.commandBus.run(new y(e.gameData)):"Space"===n.code&&t.commandBus.run(new w(e.gameData))}},e}(),J=function(){function n(e,n,i,r){void 0===i&&(i=new Map([[1,100],[2,300],[3,500],[4,800]])),void 0===r&&(r=50),this.commandBus=e,this.eventBus=n,this.squashedRowsRewardThresholdsMap=i,this.rewardOnCombo=r,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))},n.prototype.onFallingTickProcessed=function(e){if(!(e.squashedLines.length<0)){var t=0;this.squashedRowsRewardThresholdsMap.forEach((function(n,i){i>e.squashedLines.length||(t=n)})),e.gameData.score+=t*e.gameData.level+this.rewardOnCombo*Math.max(0,e.gameData.combo-1)*e.gameData.level+2*e.droppedLines*e.gameData.level}},n}(),K=function(){function n(e,n,i,r){this.eventBus=e,this.commandBus=n,this.levelIncreaseOnSquashedRowsNumber=i,this.maxLevels=r,this.squashedRowsCounter=0,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}return n.prototype.processInitGameCommand=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.onFallTickProcessed=function(e){0!==e.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,e.gameData.level=Math.min(this.maxLevels,e.gameData.level+1)))},n}(),Q=function(){function n(e,n){this.commandBus=e,this.eventBus=n,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.onFallTickProcessed=function(e){e.transferredToMatrixFigures.length<=0||(e.squashedLines.length>0?e.gameData.combo+=1:e.gameData.combo=0)},n}(),V=function(){function e(e){this.delayMs=e}return e.prototype.getDelayForNextTickMs=function(e){return this.delayMs},e}(),X=function(){function n(e,n){this.commandBus=e,this.eventBus=n,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))},n.prototype.onFallingTickProcessed=function(e){e.gameData.stats.figuresFallen+=e.transferredToMatrixFigures.length,e.gameData.stats.linesSquashed+=e.squashedLines.length},n}(),Z=function(){function e(e,t,n,i,r,o,s,u,l,c,h,d,f){void 0===e&&(e=new a),void 0===t&&(t=new F),void 0===n&&(n=new L(new V(2e3),e,t)),void 0===i&&(i=new U(t,e)),void 0===r&&(r=new Y(t)),void 0===o&&(o=new N(t,e)),void 0===s&&(s=new W(e,t)),void 0===u&&(u=new K(e,t,8,15)),void 0===l&&(l=new Q(t,e)),void 0===c&&(c=new J(t,e)),void 0===h&&(h=new X(t,e)),void 0===d&&(d=new j(new _(document.body),t,e)),void 0===f&&(f=P.makeSimple()),this.eventBus=e,this.commandBus=t,this.gameController=n,this.movingHandler=i,this.movingController=r,this.fallingFiguresProcessor=o,this.figuresSpawner=s,this.levelCounter=u,this.comboCounter=l,this.scoreCounter=c,this.statsCounter=h,this.tableRenderer=d,this.gameData=f}return e.prototype.start=function(e){e=e||P.makeSimple(),this.commandBus.run(new l(e)),this.commandBus.run(new c(e))},e.prototype.resume=function(){this.commandBus.run(new c(this.gameData))},e.prototype.pause=function(){this.commandBus.run(new h(this.gameData))},e}(),$=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t}(Error)),te=function(){function e(e){this.commandBus=e}return e.prototype.resolveTargetPosition=function(e){var t=this;if(0===e.fallingFigures.length)return new Map;if(1!==e.fallingFigures.length)throw new ee;for(var n=e.fallingFigures[0],i=z.ToArray(u);i[0]!==n.turnState;)i.unshift(i.pop());var r=new Map;i.forEach((function(e){r.set(e,n.figure.getTurn(e))}));var o=-1/0,a=new G(n.figure,new x(n.position.x,n.position.y),n.turnState);if(r.forEach((function(n,i){for(var r=0;r<e.settings.fieldWidth-n[0].length+1;r++){var s=t.imagineFigureDrop(e.matrix,n,r),u=s[0],l=s[1],c=t.calculateScore(e,l);c>o&&(o=c,a.turnState=i,a.position.x=r,a.position.y=u)}})),"debugMode"in window&&window.debugMode){var s=structuredClone(e);a.color="#f00",s.fallingFigures=[a],this.commandBus.run(new m(s)),r.forEach((function(i,r){for(var o=0;o<e.settings.fieldWidth-i[0].length+1;o++){var a=t.imagineFigureDrop(e.matrix,i,o),s=a[0],u=a[1];t.calculateScore(e,u,!0,new G(n.figure,new x(o,s),r,"#00f"))}})),r.forEach((function(i,r){for(var o=0;o<e.settings.fieldWidth-i[0].length+1;o++){var a=t.imagineFigureDrop(e.matrix,i,o),s=a[0],u=a[1];t.calculateScore(e,u,!0,new G(n.figure,new x(o,s),r,"#00f"))}}))}return new Map([[n,a]])},e.prototype.calculateScore=function(e,t,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=void 0),n&&i){var r=structuredClone(e);r.fallingFigures=[i],this.commandBus.run(new m(r))}var o,a=e.settings.fieldHeight,s=e.settings.fieldWidth,u=5*this.squashLines(t),l=this.calculateHoles(e.matrix),c=this.calculateHolesAndCoveredHeight(t,e.matrix),h=c[0],d=c[1],f=l-h;o=0===d||0===h?f>0?150*f:70*f:(f>0?150*f:70*f)-d*Math.pow(d,d/(a*h))*5;var p=this.calculateHeight(t),g=-p*Math.pow(p,p/a)*3,v=this.calculateFillableSpace(t,s),y=v[0],w=0;v[1]>5&&(w=-y*Math.pow(y,y/(a*s)));var F,T=this.calculateTunnelsExceptUncovered(t,e.matrix),D=T[0],C=T[1],B=o+u+g+(F=0===C?0:70*-C-D*Math.pow(D,D/(a*C))*7)+w;return isNaN(B)&&console.log(t,o,u,g,F,w),B},e.prototype.squashLines=function(e){var t=[];return e.forEach((function(e,n){e.every((function(e){return e}))&&t.push(n)}),0),t.forEach((function(t){e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t.length},e.prototype.imagineFigureDrop=function(e,t,n){for(var i=e.map((function(e){return e.slice()})),r=-t.length;I.canFigureBePlaced(t,new x(n,r+1),e);)r++;return t.forEach((function(e,t){e.forEach((function(e,o){var a=r+t,s=n+o;a in i&&s in i[a]&&e&&(i[a][s]=!0)}))})),[r,i]},e.prototype.calculateHoles=function(e){var t=new Set,n=0;return e.forEach((function(e,i){e.forEach((function(e,i){e?t.add(i):t.has(i)&&n++}))})),n},e.prototype.calculateHolesAndCoveredHeight=function(e,t){var n=this.calculateTheHighestHoleCoveredY(t),i=n[0],r=n[1],o=new Map,a=0,s=0;return e.forEach((function(e,t){e.forEach((function(e,n){e&&!o.has(n)&&o.set(n,t);var u=o.get(n);void 0===u||e||(s++,void 0!==i&&void 0!==r&&(t<i?a+=t-u:u<r&&(a+=r-u)))}))})),[s,a]},e.prototype.calculateTheHighestHoleCoveredY=function(e){var t=void 0,n=void 0,i=new Map;return e.some((function(e,r){return e.some((function(e,o){e&&!i.has(o)&&i.set(o,r);var a=i.get(o);return void 0!==a&&!e&&(n=r,t=a,!0)}))})),[n,t]},e.prototype.calculateHeight=function(e){var t=-1;return e.every((function(e,n){return!!e.every((function(e){return!e}))&&(t=n,!0)})),e.length-t-1},e.prototype.calculateTunnelsExceptUncovered=function(e,t){var n=new Set;t.every((function(e){e.forEach((function(e,t){e&&n.add(t)}))}));var i=new Set,r=new Map,o=e[0].length;e.every((function(e,t){return e.forEach((function(e,t){e&&i.add(t)})),e.forEach((function(e,t){e||i.has(t)||n.has(t)||0!==t&&!i.has(t-1)||t!==o-1&&!i.has(t+1)||r.set(t,(r.get(t)||0)+1)})),i.size<o}));var a=0,s=0;return r.forEach((function(e){e>=3&&(a+=e,s++)})),[a,s]},e.prototype.calculateFillableSpace=function(e,t){var n=new Set,i=0,r=0;return e.every((function(e){return e.forEach((function(e,t){e&&n.add(t)})),e.forEach((function(e,t){!e&&n.size>0&&!n.has(t)&&i++})),n.size<t&&(n.size>0&&r++,!0)})),[i,r]},e}(),ne=function(){function e(e,t){void 0===t&&(t=.8),this.initialDelayMs=e,this.base=t}return e.prototype.getDelayForNextTickMs=function(e){return Math.pow(this.base-.007*(e.level-1),e.level-1)*this.initialDelayMs},e}(),ie=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ie(t,e),t}(Error),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ie(t,e),t}(re),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ie(t,e),t}(re),se=function(){function e(e,t){void 0===t&&(t=new ne(100,.9)),this.commandBus=e,this.timingsHandler=t,this.nextMoveTimeoutId=setTimeout((function(){})),this.targetFallingFiguresStates=new Map,this.gameData=P.makeSimple()}return e.prototype.place=function(e,t){this.gameData=e,this.targetFallingFiguresStates=t,clearTimeout(this.nextMoveTimeoutId),this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData))},e.prototype.processTick=function(){if(0!==this.gameData.fallingFigures.length){if(1!==this.gameData.fallingFigures.length)throw new oe;var e=this.gameData.fallingFigures[0],t=this.targetFallingFiguresStates.get(e);if(t){if(e.figure!==t.figure)throw new ae("Both of the original and the target falling figures must have the same figure in it.");if(e.turnState!=t.turnState)this.commandBus.run(new v(this.gameData));else{if(e.position.x==t.position.x)return void this.commandBus.run(new w(this.gameData));e.position.x>t.position.x?this.commandBus.run(new p(this.gameData)):this.commandBus.run(new g(this.gameData))}this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),0)}}},e}(),ue=function(){function n(e,n,i,r){void 0===i&&(i=new te(n)),void 0===r&&(r=new se(n)),this.eventBus=e,this.commandBus=n,this.fallingFigurePlacingResolver=i,this.fallingFiguresPlacer=r,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FiguresSpawned,this.onFiguresSpawned.bind(this))},n.prototype.onFiguresSpawned=function(e){var t=this.fallingFigurePlacingResolver.resolveTargetPosition(e.gameData);this.fallingFiguresPlacer.place(e.gameData,t)},n}();document.addEventListener("DOMContentLoaded",(function(){var e=new a,t=new F,n=new Z(e,t);new ue(e,t),n.start()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQ3JCLElBQU1zVixFQUE2Qm5WLEtBQUt3Viw2QkFBNkJ0RSxzQkFBc0JyUixFQUFNYixVQUNqR2dCLEtBQUt5VixxQkFBcUJMLE1BQU12VixFQUFNYixTQUFVbVcsRUFDcEQsRUFDSixFQWxCQSxHQ0FBL0ssU0FBU3lMLGlCQUFpQixvQkFBb0IsV0FDMUMsSUFBTTNQLEVBQVcsSUFBSTRKLEVBQ2YzSixFQUFhLElBQUk0SixFQUNuQitGLEVBQVMsSUFBSUMsRUFBYTdQLEVBQVVDLEdBQzNCLElBQUk2UCxHQUFhOVAsRUFBVUMsR0FFeEMyUCxFQUFPbEYsT0FDWCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9FdmVudEJ1cy9FdmVudEJ1cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZpZ3VyZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Db21tb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9HYW1lQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvUmVuZGVyZXIvVGFibGVSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yL1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3Nvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1V0aWxzL0VudW1IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9GaWd1cmVzU3Bhd25lci9BbHdheXNPbmVGaWd1cmVTcGF3bmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvTW92aW5nSGFuZGxlci9Nb3ZpbmdIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvTW92aW5nQ29udHJvbGxlci9Nb3ZpbmdDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvU2NvcmVDb3VudGVyL0ZhbGxUaWNrU2NvcmVDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvTGV2ZWxDb3VudGVyL1NxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbWJvQ291bnRlci9Db21ib0NvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9UaW1pbmdzSGFuZGxlci9Db25zdFRpbWluZ3NIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvU3RhdHNDb3VudGVyL1N0YXRzQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RldHJpc0ZhY2FkZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGVudW0gRXZlbnRUeXBlIHtcbiAgICBGYWxsaW5nVGlja1Byb2Nlc3NlZCxcbiAgICBHYW1lT3ZlcixcbiAgICBGaWd1cmVzTW92ZWQsXG4gICAgTGV2ZWxVcCxcbiAgICBGaWd1cmVzU3Bhd25lZCxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudCB7XG4gICAgZ2FtZURhdGE6IEdhbWVEYXRhO1xuXG4gICAgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZTtcbn1cblxuZXhwb3J0IGNsYXNzIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIHB1YmxpYyB0cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdLFxuICAgICAgICBwdWJsaWMgc3F1YXNoZWRMaW5lczogbnVtYmVyW10sXG4gICAgICAgIHB1YmxpYyBkcm9wcGVkTGluZXM6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZU92ZXJFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuR2FtZU92ZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc01vdmVkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZpZ3VyZXNNb3ZlZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMZXZlbFVwRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkxldmVsVXA7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc1NwYXduZWRFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIG5ld0ZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuRmlndXJlc1NwYXduZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRXZlbnRCdXMge1xuICAgIHByaXZhdGUgaGFuZGxlcnM6IE1hcDxFdmVudFR5cGUsICgoLi4uXzogYW55KSA9PiB2b2lkKVtdPiA9IG5ldyBNYXAoKTtcblxuICAgIHB1YmxpYyBvbihldmVudDogRXZlbnRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb2ZmKGV2ZW50OiBFdmVudFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZmlyZShldmVudFBheWxvYWQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50UGF5bG9hZC5nZXRFdmVudFR5cGUoKSkgfHwgW107XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7aGFuZGxlcihldmVudFBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgZW51bSBDb21tYW5kVHlwZSB7XG4gICAgSW5pdEdhbWUsXG4gICAgUmVzdW1lR2FtZSxcbiAgICBQYXVzZUdhbWUsXG4gICAgRmlndXJlc0ZhbGxUaWNrLFxuICAgIEdhbWVPdmVyLFxuICAgIFJlbmRlcixcbiAgICBNb3ZlTGVmdCxcbiAgICBNb3ZlUmlnaHQsXG4gICAgVHVybkNsb2Nrd2lzZSxcbiAgICBNb3ZlRG93bixcbiAgICBGaWd1cmVzRmFsbERvd24sXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZCB7XG4gICAgZ2FtZURhdGE6IEdhbWVEYXRhO1xuXG4gICAgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGU7XG59XG5cbmV4cG9ydCBjbGFzcyBJbml0R2FtZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuSW5pdEdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVzdW1lR2FtZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUmVzdW1lR2FtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQYXVzZUdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlBhdXNlR2FtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVzRmFsbFRpY2tDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsVGljaztcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lT3ZlckNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuR2FtZU92ZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVuZGVyQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5SZW5kZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZUxlZnRDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVMZWZ0O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVSaWdodENvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZVJpZ2h0O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFR1cm5DbG9ja3dpc2VDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlR1cm5DbG9ja3dpc2U7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZURvd25Db21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVEb3duO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERyb3BGaWd1cmVzQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJ1cyB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPENvbW1hbmRUeXBlLCAoKHBheWxvYWQ6IENvbW1hbmQpID0+IHZvaWQpW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIGFkZEhhbmRsZXIoZXZlbnQ6IENvbW1hbmRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSGFuZGxlcihldmVudDogQ29tbWFuZFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuKHBheWxvYWQ6IENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQocGF5bG9hZC5nZXRDb21tYW5kVHlwZSgpKSB8fCBbXTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtoYW5kbGVyKHBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gRmlndXJlVHVyblN0YXRlIHtcbiAgICBPbmUsXG4gICAgVHdvLFxuICAgIFRocmVlLFxuICAgIEZvdXIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlndXJlIHtcbiAgICAvKipcbiAgICAgKiBBbnkgZmlndXJlIG11c3QgYmUgYWJsZSB0byB0dXJuIDQgdGltZXMgaW4gMiBkaW1lbnNpb25zLlxuICAgICAqIEFsbCB0dXJucyBhcmUgY2xvY2t3aXNlLlxuICAgICAqL1xuICAgIGdldFR1cm4oZmlndXJlVHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUpOiBib29sZWFuW11bXTtcbiAgICBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RGaWd1cmUgaW1wbGVtZW50cyBGaWd1cmV7XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW107XG5cbiAgICBnZXRUdXJuKGZpZ3VyZVR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBzd2l0Y2ggKGZpZ3VyZVR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuT25lOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuVHdvOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKTtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLlRocmVlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRoaXJkVHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuRm91cjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3J0aFR1cm4oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdpdmVzIGFuIGVhc3kgd2F5IHRvIGRlZmluZSBmaWd1cmVzIGZvciB0ZXRyaXMuXG4gKiBKdXN0IGltcGxlbWVudCB0aGUgZ2V0RmlndXJlIG1ldGhvZCBhbmQgcmV0dXJuIGZpZ3VyZSBsaWtlIHRoaXM6XG4gKiBgYGAodHMpXG4gKiBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAqICAgICByZXR1cm4gW1xuICogICAgICAgICBbdHJ1ZSwgIHRydWUsIHRydWVdLFxuICogICAgICAgICBbZmFsc2UsIHRydWUsIGZhbHNlXSxcbiAqICAgICAgICAgW3RydWUsICB0cnVlLCB0cnVlXSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKlxuICogT3IgZGVmaW5lIGl0IGxpa2UgdGhpcyBmb3IgbW9yZSB2aXN1YWwgcHJlc2VudGF0aW9uOlxuICogYGBgKHRzKVxuICogcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gKiAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgICAgIFwiLSMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUgZXh0ZW5kcyBBYnN0cmFjdEZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldEZpZ3VyZSgpOiBib29sZWFuW11bXTtcblxuICAgIHByaXZhdGUgZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIGxldCBmaWd1cmUgPSB0aGlzLmdldEZpZ3VyZSgpO1xuICAgICAgICBsZXQgdGhlTG9uZ2VzdFJvd1NpemUgPSBmaWd1cmUucmVkdWNlKFxuICAgICAgICAgICAgKHByZXZpb3VzLCBjdXJyZW50KSA9PiBNYXRoLm1heChwcmV2aW91cywgY3VycmVudC5sZW5ndGgpLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmlndXJlLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsTGVuZ3RoID0gcm93Lmxlbmd0aDtcbiAgICAgICAgICAgIHJvdy5sZW5ndGggPSB0aGVMb25nZXN0Um93U2l6ZTtcbiAgICAgICAgICAgIHJldHVybiByb3cuZmlsbChmYWxzZSwgb3JpZ2luYWxMZW5ndGggLSAxLCB0aGVMb25nZXN0Um93U2l6ZSAtIDEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlID0gdGhpcy5nZXROb3JtYWxpemVkRmlndXJlKCk7XG4gICAgICAgIGxldCB0dXJuZWRGaWd1cmU6IGJvb2xlYW5bXVtdID0gW107XG4gICAgICAgIGxldCBvcmlnaW5hbEZpZ3VyZUhlaWdodCA9IG9yaWdpbmFsRmlndXJlLmxlbmd0aDtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlV2lkdGggPSBvcmlnaW5hbEZpZ3VyZVswXS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgb3JpZ2luYWxGaWd1cmVXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICB0dXJuZWRGaWd1cmVbeF0gPSBuZXcgQXJyYXkob3JpZ2luYWxGaWd1cmVIZWlnaHQpLmZpbGwoZmFsc2UpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBvcmlnaW5hbEZpZ3VyZUhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdHVybmVkRmlndXJlW3hdW29yaWdpbmFsRmlndXJlSGVpZ2h0IC0geSAtIDFdID0gb3JpZ2luYWxGaWd1cmVbeV1beF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR1cm5lZEZpZ3VyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RUdXJuKCkucmV2ZXJzZSgpLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKS5yZXZlcnNlKCkubWFwKHJvdyA9PiByb3cucmV2ZXJzZSgpKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBURmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmlnaHRMRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItLSNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGVmdExGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIiMtLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTcXVhcmVGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RpY2tGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExaRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBSWkZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIi0jI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RmlndXJlLCBGaWd1cmVUdXJuU3RhdGUsIExlZnRMRmlndXJlLCBMWkZpZ3VyZSwgUmlnaHRMRmlndXJlLCBSWkZpZ3VyZSwgU3F1YXJlRmlndXJlLCBTdGlja0ZpZ3VyZSwgVEZpZ3VyZX0gZnJvbSBcIi4vRmlndXJlc1wiO1xuXG4vKipcbiAqIHggZm9yIGhvcml6b250YWwgcG9zaXRpb25pbmdcbiAqIHkgZm9yIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBDb29yZGluYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHg6IG51bWJlcixcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsaW5nRmlndXJlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZ3VyZTogRmlndXJlLFxuICAgICAgICBwdWJsaWMgcG9zaXRpb246IENvb3JkaW5hdGUsXG4gICAgICAgIHB1YmxpYyB0dXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHVibGljIGNvbG9yOiBzdHJpbmd8dW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWVsZFdpZHRoOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBmaWVsZEhlaWdodDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgZmlndXJlczogRmlndXJlW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgU3RhdHMge1xuICAgIHB1YmxpYyBmaWd1cmVzRmFsbGVuID0gMDtcbiAgICBwdWJsaWMgbGluZXNTcXVhc2hlZCA9IDA7XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lRGF0YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBpc0dhbWVPdmVyOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBmYWxsaW5nRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBtYXRyaXg6IGJvb2xlYW5bXVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBuZXh0VGlja1RpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgfSksXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nczogR2FtZVNldHRpbmdzLFxuICAgICAgICBwdWJsaWMgbGV2ZWw6IG51bWJlciA9IDEsXG4gICAgICAgIHB1YmxpYyBzY29yZTogbnVtYmVyID0gMCxcbiAgICAgICAgcHVibGljIGNvbWJvOiBudW1iZXIgPSAwLFxuICAgICAgICBwdWJsaWMgc3RhdHM6IFN0YXRzID0gbmV3IFN0YXRzKCksXG4gICAgKSB7fVxuXG4gICAgc3RhdGljIG1ha2VTaW1wbGUod2lkdGg6IG51bWJlciA9IDEwLCBoZWlnaHQ6IG51bWJlciA9IDIwKTogR2FtZURhdGEge1xuICAgICAgICByZXR1cm4gbmV3IEdhbWVEYXRhKFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgbmV3IEFycmF5KGhlaWdodCkuZmlsbChbXSlcbiAgICAgICAgICAgICAgICAubWFwKF8gPT4gbmV3IEFycmF5KHdpZHRoKS5maWxsKGZhbHNlKSksXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IEdhbWVTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmlnaHRMRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBMZWZ0TEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgU3F1YXJlRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTdGlja0ZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgTFpGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJaRmlndXJlKCksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc01vdmVkRXZlbnQsIEdhbWVPdmVyRXZlbnR9IGZyb20gXCIuL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlbmRlckNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgR2FtZUNvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgZ2FtZURhdGE6IEdhbWVEYXRhID0gR2FtZURhdGEubWFrZVNpbXBsZSgpO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBwcml2YXRlIHRpbWluZ3NIYW5kbGVyOiBUaW1pbmdzSGFuZGxlcixcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5SZXN1bWVHYW1lLCB0aGlzLnJlc3VtZUdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5QYXVzZUdhbWUsIHRoaXMucGF1c2VHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuR2FtZU92ZXIsIHRoaXMuZ2FtZU92ZXJIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gY29tbWFuZC5nYW1lRGF0YTtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc3VtZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFJlc3VtZUdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhbGxUaWNrKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXVzZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFBhdXNlR2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGNvbW1hbmQuZ2FtZURhdGE7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnYW1lT3ZlckhhbmRsZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgR2FtZU92ZXJFdmVudCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmYWxsVGljaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgIHRoaXMuZmFsbFRpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ0NoZWNrZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgY2FuRmlndXJlQmVQbGFjZWQodGFyZ2V0RmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0UG9zaXRpb246IENvb3JkaW5hdGUsIG1hdHJpeDogYm9vbGVhbltdW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldEZpZ3VyZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcm93LmV2ZXJ5KCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0gdGFyZ2V0UG9zaXRpb24ueSArIHk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRQb3NpdGlvbi54ICsgeDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXZhbHVlXG4gICAgICAgICAgICAgICAgICAgIHx8IChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxZIDwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPj0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPD0gbWF0cml4WzBdLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgKSB8fCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsWSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIG1hdHJpeFtyZWFsWV1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFtYXRyaXhbcmVhbFldW3JlYWxYXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZCwgUmVuZGVyQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50LCBHYW1lT3ZlckV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGxlZDogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBmaWxsZWRHYW1lT3Zlcjogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBlbXB0eTogc3RyaW5nfG51bGwsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlclNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBwdWJsaWMgcmVuZGVyUHJvamVjdGlvbkZpZ3VyZXM6IGJvb2xlYW4gPSB0cnVlLFxuICAgICAgICBwdWJsaWMgbWF0cml4Q2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjMDA3NDAwJyxcbiAgICAgICAgICAgICcjNzgwMDAwJyxcbiAgICAgICAgICAgICcjZmZmJyxcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIGZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyMwMDc0MDAnLFxuICAgICAgICAgICAgJyM3ODAwMDAnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIHByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyNiOGU1ZTMnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICksXG4gICAgKSB7fVxufVxuXG5jbGFzcyBDZWxsQ29sb3JzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGxlZDogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBlbXB0eTogc3RyaW5nfG51bGwsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlciB7XG4gICAgcHJpdmF0ZSBjZWxsc0h0bWxFbGVtZW50c01hcDogSFRNTEVsZW1lbnRbXVtdID0gW107XG4gICAgcHJpdmF0ZSB0YWJsZTogSFRNTEVsZW1lbnR8dW5kZWZpbmVkO1xuICAgIHByaXZhdGUgc2NvcmVEaXNwbGF5OiBIVE1MRWxlbWVudHx1bmRlZmluZWQ7XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHByaXZhdGUgcmVuZGVyU2V0dGluZ3M6IFRhYmxlUmVuZGVyZXJTZXR0aW5ncyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUmVuZGVyLCB0aGlzLnJlbmRlckNvbW1hbmRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMudGFibGUgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZmxvYXQ6IGxlZnQ7IGRpc3BsYXk6IHRhYmxlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlXCI+PC9kaXY+Jyk7XG4gICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXAgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIGxldCByb3cgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtcm93XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3ldID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNvbW1hbmQuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNlbGwgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtY2VsbDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgd2lkdGg6IDIwcHg7IGhlaWdodDogMjBweFwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbeV1beF0gPSBjZWxsO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlKTtcblxuICAgICAgICB0aGlzLnNjb3JlRGlzcGxheSA9IFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoXG4gICAgICAgICAgICBgPGRpdiBzdHlsZT1cImZsb2F0OiBsZWZ0OyBmb250LWZhbWlseTogJ0hlbHZldGljYSBOZXVlJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAyMHB4OyBtYXJnaW4tbGVmdDogMTVweDtcIj5cbiAgICAgICAgICAgICAgICBMZXZlbDogPHNwYW4gaWQ9XCJsZXZlbFwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgU2NvcmU6IDxzcGFuIGlkPVwic2NvcmVcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIENvbWJvOiA8c3BhbiBpZD1cImNvbWJvXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBGaWd1cmVzIGZhbGxlbjogPHNwYW4gaWQ9XCJmaWd1cmVzX2ZhbGxlblwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgTGluZXMgc3F1YXNoZWQ6IDxzcGFuIGlkPVwibGluZXNfc3F1YXNoZWRcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgPC9kaXY+YCk7XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNjb3JlRGlzcGxheSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoJzxkaXYgc3R5bGU9XCJjbGVhcjogYm90aFwiPjwvZGl2PicpKTtcblxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5HYW1lT3ZlciwgdGhpcy5vbkdhbWVPdmVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GaWd1cmVzTW92ZWQsIHRoaXMub25GaWd1cmVzTW92ZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZpZ3VyZXNNb3ZlZChjb21tYW5kOiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGNvbW1hbmQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uR2FtZU92ZXIoY29tbWFuZDogR2FtZU92ZXJFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQ29tbWFuZEhhbmRsZXIoY29tbWFuZDogUmVuZGVyQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyU3RhdGUoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwYWludE1hdHJpeENlbGxzKGdhbWVEYXRhLm1hdHJpeCwgbmV3IENvb3JkaW5hdGUoMCwgMCksIGdhbWVEYXRhKTtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyU2V0dGluZ3MucmVuZGVyUHJvamVjdGlvbkZpZ3VyZXMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmFsbGluZ0ZpZ3VyZXNQcm9qZWN0aW9uKGdhbWVEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlckZhbGxpbmdGaWd1cmVzKGdhbWVEYXRhKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0cyhnYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJGYWxsaW5nRmlndXJlcyhnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMoZmFsbGluZ0ZpZ3VyZSwgZ2FtZURhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbihnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdGlvbkZpZ3VyZVggPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBsZXQgcHJvamVjdGlvbkZpZ3VyZVkgPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnk7XG4gICAgICAgICAgICB3aGlsZShGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSArIDEpLCBnYW1lRGF0YS5tYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbkZpZ3VyZVkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMoXG4gICAgICAgICAgICAgICAgZmlndXJlTWF0cml4LFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSksXG4gICAgICAgICAgICAgICAgZ2FtZURhdGFcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludE1hdHJpeENlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZmlsbGVkR2FtZU92ZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhtYXRyaXgsIGluZGVudCwgY29sb3JzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRGYWxsaW5nRmlndXJlc0NlbGxzKGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUsIGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBsZXQgY29sb3JzOiBDZWxsQ29sb3JzO1xuICAgICAgICBpZiAoZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWRHYW1lT3ZlcixcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUuY29sb3IgfHwgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMoXG4gICAgICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUucG9zaXRpb24sXG4gICAgICAgICAgICBjb2xvcnNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRQcm9qZWN0aW9uRmlndXJlc0NlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmZpbGxlZEdhbWVPdmVyLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMobWF0cml4LCBpbmRlbnQsIGNvbG9ycyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50Q2VsbHMobWF0cml4OiBib29sZWFuW11bXSwgaW5kZW50OiBDb29yZGluYXRlLCBjZWxsQ29sb3JzOiBDZWxsQ29sb3JzKTogdm9pZCB7XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0geSArIGluZGVudC55O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxYID0geCArIGluZGVudC54O1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwXG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbcmVhbFldXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdmFsdWUgPyBjZWxsQ29sb3JzLmZpbGxlZCA6IGNlbGxDb2xvcnMuZW1wdHk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFtyZWFsWV1bcmVhbFhdLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclN0YXRzKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBjb25zdCBsZXZlbFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGV2ZWwnKTtcbiAgICAgICAgY29uc3Qgc2NvcmVTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7XG4gICAgICAgIGNvbnN0IGNvbWJvU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21ibycpO1xuICAgICAgICBjb25zdCBmaWd1cmVzRmFsbGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZ3VyZXNfZmFsbGVuJyk7XG4gICAgICAgIGNvbnN0IGxpbmVzU3F1YXNoZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZXNfc3F1YXNoZWQnKTtcbiAgICAgICAgaWYgKGxldmVsU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV2ZWxTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmxldmVsLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjb3JlU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2NvcmVTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLnNjb3JlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbWJvU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29tYm9TcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmNvbWJvLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZ3VyZXNGYWxsZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZpZ3VyZXNGYWxsZW4uaW5uZXJIVE1MID0gZ2FtZURhdGEuc3RhdHMuZmlndXJlc0ZhbGxlbi50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaW5lc1NxdWFzaGVkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsaW5lc1NxdWFzaGVkLmlubmVySFRNTCA9IGdhbWVEYXRhLnN0YXRzLmxpbmVzU3F1YXNoZWQudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZUh0bWxFbGVtZW50KGh0bWw6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPiAxIHx8IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgJ1RoZSBIVE1MIG11c3QgY29udGFpbiBvbmx5IG9uZSBjaGlsZCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyAnU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgdHJ5aW5nIHRvIGdldCBIVE1MRWxlbWVudCBjaGlsZCBmcm9tIGRpdic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0Ryb3BGaWd1cmVzQ29tbWFuZCwgQ29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEdhbWVPdmVyQ29tbWFuZCwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcblxuY2xhc3MgRmFsbGluZ1Jlc3VsdCB7XG4gICAgcHVibGljIHRyYW5zZmVycmVkRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW107XG4gICAgcHVibGljIGlzR2FtZU92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbn1cblxuZXhwb3J0IGNsYXNzIFJlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsVGljaywgdGhpcy5wcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxEb3duLCB0aGlzLnByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZChjb21tYW5kOiBGaWd1cmVzRmFsbFRpY2tDb21tYW5kKSB7XG4gICAgICAgIGNvbnN0IGZhbGxpbmdSZXN1bHQgPSB0aGlzLmZhbGxGaWd1cmVzRm9yT25lQ2VsbChjb21tYW5kLmdhbWVEYXRhKTtcbiAgICAgICAgbGV0IHNxdWFzaGVkTGluZXMgPSB0aGlzLnNxdWFzaExpbmVzKGNvbW1hbmQuZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgaWYgKGZhbGxpbmdSZXN1bHQuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgR2FtZU92ZXJDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQoXG4gICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLFxuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMsXG4gICAgICAgICAgICBzcXVhc2hlZExpbmVzLFxuICAgICAgICAgICAgMFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQoY29tbWFuZDogRHJvcEZpZ3VyZXNDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGxldCBmYWxsaW5nUmVzdWx0ID0gbmV3IEZhbGxpbmdSZXN1bHQoKTtcbiAgICAgICAgbGV0IGRyb3BwZWRMaW5lcyA9IDA7XG4gICAgICAgIHdoaWxlIChjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG9uZUNlbGxGYWxsaW5nUmVzdWx0ID0gdGhpcy5mYWxsRmlndXJlc0Zvck9uZUNlbGwoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcy5wdXNoKC4uLm9uZUNlbGxGYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyk7XG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgPSBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgfHwgb25lQ2VsbEZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlcjtcbiAgICAgICAgICAgIGRyb3BwZWRMaW5lcysrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzcXVhc2hlZExpbmVzID0gdGhpcy5zcXVhc2hMaW5lcyhjb21tYW5kLmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGlmIChmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEdhbWVPdmVyQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KFxuICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YSxcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLFxuICAgICAgICAgICAgc3F1YXNoZWRMaW5lcyxcbiAgICAgICAgICAgIGRyb3BwZWRMaW5lcyAtIDEsXG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGdhbWVEYXRhOiBHYW1lRGF0YSk6IEZhbGxpbmdSZXN1bHQge1xuICAgICAgICBsZXQgZmFsbGluZ1Jlc3VsdCA9IG5ldyBGYWxsaW5nUmVzdWx0KCk7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goKGZhbGxpbmdGaWd1cmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWd1cmVDYW5GYWxsKGdhbWVEYXRhLm1hdHJpeCwgZmFsbGluZ0ZpZ3VyZSkpIHtcbiAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnkrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpZ3VyZUdhbWVPdmVyUmVzdWx0ID0gdGhpcy50cmFuc2ZlckZpZ3VyZVRvTWF0cml4KFxuICAgICAgICAgICAgICAgICAgICBnYW1lRGF0YS5tYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLnB1c2goLi4uZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuc3BsaWNlKGluZGV4LCAxKSk7XG4gICAgICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyID0gZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyIHx8IGZpZ3VyZUdhbWVPdmVyUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbGxpbmdSZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWd1cmVDYW5GYWxsKG1hdHJpeDogYm9vbGVhbltdW10sIGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmYWxsaW5nRmlndXJlLnBvc2l0aW9uLngsIGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSArIDEpLFxuICAgICAgICAgICAgbWF0cml4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFuc2ZlckZpZ3VyZVRvTWF0cml4KG1hdHJpeDogYm9vbGVhbltdW10sIGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGlzR2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChyb3csIGZpZ3VyZUNlbGxZKSA9PiB7XG4gICAgICAgICAgICAgICAgcm93LmZvckVhY2goKGNlbGxWYWx1ZSwgZmlndXJlQ2VsbFgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cml4WCA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueCArIGZpZ3VyZUNlbGxYO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cml4WSA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSArIGZpZ3VyZUNlbGxZO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0cml4WSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIG1hdHJpeFggaW4gbWF0cml4W21hdHJpeFldXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhbWF0cml4W21hdHJpeFldW21hdHJpeFhdXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W21hdHJpeFldW21hdHJpeFhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlzR2FtZU92ZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcXVhc2hMaW5lcyhtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyW10ge1xuICAgICAgICBsZXQgbGluZXNUb1NxdWFzaDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbkJlU3F1YXNoZWQgPSByb3cuZXZlcnkoY2VsbCA9PiBjZWxsKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVNxdWFzaGVkKSB7XG4gICAgICAgICAgICAgICAgbGluZXNUb1NxdWFzaC5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGluZXNUb1NxdWFzaC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgICAgbWF0cml4LnNwbGljZSh5LCAxKTtcbiAgICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KG5ldyBBcnJheShtYXRyaXhbMF0ubGVuZ3RoKS5maWxsKGZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZXNUb1NxdWFzaDtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRW51bUhlbHBlciB7XG4gICAgcHVibGljIHN0YXRpYyBUb0FycmF5KHZhbDogYW55KTogdHlwZW9mIHZhbFtdIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbClcbiAgICAgICAgICAgIC5tYXAobiA9PiBOdW1iZXIucGFyc2VJbnQobikpXG4gICAgICAgICAgICAuZmlsdGVyKG4gPT4gIU51bWJlci5pc05hTihuKSkgYXMgdW5rbm93biBhcyB0eXBlb2YgdmFsW107XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBHZXRSYW5kb20odmFsOiBhbnkpOiB0eXBlb2YgdmFsIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gRW51bUhlbHBlci5Ub0FycmF5KHZhbCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiB2YWx1ZXNbcmFuZG9tSW5kZXhdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc1NwYXduZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFbnVtSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvRW51bUhlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgQWx3YXlzT25lRmlndXJlU3Bhd25lciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEhhbmRsZXIoZXZlbnQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKFxuICAgICAgICAgICAgRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLFxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzT25GYWxsVGljay5iaW5kKHRoaXMpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc09uRmFsbFRpY2soZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hZGRGaWd1cmUoZXZlbnQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkRmlndXJlKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID4gMCB8fCBnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWd1cmVJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdhbWVEYXRhLnNldHRpbmdzLmZpZ3VyZXMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgZmlndXJlID0gZ2FtZURhdGEuc2V0dGluZ3MuZmlndXJlc1tmaWd1cmVJbmRleF07XG4gICAgICAgIGNvbnN0IHR1cm5TdGF0ZSA9IEVudW1IZWxwZXIuR2V0UmFuZG9tKEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZpZ3VyZS5nZXRUdXJuKHR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZVdpZHRoID0gTWF0aC5tYXgoLi4uZmlndXJlTWF0cml4Lm1hcChyb3cgPT4gcm93Lmxlbmd0aCkpO1xuICAgICAgICBjb25zdCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoXG4gICAgICAgICAgICBNYXRoLmNlaWwoZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aCAvIDIgLSBmaWd1cmVXaWR0aCAvIDIpIC0gMSxcbiAgICAgICAgICAgIC1maWd1cmVNYXRyaXgubGVuZ3RoLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmYWxsaW5nRmlndXJlID0gbmV3IEZhbGxpbmdGaWd1cmUoXG4gICAgICAgICAgICBmaWd1cmUsXG4gICAgICAgICAgICBjb29yZGluYXRlLFxuICAgICAgICAgICAgdHVyblN0YXRlXG4gICAgICAgICk7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLnB1c2goZmFsbGluZ0ZpZ3VyZSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc1NwYXduZWRFdmVudChnYW1lRGF0YSwgW2ZhbGxpbmdGaWd1cmVdKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgTW92ZUxlZnRDb21tYW5kLCBNb3ZlUmlnaHRDb21tYW5kLCBUdXJuQ2xvY2t3aXNlQ29tbWFuZCwgTW92ZURvd25Db21tYW5kLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEZpZ3VyZXNNb3ZlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9VdGlscy9FbnVtSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZpbmdIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZUxlZnQsIHRoaXMucHJvY2Vzc01vdmVMZWZ0Q29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZVJpZ2h0LCB0aGlzLnByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlRG93biwgdGhpcy5wcm9jZXNzTW92ZURvd25Db21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlLCB0aGlzLnByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlTGVmdENvbW1hbmQoY29tbWFuZDogTW92ZUxlZnRDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FuQmVNb3ZlZExlZnQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4oZmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmlndXJlLnBvc2l0aW9uLnggLSAxLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVNb3ZlZExlZnQpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24ueC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzTW92ZVJpZ2h0Q29tbWFuZChjb21tYW5kOiBNb3ZlUmlnaHRDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FuQmVNb3ZlZFJpZ2h0ID0gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZpZ3VyZS5wb3NpdGlvbi54ICsgMSwgZmlndXJlLnBvc2l0aW9uLnkpLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlTW92ZWRSaWdodCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbi54Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZChjb21tYW5kOiBUdXJuQ2xvY2t3aXNlQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBjb25zdCBhbGxUdXJuU3RhdGVzID0gRW51bUhlbHBlci5Ub0FycmF5KEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgbGV0IG5leHRUdXJuU3RhdGUgPSBmaWd1cmUudHVyblN0YXRlICsgMTtcbiAgICAgICAgICAgIGlmICghKG5leHRUdXJuU3RhdGUgaW4gYWxsVHVyblN0YXRlcykpIHtcbiAgICAgICAgICAgICAgICBuZXh0VHVyblN0YXRlID0gYWxsVHVyblN0YXRlc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhbkJlVHVybmVkID0gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKG5leHRUdXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVR1cm5lZCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS50dXJuU3RhdGUgPSBuZXh0VHVyblN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzTW92ZURvd25Db21tYW5kKGNvbW1hbmQ6IE1vdmVEb3duQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBGaWd1cmVzRmFsbFRpY2tDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBEcm9wRmlndXJlc0NvbW1hbmQsIEluaXRHYW1lQ29tbWFuZCwgTW92ZUxlZnRDb21tYW5kLCBNb3ZlUmlnaHRDb21tYW5kLCBUdXJuQ2xvY2t3aXNlQ29tbWFuZCwgTW92ZURvd25Db21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZpbmdDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLnByb2Nlc3NJbml0R2FtZUNvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB3aW5kb3cub25rZXlkb3duID0gZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZUxlZnRDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVJpZ2h0Q29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFR1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlRG93bkNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVEb3duQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdTcGFjZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBEcm9wRmlndXJlc0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIEZhbGxUaWNrU2NvcmVDb3VudGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBzcXVhc2hlZFJvd3NSZXdhcmRUaHJlc2hvbGRzTWFwOiBNYXA8bnVtYmVyLCBudW1iZXI+ID0gbmV3IE1hcChbXG4gICAgICAgICAgICBbMSwgMTAwXSxcbiAgICAgICAgICAgIFsyLCAzMDBdLFxuICAgICAgICAgICAgWzMsIDUwMF0sXG4gICAgICAgICAgICBbNCwgODAwXSxcbiAgICAgICAgXSksXG4gICAgICAgIHByaXZhdGUgcmV3YXJkT25Db21ibyA9IDUwLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxpbmdUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsaW5nVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBsZXQgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgPSAwO1xuICAgICAgICB0aGlzLnNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXAuZm9yRWFjaCgocmV3YXJkLCByb3dzU3F1YXNoZWRUaHJlc2hvbGQpID0+IHtcbiAgICAgICAgICAgIGlmIChyb3dzU3F1YXNoZWRUaHJlc2hvbGQgPiBldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZpb3VzVGhyZXNob2xkUmV3YXJkID0gcmV3YXJkO1xuICAgICAgICB9KTtcbiAgICAgICAgZXZlbnQuZ2FtZURhdGEuc2NvcmUgKz1cbiAgICAgICAgICAgIHByZXZpb3VzVGhyZXNob2xkUmV3YXJkICogZXZlbnQuZ2FtZURhdGEubGV2ZWxcbiAgICAgICAgICAgICsgdGhpcy5yZXdhcmRPbkNvbWJvICogTWF0aC5tYXgoMCwgZXZlbnQuZ2FtZURhdGEuY29tYm8gLSAxKSAqIGV2ZW50LmdhbWVEYXRhLmxldmVsXG4gICAgICAgICAgICArIGV2ZW50LmRyb3BwZWRMaW5lcyAqIDIgKiBldmVudC5nYW1lRGF0YS5sZXZlbDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIge1xuICAgIHByaXZhdGUgc3F1YXNoZWRSb3dzQ291bnRlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBsZXZlbEluY3JlYXNlT25TcXVhc2hlZFJvd3NOdW1iZXI6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBtYXhMZXZlbHM6IG51bWJlcixcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMucHJvY2Vzc0luaXRHYW1lQ29tbWFuZC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0luaXRHYW1lQ29tbWFuZChjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIrKztcbiAgICAgICAgaWYgKHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlciA+PSB0aGlzLmxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlcikge1xuICAgICAgICAgICAgdGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyID0gMDtcbiAgICAgICAgICAgIGV2ZW50LmdhbWVEYXRhLmxldmVsID0gTWF0aC5taW4odGhpcy5tYXhMZXZlbHMsIGV2ZW50LmdhbWVEYXRhLmxldmVsICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21ib0NvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHVibGljIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbFRpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEuY29tYm8gKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50LmdhbWVEYXRhLmNvbWJvID0gMDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDb25zdFRpbWluZ3NIYW5kbGVyIGltcGxlbWVudHMgVGltaW5nc0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZGVsYXlNczogbnVtYmVyLFxuICAgICkge31cblxuICAgIGdldERlbGF5Rm9yTmV4dFRpY2tNcyhnYW1lRGF0YTogR2FtZURhdGEpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxheU1zO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIFN0YXRzQ291bnRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGV2ZW50LmdhbWVEYXRhLnN0YXRzLmZpZ3VyZXNGYWxsZW4gKz0gZXZlbnQudHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXMubGVuZ3RoO1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zdGF0cy5saW5lc1NxdWFzaGVkICs9IGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoO1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZUNvbnRyb2xsZXJ9IGZyb20gJy4vR2FtZUNvbnRyb2xsZXInXG5pbXBvcnQge1RhYmxlUmVuZGVyZXIsIFRhYmxlUmVuZGVyZXJTZXR0aW5nc30gZnJvbSAnLi9SZW5kZXJlci9UYWJsZVJlbmRlcmVyJ1xuaW1wb3J0IHtSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3J9IGZyb20gXCIuL0ZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yL1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvclwiO1xuaW1wb3J0IHtBbHdheXNPbmVGaWd1cmVTcGF3bmVyfSBmcm9tIFwiLi9GaWd1cmVzU3Bhd25lci9BbHdheXNPbmVGaWd1cmVTcGF3bmVyXCI7XG5pbXBvcnQge0V2ZW50QnVzfSBmcm9tIFwiLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7TW92aW5nSGFuZGxlcn0gZnJvbSBcIi4vTW92aW5nSGFuZGxlci9Nb3ZpbmdIYW5kbGVyXCI7XG5pbXBvcnQge01vdmluZ0NvbnRyb2xsZXJ9IGZyb20gXCIuL01vdmluZ0NvbnRyb2xsZXIvTW92aW5nQ29udHJvbGxlclwiO1xuaW1wb3J0IHtMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtGYWxsVGlja1Njb3JlQ291bnRlcn0gZnJvbSBcIi4vU2NvcmVDb3VudGVyL0ZhbGxUaWNrU2NvcmVDb3VudGVyXCI7XG5pbXBvcnQge1NxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlcn0gZnJvbSBcIi4vTGV2ZWxDb3VudGVyL1NxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlclwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4vQ29tbW9uXCI7XG5pbXBvcnQge0NvbWJvQ291bnRlcn0gZnJvbSBcIi4vQ29tYm9Db3VudGVyL0NvbWJvQ291bnRlclwiO1xuaW1wb3J0IHtDb25zdFRpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlci9Db25zdFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge1N0YXRzQ291bnRlcn0gZnJvbSBcIi4vU3RhdHNDb3VudGVyL1N0YXRzQ291bnRlclwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzRmFjYWRlIHtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKSxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoKSxcbiAgICAgICAgcHJpdmF0ZSBnYW1lQ29udHJvbGxlciA9IG5ldyBHYW1lQ29udHJvbGxlcihcbiAgICAgICAgICAgIC8vIG5ldyBMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXIoMjAwMCksXG4gICAgICAgICAgICBuZXcgQ29uc3RUaW1pbmdzSGFuZGxlcigyMDAwKSxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBtb3ZpbmdIYW5kbGVyID0gbmV3IE1vdmluZ0hhbmRsZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgbW92aW5nQ29udHJvbGxlciA9IG5ldyBNb3ZpbmdDb250cm9sbGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBmYWxsaW5nRmlndXJlc1Byb2Nlc3NvciA9IG5ldyBSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXNcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBmaWd1cmVzU3Bhd25lciA9IG5ldyBBbHdheXNPbmVGaWd1cmVTcGF3bmVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGxldmVsQ291bnRlciA9IG5ldyBTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIoXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICA4LFxuICAgICAgICAgICAgMTUsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgY29tYm9Db3VudGVyID0gbmV3IENvbWJvQ291bnRlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBzY29yZUNvdW50ZXIgPSBuZXcgRmFsbFRpY2tTY29yZUNvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgc3RhdHNDb3VudGVyID0gbmV3IFN0YXRzQ291bnRlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSB0YWJsZVJlbmRlcmVyID0gbmV3IFRhYmxlUmVuZGVyZXIoXG4gICAgICAgICAgICBuZXcgVGFibGVSZW5kZXJlclNldHRpbmdzKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzXG4gICAgICAgICksXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YSA9IEdhbWVEYXRhLm1ha2VTaW1wbGUoKSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgc3RhcnQoZ2FtZURhdGE/OiBHYW1lRGF0YSkge1xuICAgICAgICBnYW1lRGF0YSA9IGdhbWVEYXRhIHx8IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgSW5pdEdhbWVDb21tYW5kKGdhbWVEYXRhKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlc3VtZUdhbWVDb21tYW5kKGdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlc3VtZSgpIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVzdW1lR2FtZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUGF1c2VHYW1lQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RW51bUhlbHBlcn0gZnJvbSBcIi4uL1RldHJpcy9VdGlscy9FbnVtSGVscGVyXCI7XG5pbXBvcnQge0ZpZ3VyZSwgRmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vVGV0cmlzL0ZpZ3VyZXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9UZXRyaXMvVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgUmVuZGVyQ29tbWFuZH0gZnJvbSBcIi4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuY2xhc3MgUGxhY2VSZXNvbHZpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cblxuY2xhc3MgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IgZXh0ZW5kcyBQbGFjZVJlc29sdmluZ0Vycm9yIHtcbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZVBsYWNpbmdSZXNvbHZlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1c1xuICAgICkge31cblxuICAgIHB1YmxpYyByZXNvbHZlVGFyZ2V0UG9zaXRpb24oZ2FtZURhdGE6IEdhbWVEYXRhKTogTWFwPEZhbGxpbmdGaWd1cmUsIEZhbGxpbmdGaWd1cmU+IHtcbiAgICAgICAgaWYgKGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXAoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuXG4gICAgICAgIGxldCBlbnVtcyA9IEVudW1IZWxwZXIuVG9BcnJheShGaWd1cmVUdXJuU3RhdGUpO1xuICAgICAgICB3aGlsZSAoZW51bXNbMF0gIT09IG9yaWdpbmFsRmlndXJlLnR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgZW51bXMudW5zaGlmdChlbnVtcy5wb3AoKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1hdHJpY2VzOiBNYXA8RmlndXJlVHVyblN0YXRlLCBib29sZWFuW11bXT4gPSBuZXcgTWFwKCk7XG4gICAgICAgIGVudW1zLmZvckVhY2godHVyblN0YXRlID0+IHtcbiAgICAgICAgICAgIG1hdHJpY2VzLnNldCh0dXJuU3RhdGUsIG9yaWdpbmFsRmlndXJlLmZpZ3VyZS5nZXRUdXJuKHR1cm5TdGF0ZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG1heFNjb3JlID0gLUluZmluaXR5O1xuICAgICAgICBsZXQgdGhlQmVzdFRhcmdldEZpZ3VyZVN0YXRlID0gbmV3IEZhbGxpbmdGaWd1cmUoXG4gICAgICAgICAgICBvcmlnaW5hbEZpZ3VyZS5maWd1cmUsXG4gICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShvcmlnaW5hbEZpZ3VyZS5wb3NpdGlvbi54LCBvcmlnaW5hbEZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgIG9yaWdpbmFsRmlndXJlLnR1cm5TdGF0ZVxuICAgICAgICApO1xuXG4gICAgICAgIG1hdHJpY2VzLmZvckVhY2goKGZpZ3VyZU1hdHJpeCwgdHVyblN0YXRlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMTsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IFt5LCBpbWFnaW5hYmxlTWF0cml4XSA9IHRoaXMuaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZURhdGEubWF0cml4LCBmaWd1cmVNYXRyaXgsIHgpO1xuICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuY2FsY3VsYXRlU2NvcmUoZ2FtZURhdGEsIGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IG1heFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heFNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgICAgIHRoZUJlc3RUYXJnZXRGaWd1cmVTdGF0ZS50dXJuU3RhdGUgPSB0dXJuU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIHRoZUJlc3RUYXJnZXRGaWd1cmVTdGF0ZS5wb3NpdGlvbi54ID0geDtcbiAgICAgICAgICAgICAgICAgICAgdGhlQmVzdFRhcmdldEZpZ3VyZVN0YXRlLnBvc2l0aW9uLnkgPSB5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCdkZWJ1Z01vZGUnIGluIHdpbmRvdyAmJiB3aW5kb3cuZGVidWdNb2RlKSB7XG4gICAgICAgIC8vIGlmICh0cnVlKSB7XG4gICAgICAgICAgICBsZXQgZmFrZUdhbWVEYXRhID0gc3RydWN0dXJlZENsb25lKGdhbWVEYXRhKTtcbiAgICAgICAgICAgIHRoZUJlc3RUYXJnZXRGaWd1cmVTdGF0ZS5jb2xvciA9ICcjZjAwJztcbiAgICAgICAgICAgIGZha2VHYW1lRGF0YS5mYWxsaW5nRmlndXJlcyA9IFt0aGVCZXN0VGFyZ2V0RmlndXJlU3RhdGVdO1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZChmYWtlR2FtZURhdGEpKTtcblxuICAgICAgICAgICAgbWF0cmljZXMuZm9yRWFjaCgoZmlndXJlTWF0cml4LCB0dXJuU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMTsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBbeSwgaW1hZ2luYWJsZU1hdHJpeF0gPSB0aGlzLmltYWdpbmVGaWd1cmVEcm9wKGdhbWVEYXRhLm1hdHJpeCwgZmlndXJlTWF0cml4LCB4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVTY29yZShnYW1lRGF0YSwgaW1hZ2luYWJsZU1hdHJpeCwgdHJ1ZSwgbmV3IEZhbGxpbmdGaWd1cmUoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEZpZ3VyZS5maWd1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZSh4LCB5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR1cm5TdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcjMDBmJ1xuICAgICAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWF0cmljZXMuZm9yRWFjaCgoZmlndXJlTWF0cml4LCB0dXJuU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMTsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBbeSwgaW1hZ2luYWJsZU1hdHJpeF0gPSB0aGlzLmltYWdpbmVGaWd1cmVEcm9wKGdhbWVEYXRhLm1hdHJpeCwgZmlndXJlTWF0cml4LCB4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVTY29yZShnYW1lRGF0YSwgaW1hZ2luYWJsZU1hdHJpeCwgdHJ1ZSwgbmV3IEZhbGxpbmdGaWd1cmUoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEZpZ3VyZS5maWd1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZSh4LCB5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR1cm5TdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcjMDBmJ1xuICAgICAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgTWFwKFtcbiAgICAgICAgICAgIFtvcmlnaW5hbEZpZ3VyZSwgdGhlQmVzdFRhcmdldEZpZ3VyZVN0YXRlXSxcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVTY29yZShnYW1lRGF0YTogR2FtZURhdGEsIGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdLCBkZWJ1Z01vZGU6IGJvb2xlYW4gPSBmYWxzZSwgZmFrZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZXx1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBudW1iZXIge1xuICAgICAgICBpZiAoZGVidWdNb2RlICYmIGZha2VGaWd1cmUpIHtcbiAgICAgICAgICAgIGxldCBmYWtlR2FtZURhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZURhdGEpO1xuICAgICAgICAgICAgZmFrZUdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzID0gW2Zha2VGaWd1cmVdO1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZChmYWtlR2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWVsZEhlaWdodCA9IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0O1xuICAgICAgICBjb25zdCBmaWVsZFdpZHRoID0gZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aDtcbiAgICAgICAgY29uc3Qgc3F1YXNoZWRMaW5lc0NvdW50ID0gdGhpcy5zcXVhc2hMaW5lcyhpbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgY29uc3Qgc3F1YXNoZWRMaW5lc1Njb3JlID0gc3F1YXNoZWRMaW5lc0NvdW50ICogNTtcblxuICAgICAgICBjb25zdCBvcmlnaW5hbEhvbGVzQ291bnQgPSB0aGlzLmNhbGN1bGF0ZUhvbGVzKGdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IFtob2xlc0NvdW50LCBob2xlc0NvdmVyZWRIZWlnaHRdID0gdGhpcy5jYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQoaW1hZ2luYWJsZU1hdHJpeCwgZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgY29uc3QgaG9sZXNDb3VudERlY3JlYXNlID0gb3JpZ2luYWxIb2xlc0NvdW50IC0gaG9sZXNDb3VudDtcbiAgICAgICAgbGV0IGhvbGVzU2NvcmU6IG51bWJlcjtcbiAgICAgICAgaWYgKGhvbGVzQ292ZXJlZEhlaWdodCA9PT0gMCB8fCBob2xlc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICBob2xlc1Njb3JlID0gKGhvbGVzQ291bnREZWNyZWFzZSA+IDAgPyBob2xlc0NvdW50RGVjcmVhc2UgKiAxNTAgOiBob2xlc0NvdW50RGVjcmVhc2UgKiA3MCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBob2xlc1Njb3JlID0gKGhvbGVzQ291bnREZWNyZWFzZSA+IDAgPyBob2xlc0NvdW50RGVjcmVhc2UgKiAxNTAgOiBob2xlc0NvdW50RGVjcmVhc2UgKiA3MClcbiAgICAgICAgICAgICAgICAtIGhvbGVzQ292ZXJlZEhlaWdodCAqIE1hdGgucG93KGhvbGVzQ292ZXJlZEhlaWdodCwgaG9sZXNDb3ZlcmVkSGVpZ2h0IC8gKGZpZWxkSGVpZ2h0ICogaG9sZXNDb3VudCkpICogNTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuY2FsY3VsYXRlSGVpZ2h0KGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICBjb25zdCBoZWlnaHRTY29yZSA9IC1oZWlnaHQgKiBNYXRoLnBvdyhoZWlnaHQsIGhlaWdodCAvIGZpZWxkSGVpZ2h0KSAqIDM7XG5cbiAgICAgICAgY29uc3QgW2ZpbGxhYmxlQ2VsbHNDb3VudCwgZmlsbGFibGVIZWlnaHRdID0gdGhpcy5jYWxjdWxhdGVGaWxsYWJsZVNwYWNlKGltYWdpbmFibGVNYXRyaXgsIGZpZWxkV2lkdGgpO1xuICAgICAgICBsZXQgZmlsbGFibGVDZWxsc1Njb3JlID0gMDtcbiAgICAgICAgaWYgKGZpbGxhYmxlSGVpZ2h0ID4gNSkge1xuICAgICAgICAgICAgZmlsbGFibGVDZWxsc1Njb3JlID0gLWZpbGxhYmxlQ2VsbHNDb3VudCAqIE1hdGgucG93KGZpbGxhYmxlQ2VsbHNDb3VudCwgZmlsbGFibGVDZWxsc0NvdW50IC8gKGZpZWxkSGVpZ2h0ICogZmllbGRXaWR0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgW3R1bm5lbHNTdW1IZWlnaHQsIHR1bm5lbHNDb3VudF0gPSB0aGlzLmNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQoaW1hZ2luYWJsZU1hdHJpeCwgZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgbGV0IHR1bm5lbHNTY29yZTogbnVtYmVyO1xuICAgICAgICBpZiAodHVubmVsc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICB0dW5uZWxzU2NvcmUgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHVubmVsc1Njb3JlID0gLXR1bm5lbHNDb3VudCAqIDcwXG4gICAgICAgICAgICAgICAgLSB0dW5uZWxzU3VtSGVpZ2h0ICogTWF0aC5wb3codHVubmVsc1N1bUhlaWdodCwgdHVubmVsc1N1bUhlaWdodCAvIChmaWVsZEhlaWdodCAqIHR1bm5lbHNDb3VudCkpICogNztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNjb3JlID0gaG9sZXNTY29yZSArIHNxdWFzaGVkTGluZXNTY29yZSArIGhlaWdodFNjb3JlICsgdHVubmVsc1Njb3JlICsgZmlsbGFibGVDZWxsc1Njb3JlO1xuICAgICAgICBpZiAoaXNOYU4oc2NvcmUpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpbWFnaW5hYmxlTWF0cml4LCBob2xlc1Njb3JlLCBzcXVhc2hlZExpbmVzU2NvcmUsIGhlaWdodFNjb3JlLCB0dW5uZWxzU2NvcmUsIGZpbGxhYmxlQ2VsbHNTY29yZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3JlO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3F1YXNoTGluZXMobWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlciB7XG4gICAgICAgIGxldCBsaW5lc1RvU3F1YXNoOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBsZXQgY2FuQmVTcXVhc2hlZCA9IHJvdy5ldmVyeShjZWxsID0+IGNlbGwpO1xuICAgICAgICAgICAgaWYgKGNhbkJlU3F1YXNoZWQpIHtcbiAgICAgICAgICAgICAgICBsaW5lc1RvU3F1YXNoLnB1c2goeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgICBsaW5lc1RvU3F1YXNoLmZvckVhY2goeSA9PiB7XG4gICAgICAgICAgICBtYXRyaXguc3BsaWNlKHksIDEpO1xuICAgICAgICAgICAgbWF0cml4LnVuc2hpZnQobmV3IEFycmF5KG1hdHJpeFswXS5sZW5ndGgpLmZpbGwoZmFsc2UpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaW5lc1RvU3F1YXNoLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGltYWdpbmVGaWd1cmVEcm9wKGdhbWVNYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdLCB0YXJnZXRYOiBudW1iZXIpOiBbbnVtYmVyLCBib29sZWFuW11bXV0ge1xuICAgICAgICBsZXQgaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10gPSBnYW1lTWF0cml4Lm1hcChyb3cgPT4gcm93LnNsaWNlKCkpO1xuICAgICAgICBsZXQgdGFyZ2V0WSA9IC1maWd1cmVNYXRyaXgubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoZmlndXJlTWF0cml4LCBuZXcgQ29vcmRpbmF0ZSh0YXJnZXRYLCB0YXJnZXRZICsgMSksIGdhbWVNYXRyaXgpKSB7XG4gICAgICAgICAgICB0YXJnZXRZKys7XG4gICAgICAgIH1cbiAgICAgICAgZmlndXJlTWF0cml4LmZvckVhY2goKHJvdywgZmlndXJlWSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgZmlndXJlWCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0gdGFyZ2V0WSArIGZpZ3VyZVk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRYICsgZmlndXJlWDtcbiAgICAgICAgICAgICAgICBpZiAocmVhbFkgaW4gaW1hZ2luYWJsZU1hdHJpeFxuICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCBpbiBpbWFnaW5hYmxlTWF0cml4W3JlYWxZXVxuICAgICAgICAgICAgICAgICAgICAmJiB2YWxcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZU1hdHJpeFtyZWFsWV1bcmVhbFhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt0YXJnZXRZLCBpbWFnaW5hYmxlTWF0cml4XTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhvbGVzKGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+O1xuICAgICAgICBsZXQgaG9sZXNDb3VudCA9IDA7XG4gICAgICAgIGltYWdpbmFibGVNYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3ZlcmVkQ29sdW1ucy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGhvbGVzQ291bnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQoaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10sIHJlYWxNYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGNvbnN0IFtvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSwgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZXSA9IHRoaXMuY2FsY3VsYXRlVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWShyZWFsTWF0cml4KTtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zWXMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPjtcbiAgICAgICAgbGV0IGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gPSAwO1xuICAgICAgICBsZXQgaG9sZXNDb3VudCA9IDA7XG4gICAgICAgIGltYWdpbmFibGVNYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAmJiAhY292ZXJlZENvbHVtbnNZcy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnNZcy5zZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb3ZlcmVkWSA9IGNvdmVyZWRDb2x1bW5zWXMuZ2V0KHgpO1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkWSAhPT0gdW5kZWZpbmVkICYmICF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxUaGVIaWdoZXN0SG9sZVkgIT09IHVuZGVmaW5lZCAmJiBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkgPCBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gKz0geSAtIGNvdmVyZWRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3ZlcmVkWSA8IG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gKz0gb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZIC0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbaG9sZXNDb3VudCwgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bV07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKG1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyfHVuZGVmaW5lZCwgbnVtYmVyfHVuZGVmaW5lZF0ge1xuICAgICAgICBsZXQgdGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHRoZUhpZ2hlc3RIb2xlWSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zWXMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPjtcbiAgICAgICAgbWF0cml4LnNvbWUoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5zb21lKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmICFjb3ZlcmVkQ29sdW1uc1lzLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1uc1lzLnNldCh4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvdmVyZWRZID0gY292ZXJlZENvbHVtbnNZcy5nZXQoeCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRZICE9PSB1bmRlZmluZWQgJiYgIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGVIaWdoZXN0SG9sZVkgPSB5O1xuICAgICAgICAgICAgICAgICAgICB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZID0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbdGhlSGlnaGVzdEhvbGVZLCB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhlaWdodChtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxvd2VzdEVtcHR5WSA9IC0xO1xuICAgICAgICBtYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvdy5ldmVyeSh2YWwgPT4gIXZhbCkpIHtcbiAgICAgICAgICAgICAgICBsb3dlc3RFbXB0eVkgPSB5O1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWF0cml4Lmxlbmd0aCAtIGxvd2VzdEVtcHR5WSAtIDE7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkKGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdLCByZWFsTWF0cml4OiBib29sZWFuW11bXSk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBsZXQgcmVhbENvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIHJlYWxNYXRyaXguZXZlcnkoKHJvdykgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhbENvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICBsZXQgdHVubmVscyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBjb25zdCBmaWVsZFdpZHRoID0gaW1hZ2luYWJsZU1hdHJpeFswXS5sZW5ndGg7XG4gICAgICAgIGltYWdpbmFibGVNYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbFxuICAgICAgICAgICAgICAgICAgICAmJiAhaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4KVxuICAgICAgICAgICAgICAgICAgICAmJiAhcmVhbENvdmVyZWRDb2x1bW5zLmhhcyh4KVxuICAgICAgICAgICAgICAgICAgICAmJiAoeCA9PT0gMCB8fCBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHggLSAxKSlcbiAgICAgICAgICAgICAgICAgICAgJiYgKHggPT09IGZpZWxkV2lkdGggLSAxIHx8IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeCArIDEpKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0dW5uZWxzLnNldCh4LCAodHVubmVscy5nZXQoeCkgfHwgMCkgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuc2l6ZSA8IGZpZWxkV2lkdGg7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgdHVubmVsc1N1bUhlaWdodCA9IDA7XG4gICAgICAgIGxldCB0dW5uZWxzQ291bnQgPSAwO1xuICAgICAgICB0dW5uZWxzLmZvckVhY2goaGVpZ2h0ID0+IHtcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPj0gMykge1xuICAgICAgICAgICAgICAgIHR1bm5lbHNTdW1IZWlnaHQgKz0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHR1bm5lbHNDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzQ291bnRdO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlRmlsbGFibGVTcGFjZShtYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWVsZFdpZHRoOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGxldCBmaWxsYWJsZUNlbGxzQ291bnQgPSAwO1xuICAgICAgICBsZXQgZmlsbGFibGVIZWlnaHQgPSAwO1xuICAgICAgICBtYXRyaXguZXZlcnkocm93ID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbCAmJiBjb3ZlcmVkQ29sdW1ucy5zaXplID4gMCAmJiAhY292ZXJlZENvbHVtbnMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlQ2VsbHNDb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLnNpemUgPCBmaWVsZFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlSGVpZ2h0Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlSGVpZ2h0XTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1RpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyIGltcGxlbWVudHMgVGltaW5nc0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGluaXRpYWxEZWxheU1zOiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgYmFzZTogbnVtYmVyID0gMC44LFxuICAgICkge31cblxuICAgIGdldERlbGF5Rm9yTmV4dFRpY2tNcyhnYW1lRGF0YTogR2FtZURhdGEpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5wb3codGhpcy5iYXNlIC0gKGdhbWVEYXRhLmxldmVsIC0gMSkgKiAwLjAwNywgZ2FtZURhdGEubGV2ZWwgLSAxKSAqIHRoaXMuaW5pdGlhbERlbGF5TXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgRHJvcEZpZ3VyZXNDb21tYW5kLCBNb3ZlTGVmdENvbW1hbmQsIE1vdmVSaWdodENvbW1hbmQsIFR1cm5DbG9ja3dpc2VDb21tYW5kfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuLi9UZXRyaXMvVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5cbmNsYXNzIFBsYWNpbmdFcnJvciBleHRlbmRzIEVycm9yIHt9XG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuY2xhc3MgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1BlcmZvcm1lciB7XG4gICAgcHJpdmF0ZSBuZXh0TW92ZVRpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gPSBzZXRUaW1lb3V0KCgpID0+IHt9KTtcbiAgICBwcml2YXRlIHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBnYW1lRGF0YTogR2FtZURhdGEgPSBHYW1lRGF0YS5tYWtlU2ltcGxlKCk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIHRpbWluZ3NIYW5kbGVyID0gbmV3IExldmVsQmFzZWRUaW1pbmdzSGFuZGxlcigxMDAsIDAuOSksXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHBsYWNlKGdhbWVEYXRhOiBHYW1lRGF0YSwgdGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXM6IE1hcDxGYWxsaW5nRmlndXJlLCBGYWxsaW5nRmlndXJlPikge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gZ2FtZURhdGE7XG4gICAgICAgIHRoaXMudGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMgPSB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcztcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubmV4dE1vdmVUaW1lb3V0SWQpO1xuICAgICAgICB0aGlzLm5leHRNb3ZlVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgIHRoaXMudGltaW5nc0hhbmRsZXIuZ2V0RGVsYXlGb3JOZXh0VGlja01zKHRoaXMuZ2FtZURhdGEpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1RpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxGaWd1cmUgPSB0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuICAgICAgICBjb25zdCB0YXJnZXRGaWd1cmUgPSB0aGlzLnRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzLmdldChvcmlnaW5hbEZpZ3VyZSk7XG4gICAgICAgIGlmICghdGFyZ2V0RmlndXJlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUuZmlndXJlICE9PSB0YXJnZXRGaWd1cmUuZmlndXJlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvcihcIkJvdGggb2YgdGhlIG9yaWdpbmFsIGFuZCB0aGUgdGFyZ2V0IGZhbGxpbmcgZmlndXJlcyBtdXN0IGhhdmUgdGhlIHNhbWUgZmlndXJlIGluIGl0LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS50dXJuU3RhdGUgIT0gdGFyZ2V0RmlndXJlLnR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgVHVybkNsb2Nrd2lzZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICB9IGVsc2UgaWYgKG9yaWdpbmFsRmlndXJlLnBvc2l0aW9uLnggIT0gdGFyZ2V0RmlndXJlLnBvc2l0aW9uLngpIHtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS5wb3NpdGlvbi54ID4gdGFyZ2V0RmlndXJlLnBvc2l0aW9uLngpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlTGVmdENvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlUmlnaHRDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IERyb3BGaWd1cmVzQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGlzLnByb2Nlc3NUaWNrKCk7XG5cbiAgICAgICAgdGhpcy5uZXh0TW92ZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgLy8gdGhpcy50aW1pbmdzSGFuZGxlci5nZXREZWxheUZvck5leHRUaWNrTXModGhpcy5nYW1lRGF0YSksXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGaWd1cmVzU3Bhd25lZEV2ZW50fSBmcm9tIFwiLi4vVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdSZXNvbHZlcn0gZnJvbSBcIi4vRmlndXJlUGxhY2luZ1Jlc29sdmVyXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJ9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJcIjtcblxuZXhwb3J0IGNsYXNzIFRldHJpc1NvbHZlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZVBsYWNpbmdSZXNvbHZlciA9IG5ldyBGaWd1cmVQbGFjaW5nUmVzb2x2ZXIoY29tbWFuZEJ1cyksXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZXNQbGFjZXIgPSBuZXcgRmlndXJlUGxhY2luZ1BlcmZvcm1lcihjb21tYW5kQnVzKSxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GaWd1cmVzU3Bhd25lZCwgdGhpcy5vbkZpZ3VyZXNTcGF3bmVkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GaWd1cmVzU3Bhd25lZChldmVudDogRmlndXJlc1NwYXduZWRFdmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyA9IHRoaXMuZmFsbGluZ0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci5yZXNvbHZlVGFyZ2V0UG9zaXRpb24oZXZlbnQuZ2FtZURhdGEpO1xuICAgICAgICB0aGlzLmZhbGxpbmdGaWd1cmVzUGxhY2VyLnBsYWNlKGV2ZW50LmdhbWVEYXRhLCB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGV0cmlzRmFjYWRlIH0gZnJvbSAnLi9UZXRyaXMvVGV0cmlzRmFjYWRlJ1xuaW1wb3J0IHtFdmVudEJ1c30gZnJvbSBcIi4vVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXN9IGZyb20gXCIuL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7VGV0cmlzU29sdmVyfSBmcm9tIFwiLi9UZXRyaXNTb2x2ZXIvVGV0cmlzU29sdmVyXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKTtcbiAgICBjb25zdCBjb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoKTtcbiAgICBsZXQgdGV0cmlzID0gbmV3IFRldHJpc0ZhY2FkZShldmVudEJ1cywgY29tbWFuZEJ1cyk7XG4gICAgbGV0IHNvbHZlciA9IG5ldyBUZXRyaXNTb2x2ZXIoZXZlbnRCdXMsIGNvbW1hbmRCdXMpO1xuXG4gICAgdGV0cmlzLnN0YXJ0KCk7XG59KVxuIl0sIm5hbWVzIjpbIkV2ZW50VHlwZSIsIkNvbW1hbmRUeXBlIiwiZ2FtZURhdGEiLCJ0cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlcyIsInNxdWFzaGVkTGluZXMiLCJkcm9wcGVkTGluZXMiLCJnZXRFdmVudFR5cGUiLCJGYWxsaW5nVGlja1Byb2Nlc3NlZCIsIkdhbWVPdmVyIiwiRmlndXJlc01vdmVkIiwibmV3RmlndXJlcyIsIkZpZ3VyZXNTcGF3bmVkIiwiaGFuZGxlcnMiLCJNYXAiLCJvbiIsImV2ZW50IiwiaGFuZGxlciIsInVuaXF1ZSIsInRoaXMiLCJnZXQiLCJzb21lIiwiYm91bmRIYW5kbGVyIiwicHVzaCIsInNldCIsIm9mZiIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImZpcmUiLCJldmVudFBheWxvYWQiLCJmb3JFYWNoIiwiRmlndXJlVHVyblN0YXRlIiwiZ2V0Q29tbWFuZFR5cGUiLCJJbml0R2FtZSIsIlJlc3VtZUdhbWUiLCJQYXVzZUdhbWUiLCJGaWd1cmVzRmFsbFRpY2siLCJSZW5kZXIiLCJNb3ZlTGVmdCIsIk1vdmVSaWdodCIsIlR1cm5DbG9ja3dpc2UiLCJNb3ZlRG93biIsIkZpZ3VyZXNGYWxsRG93biIsImFkZEhhbmRsZXIiLCJyZW1vdmVIYW5kbGVyIiwicnVuIiwicGF5bG9hZCIsImdldE5vcm1hbGl6ZWRGaWd1cmUiLCJmaWd1cmUiLCJnZXRGaWd1cmUiLCJ0aGVMb25nZXN0Um93U2l6ZSIsInJlZHVjZSIsInByZXZpb3VzIiwiY3VycmVudCIsIk1hdGgiLCJtYXgiLCJsZW5ndGgiLCJtYXAiLCJyb3ciLCJvcmlnaW5hbExlbmd0aCIsImZpbGwiLCJnZXRGaXJzdFR1cm4iLCJnZXRTZWNvbmRUdXJuIiwib3JpZ2luYWxGaWd1cmUiLCJ0dXJuZWRGaWd1cmUiLCJvcmlnaW5hbEZpZ3VyZUhlaWdodCIsIm9yaWdpbmFsRmlndXJlV2lkdGgiLCJ4IiwiQXJyYXkiLCJ5IiwiZ2V0VGhpcmRUdXJuIiwicmV2ZXJzZSIsImdldEZvcnRoVHVybiIsImdldFR1cm4iLCJmaWd1cmVUdXJuU3RhdGUiLCJPbmUiLCJUd28iLCJUaHJlZSIsIkZvdXIiLCJzcGxpdCIsIml0ZW0iLCJTaW1wbHlSb3RhdGFibGVGaWd1cmUiLCJwb3NpdGlvbiIsInR1cm5TdGF0ZSIsImNvbG9yIiwiZmllbGRXaWR0aCIsImZpZWxkSGVpZ2h0IiwiZmlndXJlcyIsImZpZ3VyZXNGYWxsZW4iLCJsaW5lc1NxdWFzaGVkIiwiaXNJbml0aWFsaXplZCIsImlzR2FtZU92ZXIiLCJmYWxsaW5nRmlndXJlcyIsIm1hdHJpeCIsIm5leHRUaWNrVGltZW91dElkIiwic2V0dGluZ3MiLCJsZXZlbCIsInNjb3JlIiwiY29tYm8iLCJzdGF0cyIsInNldFRpbWVvdXQiLCJTdGF0cyIsIm1ha2VTaW1wbGUiLCJ3aWR0aCIsImhlaWdodCIsIkdhbWVEYXRhIiwiXyIsIkdhbWVTZXR0aW5ncyIsIlRGaWd1cmUiLCJSaWdodExGaWd1cmUiLCJMZWZ0TEZpZ3VyZSIsIlNxdWFyZUZpZ3VyZSIsIlN0aWNrRmlndXJlIiwiTFpGaWd1cmUiLCJSWkZpZ3VyZSIsInRpbWluZ3NIYW5kbGVyIiwiZXZlbnRCdXMiLCJjb21tYW5kQnVzIiwiaW5pdEdhbWVIYW5kbGVyIiwiYmluZCIsInJlc3VtZUdhbWVIYW5kbGVyIiwicGF1c2VHYW1lSGFuZGxlciIsImdhbWVPdmVySGFuZGxlciIsImNvbW1hbmQiLCJvbkZhbGxUaWNrUHJvY2Vzc2VkIiwiSW5pdEdhbWVDb21tYW5kIiwiZmFsbFRpY2siLCJjbGVhclRpbWVvdXQiLCJSZW5kZXJDb21tYW5kIiwiR2FtZU92ZXJFdmVudCIsIkZpZ3VyZXNGYWxsVGlja0NvbW1hbmQiLCJnZXREZWxheUZvck5leHRUaWNrTXMiLCJjYW5GaWd1cmVCZVBsYWNlZCIsInRhcmdldEZpZ3VyZU1hdHJpeCIsInRhcmdldFBvc2l0aW9uIiwiZXZlcnkiLCJ2YWx1ZSIsInJlYWxZIiwicmVhbFgiLCJmaWxsZWQiLCJmaWxsZWRHYW1lT3ZlciIsImVtcHR5IiwiY29udGFpbmVyRWxlbWVudCIsInJlbmRlclByb2plY3Rpb25GaWd1cmVzIiwibWF0cml4Q2VsbENvbG9ycyIsImZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzIiwicHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMiLCJUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MiLCJyZW5kZXJTZXR0aW5ncyIsImNlbGxzSHRtbEVsZW1lbnRzTWFwIiwiaW5pdEhhbmRsZXIiLCJyZW5kZXJDb21tYW5kSGFuZGxlciIsInRhYmxlIiwiVGFibGVSZW5kZXJlciIsImNyZWF0ZUh0bWxFbGVtZW50IiwiY2VsbCIsImFwcGVuZENoaWxkIiwiaW5uZXJIVE1MIiwic2NvcmVEaXNwbGF5Iiwib25HYW1lT3ZlciIsIm9uRmlndXJlc01vdmVkIiwicmVuZGVyU3RhdGUiLCJyZXBhaW50TWF0cml4Q2VsbHMiLCJDb29yZGluYXRlIiwicmVuZGVyRmFsbGluZ0ZpZ3VyZXNQcm9qZWN0aW9uIiwicmVuZGVyRmFsbGluZ0ZpZ3VyZXMiLCJyZW5kZXJTdGF0cyIsImZhbGxpbmdGaWd1cmUiLCJyZXBhaW50RmFsbGluZ0ZpZ3VyZXNDZWxscyIsImZpZ3VyZU1hdHJpeCIsInByb2plY3Rpb25GaWd1cmVYIiwicHJvamVjdGlvbkZpZ3VyZVkiLCJGaWd1cmVQbGFjaW5nQ2hlY2tlciIsInJlcGFpbnRQcm9qZWN0aW9uRmlndXJlc0NlbGxzIiwiaW5kZW50IiwiY29sb3JzIiwiQ2VsbENvbG9ycyIsInJlcGFpbnRDZWxscyIsImNlbGxDb2xvcnMiLCJzdHlsZSIsImJhY2tncm91bmQiLCJsZXZlbFNwYW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2NvcmVTcGFuIiwiY29tYm9TcGFuIiwidG9TdHJpbmciLCJodG1sIiwiY29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNoaWxkcmVuIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJIVE1MRWxlbWVudCIsInRyYW5zZmVycmVkRmlndXJlcyIsInByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kIiwicHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZCIsImZhbGxpbmdSZXN1bHQiLCJmYWxsRmlndXJlc0Zvck9uZUNlbGwiLCJzcXVhc2hMaW5lcyIsIkdhbWVPdmVyQ29tbWFuZCIsIkZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQiLCJGYWxsaW5nUmVzdWx0Iiwib25lQ2VsbEZhbGxpbmdSZXN1bHQiLCJmaWd1cmVDYW5GYWxsIiwiZmlndXJlR2FtZU92ZXJSZXN1bHQiLCJ0cmFuc2ZlckZpZ3VyZVRvTWF0cml4IiwiZmlndXJlQ2VsbFkiLCJjZWxsVmFsdWUiLCJmaWd1cmVDZWxsWCIsIm1hdHJpeFgiLCJtYXRyaXhZIiwibGluZXNUb1NxdWFzaCIsInVuc2hpZnQiLCJUb0FycmF5IiwidmFsIiwiT2JqZWN0Iiwia2V5cyIsIm4iLCJOdW1iZXIiLCJwYXJzZUludCIsImZpbHRlciIsImlzTmFOIiwiR2V0UmFuZG9tIiwidmFsdWVzIiwiRW51bUhlbHBlciIsImZsb29yIiwicmFuZG9tIiwicHJvY2Vzc09uRmFsbFRpY2siLCJhZGRGaWd1cmUiLCJmaWd1cmVJbmRleCIsImZpZ3VyZVdpZHRoIiwiY29vcmRpbmF0ZSIsImNlaWwiLCJGYWxsaW5nRmlndXJlIiwiRmlndXJlc1NwYXduZWRFdmVudCIsInByb2Nlc3NNb3ZlTGVmdENvbW1hbmQiLCJwcm9jZXNzTW92ZVJpZ2h0Q29tbWFuZCIsInByb2Nlc3NNb3ZlRG93bkNvbW1hbmQiLCJwcm9jZXNzVHVybkNsb2Nrd2lzZUNvbW1hbmQiLCJGaWd1cmVzTW92ZWRFdmVudCIsImFsbFR1cm5TdGF0ZXMiLCJuZXh0VHVyblN0YXRlIiwicHJvY2Vzc0luaXRHYW1lQ29tbWFuZCIsIndpbmRvdyIsIm9ua2V5ZG93biIsImNvZGUiLCJNb3ZlTGVmdENvbW1hbmQiLCJNb3ZlUmlnaHRDb21tYW5kIiwiVHVybkNsb2Nrd2lzZUNvbW1hbmQiLCJNb3ZlRG93bkNvbW1hbmQiLCJEcm9wRmlndXJlc0NvbW1hbmQiLCJzcXVhc2hlZFJvd3NSZXdhcmRUaHJlc2hvbGRzTWFwIiwicmV3YXJkT25Db21ibyIsIm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQiLCJwcmV2aW91c1RocmVzaG9sZFJld2FyZCIsInJld2FyZCIsInJvd3NTcXVhc2hlZFRocmVzaG9sZCIsImxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlciIsIm1heExldmVscyIsInNxdWFzaGVkUm93c0NvdW50ZXIiLCJtaW4iLCJkZWxheU1zIiwiZ2FtZUNvbnRyb2xsZXIiLCJtb3ZpbmdIYW5kbGVyIiwibW92aW5nQ29udHJvbGxlciIsImZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIiwiZmlndXJlc1NwYXduZXIiLCJsZXZlbENvdW50ZXIiLCJjb21ib0NvdW50ZXIiLCJzY29yZUNvdW50ZXIiLCJzdGF0c0NvdW50ZXIiLCJ0YWJsZVJlbmRlcmVyIiwiRXZlbnRCdXMiLCJDb21tYW5kQnVzIiwiR2FtZUNvbnRyb2xsZXIiLCJDb25zdFRpbWluZ3NIYW5kbGVyIiwiTW92aW5nSGFuZGxlciIsIk1vdmluZ0NvbnRyb2xsZXIiLCJSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJBbHdheXNPbmVGaWd1cmVTcGF3bmVyIiwiU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyIiwiQ29tYm9Db3VudGVyIiwiRmFsbFRpY2tTY29yZUNvdW50ZXIiLCJTdGF0c0NvdW50ZXIiLCJUYWJsZVJlbmRlcmVyU2V0dGluZ3MiLCJib2R5Iiwic3RhcnQiLCJSZXN1bWVHYW1lQ29tbWFuZCIsInJlc3VtZSIsInBhdXNlIiwiUGF1c2VHYW1lQ29tbWFuZCIsIkVycm9yIiwicmVzb2x2ZVRhcmdldFBvc2l0aW9uIiwiR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IiLCJlbnVtcyIsInBvcCIsIm1hdHJpY2VzIiwibWF4U2NvcmUiLCJ0aGVCZXN0VGFyZ2V0RmlndXJlU3RhdGUiLCJpbWFnaW5lRmlndXJlRHJvcCIsImltYWdpbmFibGVNYXRyaXgiLCJjYWxjdWxhdGVTY29yZSIsImRlYnVnTW9kZSIsImZha2VHYW1lRGF0YSIsInN0cnVjdHVyZWRDbG9uZSIsImZha2VGaWd1cmUiLCJob2xlc1Njb3JlIiwic3F1YXNoZWRMaW5lc1Njb3JlIiwib3JpZ2luYWxIb2xlc0NvdW50IiwiY2FsY3VsYXRlSG9sZXMiLCJjYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQiLCJob2xlc0NvdW50IiwiaG9sZXNDb3ZlcmVkSGVpZ2h0IiwiaG9sZXNDb3VudERlY3JlYXNlIiwicG93IiwiY2FsY3VsYXRlSGVpZ2h0IiwiaGVpZ2h0U2NvcmUiLCJjYWxjdWxhdGVGaWxsYWJsZVNwYWNlIiwiZmlsbGFibGVDZWxsc0NvdW50IiwiZmlsbGFibGVDZWxsc1Njb3JlIiwidHVubmVsc1Njb3JlIiwiY2FsY3VsYXRlVHVubmVsc0V4Y2VwdFVuY292ZXJlZCIsInR1bm5lbHNTdW1IZWlnaHQiLCJ0dW5uZWxzQ291bnQiLCJjb25zb2xlIiwibG9nIiwiZ2FtZU1hdHJpeCIsInRhcmdldFgiLCJzbGljZSIsInRhcmdldFkiLCJmaWd1cmVZIiwiZmlndXJlWCIsImNvdmVyZWRDb2x1bW5zIiwiU2V0IiwiYWRkIiwiaGFzIiwicmVhbE1hdHJpeCIsImNhbGN1bGF0ZVRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkiLCJvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSIsIm9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSIsImNvdmVyZWRDb2x1bW5zWXMiLCJob2xlc0NvdmVyZWRIZWlnaHRzU3VtIiwiY292ZXJlZFkiLCJ1bmRlZmluZWQiLCJ0aGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwidGhlSGlnaGVzdEhvbGVZIiwibG93ZXN0RW1wdHlZIiwicmVhbENvdmVyZWRDb2x1bW5zIiwiaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zIiwidHVubmVscyIsInNpemUiLCJmaWxsYWJsZUhlaWdodCIsImluaXRpYWxEZWxheU1zIiwiYmFzZSIsIlBsYWNpbmdFcnJvciIsIkxldmVsQmFzZWRUaW1pbmdzSGFuZGxlciIsIm5leHRNb3ZlVGltZW91dElkIiwidGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMiLCJwbGFjZSIsInByb2Nlc3NUaWNrIiwidGFyZ2V0RmlndXJlIiwiSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciIsImZhbGxpbmdGaWd1cmVQbGFjaW5nUmVzb2x2ZXIiLCJmYWxsaW5nRmlndXJlc1BsYWNlciIsIkZpZ3VyZVBsYWNpbmdSZXNvbHZlciIsIkZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIiLCJvbkZpZ3VyZXNTcGF3bmVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRldHJpcyIsIlRldHJpc0ZhY2FkZSIsIlRldHJpc1NvbHZlciJdLCJzb3VyY2VSb290IjoiIn0=