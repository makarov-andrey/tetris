(()=>{"use strict";var e,t,s;!function(e){e[e.FallingTickProcessed=0]="FallingTickProcessed",e[e.GameOver=1]="GameOver",e[e.FiguresMoved=2]="FiguresMoved",e[e.LevelUp=3]="LevelUp",e[e.FiguresSpawned=4]="FiguresSpawned"}(e||(e={}));class i{constructor(e,t,s,i){this.gameData=e,this.transferredToMatrixFigures=t,this.squashedLines=s,this.droppedLines=i}getEventType(){return e.FallingTickProcessed}}class n{constructor(e){this.gameData=e}getEventType(){return e.GameOver}}class a{constructor(e){this.gameData=e}getEventType(){return e.FiguresMoved}}class r{constructor(e,t){this.gameData=e,this.newFigures=t}getEventType(){return e.FiguresSpawned}}class l{constructor(){this.handlers=new Map}on(e,t,s=!0){let i=this.handlers.get(e)||[];s&&i.some((e=>e===t))||(i.push(t),this.handlers.set(e,i))}off(e,t){let s=this.handlers.get(e)||[],i=s.indexOf(t);i>0&&s.splice(i,1),this.handlers.set(e,s)}fire(e){(this.handlers.get(e.getEventType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.InitGame=0]="InitGame",e[e.ResumeGame=1]="ResumeGame",e[e.PauseGame=2]="PauseGame",e[e.FiguresFallTick=3]="FiguresFallTick",e[e.GameOver=4]="GameOver",e[e.Render=5]="Render",e[e.MoveLeft=6]="MoveLeft",e[e.MoveRight=7]="MoveRight",e[e.TurnClockwise=8]="TurnClockwise",e[e.MoveDown=9]="MoveDown",e[e.FiguresFallDown=10]="FiguresFallDown"}(t||(t={}));class o{constructor(e){this.gameData=e}getCommandType(){return t.InitGame}}class c{constructor(e){this.gameData=e}getCommandType(){return t.ResumeGame}}class h{constructor(e){this.gameData=e}getCommandType(){return t.PauseGame}}class u{constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallTick}}class m{constructor(e){this.gameData=e}getCommandType(){return t.GameOver}}class d{constructor(e){this.gameData=e}getCommandType(){return t.Render}}class g{constructor(e){this.gameData=e}getCommandType(){return t.MoveLeft}}class p{constructor(e){this.gameData=e}getCommandType(){return t.MoveRight}}class f{constructor(e){this.gameData=e}getCommandType(){return t.TurnClockwise}}class w{constructor(e){this.gameData=e}getCommandType(){return t.MoveDown}}class v{constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallDown}}class F{constructor(){this.handlers=new Map}addHandler(e,t,s=!0){let i=this.handlers.get(e)||[];s&&i.some((e=>e===t))||(i.push(t),this.handlers.set(e,i))}removeHandler(e,t){let s=this.handlers.get(e)||[],i=s.indexOf(t);i>0&&s.splice(i,1),this.handlers.set(e,s)}run(e){(this.handlers.get(e.getCommandType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(s||(s={}));class T{getTurn(e){switch(e){case s.One:return this.getFirstTurn();case s.Two:return this.getSecondTurn();case s.Three:return this.getThirdTurn();case s.Four:return this.getForthTurn()}}}class C extends T{getNormalizedFigure(){let e=this.getFigure(),t=e.reduce(((e,t)=>Math.max(e,t.length)),0);return e.map((e=>{let s=e.length;return e.length=t,e.fill(!1,s-1,t-1)}))}getFirstTurn(){return this.getNormalizedFigure()}getSecondTurn(){let e=this.getNormalizedFigure(),t=[],s=e.length,i=e[0].length;for(let n=0;n<i;n++){t[n]=new Array(s).fill(!1);for(let i=0;i<s;i++)t[n][s-i-1]=e[i][n]}return t}getThirdTurn(){return this.getFirstTurn().reverse().map((e=>e.reverse()))}getForthTurn(){return this.getSecondTurn().reverse().map((e=>e.reverse()))}}class D extends C{getFigure(){return["###".split("").map((e=>"#"===e)),"-#-".split("").map((e=>"#"===e))]}}class S extends C{getFigure(){return["###".split("").map((e=>"#"===e)),"--#".split("").map((e=>"#"===e))]}}class x extends C{getFigure(){return["###".split("").map((e=>"#"===e)),"#--".split("").map((e=>"#"===e))]}}class M extends C{getFigure(){return["##".split("").map((e=>"#"===e)),"##".split("").map((e=>"#"===e))]}}class H extends C{getFigure(){return["####".split("").map((e=>"#"===e))]}}class y extends C{getFigure(){return["##-".split("").map((e=>"#"===e)),"-##".split("").map((e=>"#"===e))]}}class B extends C{getFigure(){return["-##".split("").map((e=>"#"===e)),"##-".split("").map((e=>"#"===e))]}}class b{constructor(e,t){this.x=e,this.y=t}}class E{constructor(e,t,s,i){this.figure=e,this.position=t,this.turnState=s,this.color=i}}class G{constructor(e,t,s){this.fieldWidth=e,this.fieldHeight=t,this.figures=s}}class O{constructor(){this.figuresFallen=0,this.linesSquashed=0}}class k{constructor(e=!1,t=!1,s=[],i=[],n=setTimeout((()=>{})),a,r=1,l=0,o=0,c=new O){this.isInitialized=e,this.isGameOver=t,this.fallingFigures=s,this.matrix=i,this.nextTickTimeoutId=n,this.settings=a,this.level=r,this.score=l,this.combo=o,this.stats=c}static makeSimple(e=10,t=20){return new k(!1,!1,[],new Array(t).fill([]).map((t=>new Array(e).fill(!1))),setTimeout((()=>{})),new G(e,t,[new D,new S,new x,new M,new H,new y,new B]))}}class P{constructor(e,s,i){this.timingsHandler=e,this.eventBus=s,this.commandBus=i,this.gameData=k.makeSimple(),this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(t.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(t.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(t.GameOver,this.gameOverHandler.bind(this))}initGameHandler(t){this.gameData=t.gameData,this.gameData.isInitialized=!0,this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}resumeGameHandler(e){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new o(e.gameData)),this.fallTick())}pauseGameHandler(e){this.gameData=e.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new d(this.gameData))}gameOverHandler(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new n(this.gameData))}fallTick(){this.commandBus.run(new u(this.gameData))}onFallTickProcessed(e){clearTimeout(this.gameData.nextTickTimeoutId),this.gameData.isGameOver||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))}}class R{static canFigureBePlaced(e,t,s){return e.every(((e,i)=>e.every(((e,n)=>{const a=t.y+i,r=t.x+n;return!e||a<0&&r>=0&&r<=s[0].length-1||a in s&&r in s[a]&&!s[a][r]}))))}}class L{constructor(e,t,s){this.filled=e,this.filledGameOver=t,this.empty=s}}class I{constructor(e,t=!0,s=new L("#007400","#780000","#fff"),i=new L("#007400","#780000",null),n=new L("#b8e5e3",null,null)){this.containerElement=e,this.renderProjectionFigures=t,this.matrixCellColors=s,this.fallingFigureCellColors=i,this.projectionFigureCellColors=n}}class q{constructor(e,t){this.filled=e,this.empty=t}}class A{constructor(e,s,i){this.renderSettings=e,this.commandBus=s,this.eventBus=i,this.cellsHtmlElementsMap=[],s.addHandler(t.InitGame,this.initHandler.bind(this)),s.addHandler(t.Render,this.renderCommandHandler.bind(this))}initHandler(t){this.table=A.createHtmlElement('<div style="float: left; display: table; border-collapse: collapse"></div>'),this.cellsHtmlElementsMap=[];for(let e=0;e<t.gameData.settings.fieldHeight;e++){let s=A.createHtmlElement('<div style="display: table-row"></div>');this.cellsHtmlElementsMap[e]=[];for(let i=0;i<t.gameData.settings.fieldWidth;i++){let t=A.createHtmlElement('<div style="display: table-cell; border: 1px solid #ccc; width: 20px; height: 20px"></div>');this.cellsHtmlElementsMap[e][i]=t,s.appendChild(t)}this.table.appendChild(s)}this.renderSettings.containerElement.innerHTML="",this.renderSettings.containerElement.appendChild(this.table),this.scoreDisplay=A.createHtmlElement('<div style="float: left; font-family: \'Helvetica Neue\', sans-serif; font-size: 20px; margin-left: 15px;">\n                Level: <span id="level"></span><br>\n                Score: <span id="score"></span><br>\n                Combo: <span id="combo"></span><br>\n                Figures fallen: <span id="figures_fallen"></span><br>\n                Lines squashed: <span id="lines_squashed"></span><br>\n            </div>'),this.renderSettings.containerElement.appendChild(this.scoreDisplay),this.renderSettings.containerElement.appendChild(A.createHtmlElement('<div style="clear: both"></div>')),this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this)),this.eventBus.on(e.GameOver,this.onGameOver.bind(this)),this.eventBus.on(e.FiguresMoved,this.onFiguresMoved.bind(this))}onFiguresMoved(e){this.renderState(e.gameData)}onFallTickProcessed(e){this.renderState(e.gameData)}onGameOver(e){this.renderState(e.gameData)}renderCommandHandler(e){this.renderState(e.gameData)}renderState(e){this.repaintMatrixCells(e.matrix,new b(0,0),e),this.renderSettings.renderProjectionFigures&&this.renderFallingFiguresProjection(e),this.renderFallingFigures(e),this.renderStats(e)}renderFallingFigures(e){e.fallingFigures.forEach((t=>{this.repaintFallingFiguresCells(t,e)}))}renderFallingFiguresProjection(e){e.fallingFigures.forEach((t=>{const s=t.figure.getTurn(t.turnState),i=t.position.x;let n=t.position.y;for(;R.canFigureBePlaced(s,new b(i,n+1),e.matrix);)n++;this.repaintProjectionFiguresCells(s,new b(i,n),e)}))}repaintMatrixCells(e,t,s){let i;i=s.isGameOver?new q(this.renderSettings.matrixCellColors.filledGameOver,this.renderSettings.matrixCellColors.empty):new q(this.renderSettings.matrixCellColors.filled,this.renderSettings.matrixCellColors.empty),this.repaintCells(e,t,i)}repaintFallingFiguresCells(e,t){let s;s=t.isGameOver?new q(this.renderSettings.fallingFigureCellColors.filledGameOver,this.renderSettings.fallingFigureCellColors.empty):new q(e.color||this.renderSettings.fallingFigureCellColors.filled,this.renderSettings.fallingFigureCellColors.empty),this.repaintCells(e.figure.getTurn(e.turnState),e.position,s)}repaintProjectionFiguresCells(e,t,s){let i;i=s.isGameOver?new q(this.renderSettings.projectionFigureCellColors.filledGameOver,this.renderSettings.projectionFigureCellColors.empty):new q(this.renderSettings.projectionFigureCellColors.filled,this.renderSettings.projectionFigureCellColors.empty),this.repaintCells(e,t,i)}repaintCells(e,t,s){e.forEach(((e,i)=>{e.forEach(((e,n)=>{const a=i+t.y,r=n+t.x;if(a in this.cellsHtmlElementsMap&&r in this.cellsHtmlElementsMap[a]){const t=e?s.filled:s.empty;null!==t&&(this.cellsHtmlElementsMap[a][r].style.background=t)}}))}))}renderStats(e){const t=document.getElementById("level"),s=document.getElementById("score"),i=document.getElementById("combo"),n=document.getElementById("figures_fallen"),a=document.getElementById("lines_squashed");null!==t&&(t.innerHTML=e.level.toString()),null!==s&&(s.innerHTML=e.score.toString()),null!==i&&(i.innerHTML=e.combo.toString()),null!==n&&(n.innerHTML=e.stats.figuresFallen.toString()),null!==a&&(a.innerHTML=e.stats.linesSquashed.toString())}static createHtmlElement(e){let t=document.createElement("div");if(t.innerHTML=e,t.children.length>1||null===t.firstElementChild)throw"The HTML must contain only one child";if(!(t.firstElementChild instanceof HTMLElement))throw"Something went wrong while trying to get HTMLElement child from div";return t.firstElementChild}}class j{constructor(){this.transferredFigures=[],this.isGameOver=!1}}class N{constructor(e,s){this.commandBus=e,this.eventBus=s,this.commandBus.addHandler(t.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(t.FiguresFallDown,this.processDropFiguresCommand.bind(this))}processFiguresFallTickCommand(e){const t=this.fallFiguresForOneCell(e.gameData);let s=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new m(e.gameData)),this.eventBus.fire(new i(e.gameData,t.transferredFigures,s,0))}processDropFiguresCommand(e){let t=new j,s=0;for(;e.gameData.fallingFigures.length>0;){const i=this.fallFiguresForOneCell(e.gameData);t.transferredFigures.push(...i.transferredFigures),t.isGameOver=t.isGameOver||i.isGameOver,s++}let n=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new m(e.gameData)),this.eventBus.fire(new i(e.gameData,t.transferredFigures,n,s-1))}fallFiguresForOneCell(e){let t=new j;return e.fallingFigures.forEach(((s,i)=>{if(this.figureCanFall(e.matrix,s))s.position.y++;else{let n=this.transferFigureToMatrix(e.matrix,s);t.transferredFigures.push(...e.fallingFigures.splice(i,1)),t.isGameOver=t.isGameOver||n}})),t}figureCanFall(e,t){return R.canFigureBePlaced(t.figure.getTurn(t.turnState),new b(t.position.x,t.position.y+1),e)}transferFigureToMatrix(e,t){let s=!1;return t.figure.getTurn(t.turnState).forEach(((i,n)=>{i.forEach(((i,a)=>{if(!i)return;let r=t.position.x+a,l=t.position.y+n;l in e&&r in e[l]&&!e[l][r]?e[l][r]=!0:s=!0}))})),s}squashLines(e){let t=[];return e.forEach(((e,s)=>{e.every((e=>e))&&t.push(s)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t}}class X{static ToArray(e){return Object.keys(e).map((e=>Number.parseInt(e))).filter((e=>!Number.isNaN(e)))}static GetRandom(e){const t=X.ToArray(e);return t[Math.floor(Math.random()*t.length)]}}class z{constructor(e,s){this.eventBus=e,this.commandBus=s,this.commandBus.addHandler(t.InitGame,this.initHandler.bind(this))}initHandler(t){this.eventBus.on(e.FallingTickProcessed,this.processOnFallTick.bind(this))}processOnFallTick(e){this.addFigure(e.gameData)}addFigure(e){if(e.fallingFigures.length>0||e.isGameOver)return;const t=Math.floor(Math.random()*e.settings.figures.length),i=e.settings.figures[t],n=X.GetRandom(s),a=i.getTurn(n),l=Math.max(...a.map((e=>e.length))),o=new b(Math.ceil(e.settings.fieldWidth/2-l/2)-1,-a.length),c=new E(i,o,n);e.fallingFigures.push(c),this.eventBus.fire(new r(e,[c]))}}class W{constructor(e,s){this.commandBus=e,this.eventBus=s,this.commandBus.addHandler(t.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(t.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(t.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(t.TurnClockwise,this.processTurnClockwiseCommand.bind(this))}processMoveLeftCommand(e){e.gameData.fallingFigures.forEach((t=>{R.canFigureBePlaced(t.figure.getTurn(t.turnState),new b(t.position.x-1,t.position.y),e.gameData.matrix)&&t.position.x--})),this.eventBus.fire(new a(e.gameData))}processMoveRightCommand(e){e.gameData.fallingFigures.forEach((t=>{R.canFigureBePlaced(t.figure.getTurn(t.turnState),new b(t.position.x+1,t.position.y),e.gameData.matrix)&&t.position.x++})),this.eventBus.fire(new a(e.gameData))}processTurnClockwiseCommand(e){const t=X.ToArray(s);e.gameData.fallingFigures.forEach((s=>{let i=s.turnState+1;i in t||(i=t[0]),R.canFigureBePlaced(s.figure.getTurn(i),s.position,e.gameData.matrix)&&(s.turnState=i)})),this.eventBus.fire(new a(e.gameData))}processMoveDownCommand(e){this.commandBus.run(new u(e.gameData))}}class _{constructor(e){this.commandBus=e,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(e){window.onkeydown=t=>{"ArrowLeft"===t.code?this.commandBus.run(new g(e.gameData)):"ArrowRight"===t.code?this.commandBus.run(new p(e.gameData)):"ArrowUp"===t.code?this.commandBus.run(new f(e.gameData)):"ArrowDown"===t.code||"ArrowDown"===t.code?this.commandBus.run(new w(e.gameData)):"Space"===t.code&&this.commandBus.run(new v(e.gameData))}}}class U{constructor(e,s,i=new Map([[1,100],[2,300],[3,500],[4,800]]),n=50){this.commandBus=e,this.eventBus=s,this.squashedRowsRewardThresholdsMap=i,this.rewardOnCombo=n,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){if(e.squashedLines.length<0)return;let t=0;this.squashedRowsRewardThresholdsMap.forEach(((s,i)=>{i>e.squashedLines.length||(t=s)})),e.gameData.score+=t*e.gameData.level+this.rewardOnCombo*Math.max(0,e.gameData.combo-1)*e.gameData.level+2*e.droppedLines*e.gameData.level}}class Y{constructor(e,s,i,n){this.eventBus=e,this.commandBus=s,this.levelIncreaseOnSquashedRowsNumber=i,this.maxLevels=n,this.squashedRowsCounter=0,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){0!==e.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,e.gameData.level=Math.min(this.maxLevels,e.gameData.level+1)))}}class J{constructor(e,s){this.commandBus=e,this.eventBus=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){e.transferredToMatrixFigures.length<=0||(e.squashedLines.length>0?e.gameData.combo+=1:e.gameData.combo=0)}}class K{constructor(e){this.delayMs=e}getDelayForNextTickMs(e){return this.delayMs}}class Q{constructor(e,s){this.commandBus=e,this.eventBus=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){e.gameData.stats.figuresFallen+=e.transferredToMatrixFigures.length,e.gameData.stats.linesSquashed+=e.squashedLines.length}}class V{constructor(e=new l,t=new F,s=new P(new K(2e3),e,t),i=new W(t,e),n=new _(t),a=new N(t,e),r=new z(e,t),o=new Y(e,t,8,15),c=new J(t,e),h=new U(t,e),u=new Q(t,e),m=new A(new I(document.body),t,e),d=k.makeSimple()){this.eventBus=e,this.commandBus=t,this.gameController=s,this.movingHandler=i,this.movingController=n,this.fallingFiguresProcessor=a,this.figuresSpawner=r,this.levelCounter=o,this.comboCounter=c,this.scoreCounter=h,this.statsCounter=u,this.tableRenderer=m,this.gameData=d}start(e){e=e||k.makeSimple(),this.commandBus.run(new o(e)),this.commandBus.run(new c(e))}resume(){this.commandBus.run(new c(this.gameData))}pause(){this.commandBus.run(new h(this.gameData))}}class Z{constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class ${constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class ee{constructor(e){this.target=e}get persisted(){return!1}}class te{get persisted(){return!1}}class se{constructor(e,t){this.figuresTargetStates=e,this.placingSteps=t}}class ie{constructor(e,t){this.isOpened=e,this.cells=t}}class ne{static collectHoles(e){let t=[];class s{constructor(e=[],t=[],s=[],i=!1,n=!1){this.cells=e,this.previousRowOpenXs=t,this.currentRowOpenXs=s,this.isOpened=i,this.continues=n}}let i=[],n=new Set;return e.forEach(((a,r)=>{i.forEach((e=>e.continues=!1)),a.forEach(((t,a)=>{if(t)n.add(a);else if(n.has(a)){let t=i.find((e=>e.previousRowOpenXs.some((e=>e===a))||e.currentRowOpenXs.length>0&&e.currentRowOpenXs[e.currentRowOpenXs.length-1]===a));void 0===t&&(t=new s,i.push(t)),t.currentRowOpenXs.push(a),t.cells.push(new b(a,r)),t.continues=!0,t.isOpened=t.isOpened||this.doesTheWayOutFromHoleExists(e,new b(a,r),n,[[!0,!0]])}}));let l=[];i.forEach(((s,i)=>{s.continues&&(s.previousRowOpenXs=s.currentRowOpenXs,s.currentRowOpenXs=[]),s.continues&&r!=e.length-1||(t.push(new ie(s.isOpened,s.cells)),l.push(i))})),l.reverse().forEach((e=>i.splice(e,1)))})),t}static doesTheWayOutFromHoleExists(e,t,s,i){return void 0!==this.findTheWayOutFromHole(e,t,s,i)}static findTheWayOutFromHole(e,t,s,i){s instanceof Map&&(s=ne.convertCoveredColumnsToXs(s));for(let n=t.x-1;n>=0&&R.canFigureBePlaced(i,new b(n,t.y),e);n--){let e=!0;for(let t=n+i[0].length-1;t>=n;t--)if(s.has(t)){e=!1;break}if(e)return n}for(let n=t.x+1;n<e[0].length&&R.canFigureBePlaced(i,new b(n,t.y),e);n++){let e=!0;for(let t=n;t<n+i[0].length;t++)if(s.has(t)){e=!1;break}if(e)return n}}static collectCoveredColumnsXs(e,t){return ne.convertCoveredColumnsToXs(ne.collectCoveredColumns(e,t))}static convertCoveredColumnsToXs(e){return new Set([...e.keys()])}static collectCoveredColumns(e,t){let s=new Map;return e.some(((i,n)=>(i.forEach(((e,t)=>{e&&s.set(t,n)})),void 0!==t&&n>=t||s.size==e[0].length))),s}}class ae{constructor(e,t,s,i,n,a){this.gameData=e,this.originalHoles=t,this.originalCoveredColumns=s,this.imaginableMatrix=i,this.imaginableCoveredColumns=n,this.squashedLinesCount=a}}class re extends Error{}class le extends re{}class oe{constructor(e,t){this.commandBus=e,this.scoreCalculator=t}resolve(e){if(0===e.fallingFigures.length)return;if(1!==e.fallingFigures.length)throw new le;const t=e.fallingFigures[0];let s=-1/0,i=new se(new Map,[]);this.processStates(e,((e,n,a)=>{n>s&&(s=n,i=new se(new Map([[t,e]]),a))}));let n="debugMode"in window&&window.debugMode,a=i.figuresTargetStates.get(t);if(n&&void 0!==a){let t=structuredClone(e);a.color="#f00",t.fallingFigures=[a],this.commandBus.run(new d(t)),this.processStates(e,void 0,(e=>{e.color="#00f",t.fallingFigures=[e],this.commandBus.run(new d(t))}))}return i}processStates(e,t,i){const n=e.fallingFigures[0];let a=X.ToArray(s);for(;a[0]!==n.turnState;)a.unshift(a.pop());let r=new Map,l=new Set;a.forEach((e=>{let t=n.figure.getTurn(e),s=t.map((e=>e.map((e=>e?"1":"0")).join())).join("\n");l.has(s)||(l.add(s),r.set(e,t))}));const o=ne.collectHoles(e.matrix),c=ne.collectCoveredColumns(e.matrix);r.forEach(((s,a)=>{for(let r=0;r<e.settings.fieldWidth-s[0].length+1;r++){let[l,h]=this.imagineFigureDrop(e.matrix,s,r),u=new b(r,l),m=this.squashLines(h),d=new E(n.figure,u,a);i&&i(d);let g=ne.collectCoveredColumns(h),p=new ae(e,o,c,h,g,m),f=this.scoreCalculator.calculateScore(p),w=this.makeSimplePlacingSteps(d);t&&t(d,f,w)}})),o.filter((e=>e.isOpened&&e.cells.length>0)).forEach((s=>{let a=e.settings.fieldHeight,l=e.settings.fieldWidth,h=-1,u=-1;s.cells.forEach((e=>{a=Math.min(a,e.y),l=Math.min(l,e.x),h=Math.max(h,e.y),u=Math.max(u,e.x)})),r.forEach(((s,r)=>{for(let m=Math.max(a-s.length+1,0);m<=h;m++)for(let a=Math.max(l-s[0].length+1,0);a<=u;a++){let l=new b(a,m),h=new E(n.figure,l,r);if(i&&i(h),R.canFigureBePlaced(s,l,e.matrix)){let i=this.makePushInPlacingSteps(e,h,c);if(void 0!==i){let n=this.imagineFigurePlacing(e.matrix,s,l),a=this.squashLines(n),r=ne.collectCoveredColumns(n),u=new ae(e,o,c,n,r,a),m=this.scoreCalculator.calculateScore(u);t&&t(h,m,i)}}}}))}))}squashLines(e){let t=[];return e.forEach(((e,s)=>{e.every((e=>e))&&t.push(s)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t.length}imagineFigureDrop(e,t,s){let i=-t.length;for(;R.canFigureBePlaced(t,new b(s,i+1),e);)i++;return[i,this.imagineFigurePlacing(e,t,new b(s,i))]}imagineFigurePlacing(e,t,s){let i=structuredClone(e);return t.forEach(((e,t)=>{e.forEach(((e,n)=>{const a=s.y+t,r=s.x+n;a in i&&r in i[a]&&e&&(i[a][r]=!0)}))})),i}makePushInPlacingSteps(e,t,s){let i=t.figure.getTurn(t.turnState),n=ne.findTheWayOutFromHole(e.matrix,t.position,s,i);if(void 0!==n)return[new Z(t.turnState,!0),new $(n,!1),new ee(t.position.y),new $(t.position.x,!0),new te]}makeSimplePlacingSteps(e){return[new Z(e.turnState,!0),new $(e.position.x,!0),new te]}}class ce{constructor(e,t=.8){this.initialDelayMs=e,this.base=t}getDelayForNextTickMs(e){return Math.pow(this.base-.007*(e.level-1),e.level-1)*this.initialDelayMs}}class he extends Error{}class ue extends he{}class me extends he{}class de extends he{}class ge{constructor(e){this.step=e,this.isPerformed=!1}}class pe{constructor(e,t){this.figures=e,this.steps=t}static fromFigurePlacingResult(e){if(void 0!==e)return new pe(e.figuresTargetStates,e.placingSteps.map((e=>new ge(e))))}}class fe{constructor(e,t=new ce(100,.9)){this.commandBus=e,this.timingsHandler=t,this.nextMoveTimeoutId=setTimeout((()=>{})),this.gameData=k.makeSimple()}place(e,t){this.gameData=e,this.targetState=pe.fromFigurePlacingResult(t),clearTimeout(this.nextMoveTimeoutId),this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData))}processTick(){if(0===this.gameData.fallingFigures.length)return;if(1!==this.gameData.fallingFigures.length)throw new ue;if(void 0===this.targetState)return;const e=this.gameData.fallingFigures[0],t=this.targetState.figures.get(e);if(t){if(e.figure!==t.figure)throw new me("Both of the original and the target falling figures must have the same figure in it.");this.targetState.steps.every((t=>{if(t.isPerformed&&!t.step.persisted)return!0;let s=t.step;if(s instanceof Z){if(e.turnState!==s.target)return this.commandBus.run(new f(this.gameData)),!1;t.isPerformed=!0}else if(s instanceof $){if(e.position.x!==s.target)return e.position.x>s.target?this.commandBus.run(new g(this.gameData)):this.commandBus.run(new p(this.gameData)),!1;t.isPerformed=!0}else if(s instanceof ee){if(e.position.y<s.target)return this.commandBus.run(new w(this.gameData)),!1;t.isPerformed=!0}else{if(!(s instanceof te))throw new de("Unknown step "+s.constructor.name);this.commandBus.run(new v(this.gameData)),t.isPerformed=!0}return t.isPerformed}))||(this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),10))}}}class we{constructor(e){this.calculators=e}calculateScore(e){return this.calculators.reduce(((t,s)=>t+s.calculateScore(e)),0)}}class ve{calculateScore(e){return 5*e.squashedLinesCount}}class Fe{calculateScore(e){const t=e.gameData.settings.fieldHeight,s=e.gameData.settings.fieldWidth,[i,n]=this.calculateFillableSpace(e.imaginableMatrix,s);let a=0;return n>5&&(a=-i*Math.pow(i,i/(t*s))),a}calculateFillableSpace(e,t){let s=new Set,i=0,n=0;return e.every((e=>(e.forEach(((e,t)=>{e&&s.add(t)})),e.forEach(((e,t)=>{!e&&s.size>0&&!s.has(t)&&i++})),s.size<t&&(s.size>0&&n++,!0)))),[i,n]}}class Te{calculateScore(e){const[t,s]=this.calculateHolesAndCoveredHeight(e.imaginableMatrix,e.gameData.matrix),i=e.originalHoles.length-t;let n;return n=0===s||0===t?i>0?150*i:70*i:(i>0?150*i:70*i)-s*Math.pow(s,s/(e.gameData.settings.fieldHeight*t))*5,n}calculateHolesAndCoveredHeight(e,t){const[s,i]=this.calculateTheHighestHoleCoveredY(t);let n=new Map,a=0,r=0;return e.forEach(((e,t)=>{e.forEach(((e,l)=>{e&&!n.has(l)&&n.set(l,t);let o=n.get(l);void 0===o||e||(r++,void 0!==s&&void 0!==i&&(t<s?a+=t-o:o<i&&(a+=i-o)))}))})),[r,a]}calculateTheHighestHoleCoveredY(e){let t,s,i=new Map;return e.some(((e,n)=>e.some(((e,a)=>{e&&!i.has(a)&&i.set(a,n);let r=i.get(a);return void 0!==r&&!e&&(s=n,t=r,!0)})))),[s,t]}}class Ce{calculateScore(e){const t=this.calculateHeight(e.imaginableMatrix);return-t*Math.pow(t,t/e.gameData.settings.fieldHeight)*3}calculateHeight(e){let t=-1;return e.every(((e,s)=>!!e.every((e=>!e))&&(t=s,!0))),e.length-t-1}}class De{calculateScore(e){const[t,s]=this.calculateTunnelsExceptUncovered(e.imaginableMatrix,e.gameData.matrix);let i;return i=0===s?0:70*-s-t*Math.pow(t,t/(e.gameData.settings.fieldHeight*s))*7,i}calculateTunnelsExceptUncovered(e,t){let s=new Set;t.every((e=>{e.forEach(((e,t)=>{e&&s.add(t)}))}));let i=new Set,n=new Map;const a=e[0].length;e.every(((e,t)=>(e.forEach(((e,t)=>{e&&i.add(t)})),e.forEach(((e,t)=>{e||i.has(t)||s.has(t)||0!==t&&!i.has(t-1)||t!==a-1&&!i.has(t+1)||n.set(t,(n.get(t)||0)+1)})),i.size<a)));let r=0,l=0;return n.forEach((e=>{e>=3&&(r+=e,l++)})),[r,l]}}class Se{constructor(e,s,i=new oe(s,new we([new Fe,new Ce,new Te,new ve,new De])),n=new fe(s)){this.eventBus=e,this.commandBus=s,this.fallingFigurePlacingResolver=i,this.fallingFiguresPlacer=n,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FiguresSpawned,this.onFiguresSpawned.bind(this))}onFiguresSpawned(e){const t=this.fallingFigurePlacingResolver.resolve(e.gameData);this.fallingFiguresPlacer.place(e.gameData,t)}}document.addEventListener("DOMContentLoaded",(()=>{const e=new l,t=new F;let s=new V(e,t);new Se(e,t),s.start()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UWthLGlCQUFpQnJhLEdBQ3JCLE1BQU1zYSxFQUE2Qm5hLEtBQUtnYSw2QkFBNkIvRixRQUFRcFUsRUFBTWpCLFVBQ25Gb0IsS0FBS2lhLHFCQUFxQjdDLE1BQU12WCxFQUFNakIsU0FBVXViLEVBQ3BELEVDakNKblAsU0FBU29QLGlCQUFpQixvQkFBb0IsS0FDMUMsTUFBTW5ULEVBQVcsSUFBSXhILEVBQ2Z5SCxFQUFhLElBQUkvRSxFQUN2QixJQUFJa1ksRUFBUyxJQUFJdEssRUFBYTlJLEVBQVVDLEdBQzNCLElBQUk2UyxHQUFhOVMsRUFBVUMsR0FFeENtVCxFQUFPMUosT0FBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9FdmVudEJ1cy9FdmVudEJ1cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZpZ3VyZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Db21tb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9HYW1lQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvUmVuZGVyZXIvVGFibGVSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yL1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3Nvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1V0aWxzL0VudW1IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9GaWd1cmVzU3Bhd25lci9BbHdheXNPbmVGaWd1cmVTcGF3bmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvTW92aW5nSGFuZGxlci9Nb3ZpbmdIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvTW92aW5nQ29udHJvbGxlci9Nb3ZpbmdDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvU2NvcmVDb3VudGVyL0ZhbGxUaWNrU2NvcmVDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvTGV2ZWxDb3VudGVyL1NxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbWJvQ291bnRlci9Db21ib0NvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9UaW1pbmdzSGFuZGxlci9Db25zdFRpbWluZ3NIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvU3RhdHNDb3VudGVyL1N0YXRzQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RldHJpc0ZhY2FkZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1V0aWxzL0hvbGVzSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9TY29yZUNhbGN1bGF0b3IvQ2FsY3VsYXRvckFnZ3JlZ2F0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9TcXVhc2hlZFJvd3MvU3F1YXNoZWRSb3dzQ2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9GaWxsYWJsZUNlbGxzL0ZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL0hvbGVzL0hvbGVzVjFDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL0ZpbGxlZEhlaWdodC9GaWxsZWRIZWlnaHRDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL1R1bm5lbHMvVHVubmVsc0NhbGN1bGF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGVudW0gRXZlbnRUeXBlIHtcbiAgICBGYWxsaW5nVGlja1Byb2Nlc3NlZCxcbiAgICBHYW1lT3ZlcixcbiAgICBGaWd1cmVzTW92ZWQsXG4gICAgTGV2ZWxVcCxcbiAgICBGaWd1cmVzU3Bhd25lZCxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudCB7XG4gICAgZ2FtZURhdGE6IEdhbWVEYXRhO1xuXG4gICAgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZTtcbn1cblxuZXhwb3J0IGNsYXNzIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIHB1YmxpYyB0cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdLFxuICAgICAgICBwdWJsaWMgc3F1YXNoZWRMaW5lczogbnVtYmVyW10sXG4gICAgICAgIHB1YmxpYyBkcm9wcGVkTGluZXM6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZU92ZXJFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuR2FtZU92ZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc01vdmVkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZpZ3VyZXNNb3ZlZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMZXZlbFVwRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkxldmVsVXA7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc1NwYXduZWRFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIG5ld0ZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuRmlndXJlc1NwYXduZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRXZlbnRCdXMge1xuICAgIHByaXZhdGUgaGFuZGxlcnM6IE1hcDxFdmVudFR5cGUsICgoLi4uXzogYW55KSA9PiB2b2lkKVtdPiA9IG5ldyBNYXAoKTtcblxuICAgIHB1YmxpYyBvbihldmVudDogRXZlbnRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb2ZmKGV2ZW50OiBFdmVudFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZmlyZShldmVudFBheWxvYWQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50UGF5bG9hZC5nZXRFdmVudFR5cGUoKSkgfHwgW107XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7aGFuZGxlcihldmVudFBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgZW51bSBDb21tYW5kVHlwZSB7XG4gICAgSW5pdEdhbWUsXG4gICAgUmVzdW1lR2FtZSxcbiAgICBQYXVzZUdhbWUsXG4gICAgRmlndXJlc0ZhbGxUaWNrLFxuICAgIEdhbWVPdmVyLFxuICAgIFJlbmRlcixcbiAgICBNb3ZlTGVmdCxcbiAgICBNb3ZlUmlnaHQsXG4gICAgVHVybkNsb2Nrd2lzZSxcbiAgICBNb3ZlRG93bixcbiAgICBGaWd1cmVzRmFsbERvd24sXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZCB7XG4gICAgZ2FtZURhdGE6IEdhbWVEYXRhO1xuXG4gICAgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGU7XG59XG5cbmV4cG9ydCBjbGFzcyBJbml0R2FtZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuSW5pdEdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVzdW1lR2FtZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUmVzdW1lR2FtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQYXVzZUdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlBhdXNlR2FtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVzRmFsbFRpY2tDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsVGljaztcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lT3ZlckNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuR2FtZU92ZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVuZGVyQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5SZW5kZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZUxlZnRDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVMZWZ0O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVSaWdodENvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZVJpZ2h0O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFR1cm5DbG9ja3dpc2VDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlR1cm5DbG9ja3dpc2U7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZURvd25Db21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVEb3duO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERyb3BGaWd1cmVzQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJ1cyB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPENvbW1hbmRUeXBlLCAoKHBheWxvYWQ6IENvbW1hbmQpID0+IHZvaWQpW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIGFkZEhhbmRsZXIoZXZlbnQ6IENvbW1hbmRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSGFuZGxlcihldmVudDogQ29tbWFuZFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuKHBheWxvYWQ6IENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQocGF5bG9hZC5nZXRDb21tYW5kVHlwZSgpKSB8fCBbXTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtoYW5kbGVyKHBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gRmlndXJlVHVyblN0YXRlIHtcbiAgICBPbmUsXG4gICAgVHdvLFxuICAgIFRocmVlLFxuICAgIEZvdXIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlndXJlIHtcbiAgICAvKipcbiAgICAgKiBBbnkgZmlndXJlIG11c3QgYmUgYWJsZSB0byB0dXJuIDQgdGltZXMgaW4gMiBkaW1lbnNpb25zLlxuICAgICAqIEFsbCB0dXJucyBhcmUgY2xvY2t3aXNlLlxuICAgICAqL1xuICAgIGdldFR1cm4oZmlndXJlVHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUpOiBib29sZWFuW11bXTtcbiAgICBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RGaWd1cmUgaW1wbGVtZW50cyBGaWd1cmV7XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW107XG5cbiAgICBnZXRUdXJuKGZpZ3VyZVR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBzd2l0Y2ggKGZpZ3VyZVR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuT25lOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuVHdvOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKTtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLlRocmVlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRoaXJkVHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuRm91cjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3J0aFR1cm4oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdpdmVzIGFuIGVhc3kgd2F5IHRvIGRlZmluZSBmaWd1cmVzIGZvciB0ZXRyaXMuXG4gKiBKdXN0IGltcGxlbWVudCB0aGUgZ2V0RmlndXJlIG1ldGhvZCBhbmQgcmV0dXJuIGZpZ3VyZSBsaWtlIHRoaXM6XG4gKiBgYGAodHMpXG4gKiBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAqICAgICByZXR1cm4gW1xuICogICAgICAgICBbdHJ1ZSwgIHRydWUsIHRydWVdLFxuICogICAgICAgICBbZmFsc2UsIHRydWUsIGZhbHNlXSxcbiAqICAgICAgICAgW3RydWUsICB0cnVlLCB0cnVlXSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKlxuICogT3IgZGVmaW5lIGl0IGxpa2UgdGhpcyBmb3IgbW9yZSB2aXN1YWwgcHJlc2VudGF0aW9uOlxuICogYGBgKHRzKVxuICogcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gKiAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgICAgIFwiLSMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUgZXh0ZW5kcyBBYnN0cmFjdEZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldEZpZ3VyZSgpOiBib29sZWFuW11bXTtcblxuICAgIHByaXZhdGUgZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIGxldCBmaWd1cmUgPSB0aGlzLmdldEZpZ3VyZSgpO1xuICAgICAgICBsZXQgdGhlTG9uZ2VzdFJvd1NpemUgPSBmaWd1cmUucmVkdWNlKFxuICAgICAgICAgICAgKHByZXZpb3VzLCBjdXJyZW50KSA9PiBNYXRoLm1heChwcmV2aW91cywgY3VycmVudC5sZW5ndGgpLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmlndXJlLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsTGVuZ3RoID0gcm93Lmxlbmd0aDtcbiAgICAgICAgICAgIHJvdy5sZW5ndGggPSB0aGVMb25nZXN0Um93U2l6ZTtcbiAgICAgICAgICAgIHJldHVybiByb3cuZmlsbChmYWxzZSwgb3JpZ2luYWxMZW5ndGggLSAxLCB0aGVMb25nZXN0Um93U2l6ZSAtIDEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlID0gdGhpcy5nZXROb3JtYWxpemVkRmlndXJlKCk7XG4gICAgICAgIGxldCB0dXJuZWRGaWd1cmU6IGJvb2xlYW5bXVtdID0gW107XG4gICAgICAgIGxldCBvcmlnaW5hbEZpZ3VyZUhlaWdodCA9IG9yaWdpbmFsRmlndXJlLmxlbmd0aDtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlV2lkdGggPSBvcmlnaW5hbEZpZ3VyZVswXS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgb3JpZ2luYWxGaWd1cmVXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICB0dXJuZWRGaWd1cmVbeF0gPSBuZXcgQXJyYXkob3JpZ2luYWxGaWd1cmVIZWlnaHQpLmZpbGwoZmFsc2UpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBvcmlnaW5hbEZpZ3VyZUhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdHVybmVkRmlndXJlW3hdW29yaWdpbmFsRmlndXJlSGVpZ2h0IC0geSAtIDFdID0gb3JpZ2luYWxGaWd1cmVbeV1beF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR1cm5lZEZpZ3VyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RUdXJuKCkucmV2ZXJzZSgpLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKS5yZXZlcnNlKCkubWFwKHJvdyA9PiByb3cucmV2ZXJzZSgpKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBURmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmlnaHRMRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItLSNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGVmdExGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIiMtLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTcXVhcmVGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RpY2tGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExaRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBSWkZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIi0jI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RmlndXJlLCBGaWd1cmVUdXJuU3RhdGUsIExlZnRMRmlndXJlLCBMWkZpZ3VyZSwgUmlnaHRMRmlndXJlLCBSWkZpZ3VyZSwgU3F1YXJlRmlndXJlLCBTdGlja0ZpZ3VyZSwgVEZpZ3VyZX0gZnJvbSBcIi4vRmlndXJlc1wiO1xuXG4vKipcbiAqIHggZm9yIGhvcml6b250YWwgcG9zaXRpb25pbmdcbiAqIHkgZm9yIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBDb29yZGluYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHg6IG51bWJlcixcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsaW5nRmlndXJlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZ3VyZTogRmlndXJlLFxuICAgICAgICBwdWJsaWMgcG9zaXRpb246IENvb3JkaW5hdGUsXG4gICAgICAgIHB1YmxpYyB0dXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHVibGljIGNvbG9yOiBzdHJpbmd8dW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWVsZFdpZHRoOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBmaWVsZEhlaWdodDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgZmlndXJlczogRmlndXJlW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgU3RhdHMge1xuICAgIHB1YmxpYyBmaWd1cmVzRmFsbGVuID0gMDtcbiAgICBwdWJsaWMgbGluZXNTcXVhc2hlZCA9IDA7XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lRGF0YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBpc0dhbWVPdmVyOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBmYWxsaW5nRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBtYXRyaXg6IGJvb2xlYW5bXVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBuZXh0VGlja1RpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgfSksXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nczogR2FtZVNldHRpbmdzLFxuICAgICAgICBwdWJsaWMgbGV2ZWw6IG51bWJlciA9IDEsXG4gICAgICAgIHB1YmxpYyBzY29yZTogbnVtYmVyID0gMCxcbiAgICAgICAgcHVibGljIGNvbWJvOiBudW1iZXIgPSAwLFxuICAgICAgICBwdWJsaWMgc3RhdHM6IFN0YXRzID0gbmV3IFN0YXRzKCksXG4gICAgKSB7fVxuXG4gICAgc3RhdGljIG1ha2VTaW1wbGUod2lkdGg6IG51bWJlciA9IDEwLCBoZWlnaHQ6IG51bWJlciA9IDIwKTogR2FtZURhdGEge1xuICAgICAgICByZXR1cm4gbmV3IEdhbWVEYXRhKFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgbmV3IEFycmF5KGhlaWdodCkuZmlsbChbXSlcbiAgICAgICAgICAgICAgICAubWFwKF8gPT4gbmV3IEFycmF5KHdpZHRoKS5maWxsKGZhbHNlKSksXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IEdhbWVTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmlnaHRMRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBMZWZ0TEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgU3F1YXJlRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTdGlja0ZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgTFpGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJaRmlndXJlKCksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc01vdmVkRXZlbnQsIEdhbWVPdmVyRXZlbnR9IGZyb20gXCIuL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlbmRlckNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgR2FtZUNvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgZ2FtZURhdGE6IEdhbWVEYXRhID0gR2FtZURhdGEubWFrZVNpbXBsZSgpO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBwcml2YXRlIHRpbWluZ3NIYW5kbGVyOiBUaW1pbmdzSGFuZGxlcixcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5SZXN1bWVHYW1lLCB0aGlzLnJlc3VtZUdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5QYXVzZUdhbWUsIHRoaXMucGF1c2VHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuR2FtZU92ZXIsIHRoaXMuZ2FtZU92ZXJIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gY29tbWFuZC5nYW1lRGF0YTtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc3VtZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFJlc3VtZUdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhbGxUaWNrKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXVzZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFBhdXNlR2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGNvbW1hbmQuZ2FtZURhdGE7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnYW1lT3ZlckhhbmRsZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgR2FtZU92ZXJFdmVudCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmYWxsVGljaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgIHRoaXMuZmFsbFRpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ0NoZWNrZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgY2FuRmlndXJlQmVQbGFjZWQodGFyZ2V0RmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0UG9zaXRpb246IENvb3JkaW5hdGUsIG1hdHJpeDogYm9vbGVhbltdW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldEZpZ3VyZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcm93LmV2ZXJ5KCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0gdGFyZ2V0UG9zaXRpb24ueSArIHk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRQb3NpdGlvbi54ICsgeDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXZhbHVlXG4gICAgICAgICAgICAgICAgICAgIHx8IChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxZIDwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPj0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPD0gbWF0cml4WzBdLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgKSB8fCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsWSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIG1hdHJpeFtyZWFsWV1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFtYXRyaXhbcmVhbFldW3JlYWxYXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZCwgUmVuZGVyQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50LCBHYW1lT3ZlckV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGxlZDogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBmaWxsZWRHYW1lT3Zlcjogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBlbXB0eTogc3RyaW5nfG51bGwsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlclNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBwdWJsaWMgcmVuZGVyUHJvamVjdGlvbkZpZ3VyZXM6IGJvb2xlYW4gPSB0cnVlLFxuICAgICAgICBwdWJsaWMgbWF0cml4Q2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjMDA3NDAwJyxcbiAgICAgICAgICAgICcjNzgwMDAwJyxcbiAgICAgICAgICAgICcjZmZmJyxcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIGZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyMwMDc0MDAnLFxuICAgICAgICAgICAgJyM3ODAwMDAnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIHByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyNiOGU1ZTMnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICksXG4gICAgKSB7fVxufVxuXG5jbGFzcyBDZWxsQ29sb3JzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGxlZDogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBlbXB0eTogc3RyaW5nfG51bGwsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlciB7XG4gICAgcHJpdmF0ZSBjZWxsc0h0bWxFbGVtZW50c01hcDogSFRNTEVsZW1lbnRbXVtdID0gW107XG4gICAgcHJpdmF0ZSB0YWJsZTogSFRNTEVsZW1lbnR8dW5kZWZpbmVkO1xuICAgIHByaXZhdGUgc2NvcmVEaXNwbGF5OiBIVE1MRWxlbWVudHx1bmRlZmluZWQ7XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHByaXZhdGUgcmVuZGVyU2V0dGluZ3M6IFRhYmxlUmVuZGVyZXJTZXR0aW5ncyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUmVuZGVyLCB0aGlzLnJlbmRlckNvbW1hbmRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMudGFibGUgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZmxvYXQ6IGxlZnQ7IGRpc3BsYXk6IHRhYmxlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlXCI+PC9kaXY+Jyk7XG4gICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXAgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIGxldCByb3cgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtcm93XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3ldID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNvbW1hbmQuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNlbGwgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtY2VsbDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgd2lkdGg6IDIwcHg7IGhlaWdodDogMjBweFwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbeV1beF0gPSBjZWxsO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlKTtcblxuICAgICAgICB0aGlzLnNjb3JlRGlzcGxheSA9IFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoXG4gICAgICAgICAgICBgPGRpdiBzdHlsZT1cImZsb2F0OiBsZWZ0OyBmb250LWZhbWlseTogJ0hlbHZldGljYSBOZXVlJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAyMHB4OyBtYXJnaW4tbGVmdDogMTVweDtcIj5cbiAgICAgICAgICAgICAgICBMZXZlbDogPHNwYW4gaWQ9XCJsZXZlbFwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgU2NvcmU6IDxzcGFuIGlkPVwic2NvcmVcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIENvbWJvOiA8c3BhbiBpZD1cImNvbWJvXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBGaWd1cmVzIGZhbGxlbjogPHNwYW4gaWQ9XCJmaWd1cmVzX2ZhbGxlblwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgTGluZXMgc3F1YXNoZWQ6IDxzcGFuIGlkPVwibGluZXNfc3F1YXNoZWRcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgPC9kaXY+YCk7XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNjb3JlRGlzcGxheSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoJzxkaXYgc3R5bGU9XCJjbGVhcjogYm90aFwiPjwvZGl2PicpKTtcblxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5HYW1lT3ZlciwgdGhpcy5vbkdhbWVPdmVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GaWd1cmVzTW92ZWQsIHRoaXMub25GaWd1cmVzTW92ZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZpZ3VyZXNNb3ZlZChjb21tYW5kOiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGNvbW1hbmQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uR2FtZU92ZXIoY29tbWFuZDogR2FtZU92ZXJFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQ29tbWFuZEhhbmRsZXIoY29tbWFuZDogUmVuZGVyQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyU3RhdGUoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwYWludE1hdHJpeENlbGxzKGdhbWVEYXRhLm1hdHJpeCwgbmV3IENvb3JkaW5hdGUoMCwgMCksIGdhbWVEYXRhKTtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyU2V0dGluZ3MucmVuZGVyUHJvamVjdGlvbkZpZ3VyZXMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmFsbGluZ0ZpZ3VyZXNQcm9qZWN0aW9uKGdhbWVEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlckZhbGxpbmdGaWd1cmVzKGdhbWVEYXRhKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0cyhnYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJGYWxsaW5nRmlndXJlcyhnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMoZmFsbGluZ0ZpZ3VyZSwgZ2FtZURhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbihnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdGlvbkZpZ3VyZVggPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBsZXQgcHJvamVjdGlvbkZpZ3VyZVkgPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnk7XG4gICAgICAgICAgICB3aGlsZShGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSArIDEpLCBnYW1lRGF0YS5tYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbkZpZ3VyZVkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMoXG4gICAgICAgICAgICAgICAgZmlndXJlTWF0cml4LFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSksXG4gICAgICAgICAgICAgICAgZ2FtZURhdGFcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludE1hdHJpeENlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZmlsbGVkR2FtZU92ZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhtYXRyaXgsIGluZGVudCwgY29sb3JzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRGYWxsaW5nRmlndXJlc0NlbGxzKGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUsIGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBsZXQgY29sb3JzOiBDZWxsQ29sb3JzO1xuICAgICAgICBpZiAoZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWRHYW1lT3ZlcixcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUuY29sb3IgfHwgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMoXG4gICAgICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUucG9zaXRpb24sXG4gICAgICAgICAgICBjb2xvcnNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRQcm9qZWN0aW9uRmlndXJlc0NlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmZpbGxlZEdhbWVPdmVyLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMobWF0cml4LCBpbmRlbnQsIGNvbG9ycyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50Q2VsbHMobWF0cml4OiBib29sZWFuW11bXSwgaW5kZW50OiBDb29yZGluYXRlLCBjZWxsQ29sb3JzOiBDZWxsQ29sb3JzKTogdm9pZCB7XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0geSArIGluZGVudC55O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxYID0geCArIGluZGVudC54O1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwXG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbcmVhbFldXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdmFsdWUgPyBjZWxsQ29sb3JzLmZpbGxlZCA6IGNlbGxDb2xvcnMuZW1wdHk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFtyZWFsWV1bcmVhbFhdLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclN0YXRzKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBjb25zdCBsZXZlbFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGV2ZWwnKTtcbiAgICAgICAgY29uc3Qgc2NvcmVTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7XG4gICAgICAgIGNvbnN0IGNvbWJvU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21ibycpO1xuICAgICAgICBjb25zdCBmaWd1cmVzRmFsbGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZ3VyZXNfZmFsbGVuJyk7XG4gICAgICAgIGNvbnN0IGxpbmVzU3F1YXNoZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZXNfc3F1YXNoZWQnKTtcbiAgICAgICAgaWYgKGxldmVsU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV2ZWxTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmxldmVsLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjb3JlU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2NvcmVTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLnNjb3JlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbWJvU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29tYm9TcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmNvbWJvLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZ3VyZXNGYWxsZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZpZ3VyZXNGYWxsZW4uaW5uZXJIVE1MID0gZ2FtZURhdGEuc3RhdHMuZmlndXJlc0ZhbGxlbi50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaW5lc1NxdWFzaGVkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsaW5lc1NxdWFzaGVkLmlubmVySFRNTCA9IGdhbWVEYXRhLnN0YXRzLmxpbmVzU3F1YXNoZWQudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZUh0bWxFbGVtZW50KGh0bWw6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPiAxIHx8IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgJ1RoZSBIVE1MIG11c3QgY29udGFpbiBvbmx5IG9uZSBjaGlsZCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyAnU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgdHJ5aW5nIHRvIGdldCBIVE1MRWxlbWVudCBjaGlsZCBmcm9tIGRpdic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0Ryb3BGaWd1cmVzQ29tbWFuZCwgQ29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEdhbWVPdmVyQ29tbWFuZCwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcblxuY2xhc3MgRmFsbGluZ1Jlc3VsdCB7XG4gICAgcHVibGljIHRyYW5zZmVycmVkRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW107XG4gICAgcHVibGljIGlzR2FtZU92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbn1cblxuZXhwb3J0IGNsYXNzIFJlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsVGljaywgdGhpcy5wcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxEb3duLCB0aGlzLnByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZChjb21tYW5kOiBGaWd1cmVzRmFsbFRpY2tDb21tYW5kKSB7XG4gICAgICAgIGNvbnN0IGZhbGxpbmdSZXN1bHQgPSB0aGlzLmZhbGxGaWd1cmVzRm9yT25lQ2VsbChjb21tYW5kLmdhbWVEYXRhKTtcbiAgICAgICAgbGV0IHNxdWFzaGVkTGluZXMgPSB0aGlzLnNxdWFzaExpbmVzKGNvbW1hbmQuZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgaWYgKGZhbGxpbmdSZXN1bHQuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgR2FtZU92ZXJDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQoXG4gICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLFxuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMsXG4gICAgICAgICAgICBzcXVhc2hlZExpbmVzLFxuICAgICAgICAgICAgMFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQoY29tbWFuZDogRHJvcEZpZ3VyZXNDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGxldCBmYWxsaW5nUmVzdWx0ID0gbmV3IEZhbGxpbmdSZXN1bHQoKTtcbiAgICAgICAgbGV0IGRyb3BwZWRMaW5lcyA9IDA7XG4gICAgICAgIHdoaWxlIChjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG9uZUNlbGxGYWxsaW5nUmVzdWx0ID0gdGhpcy5mYWxsRmlndXJlc0Zvck9uZUNlbGwoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcy5wdXNoKC4uLm9uZUNlbGxGYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyk7XG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgPSBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgfHwgb25lQ2VsbEZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlcjtcbiAgICAgICAgICAgIGRyb3BwZWRMaW5lcysrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzcXVhc2hlZExpbmVzID0gdGhpcy5zcXVhc2hMaW5lcyhjb21tYW5kLmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGlmIChmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEdhbWVPdmVyQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KFxuICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YSxcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLFxuICAgICAgICAgICAgc3F1YXNoZWRMaW5lcyxcbiAgICAgICAgICAgIGRyb3BwZWRMaW5lcyAtIDEsXG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGdhbWVEYXRhOiBHYW1lRGF0YSk6IEZhbGxpbmdSZXN1bHQge1xuICAgICAgICBsZXQgZmFsbGluZ1Jlc3VsdCA9IG5ldyBGYWxsaW5nUmVzdWx0KCk7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goKGZhbGxpbmdGaWd1cmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWd1cmVDYW5GYWxsKGdhbWVEYXRhLm1hdHJpeCwgZmFsbGluZ0ZpZ3VyZSkpIHtcbiAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnkrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpZ3VyZUdhbWVPdmVyUmVzdWx0ID0gdGhpcy50cmFuc2ZlckZpZ3VyZVRvTWF0cml4KFxuICAgICAgICAgICAgICAgICAgICBnYW1lRGF0YS5tYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLnB1c2goLi4uZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuc3BsaWNlKGluZGV4LCAxKSk7XG4gICAgICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyID0gZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyIHx8IGZpZ3VyZUdhbWVPdmVyUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbGxpbmdSZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWd1cmVDYW5GYWxsKG1hdHJpeDogYm9vbGVhbltdW10sIGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmYWxsaW5nRmlndXJlLnBvc2l0aW9uLngsIGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSArIDEpLFxuICAgICAgICAgICAgbWF0cml4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFuc2ZlckZpZ3VyZVRvTWF0cml4KG1hdHJpeDogYm9vbGVhbltdW10sIGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGlzR2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChyb3csIGZpZ3VyZUNlbGxZKSA9PiB7XG4gICAgICAgICAgICAgICAgcm93LmZvckVhY2goKGNlbGxWYWx1ZSwgZmlndXJlQ2VsbFgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cml4WCA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueCArIGZpZ3VyZUNlbGxYO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cml4WSA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSArIGZpZ3VyZUNlbGxZO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0cml4WSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIG1hdHJpeFggaW4gbWF0cml4W21hdHJpeFldXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhbWF0cml4W21hdHJpeFldW21hdHJpeFhdXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W21hdHJpeFldW21hdHJpeFhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlzR2FtZU92ZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcXVhc2hMaW5lcyhtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyW10ge1xuICAgICAgICBsZXQgbGluZXNUb1NxdWFzaDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbkJlU3F1YXNoZWQgPSByb3cuZXZlcnkoY2VsbCA9PiBjZWxsKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVNxdWFzaGVkKSB7XG4gICAgICAgICAgICAgICAgbGluZXNUb1NxdWFzaC5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGluZXNUb1NxdWFzaC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgICAgbWF0cml4LnNwbGljZSh5LCAxKTtcbiAgICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KG5ldyBBcnJheShtYXRyaXhbMF0ubGVuZ3RoKS5maWxsKGZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZXNUb1NxdWFzaDtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRW51bUhlbHBlciB7XG4gICAgcHVibGljIHN0YXRpYyBUb0FycmF5KHZhbDogYW55KTogdHlwZW9mIHZhbFtdIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbClcbiAgICAgICAgICAgIC5tYXAobiA9PiBOdW1iZXIucGFyc2VJbnQobikpXG4gICAgICAgICAgICAuZmlsdGVyKG4gPT4gIU51bWJlci5pc05hTihuKSkgYXMgdW5rbm93biBhcyB0eXBlb2YgdmFsW107XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBHZXRSYW5kb20odmFsOiBhbnkpOiB0eXBlb2YgdmFsIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gRW51bUhlbHBlci5Ub0FycmF5KHZhbCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiB2YWx1ZXNbcmFuZG9tSW5kZXhdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc1NwYXduZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFbnVtSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvRW51bUhlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgQWx3YXlzT25lRmlndXJlU3Bhd25lciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEhhbmRsZXIoZXZlbnQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKFxuICAgICAgICAgICAgRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLFxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzT25GYWxsVGljay5iaW5kKHRoaXMpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc09uRmFsbFRpY2soZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hZGRGaWd1cmUoZXZlbnQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkRmlndXJlKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID4gMCB8fCBnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWd1cmVJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdhbWVEYXRhLnNldHRpbmdzLmZpZ3VyZXMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgZmlndXJlID0gZ2FtZURhdGEuc2V0dGluZ3MuZmlndXJlc1tmaWd1cmVJbmRleF07XG4gICAgICAgIGNvbnN0IHR1cm5TdGF0ZSA9IEVudW1IZWxwZXIuR2V0UmFuZG9tKEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZpZ3VyZS5nZXRUdXJuKHR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZVdpZHRoID0gTWF0aC5tYXgoLi4uZmlndXJlTWF0cml4Lm1hcChyb3cgPT4gcm93Lmxlbmd0aCkpO1xuICAgICAgICBjb25zdCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoXG4gICAgICAgICAgICBNYXRoLmNlaWwoZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aCAvIDIgLSBmaWd1cmVXaWR0aCAvIDIpIC0gMSxcbiAgICAgICAgICAgIC1maWd1cmVNYXRyaXgubGVuZ3RoLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmYWxsaW5nRmlndXJlID0gbmV3IEZhbGxpbmdGaWd1cmUoXG4gICAgICAgICAgICBmaWd1cmUsXG4gICAgICAgICAgICBjb29yZGluYXRlLFxuICAgICAgICAgICAgdHVyblN0YXRlXG4gICAgICAgICk7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLnB1c2goZmFsbGluZ0ZpZ3VyZSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc1NwYXduZWRFdmVudChnYW1lRGF0YSwgW2ZhbGxpbmdGaWd1cmVdKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgTW92ZUxlZnRDb21tYW5kLCBNb3ZlUmlnaHRDb21tYW5kLCBUdXJuQ2xvY2t3aXNlQ29tbWFuZCwgTW92ZURvd25Db21tYW5kLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEZpZ3VyZXNNb3ZlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9VdGlscy9FbnVtSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZpbmdIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZUxlZnQsIHRoaXMucHJvY2Vzc01vdmVMZWZ0Q29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZVJpZ2h0LCB0aGlzLnByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlRG93biwgdGhpcy5wcm9jZXNzTW92ZURvd25Db21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlLCB0aGlzLnByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlTGVmdENvbW1hbmQoY29tbWFuZDogTW92ZUxlZnRDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FuQmVNb3ZlZExlZnQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4oZmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmlndXJlLnBvc2l0aW9uLnggLSAxLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVNb3ZlZExlZnQpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24ueC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzTW92ZVJpZ2h0Q29tbWFuZChjb21tYW5kOiBNb3ZlUmlnaHRDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FuQmVNb3ZlZFJpZ2h0ID0gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZpZ3VyZS5wb3NpdGlvbi54ICsgMSwgZmlndXJlLnBvc2l0aW9uLnkpLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlTW92ZWRSaWdodCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbi54Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZChjb21tYW5kOiBUdXJuQ2xvY2t3aXNlQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBjb25zdCBhbGxUdXJuU3RhdGVzID0gRW51bUhlbHBlci5Ub0FycmF5KEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgbGV0IG5leHRUdXJuU3RhdGUgPSBmaWd1cmUudHVyblN0YXRlICsgMTtcbiAgICAgICAgICAgIGlmICghKG5leHRUdXJuU3RhdGUgaW4gYWxsVHVyblN0YXRlcykpIHtcbiAgICAgICAgICAgICAgICBuZXh0VHVyblN0YXRlID0gYWxsVHVyblN0YXRlc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhbkJlVHVybmVkID0gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKG5leHRUdXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVR1cm5lZCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS50dXJuU3RhdGUgPSBuZXh0VHVyblN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzTW92ZURvd25Db21tYW5kKGNvbW1hbmQ6IE1vdmVEb3duQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBGaWd1cmVzRmFsbFRpY2tDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBEcm9wRmlndXJlc0NvbW1hbmQsIEluaXRHYW1lQ29tbWFuZCwgTW92ZUxlZnRDb21tYW5kLCBNb3ZlUmlnaHRDb21tYW5kLCBUdXJuQ2xvY2t3aXNlQ29tbWFuZCwgTW92ZURvd25Db21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZpbmdDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLnByb2Nlc3NJbml0R2FtZUNvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB3aW5kb3cub25rZXlkb3duID0gZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZUxlZnRDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVJpZ2h0Q29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFR1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlRG93bkNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVEb3duQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdTcGFjZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBEcm9wRmlndXJlc0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIEZhbGxUaWNrU2NvcmVDb3VudGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBzcXVhc2hlZFJvd3NSZXdhcmRUaHJlc2hvbGRzTWFwOiBNYXA8bnVtYmVyLCBudW1iZXI+ID0gbmV3IE1hcChbXG4gICAgICAgICAgICBbMSwgMTAwXSxcbiAgICAgICAgICAgIFsyLCAzMDBdLFxuICAgICAgICAgICAgWzMsIDUwMF0sXG4gICAgICAgICAgICBbNCwgODAwXSxcbiAgICAgICAgXSksXG4gICAgICAgIHByaXZhdGUgcmV3YXJkT25Db21ibyA9IDUwLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxpbmdUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsaW5nVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBsZXQgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgPSAwO1xuICAgICAgICB0aGlzLnNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXAuZm9yRWFjaCgocmV3YXJkLCByb3dzU3F1YXNoZWRUaHJlc2hvbGQpID0+IHtcbiAgICAgICAgICAgIGlmIChyb3dzU3F1YXNoZWRUaHJlc2hvbGQgPiBldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZpb3VzVGhyZXNob2xkUmV3YXJkID0gcmV3YXJkO1xuICAgICAgICB9KTtcbiAgICAgICAgZXZlbnQuZ2FtZURhdGEuc2NvcmUgKz1cbiAgICAgICAgICAgIHByZXZpb3VzVGhyZXNob2xkUmV3YXJkICogZXZlbnQuZ2FtZURhdGEubGV2ZWxcbiAgICAgICAgICAgICsgdGhpcy5yZXdhcmRPbkNvbWJvICogTWF0aC5tYXgoMCwgZXZlbnQuZ2FtZURhdGEuY29tYm8gLSAxKSAqIGV2ZW50LmdhbWVEYXRhLmxldmVsXG4gICAgICAgICAgICArIGV2ZW50LmRyb3BwZWRMaW5lcyAqIDIgKiBldmVudC5nYW1lRGF0YS5sZXZlbDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIge1xuICAgIHByaXZhdGUgc3F1YXNoZWRSb3dzQ291bnRlciA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBsZXZlbEluY3JlYXNlT25TcXVhc2hlZFJvd3NOdW1iZXI6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBtYXhMZXZlbHM6IG51bWJlcixcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMucHJvY2Vzc0luaXRHYW1lQ29tbWFuZC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0luaXRHYW1lQ29tbWFuZChjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIrKztcbiAgICAgICAgaWYgKHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlciA+PSB0aGlzLmxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlcikge1xuICAgICAgICAgICAgdGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyID0gMDtcbiAgICAgICAgICAgIGV2ZW50LmdhbWVEYXRhLmxldmVsID0gTWF0aC5taW4odGhpcy5tYXhMZXZlbHMsIGV2ZW50LmdhbWVEYXRhLmxldmVsICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21ib0NvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHVibGljIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbFRpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEuY29tYm8gKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50LmdhbWVEYXRhLmNvbWJvID0gMDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDb25zdFRpbWluZ3NIYW5kbGVyIGltcGxlbWVudHMgVGltaW5nc0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZGVsYXlNczogbnVtYmVyLFxuICAgICkge31cblxuICAgIGdldERlbGF5Rm9yTmV4dFRpY2tNcyhnYW1lRGF0YTogR2FtZURhdGEpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxheU1zO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIFN0YXRzQ291bnRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGV2ZW50LmdhbWVEYXRhLnN0YXRzLmZpZ3VyZXNGYWxsZW4gKz0gZXZlbnQudHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXMubGVuZ3RoO1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zdGF0cy5saW5lc1NxdWFzaGVkICs9IGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoO1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZUNvbnRyb2xsZXJ9IGZyb20gJy4vR2FtZUNvbnRyb2xsZXInXG5pbXBvcnQge1RhYmxlUmVuZGVyZXIsIFRhYmxlUmVuZGVyZXJTZXR0aW5nc30gZnJvbSAnLi9SZW5kZXJlci9UYWJsZVJlbmRlcmVyJ1xuaW1wb3J0IHtSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3J9IGZyb20gXCIuL0ZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yL1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvclwiO1xuaW1wb3J0IHtBbHdheXNPbmVGaWd1cmVTcGF3bmVyfSBmcm9tIFwiLi9GaWd1cmVzU3Bhd25lci9BbHdheXNPbmVGaWd1cmVTcGF3bmVyXCI7XG5pbXBvcnQge0V2ZW50QnVzfSBmcm9tIFwiLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7TW92aW5nSGFuZGxlcn0gZnJvbSBcIi4vTW92aW5nSGFuZGxlci9Nb3ZpbmdIYW5kbGVyXCI7XG5pbXBvcnQge01vdmluZ0NvbnRyb2xsZXJ9IGZyb20gXCIuL01vdmluZ0NvbnRyb2xsZXIvTW92aW5nQ29udHJvbGxlclwiO1xuaW1wb3J0IHtMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtGYWxsVGlja1Njb3JlQ291bnRlcn0gZnJvbSBcIi4vU2NvcmVDb3VudGVyL0ZhbGxUaWNrU2NvcmVDb3VudGVyXCI7XG5pbXBvcnQge1NxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlcn0gZnJvbSBcIi4vTGV2ZWxDb3VudGVyL1NxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlclwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4vQ29tbW9uXCI7XG5pbXBvcnQge0NvbWJvQ291bnRlcn0gZnJvbSBcIi4vQ29tYm9Db3VudGVyL0NvbWJvQ291bnRlclwiO1xuaW1wb3J0IHtDb25zdFRpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlci9Db25zdFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge1N0YXRzQ291bnRlcn0gZnJvbSBcIi4vU3RhdHNDb3VudGVyL1N0YXRzQ291bnRlclwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzRmFjYWRlIHtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKSxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoKSxcbiAgICAgICAgcHJpdmF0ZSBnYW1lQ29udHJvbGxlciA9IG5ldyBHYW1lQ29udHJvbGxlcihcbiAgICAgICAgICAgIC8vIG5ldyBMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXIoMjAwMCksXG4gICAgICAgICAgICBuZXcgQ29uc3RUaW1pbmdzSGFuZGxlcigyMDAwKSxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBtb3ZpbmdIYW5kbGVyID0gbmV3IE1vdmluZ0hhbmRsZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgbW92aW5nQ29udHJvbGxlciA9IG5ldyBNb3ZpbmdDb250cm9sbGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBmYWxsaW5nRmlndXJlc1Byb2Nlc3NvciA9IG5ldyBSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXNcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBmaWd1cmVzU3Bhd25lciA9IG5ldyBBbHdheXNPbmVGaWd1cmVTcGF3bmVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGxldmVsQ291bnRlciA9IG5ldyBTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIoXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICA4LFxuICAgICAgICAgICAgMTUsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgY29tYm9Db3VudGVyID0gbmV3IENvbWJvQ291bnRlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBzY29yZUNvdW50ZXIgPSBuZXcgRmFsbFRpY2tTY29yZUNvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgc3RhdHNDb3VudGVyID0gbmV3IFN0YXRzQ291bnRlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSB0YWJsZVJlbmRlcmVyID0gbmV3IFRhYmxlUmVuZGVyZXIoXG4gICAgICAgICAgICBuZXcgVGFibGVSZW5kZXJlclNldHRpbmdzKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzXG4gICAgICAgICksXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YSA9IEdhbWVEYXRhLm1ha2VTaW1wbGUoKSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgc3RhcnQoZ2FtZURhdGE/OiBHYW1lRGF0YSkge1xuICAgICAgICBnYW1lRGF0YSA9IGdhbWVEYXRhIHx8IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgSW5pdEdhbWVDb21tYW5kKGdhbWVEYXRhKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlc3VtZUdhbWVDb21tYW5kKGdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlc3VtZSgpIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVzdW1lR2FtZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUGF1c2VHYW1lQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi9UZXRyaXMvRmlndXJlc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpZ3VyZVBsYWNpbmdTdGVwIHtcbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4sXG59XG5cbmV4cG9ydCBjbGFzcyBUdXJuUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHRhcmdldDogRmlndXJlVHVyblN0YXRlLFxuICAgICAgICBwcml2YXRlIF9wZXJzaXN0ZWQ6IGJvb2xlYW4sXG4gICAgKSB7fVxuXG4gICAgZ2V0IHBlcnNpc3RlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlcnNpc3RlZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlWFBsYWNpbmdTdGVwIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1N0ZXB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB0YXJnZXQ6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBfcGVyc2lzdGVkOiBib29sZWFuLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVlQbGFjaW5nU3RlcCBpbXBsZW1lbnRzIEZpZ3VyZVBsYWNpbmdTdGVwe1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgdGFyZ2V0OiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgZ2V0IHBlcnNpc3RlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERyb3BQbGFjaW5nU3RlcCBpbXBsZW1lbnRzIEZpZ3VyZVBsYWNpbmdTdGVwe1xuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVQbGFjaW5nUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZ3VyZXNUYXJnZXRTdGF0ZXM6IE1hcDxGYWxsaW5nRmlndXJlLCBGYWxsaW5nRmlndXJlPixcbiAgICAgICAgcHVibGljIHBsYWNpbmdTdGVwczogRmlndXJlUGxhY2luZ1N0ZXBbXSxcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBIb2xlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGlzT3BlbmVkOiBib29sZWFuLFxuICAgICAgICBwdWJsaWMgY2VsbHM6IENvb3JkaW5hdGVbXSxcbiAgICApIHt9XG59XG4iLCJpbXBvcnQge0hvbGV9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7Q29vcmRpbmF0ZX0gZnJvbSBcIi4uLy4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi8uLi9UZXRyaXMvVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcblxuZXhwb3J0IGNsYXNzIEhvbGVzSGVscGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIGNvbGxlY3RIb2xlcyhtYXRyaXg6IGJvb2xlYW5bXVtdKTogSG9sZVtdIHtcbiAgICAgICAgbGV0IGhvbGVzOiBIb2xlW10gPSBbXTtcblxuICAgICAgICBjbGFzcyBIb2xlSW5Qcm9jZXNzIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICAgICAgICAgIHB1YmxpYyBjZWxsczogQ29vcmRpbmF0ZVtdID0gW10sXG4gICAgICAgICAgICAgICAgcHVibGljIHByZXZpb3VzUm93T3BlblhzOiBudW1iZXJbXSA9IFtdLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBjdXJyZW50Um93T3BlblhzOiBudW1iZXJbXSA9IFtdLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBpc09wZW5lZDogYm9vbGVhbiA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBjb250aW51ZXM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhvbGVzSW5Qcm9jZXNzOiBIb2xlSW5Qcm9jZXNzW10gPSBbXTtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zOiBTZXQ8bnVtYmVyPiA9IG5ldyBTZXQoKTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgaG9sZXNJblByb2Nlc3MuZm9yRWFjaChob2xlID0+IGhvbGUuY29udGludWVzID0gZmFsc2UpO1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY292ZXJlZENvbHVtbnMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9jZXNzaW5nSG9sZSA9IGhvbGVzSW5Qcm9jZXNzLmZpbmQoaG9sZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9sZS5wcmV2aW91c1Jvd09wZW5Ycy5zb21lKHByZXZYID0+IHByZXZYID09PSB4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IChob2xlLmN1cnJlbnRSb3dPcGVuWHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBob2xlLmN1cnJlbnRSb3dPcGVuWHNbaG9sZS5jdXJyZW50Um93T3BlblhzLmxlbmd0aCAtIDFdID09PSB4KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzaW5nSG9sZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nSG9sZSA9IG5ldyBIb2xlSW5Qcm9jZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBob2xlc0luUHJvY2Vzcy5wdXNoKHByb2Nlc3NpbmdIb2xlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nSG9sZS5jdXJyZW50Um93T3BlblhzLnB1c2goeCk7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NpbmdIb2xlLmNlbGxzLnB1c2gobmV3IENvb3JkaW5hdGUoeCwgeSkpO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nSG9sZS5jb250aW51ZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nSG9sZS5pc09wZW5lZCA9IHByb2Nlc3NpbmdIb2xlLmlzT3BlbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLmRvZXNUaGVXYXlPdXRGcm9tSG9sZUV4aXN0cyhtYXRyaXgsIG5ldyBDb29yZGluYXRlKHgsIHkpLCBjb3ZlcmVkQ29sdW1ucywgW1t0cnVlLCB0cnVlXV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGhvbGVzSW5Qcm9ncmVzc1RvUmVtb3ZlOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICAgICAgaG9sZXNJblByb2Nlc3MuZm9yRWFjaCgoaG9sZSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChob2xlLmNvbnRpbnVlcykge1xuICAgICAgICAgICAgICAgICAgICBob2xlLnByZXZpb3VzUm93T3BlblhzID0gaG9sZS5jdXJyZW50Um93T3BlblhzO1xuICAgICAgICAgICAgICAgICAgICBob2xlLmN1cnJlbnRSb3dPcGVuWHMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFob2xlLmNvbnRpbnVlcyB8fCB5ID09IG1hdHJpeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbGVzLnB1c2gobmV3IEhvbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBob2xlLmlzT3BlbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaG9sZS5jZWxscyxcbiAgICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgICAgIGhvbGVzSW5Qcm9ncmVzc1RvUmVtb3ZlLnB1c2goaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZS5yZXZlcnNlKCkuZm9yRWFjaChpID0+IGhvbGVzSW5Qcm9jZXNzLnNwbGljZShpLCAxKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaG9sZXM7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBkb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMobWF0cml4OiBib29sZWFuW11bXSwgaW5pdGlhbENvb3JkaW5hdGU6IENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zOiBTZXQ8bnVtYmVyPiwgZmlndXJlTWF0cml4OiBib29sZWFuW11bXSkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kVGhlV2F5T3V0RnJvbUhvbGUobWF0cml4LCBpbml0aWFsQ29vcmRpbmF0ZSwgY292ZXJlZENvbHVtbnMsIGZpZ3VyZU1hdHJpeCkgIT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGZpbmRUaGVXYXlPdXRGcm9tSG9sZShtYXRyaXg6IGJvb2xlYW5bXVtdLCBpbml0aWFsQ29vcmRpbmF0ZTogQ29vcmRpbmF0ZSwgY292ZXJlZENvbHVtbnM6IFNldDxudW1iZXI+fE1hcDxudW1iZXIsIG51bWJlcj4sIGZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoY292ZXJlZENvbHVtbnMgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zID0gSG9sZXNIZWxwZXIuY29udmVydENvdmVyZWRDb2x1bW5zVG9Ycyhjb3ZlcmVkQ29sdW1ucyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdHJ5aW5nIHRvIGZpbmQgdGhlIHdheSBvdXQgZnJvbSB0aGUgbGVmdCBzaWRlXG4gICAgICAgIGxldCB0YXJnZXRYQ2FuZGlkYXRlOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAobGV0IHggPSBpbml0aWFsQ29vcmRpbmF0ZS54IC0gMTsgeCA+PSAwOyB4LS0pIHtcbiAgICAgICAgICAgIGlmICghRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoZmlndXJlTWF0cml4LCBuZXcgQ29vcmRpbmF0ZSh4LCBpbml0aWFsQ29vcmRpbmF0ZS55KSwgbWF0cml4KSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGFsbENvbHVtbnNGcmVlVG9GYWxsID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGNoZWNrRmFsbFggPSB4ICsgZmlndXJlTWF0cml4WzBdLmxlbmd0aCAtIDE7IGNoZWNrRmFsbFggPj0geDsgY2hlY2tGYWxsWC0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyhjaGVja0ZhbGxYKSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWxsQ29sdW1uc0ZyZWVUb0ZhbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRyeWluZyB0byBmaW5kIHRoZSB3YXkgb3V0IGZyb20gdGhlIHJpZ2h0IHNpZGVcbiAgICAgICAgZm9yIChsZXQgeCA9IGluaXRpYWxDb29yZGluYXRlLnggKyAxOyB4IDwgbWF0cml4WzBdLmxlbmd0aDsgeCsrKSB7XG4gICAgICAgICAgICBpZiAoIUZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUoeCwgaW5pdGlhbENvb3JkaW5hdGUueSksIG1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBjaGVja0ZhbGxYID0geDsgY2hlY2tGYWxsWCA8IHggKyBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoOyBjaGVja0ZhbGxYKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZENvbHVtbnMuaGFzKGNoZWNrRmFsbFgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsbENvbHVtbnNGcmVlVG9GYWxsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbGxDb2x1bW5zRnJlZVRvRmFsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNvbGxlY3RDb3ZlcmVkQ29sdW1uc1hzKG1hdHJpeDogYm9vbGVhbltdW10sIHRvWT86IG51bWJlcik6IFNldDxudW1iZXI+IHtcbiAgICAgICAgcmV0dXJuIEhvbGVzSGVscGVyLmNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMoXG4gICAgICAgICAgICBIb2xlc0hlbHBlci5jb2xsZWN0Q292ZXJlZENvbHVtbnMobWF0cml4LCB0b1kpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgY29udmVydENvdmVyZWRDb2x1bW5zVG9Ycyhjb3ZlcmVkQ29sdW1uczogTWFwPG51bWJlciwgbnVtYmVyPik6IFNldDxudW1iZXI+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZXQoWy4uLmNvdmVyZWRDb2x1bW5zLmtleXMoKV0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINC80LDQv9GDIHg6IHlcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNvbGxlY3RDb3ZlcmVkQ29sdW1ucyhtYXRyaXg6IGJvb2xlYW5bXVtdLCB0b1k/OiBudW1iZXIpOiBNYXA8bnVtYmVyLCBudW1iZXI+IHtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zOiBNYXA8bnVtYmVyLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xuICAgICAgICBtYXRyaXguc29tZSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucy5zZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKHRvWSAhPT0gdW5kZWZpbmVkICYmIHkgPj0gdG9ZKVxuICAgICAgICAgICAgICAgIHx8IGNvdmVyZWRDb2x1bW5zLnNpemUgPT0gbWF0cml4WzBdLmxlbmd0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb3ZlcmVkQ29sdW1ucztcbiAgICB9XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtIb2xlfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDYWxjdWxhdGVTY29yZVJlcXVlc3Qge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgb3JpZ2luYWxIb2xlczogSG9sZVtdLFxuICAgICAgICBwdWJsaWMgb3JpZ2luYWxDb3ZlcmVkQ29sdW1uczogTWFwPG51bWJlciwgbnVtYmVyPixcbiAgICAgICAgcHVibGljIGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdLFxuICAgICAgICBwdWJsaWMgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zOiBNYXA8bnVtYmVyLCBudW1iZXI+LFxuICAgICAgICBwdWJsaWMgc3F1YXNoZWRMaW5lc0NvdW50OiBudW1iZXIsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZSB7XG4gICAgY2FsY3VsYXRlU2NvcmUocmVxdWVzdDogQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0KTogbnVtYmVyO1xufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RW51bUhlbHBlcn0gZnJvbSBcIi4uL1RldHJpcy9VdGlscy9FbnVtSGVscGVyXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL1RldHJpcy9GaWd1cmVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVGV0cmlzL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIFJlbmRlckNvbW1hbmR9IGZyb20gXCIuLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0Ryb3BQbGFjaW5nU3RlcCwgRmlndXJlUGxhY2luZ1Jlc3VsdCwgRmlndXJlUGxhY2luZ1N0ZXAsIE1vdmVYUGxhY2luZ1N0ZXAsIE1vdmVZUGxhY2luZ1N0ZXAsIFR1cm5QbGFjaW5nU3RlcH0gZnJvbSBcIi4vQ29tbW9uXCI7XG5pbXBvcnQge0NhbGN1bGF0b3JBZ2dyZWdhdGV9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9DYWxjdWxhdG9yQWdncmVnYXRlXCI7XG5pbXBvcnQge0hvbGVzSGVscGVyfSBmcm9tIFwiLi9VdGlscy9Ib2xlc0hlbHBlclwiO1xuaW1wb3J0IHtDYWxjdWxhdGVTY29yZVJlcXVlc3R9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcblxuY2xhc3MgUGxhY2VSZXNvbHZpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cblxuY2xhc3MgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IgZXh0ZW5kcyBQbGFjZVJlc29sdmluZ0Vycm9yIHtcbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZVBsYWNpbmdSZXNvbHZlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBzY29yZUNhbGN1bGF0b3I6IENhbGN1bGF0b3JBZ2dyZWdhdGUsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHJlc29sdmUoZ2FtZURhdGE6IEdhbWVEYXRhKTogRmlndXJlUGxhY2luZ1Jlc3VsdHx1bmRlZmluZWQge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxGaWd1cmUgPSBnYW1lRGF0YS5mYWxsaW5nRmlndXJlc1swXTtcblxuICAgICAgICBsZXQgbWF4U2NvcmUgPSAtSW5maW5pdHk7XG4gICAgICAgIGxldCB0aGVCZXN0UmVzdWx0ID0gbmV3IEZpZ3VyZVBsYWNpbmdSZXN1bHQobmV3IE1hcCgpLCBbXSk7XG5cbiAgICAgICAgdGhpcy5wcm9jZXNzU3RhdGVzKGdhbWVEYXRhLCAoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSwgc2NvcmU6IG51bWJlciwgcGxhY2luZ0RpcmVjdGlvbnM6IEZpZ3VyZVBsYWNpbmdTdGVwW10pID0+IHtcbiAgICAgICAgICAgIGlmIChzY29yZSA+IG1heFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgbWF4U2NvcmUgPSBzY29yZTtcbiAgICAgICAgICAgICAgICB0aGVCZXN0UmVzdWx0ID0gbmV3IEZpZ3VyZVBsYWNpbmdSZXN1bHQoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBNYXAoW1tvcmlnaW5hbEZpZ3VyZSwgaW1hZ2luYWJsZUZpZ3VyZV1dKSxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2luZ0RpcmVjdGlvbnNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIGxldCBkZWJ1Z01vZGUgPSB0cnVlO1xuICAgICAgICBsZXQgZGVidWdNb2RlID0gJ2RlYnVnTW9kZScgaW4gd2luZG93ICYmIHdpbmRvdy5kZWJ1Z01vZGU7XG4gICAgICAgIGxldCBpbWFnaW5hYmxlRmlndXJlID0gdGhlQmVzdFJlc3VsdC5maWd1cmVzVGFyZ2V0U3RhdGVzLmdldChvcmlnaW5hbEZpZ3VyZSk7XG4gICAgICAgIGlmIChkZWJ1Z01vZGUgJiYgaW1hZ2luYWJsZUZpZ3VyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgZmFrZUdhbWVEYXRhID0gc3RydWN0dXJlZENsb25lKGdhbWVEYXRhKTtcbiAgICAgICAgICAgIGltYWdpbmFibGVGaWd1cmUuY29sb3IgPSAnI2YwMCc7XG4gICAgICAgICAgICBmYWtlR2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMgPSBbaW1hZ2luYWJsZUZpZ3VyZV07XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZW5kZXJDb21tYW5kKGZha2VHYW1lRGF0YSkpO1xuXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NTdGF0ZXMoZ2FtZURhdGEsIHVuZGVmaW5lZCwgKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUpID0+IHtcbiAgICAgICAgICAgICAgICBpbWFnaW5hYmxlRmlndXJlLmNvbG9yID0gJyMwMGYnO1xuICAgICAgICAgICAgICAgIGZha2VHYW1lRGF0YS5mYWxsaW5nRmlndXJlcyA9IFtpbWFnaW5hYmxlRmlndXJlXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZW5kZXJDb21tYW5kKGZha2VHYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGVCZXN0UmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1N0YXRlcyhcbiAgICAgICAgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBvbkFmdGVyU2NvcmVDYWxjdWxhdGVzPzogKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUsIHNjb3JlOiBudW1iZXIsIHBsYWNpbmdEaXJlY3Rpb25zOiBGaWd1cmVQbGFjaW5nU3RlcFtdKSA9PiB2b2lkLFxuICAgICAgICBvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcz86IChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlKSA9PiB2b2lkLFxuICAgICkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuXG4gICAgICAgIGxldCBlbnVtcyA9IEVudW1IZWxwZXIuVG9BcnJheShGaWd1cmVUdXJuU3RhdGUpO1xuICAgICAgICB3aGlsZSAoZW51bXNbMF0gIT09IG9yaWdpbmFsRmlndXJlLnR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgZW51bXMudW5zaGlmdChlbnVtcy5wb3AoKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1hdHJpY2VzOiBNYXA8RmlndXJlVHVyblN0YXRlLCBib29sZWFuW11bXT4gPSBuZXcgTWFwKCk7XG4gICAgICAgIGxldCBzdHJpbmd5TWF0cmljZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICAgICAgICBlbnVtcy5mb3JFYWNoKHR1cm5TdGF0ZSA9PiB7XG4gICAgICAgICAgICBsZXQgZmlndXJlTWF0cml4ID0gb3JpZ2luYWxGaWd1cmUuZmlndXJlLmdldFR1cm4odHVyblN0YXRlKTtcbiAgICAgICAgICAgIGxldCBzdHJpbmd5RmlndXJlTWF0cml4ID0gZmlndXJlTWF0cml4Lm1hcChyb3cgPT4gcm93Lm1hcCh2YWwgPT4gdmFsID8gXCIxXCIgOiBcIjBcIikuam9pbigpKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgaWYgKCFzdHJpbmd5TWF0cmljZXMuaGFzKHN0cmluZ3lGaWd1cmVNYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5neU1hdHJpY2VzLmFkZChzdHJpbmd5RmlndXJlTWF0cml4KTtcbiAgICAgICAgICAgICAgICBtYXRyaWNlcy5zZXQodHVyblN0YXRlLCBmaWd1cmVNYXRyaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBvcmlnaW5hbE1hdHJpeEhvbGVzID0gSG9sZXNIZWxwZXIuY29sbGVjdEhvbGVzKGdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQ292ZXJlZENvbHVtbnMgPSBIb2xlc0hlbHBlci5jb2xsZWN0Q292ZXJlZENvbHVtbnMoZ2FtZURhdGEubWF0cml4KTtcblxuICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoIC0gZmlndXJlTWF0cml4WzBdLmxlbmd0aCArIDE7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBbeSwgaW1hZ2luYWJsZU1hdHJpeF0gPSB0aGlzLmltYWdpbmVGaWd1cmVEcm9wKGdhbWVEYXRhLm1hdHJpeCwgZmlndXJlTWF0cml4LCB4KTtcbiAgICAgICAgICAgICAgICBsZXQgY29vcmRpbmF0ZSA9IG5ldyBDb29yZGluYXRlKHgsIHkpO1xuICAgICAgICAgICAgICAgIGxldCBzcXVhc2hlZExpbmVzQ291bnQgPSB0aGlzLnNxdWFzaExpbmVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlRmlndXJlID0gbmV3IEZhbGxpbmdGaWd1cmUob3JpZ2luYWxGaWd1cmUuZmlndXJlLCBjb29yZGluYXRlLCB0dXJuU3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmIChvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICBvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyhpbWFnaW5hYmxlRmlndXJlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyA9IEhvbGVzSGVscGVyLmNvbGxlY3RDb3ZlcmVkQ29sdW1ucyhpbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlU2NvcmVSZXF1ZXN0ID0gbmV3IENhbGN1bGF0ZVNjb3JlUmVxdWVzdChcbiAgICAgICAgICAgICAgICAgICAgZ2FtZURhdGEsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWF0cml4SG9sZXMsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ292ZXJlZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVNYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgc3F1YXNoZWRMaW5lc0NvdW50XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLnNjb3JlQ2FsY3VsYXRvci5jYWxjdWxhdGVTY29yZShjYWxjdWxhdGVTY29yZVJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb25zID0gdGhpcy5tYWtlU2ltcGxlUGxhY2luZ1N0ZXBzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgIGlmIChvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMoaW1hZ2luYWJsZUZpZ3VyZSwgc2NvcmUsIGRpcmVjdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3JpZ2luYWxNYXRyaXhIb2xlcy5maWx0ZXIoaG9sZSA9PiBob2xlLmlzT3BlbmVkICYmIGhvbGUuY2VsbHMubGVuZ3RoID4gMCkuZm9yRWFjaChob2xlID0+IHtcbiAgICAgICAgICAgIGxldCB0b3BZID0gZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQsXG4gICAgICAgICAgICAgICAgbGVmdFggPSBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoLFxuICAgICAgICAgICAgICAgIGJvdHRvbVkgPSAtMSxcbiAgICAgICAgICAgICAgICByaWdodFggPSAtMTtcbiAgICAgICAgICAgIGhvbGUuY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICB0b3BZID0gTWF0aC5taW4odG9wWSwgY2VsbC55KTtcbiAgICAgICAgICAgICAgICBsZWZ0WCA9IE1hdGgubWluKGxlZnRYLCBjZWxsLngpO1xuICAgICAgICAgICAgICAgIGJvdHRvbVkgPSBNYXRoLm1heChib3R0b21ZLCBjZWxsLnkpO1xuICAgICAgICAgICAgICAgIHJpZ2h0WCA9IE1hdGgubWF4KHJpZ2h0WCwgY2VsbC54KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSBNYXRoLm1heCh0b3BZIC0gZmlndXJlTWF0cml4Lmxlbmd0aCArIDEsIDApOyB5IDw9IGJvdHRvbVk7IHkrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gTWF0aC5tYXgobGVmdFggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMSwgMCk7IHggPD0gcmlnaHRYOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoeCwgeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2luYWJsZUZpZ3VyZSA9IG5ldyBGYWxsaW5nRmlndXJlKG9yaWdpbmFsRmlndXJlLmZpZ3VyZSwgY29vcmRpbmF0ZSwgdHVyblN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgY29vcmRpbmF0ZSwgZ2FtZURhdGEubWF0cml4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb25zID0gdGhpcy5tYWtlUHVzaEluUGxhY2luZ1N0ZXBzKGdhbWVEYXRhLCBpbWFnaW5hYmxlRmlndXJlLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlTWF0cml4ID0gdGhpcy5pbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lRGF0YS5tYXRyaXgsIGZpZ3VyZU1hdHJpeCwgY29vcmRpbmF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhc2hlZExpbmVzQ291bnQgPSB0aGlzLnNxdWFzaExpbmVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zID0gSG9sZXNIZWxwZXIuY29sbGVjdENvdmVyZWRDb2x1bW5zKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlU2NvcmVSZXF1ZXN0ID0gbmV3IENhbGN1bGF0ZVNjb3JlUmVxdWVzdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYXRyaXhIb2xlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsQ292ZXJlZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlTWF0cml4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3F1YXNoZWRMaW5lc0NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuc2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKGNhbGN1bGF0ZVNjb3JlUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUsIHNjb3JlLCBkaXJlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNxdWFzaExpbmVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIge1xuICAgICAgICBsZXQgbGluZXNUb1NxdWFzaDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbkJlU3F1YXNoZWQgPSByb3cuZXZlcnkoY2VsbCA9PiBjZWxsKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVNxdWFzaGVkKSB7XG4gICAgICAgICAgICAgICAgbGluZXNUb1NxdWFzaC5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGluZXNUb1NxdWFzaC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgICAgbWF0cml4LnNwbGljZSh5LCAxKTtcbiAgICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KG5ldyBBcnJheShtYXRyaXhbMF0ubGVuZ3RoKS5maWxsKGZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZXNUb1NxdWFzaC5sZW5ndGg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbWFnaW5lRmlndXJlRHJvcChnYW1lTWF0cml4OiBib29sZWFuW11bXSwgZmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0WDogbnVtYmVyKTogW251bWJlciwgYm9vbGVhbltdW11dIHtcbiAgICAgICAgbGV0IHRhcmdldFkgPSAtZmlndXJlTWF0cml4Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUodGFyZ2V0WCwgdGFyZ2V0WSArIDEpLCBnYW1lTWF0cml4KSkge1xuICAgICAgICAgICAgdGFyZ2V0WSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB0YXJnZXRZLFxuICAgICAgICAgICAgdGhpcy5pbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lTWF0cml4LCBmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHRhcmdldFgsIHRhcmdldFkpKSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGltYWdpbmVGaWd1cmVQbGFjaW5nKGdhbWVNYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdLCB0YXJnZXRDb29yZGluYXRlOiBDb29yZGluYXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBsZXQgaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10gPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZU1hdHJpeCk7XG4gICAgICAgIGZpZ3VyZU1hdHJpeC5mb3JFYWNoKChyb3csIGZpZ3VyZVkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIGZpZ3VyZVgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHRhcmdldENvb3JkaW5hdGUueSArIGZpZ3VyZVk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRDb29yZGluYXRlLnggKyBmaWd1cmVYO1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiBpbWFnaW5hYmxlTWF0cml4XG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIGltYWdpbmFibGVNYXRyaXhbcmVhbFldXG4gICAgICAgICAgICAgICAgICAgICYmIHZhbFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlTWF0cml4W3JlYWxZXVtyZWFsWF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW1hZ2luYWJsZU1hdHJpeDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1ha2VQdXNoSW5QbGFjaW5nU3RlcHMoZ2FtZURhdGE6IEdhbWVEYXRhLCBpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zOiBNYXA8bnVtYmVyLCBudW1iZXI+KTogRmlndXJlUGxhY2luZ1N0ZXBbXSB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGxldCBmaWd1cmVNYXRyaXggPSBpbWFnaW5hYmxlRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGltYWdpbmFibGVGaWd1cmUudHVyblN0YXRlKTtcbiAgICAgICAgbGV0IHRhcmdldFggPSBIb2xlc0hlbHBlci5maW5kVGhlV2F5T3V0RnJvbUhvbGUoZ2FtZURhdGEubWF0cml4LCBpbWFnaW5hYmxlRmlndXJlLnBvc2l0aW9uLCBvcmlnaW5hbENvdmVyZWRDb2x1bW5zLCBmaWd1cmVNYXRyaXgpO1xuICAgICAgICBpZiAodGFyZ2V0WCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBUdXJuUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS50dXJuU3RhdGUsIHRydWUpLFxuICAgICAgICAgICAgbmV3IE1vdmVYUGxhY2luZ1N0ZXAodGFyZ2V0WCwgZmFsc2UpLFxuICAgICAgICAgICAgbmV3IE1vdmVZUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgIG5ldyBNb3ZlWFBsYWNpbmdTdGVwKGltYWdpbmFibGVGaWd1cmUucG9zaXRpb24ueCwgdHJ1ZSksXG4gICAgICAgICAgICBuZXcgRHJvcFBsYWNpbmdTdGVwKCksXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYWtlU2ltcGxlUGxhY2luZ1N0ZXBzKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBGaWd1cmVQbGFjaW5nU3RlcFtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBUdXJuUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS50dXJuU3RhdGUsIHRydWUpLFxuICAgICAgICAgICAgbmV3IE1vdmVYUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS5wb3NpdGlvbi54LCB0cnVlKSxcbiAgICAgICAgICAgIG5ldyBEcm9wUGxhY2luZ1N0ZXAoKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1RpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyIGltcGxlbWVudHMgVGltaW5nc0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGluaXRpYWxEZWxheU1zOiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgYmFzZTogbnVtYmVyID0gMC44LFxuICAgICkge31cblxuICAgIGdldERlbGF5Rm9yTmV4dFRpY2tNcyhnYW1lRGF0YTogR2FtZURhdGEpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5wb3codGhpcy5iYXNlIC0gKGdhbWVEYXRhLmxldmVsIC0gMSkgKiAwLjAwNywgZ2FtZURhdGEubGV2ZWwgLSAxKSAqIHRoaXMuaW5pdGlhbERlbGF5TXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgRHJvcEZpZ3VyZXNDb21tYW5kLCBNb3ZlRG93bkNvbW1hbmQsIE1vdmVMZWZ0Q29tbWFuZCwgTW92ZVJpZ2h0Q29tbWFuZCwgVHVybkNsb2Nrd2lzZUNvbW1hbmR9IGZyb20gXCIuLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4uL1RldHJpcy9UaW1pbmdzSGFuZGxlci9MZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7RHJvcFBsYWNpbmdTdGVwLCBGaWd1cmVQbGFjaW5nUmVzdWx0LCBGaWd1cmVQbGFjaW5nU3RlcCwgTW92ZVhQbGFjaW5nU3RlcCwgTW92ZVlQbGFjaW5nU3RlcCwgVHVyblBsYWNpbmdTdGVwfSBmcm9tIFwiLi9Db21tb25cIjtcblxuY2xhc3MgUGxhY2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige31cbmNsYXNzIEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5jbGFzcyBJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5jbGFzcyBOb3RTdXBwb3J0ZWREaXJlY3Rpb25TdGVwRXJyb3IgZXh0ZW5kcyBQbGFjaW5nRXJyb3Ige31cblxuY2xhc3MgU3RlcERlY29yYXRvciB7XG4gICAgcHVibGljIGlzUGVyZm9ybWVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBzdGVwOiBGaWd1cmVQbGFjaW5nU3RlcCxcbiAgICApIHt9XG59XG5cbmNsYXNzIFRhcmdldFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZ3VyZXM6IE1hcDxGYWxsaW5nRmlndXJlLCBGYWxsaW5nRmlndXJlPixcbiAgICAgICAgcHVibGljIHN0ZXBzOiBTdGVwRGVjb3JhdG9yW11cbiAgICApIHt9XG5cbiAgICBzdGF0aWMgZnJvbUZpZ3VyZVBsYWNpbmdSZXN1bHQocmVzdWx0PzogRmlndXJlUGxhY2luZ1Jlc3VsdCk6IFRhcmdldFN0YXRlfHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUoXG4gICAgICAgICAgICByZXN1bHQuZmlndXJlc1RhcmdldFN0YXRlcyxcbiAgICAgICAgICAgIHJlc3VsdC5wbGFjaW5nU3RlcHMubWFwKHN0ZXAgPT4gbmV3IFN0ZXBEZWNvcmF0b3Ioc3RlcCkpLFxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIge1xuICAgIHByaXZhdGUgbmV4dE1vdmVUaW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+ID0gc2V0VGltZW91dCgoKSA9PiB7fSk7XG4gICAgcHJpdmF0ZSB0YXJnZXRTdGF0ZT86IFRhcmdldFN0YXRlO1xuICAgIHByaXZhdGUgZ2FtZURhdGE6IEdhbWVEYXRhID0gR2FtZURhdGEubWFrZVNpbXBsZSgpO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSB0aW1pbmdzSGFuZGxlciA9IG5ldyBMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXIoMTAwLCAwLjkpLFxuICAgICkge31cblxuICAgIHB1YmxpYyBwbGFjZShnYW1lRGF0YTogR2FtZURhdGEsIHBsYWNpbmdSZXN1bHQ/OiBGaWd1cmVQbGFjaW5nUmVzdWx0KSB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEgPSBnYW1lRGF0YTtcbiAgICAgICAgdGhpcy50YXJnZXRTdGF0ZSA9IFRhcmdldFN0YXRlLmZyb21GaWd1cmVQbGFjaW5nUmVzdWx0KHBsYWNpbmdSZXN1bHQpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5uZXh0TW92ZVRpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMubmV4dE1vdmVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgdGhpcy50aW1pbmdzSGFuZGxlci5nZXREZWxheUZvck5leHRUaWNrTXModGhpcy5nYW1lRGF0YSksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzVGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50YXJnZXRTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxGaWd1cmUgPSB0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuICAgICAgICBjb25zdCB0YXJnZXRGaWd1cmUgPSB0aGlzLnRhcmdldFN0YXRlLmZpZ3VyZXMuZ2V0KG9yaWdpbmFsRmlndXJlKTtcbiAgICAgICAgaWYgKCF0YXJnZXRGaWd1cmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS5maWd1cmUgIT09IHRhcmdldEZpZ3VyZS5maWd1cmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yKFwiQm90aCBvZiB0aGUgb3JpZ2luYWwgYW5kIHRoZSB0YXJnZXQgZmFsbGluZyBmaWd1cmVzIG11c3QgaGF2ZSB0aGUgc2FtZSBmaWd1cmUgaW4gaXQuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFsbFN0ZXBzUGFzc2VkID0gdGhpcy50YXJnZXRTdGF0ZS5zdGVwcy5ldmVyeShzdGVwRGVjb3JhdG9yID0+IHtcbiAgICAgICAgICAgIGlmIChzdGVwRGVjb3JhdG9yLmlzUGVyZm9ybWVkICYmICFzdGVwRGVjb3JhdG9yLnN0ZXAucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc3RlcCA9IHN0ZXBEZWNvcmF0b3Iuc3RlcDtcblxuICAgICAgICAgICAgaWYgKHN0ZXAgaW5zdGFuY2VvZiBUdXJuUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUudHVyblN0YXRlICE9PSBzdGVwLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBUdXJuQ2xvY2t3aXNlQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RlcERlY29yYXRvci5pc1BlcmZvcm1lZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBNb3ZlWFBsYWNpbmdTdGVwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsRmlndXJlLnBvc2l0aW9uLnggIT09IHN0ZXAudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS5wb3NpdGlvbi54ID4gc3RlcC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVMZWZ0Q29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlUmlnaHRDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0ZXBEZWNvcmF0b3IuaXNQZXJmb3JtZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGVwIGluc3RhbmNlb2YgTW92ZVlQbGFjaW5nU3RlcCkge1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS5wb3NpdGlvbi55IDwgc3RlcC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZURvd25Db21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGVwRGVjb3JhdG9yLmlzUGVyZm9ybWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RlcCBpbnN0YW5jZW9mIERyb3BQbGFjaW5nU3RlcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IERyb3BGaWd1cmVzQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICAgICAgc3RlcERlY29yYXRvci5pc1BlcmZvcm1lZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RTdXBwb3J0ZWREaXJlY3Rpb25TdGVwRXJyb3IoXCJVbmtub3duIHN0ZXAgXCIgKyBzdGVwLmNvbnN0cnVjdG9yLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0ZXBEZWNvcmF0b3IuaXNQZXJmb3JtZWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghYWxsU3RlcHNQYXNzZWQpIHtcbiAgICAgICAgICAgIC8vIHRoaXMucHJvY2Vzc1RpY2soKTtcbiAgICAgICAgICAgIHRoaXMubmV4dE1vdmVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICAxMCxcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIENhbGN1bGF0b3JBZ2dyZWdhdGUgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNhbGN1bGF0b3JzOiBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VbXVxuICAgICkge31cblxuICAgIHB1YmxpYyBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdG9ycy5yZWR1Y2UoKHNjb3JlLCBjYWxjdWxhdG9yKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc2NvcmUgKyBjYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKHJlcXVlc3QpO1xuICAgICAgICB9LCAwKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBTcXVhc2hlZFJvd3NDYWxjdWxhdG9yIGltcGxlbWVudHMgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlIHtcbiAgICBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gcmVxdWVzdC5zcXVhc2hlZExpbmVzQ291bnQgKiA1O1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0LCBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2V9IGZyb20gXCIuLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi8uLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0hvbGV9IGZyb20gXCIuLi8uLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIEZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yIGltcGxlbWVudHMgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlIHtcbiAgICBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBmaWVsZEhlaWdodCA9IHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSByZXF1ZXN0LmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGg7XG4gICAgICAgIGNvbnN0IFtmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlSGVpZ2h0XSA9IHRoaXMuY2FsY3VsYXRlRmlsbGFibGVTcGFjZShyZXF1ZXN0LmltYWdpbmFibGVNYXRyaXgsIGZpZWxkV2lkdGgpO1xuICAgICAgICBsZXQgZmlsbGFibGVDZWxsc1Njb3JlID0gMDtcbiAgICAgICAgaWYgKGZpbGxhYmxlSGVpZ2h0ID4gNSkge1xuICAgICAgICAgICAgZmlsbGFibGVDZWxsc1Njb3JlID0gLWZpbGxhYmxlQ2VsbHNDb3VudCAqIE1hdGgucG93KGZpbGxhYmxlQ2VsbHNDb3VudCwgZmlsbGFibGVDZWxsc0NvdW50IC8gKGZpZWxkSGVpZ2h0ICogZmllbGRXaWR0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWxsYWJsZUNlbGxzU2NvcmU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVGaWxsYWJsZVNwYWNlKG1hdHJpeDogYm9vbGVhbltdW10sIGZpZWxkV2lkdGg6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICAgICAgbGV0IGZpbGxhYmxlQ2VsbHNDb3VudCA9IDA7XG4gICAgICAgIGxldCBmaWxsYWJsZUhlaWdodCA9IDA7XG4gICAgICAgIG1hdHJpeC5ldmVyeShyb3cgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdmFsICYmIGNvdmVyZWRDb2x1bW5zLnNpemUgPiAwICYmICFjb3ZlcmVkQ29sdW1ucy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbGFibGVDZWxsc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY292ZXJlZENvbHVtbnMuc2l6ZSA8IGZpZWxkV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZENvbHVtbnMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbGFibGVIZWlnaHQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW2ZpbGxhYmxlQ2VsbHNDb3VudCwgZmlsbGFibGVIZWlnaHRdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0LCBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2V9IGZyb20gXCIuLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIEhvbGVzVjFDYWxjdWxhdG9yIGltcGxlbWVudHMgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlIHtcbiAgICBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBbaG9sZXNDb3VudCwgaG9sZXNDb3ZlcmVkSGVpZ2h0XSA9IHRoaXMuY2FsY3VsYXRlSG9sZXNBbmRDb3ZlcmVkSGVpZ2h0KHJlcXVlc3QuaW1hZ2luYWJsZU1hdHJpeCwgcmVxdWVzdC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBjb25zdCBob2xlc0NvdW50RGVjcmVhc2UgPSByZXF1ZXN0Lm9yaWdpbmFsSG9sZXMubGVuZ3RoIC0gaG9sZXNDb3VudDtcbiAgICAgICAgbGV0IGhvbGVzU2NvcmU6IG51bWJlcjtcbiAgICAgICAgaWYgKGhvbGVzQ292ZXJlZEhlaWdodCA9PT0gMCB8fCBob2xlc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICBob2xlc1Njb3JlID0gKGhvbGVzQ291bnREZWNyZWFzZSA+IDAgPyBob2xlc0NvdW50RGVjcmVhc2UgKiAxNTAgOiBob2xlc0NvdW50RGVjcmVhc2UgKiA3MCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBob2xlc1Njb3JlID0gKGhvbGVzQ291bnREZWNyZWFzZSA+IDAgPyBob2xlc0NvdW50RGVjcmVhc2UgKiAxNTAgOiBob2xlc0NvdW50RGVjcmVhc2UgKiA3MClcbiAgICAgICAgICAgICAgICAtIGhvbGVzQ292ZXJlZEhlaWdodCAqIE1hdGgucG93KGhvbGVzQ292ZXJlZEhlaWdodCwgaG9sZXNDb3ZlcmVkSGVpZ2h0IC8gKHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQgKiBob2xlc0NvdW50KSkgKiA1O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBob2xlc1Njb3JlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlSG9sZXNBbmRDb3ZlcmVkSGVpZ2h0KGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdLCByZWFsTWF0cml4OiBib29sZWFuW11bXSk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBjb25zdCBbb3JpZ2luYWxUaGVIaWdoZXN0SG9sZVksIG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWV0gPSB0aGlzLmNhbGN1bGF0ZVRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkocmVhbE1hdHJpeCk7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uc1lzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj47XG4gICAgICAgIGxldCBob2xlc0NvdmVyZWRIZWlnaHRzU3VtID0gMDtcbiAgICAgICAgbGV0IGhvbGVzQ291bnQgPSAwO1xuICAgICAgICBpbWFnaW5hYmxlTWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwgJiYgIWNvdmVyZWRDb2x1bW5zWXMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zWXMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY292ZXJlZFkgPSBjb3ZlcmVkQ29sdW1uc1lzLmdldCh4KTtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZFkgIT09IHVuZGVmaW5lZCAmJiAhdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbGVzQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVZICE9PSB1bmRlZmluZWQgJiYgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5IDwgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZVkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xlc0NvdmVyZWRIZWlnaHRzU3VtICs9IHkgLSBjb3ZlcmVkWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY292ZXJlZFkgPCBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xlc0NvdmVyZWRIZWlnaHRzU3VtICs9IG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSAtIGNvdmVyZWRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW2hvbGVzQ291bnQsIGhvbGVzQ292ZXJlZEhlaWdodHNTdW1dO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWShtYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlcnx1bmRlZmluZWQsIG51bWJlcnx1bmRlZmluZWRdIHtcbiAgICAgICAgbGV0IHRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCB0aGVIaWdoZXN0SG9sZVkgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uc1lzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj47XG4gICAgICAgIG1hdHJpeC5zb21lKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByb3cuc29tZSgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAmJiAhY292ZXJlZENvbHVtbnNZcy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnNZcy5zZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb3ZlcmVkWSA9IGNvdmVyZWRDb2x1bW5zWXMuZ2V0KHgpO1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkWSAhPT0gdW5kZWZpbmVkICYmICF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhlSGlnaGVzdEhvbGVZID0geTtcbiAgICAgICAgICAgICAgICAgICAgdGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSA9IGNvdmVyZWRZO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW3RoZUhpZ2hlc3RIb2xlWSwgdGhlSGlnaGVzdEhvbGVDb3ZlcmVkWV07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDYWxjdWxhdGVTY29yZVJlcXVlc3QsIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uLy4uLy4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7SG9sZX0gZnJvbSBcIi4uLy4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgRmlsbGVkSGVpZ2h0Q2FsY3VsYXRvciBpbXBsZW1lbnRzIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZSB7XG4gICAgcHVibGljIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuY2FsY3VsYXRlSGVpZ2h0KHJlcXVlc3QuaW1hZ2luYWJsZU1hdHJpeCk7XG4gICAgICAgIHJldHVybiAtaGVpZ2h0ICogTWF0aC5wb3coaGVpZ2h0LCBoZWlnaHQgLyByZXF1ZXN0LmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0KSAqIDM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVIZWlnaHQobWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlciB7XG4gICAgICAgIGxldCBsb3dlc3RFbXB0eVkgPSAtMTtcbiAgICAgICAgbWF0cml4LmV2ZXJ5KChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGlmIChyb3cuZXZlcnkodmFsID0+ICF2YWwpKSB7XG4gICAgICAgICAgICAgICAgbG93ZXN0RW1wdHlZID0geTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1hdHJpeC5sZW5ndGggLSBsb3dlc3RFbXB0eVkgLSAxO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0LCBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2V9IGZyb20gXCIuLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi8uLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0hvbGV9IGZyb20gXCIuLi8uLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIFR1bm5lbHNDYWxjdWxhdG9yIGltcGxlbWVudHMgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlIHtcbiAgICBjYWxjdWxhdGVTY29yZShyZXF1ZXN0OiBDYWxjdWxhdGVTY29yZVJlcXVlc3QpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBbdHVubmVsc1N1bUhlaWdodCwgdHVubmVsc0NvdW50XSA9IHRoaXMuY2FsY3VsYXRlVHVubmVsc0V4Y2VwdFVuY292ZXJlZChyZXF1ZXN0LmltYWdpbmFibGVNYXRyaXgsIHJlcXVlc3QuZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgbGV0IHR1bm5lbHNTY29yZTogbnVtYmVyO1xuICAgICAgICBpZiAodHVubmVsc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICB0dW5uZWxzU2NvcmUgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHVubmVsc1Njb3JlID0gLXR1bm5lbHNDb3VudCAqIDcwXG4gICAgICAgICAgICAgICAgLSB0dW5uZWxzU3VtSGVpZ2h0ICogTWF0aC5wb3codHVubmVsc1N1bUhlaWdodCwgdHVubmVsc1N1bUhlaWdodCAvIChyZXF1ZXN0LmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0ICogdHVubmVsc0NvdW50KSkgKiA3O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0dW5uZWxzU2NvcmU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkKGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdLCByZWFsTWF0cml4OiBib29sZWFuW11bXSk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBsZXQgcmVhbENvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIHJlYWxNYXRyaXguZXZlcnkoKHJvdykgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhbENvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICBsZXQgdHVubmVscyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBjb25zdCBmaWVsZFdpZHRoID0gaW1hZ2luYWJsZU1hdHJpeFswXS5sZW5ndGg7XG4gICAgICAgIGltYWdpbmFibGVNYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbFxuICAgICAgICAgICAgICAgICAgICAmJiAhaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4KVxuICAgICAgICAgICAgICAgICAgICAmJiAhcmVhbENvdmVyZWRDb2x1bW5zLmhhcyh4KVxuICAgICAgICAgICAgICAgICAgICAmJiAoeCA9PT0gMCB8fCBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHggLSAxKSlcbiAgICAgICAgICAgICAgICAgICAgJiYgKHggPT09IGZpZWxkV2lkdGggLSAxIHx8IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeCArIDEpKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0dW5uZWxzLnNldCh4LCAodHVubmVscy5nZXQoeCkgfHwgMCkgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuc2l6ZSA8IGZpZWxkV2lkdGg7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgdHVubmVsc1N1bUhlaWdodCA9IDA7XG4gICAgICAgIGxldCB0dW5uZWxzQ291bnQgPSAwO1xuICAgICAgICB0dW5uZWxzLmZvckVhY2goaGVpZ2h0ID0+IHtcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPj0gMykge1xuICAgICAgICAgICAgICAgIHR1bm5lbHNTdW1IZWlnaHQgKz0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHR1bm5lbHNDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzQ291bnRdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmlndXJlc1NwYXduZWRFdmVudH0gZnJvbSBcIi4uL1RldHJpcy9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUmVzb2x2ZXJ9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlclwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUGVyZm9ybWVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyXCI7XG5pbXBvcnQge0NhbGN1bGF0b3JBZ2dyZWdhdGV9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9DYWxjdWxhdG9yQWdncmVnYXRlXCI7XG5pbXBvcnQge1NxdWFzaGVkUm93c0NhbGN1bGF0b3J9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9TcXVhc2hlZFJvd3MvU3F1YXNoZWRSb3dzQ2FsY3VsYXRvclwiO1xuaW1wb3J0IHtGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yL0ZpbGxhYmxlQ2VsbHMvRmlsbGFibGVDZWxsc0NhbGN1bGF0b3JcIjtcbmltcG9ydCB7SG9sZXNWMUNhbGN1bGF0b3J9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9Ib2xlcy9Ib2xlc1YxQ2FsY3VsYXRvclwiO1xuaW1wb3J0IHtIb2xlc1YyQ2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yL0hvbGVzL0hvbGVzVjJDYWxjdWxhdG9yXCI7XG5pbXBvcnQge0ZpbGxlZEhlaWdodENhbGN1bGF0b3J9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvci9GaWxsZWRIZWlnaHQvRmlsbGVkSGVpZ2h0Q2FsY3VsYXRvclwiO1xuaW1wb3J0IHtUdW5uZWxzQ2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yL1R1bm5lbHMvVHVubmVsc0NhbGN1bGF0b3JcIjtcblxuZXhwb3J0IGNsYXNzIFRldHJpc1NvbHZlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZVBsYWNpbmdSZXNvbHZlciA9IG5ldyBGaWd1cmVQbGFjaW5nUmVzb2x2ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgbmV3IENhbGN1bGF0b3JBZ2dyZWdhdGUoW1xuICAgICAgICAgICAgICAgIG5ldyBGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvcigpLFxuICAgICAgICAgICAgICAgIG5ldyBGaWxsZWRIZWlnaHRDYWxjdWxhdG9yKCksXG4gICAgICAgICAgICAgICAgbmV3IEhvbGVzVjFDYWxjdWxhdG9yKCksXG4gICAgICAgICAgICAgICAgbmV3IFNxdWFzaGVkUm93c0NhbGN1bGF0b3IoKSxcbiAgICAgICAgICAgICAgICBuZXcgVHVubmVsc0NhbGN1bGF0b3IoKSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGZhbGxpbmdGaWd1cmVzUGxhY2VyID0gbmV3IEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIoY29tbWFuZEJ1cyksXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmlndXJlc1NwYXduZWQsIHRoaXMub25GaWd1cmVzU3Bhd25lZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmlndXJlc1NwYXduZWQoZXZlbnQ6IEZpZ3VyZXNTcGF3bmVkRXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMgPSB0aGlzLmZhbGxpbmdGaWd1cmVQbGFjaW5nUmVzb2x2ZXIucmVzb2x2ZShldmVudC5nYW1lRGF0YSk7XG4gICAgICAgIHRoaXMuZmFsbGluZ0ZpZ3VyZXNQbGFjZXIucGxhY2UoZXZlbnQuZ2FtZURhdGEsIHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBUZXRyaXNGYWNhZGUgfSBmcm9tICcuL1RldHJpcy9UZXRyaXNGYWNhZGUnXG5pbXBvcnQge0V2ZW50QnVzfSBmcm9tIFwiLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1c30gZnJvbSBcIi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtUZXRyaXNTb2x2ZXJ9IGZyb20gXCIuL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXJcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICBjb25zdCBldmVudEJ1cyA9IG5ldyBFdmVudEJ1cygpO1xuICAgIGNvbnN0IGNvbW1hbmRCdXMgPSBuZXcgQ29tbWFuZEJ1cygpO1xuICAgIGxldCB0ZXRyaXMgPSBuZXcgVGV0cmlzRmFjYWRlKGV2ZW50QnVzLCBjb21tYW5kQnVzKTtcbiAgICBsZXQgc29sdmVyID0gbmV3IFRldHJpc1NvbHZlcihldmVudEJ1cywgY29tbWFuZEJ1cyk7XG5cbiAgICB0ZXRyaXMuc3RhcnQoKTtcbn0pXG4iXSwibmFtZXMiOlsiRXZlbnRUeXBlIiwiQ29tbWFuZFR5cGUiLCJGaWd1cmVUdXJuU3RhdGUiLCJGYWxsVGlja1Byb2Nlc3NlZEV2ZW50IiwiY29uc3RydWN0b3IiLCJnYW1lRGF0YSIsInRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzIiwic3F1YXNoZWRMaW5lcyIsImRyb3BwZWRMaW5lcyIsImdldEV2ZW50VHlwZSIsIkZhbGxpbmdUaWNrUHJvY2Vzc2VkIiwiR2FtZU92ZXJFdmVudCIsIkdhbWVPdmVyIiwiRmlndXJlc01vdmVkRXZlbnQiLCJGaWd1cmVzTW92ZWQiLCJGaWd1cmVzU3Bhd25lZEV2ZW50IiwibmV3RmlndXJlcyIsIkZpZ3VyZXNTcGF3bmVkIiwiRXZlbnRCdXMiLCJoYW5kbGVycyIsIk1hcCIsIm9uIiwiZXZlbnQiLCJoYW5kbGVyIiwidW5pcXVlIiwidGhpcyIsImdldCIsInNvbWUiLCJib3VuZEhhbmRsZXIiLCJwdXNoIiwic2V0Iiwib2ZmIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmlyZSIsImV2ZW50UGF5bG9hZCIsImZvckVhY2giLCJJbml0R2FtZUNvbW1hbmQiLCJnZXRDb21tYW5kVHlwZSIsIkluaXRHYW1lIiwiUmVzdW1lR2FtZUNvbW1hbmQiLCJSZXN1bWVHYW1lIiwiUGF1c2VHYW1lQ29tbWFuZCIsIlBhdXNlR2FtZSIsIkZpZ3VyZXNGYWxsVGlja0NvbW1hbmQiLCJGaWd1cmVzRmFsbFRpY2siLCJHYW1lT3ZlckNvbW1hbmQiLCJSZW5kZXJDb21tYW5kIiwiUmVuZGVyIiwiTW92ZUxlZnRDb21tYW5kIiwiTW92ZUxlZnQiLCJNb3ZlUmlnaHRDb21tYW5kIiwiTW92ZVJpZ2h0IiwiVHVybkNsb2Nrd2lzZUNvbW1hbmQiLCJUdXJuQ2xvY2t3aXNlIiwiTW92ZURvd25Db21tYW5kIiwiTW92ZURvd24iLCJEcm9wRmlndXJlc0NvbW1hbmQiLCJGaWd1cmVzRmFsbERvd24iLCJDb21tYW5kQnVzIiwiYWRkSGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJydW4iLCJwYXlsb2FkIiwiQWJzdHJhY3RGaWd1cmUiLCJnZXRUdXJuIiwiZmlndXJlVHVyblN0YXRlIiwiT25lIiwiZ2V0Rmlyc3RUdXJuIiwiVHdvIiwiZ2V0U2Vjb25kVHVybiIsIlRocmVlIiwiZ2V0VGhpcmRUdXJuIiwiRm91ciIsImdldEZvcnRoVHVybiIsIlNpbXBseVJvdGF0YWJsZUZpZ3VyZSIsImdldE5vcm1hbGl6ZWRGaWd1cmUiLCJmaWd1cmUiLCJnZXRGaWd1cmUiLCJ0aGVMb25nZXN0Um93U2l6ZSIsInJlZHVjZSIsInByZXZpb3VzIiwiY3VycmVudCIsIk1hdGgiLCJtYXgiLCJsZW5ndGgiLCJtYXAiLCJyb3ciLCJvcmlnaW5hbExlbmd0aCIsImZpbGwiLCJvcmlnaW5hbEZpZ3VyZSIsInR1cm5lZEZpZ3VyZSIsIm9yaWdpbmFsRmlndXJlSGVpZ2h0Iiwib3JpZ2luYWxGaWd1cmVXaWR0aCIsIngiLCJBcnJheSIsInkiLCJyZXZlcnNlIiwiVEZpZ3VyZSIsInNwbGl0IiwiaXRlbSIsIlJpZ2h0TEZpZ3VyZSIsIkxlZnRMRmlndXJlIiwiU3F1YXJlRmlndXJlIiwiU3RpY2tGaWd1cmUiLCJMWkZpZ3VyZSIsIlJaRmlndXJlIiwiQ29vcmRpbmF0ZSIsIkZhbGxpbmdGaWd1cmUiLCJwb3NpdGlvbiIsInR1cm5TdGF0ZSIsImNvbG9yIiwiR2FtZVNldHRpbmdzIiwiZmllbGRXaWR0aCIsImZpZWxkSGVpZ2h0IiwiZmlndXJlcyIsIlN0YXRzIiwiZmlndXJlc0ZhbGxlbiIsImxpbmVzU3F1YXNoZWQiLCJHYW1lRGF0YSIsImlzSW5pdGlhbGl6ZWQiLCJpc0dhbWVPdmVyIiwiZmFsbGluZ0ZpZ3VyZXMiLCJtYXRyaXgiLCJuZXh0VGlja1RpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJzZXR0aW5ncyIsImxldmVsIiwic2NvcmUiLCJjb21ibyIsInN0YXRzIiwic3RhdGljIiwid2lkdGgiLCJoZWlnaHQiLCJfIiwiR2FtZUNvbnRyb2xsZXIiLCJ0aW1pbmdzSGFuZGxlciIsImV2ZW50QnVzIiwiY29tbWFuZEJ1cyIsIm1ha2VTaW1wbGUiLCJpbml0R2FtZUhhbmRsZXIiLCJiaW5kIiwicmVzdW1lR2FtZUhhbmRsZXIiLCJwYXVzZUdhbWVIYW5kbGVyIiwiZ2FtZU92ZXJIYW5kbGVyIiwiY29tbWFuZCIsIm9uRmFsbFRpY2tQcm9jZXNzZWQiLCJmYWxsVGljayIsImNsZWFyVGltZW91dCIsImdldERlbGF5Rm9yTmV4dFRpY2tNcyIsIkZpZ3VyZVBsYWNpbmdDaGVja2VyIiwidGFyZ2V0RmlndXJlTWF0cml4IiwidGFyZ2V0UG9zaXRpb24iLCJldmVyeSIsInZhbHVlIiwicmVhbFkiLCJyZWFsWCIsIlRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyIsImZpbGxlZCIsImZpbGxlZEdhbWVPdmVyIiwiZW1wdHkiLCJUYWJsZVJlbmRlcmVyU2V0dGluZ3MiLCJjb250YWluZXJFbGVtZW50IiwicmVuZGVyUHJvamVjdGlvbkZpZ3VyZXMiLCJtYXRyaXhDZWxsQ29sb3JzIiwiZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnMiLCJwcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycyIsIkNlbGxDb2xvcnMiLCJUYWJsZVJlbmRlcmVyIiwicmVuZGVyU2V0dGluZ3MiLCJjZWxsc0h0bWxFbGVtZW50c01hcCIsImluaXRIYW5kbGVyIiwicmVuZGVyQ29tbWFuZEhhbmRsZXIiLCJ0YWJsZSIsImNyZWF0ZUh0bWxFbGVtZW50IiwiY2VsbCIsImFwcGVuZENoaWxkIiwiaW5uZXJIVE1MIiwic2NvcmVEaXNwbGF5Iiwib25HYW1lT3ZlciIsIm9uRmlndXJlc01vdmVkIiwicmVuZGVyU3RhdGUiLCJyZXBhaW50TWF0cml4Q2VsbHMiLCJyZW5kZXJGYWxsaW5nRmlndXJlc1Byb2plY3Rpb24iLCJyZW5kZXJGYWxsaW5nRmlndXJlcyIsInJlbmRlclN0YXRzIiwiZmFsbGluZ0ZpZ3VyZSIsInJlcGFpbnRGYWxsaW5nRmlndXJlc0NlbGxzIiwiZmlndXJlTWF0cml4IiwicHJvamVjdGlvbkZpZ3VyZVgiLCJwcm9qZWN0aW9uRmlndXJlWSIsImNhbkZpZ3VyZUJlUGxhY2VkIiwicmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMiLCJpbmRlbnQiLCJjb2xvcnMiLCJyZXBhaW50Q2VsbHMiLCJjZWxsQ29sb3JzIiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwibGV2ZWxTcGFuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNjb3JlU3BhbiIsImNvbWJvU3BhbiIsInRvU3RyaW5nIiwiaHRtbCIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjaGlsZHJlbiIsImZpcnN0RWxlbWVudENoaWxkIiwiSFRNTEVsZW1lbnQiLCJGYWxsaW5nUmVzdWx0IiwidHJhbnNmZXJyZWRGaWd1cmVzIiwiUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIiwicHJvY2Vzc0ZpZ3VyZXNGYWxsVGlja0NvbW1hbmQiLCJwcm9jZXNzRHJvcEZpZ3VyZXNDb21tYW5kIiwiZmFsbGluZ1Jlc3VsdCIsImZhbGxGaWd1cmVzRm9yT25lQ2VsbCIsInNxdWFzaExpbmVzIiwib25lQ2VsbEZhbGxpbmdSZXN1bHQiLCJmaWd1cmVDYW5GYWxsIiwiZmlndXJlR2FtZU92ZXJSZXN1bHQiLCJ0cmFuc2ZlckZpZ3VyZVRvTWF0cml4IiwiZmlndXJlQ2VsbFkiLCJjZWxsVmFsdWUiLCJmaWd1cmVDZWxsWCIsIm1hdHJpeFgiLCJtYXRyaXhZIiwibGluZXNUb1NxdWFzaCIsInVuc2hpZnQiLCJFbnVtSGVscGVyIiwidmFsIiwiT2JqZWN0Iiwia2V5cyIsIm4iLCJOdW1iZXIiLCJwYXJzZUludCIsImZpbHRlciIsImlzTmFOIiwidmFsdWVzIiwiVG9BcnJheSIsImZsb29yIiwicmFuZG9tIiwiQWx3YXlzT25lRmlndXJlU3Bhd25lciIsInByb2Nlc3NPbkZhbGxUaWNrIiwiYWRkRmlndXJlIiwiZmlndXJlSW5kZXgiLCJHZXRSYW5kb20iLCJmaWd1cmVXaWR0aCIsImNvb3JkaW5hdGUiLCJjZWlsIiwiTW92aW5nSGFuZGxlciIsInByb2Nlc3NNb3ZlTGVmdENvbW1hbmQiLCJwcm9jZXNzTW92ZVJpZ2h0Q29tbWFuZCIsInByb2Nlc3NNb3ZlRG93bkNvbW1hbmQiLCJwcm9jZXNzVHVybkNsb2Nrd2lzZUNvbW1hbmQiLCJhbGxUdXJuU3RhdGVzIiwibmV4dFR1cm5TdGF0ZSIsIk1vdmluZ0NvbnRyb2xsZXIiLCJwcm9jZXNzSW5pdEdhbWVDb21tYW5kIiwid2luZG93Iiwib25rZXlkb3duIiwiY29kZSIsIkZhbGxUaWNrU2NvcmVDb3VudGVyIiwic3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcCIsInJld2FyZE9uQ29tYm8iLCJvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkIiwicHJldmlvdXNUaHJlc2hvbGRSZXdhcmQiLCJyZXdhcmQiLCJyb3dzU3F1YXNoZWRUaHJlc2hvbGQiLCJTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIiLCJsZXZlbEluY3JlYXNlT25TcXVhc2hlZFJvd3NOdW1iZXIiLCJtYXhMZXZlbHMiLCJzcXVhc2hlZFJvd3NDb3VudGVyIiwibWluIiwiQ29tYm9Db3VudGVyIiwiQ29uc3RUaW1pbmdzSGFuZGxlciIsImRlbGF5TXMiLCJTdGF0c0NvdW50ZXIiLCJUZXRyaXNGYWNhZGUiLCJnYW1lQ29udHJvbGxlciIsIm1vdmluZ0hhbmRsZXIiLCJtb3ZpbmdDb250cm9sbGVyIiwiZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJmaWd1cmVzU3Bhd25lciIsImxldmVsQ291bnRlciIsImNvbWJvQ291bnRlciIsInNjb3JlQ291bnRlciIsInN0YXRzQ291bnRlciIsInRhYmxlUmVuZGVyZXIiLCJib2R5Iiwic3RhcnQiLCJyZXN1bWUiLCJwYXVzZSIsIlR1cm5QbGFjaW5nU3RlcCIsInRhcmdldCIsIl9wZXJzaXN0ZWQiLCJwZXJzaXN0ZWQiLCJNb3ZlWFBsYWNpbmdTdGVwIiwiTW92ZVlQbGFjaW5nU3RlcCIsIkRyb3BQbGFjaW5nU3RlcCIsIkZpZ3VyZVBsYWNpbmdSZXN1bHQiLCJmaWd1cmVzVGFyZ2V0U3RhdGVzIiwicGxhY2luZ1N0ZXBzIiwiSG9sZSIsImlzT3BlbmVkIiwiY2VsbHMiLCJIb2xlc0hlbHBlciIsImhvbGVzIiwiSG9sZUluUHJvY2VzcyIsInByZXZpb3VzUm93T3BlblhzIiwiY3VycmVudFJvd09wZW5YcyIsImNvbnRpbnVlcyIsImhvbGVzSW5Qcm9jZXNzIiwiY292ZXJlZENvbHVtbnMiLCJTZXQiLCJob2xlIiwiYWRkIiwiaGFzIiwicHJvY2Vzc2luZ0hvbGUiLCJmaW5kIiwicHJldlgiLCJ1bmRlZmluZWQiLCJkb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMiLCJob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZSIsImkiLCJpbml0aWFsQ29vcmRpbmF0ZSIsImZpbmRUaGVXYXlPdXRGcm9tSG9sZSIsImNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMiLCJhbGxDb2x1bW5zRnJlZVRvRmFsbCIsImNoZWNrRmFsbFgiLCJ0b1kiLCJjb2xsZWN0Q292ZXJlZENvbHVtbnMiLCJzaXplIiwiQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0Iiwib3JpZ2luYWxIb2xlcyIsIm9yaWdpbmFsQ292ZXJlZENvbHVtbnMiLCJpbWFnaW5hYmxlTWF0cml4IiwiaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zIiwic3F1YXNoZWRMaW5lc0NvdW50IiwiUGxhY2VSZXNvbHZpbmdFcnJvciIsIkVycm9yIiwiR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IiLCJGaWd1cmVQbGFjaW5nUmVzb2x2ZXIiLCJzY29yZUNhbGN1bGF0b3IiLCJyZXNvbHZlIiwibWF4U2NvcmUiLCJ0aGVCZXN0UmVzdWx0IiwicHJvY2Vzc1N0YXRlcyIsImltYWdpbmFibGVGaWd1cmUiLCJwbGFjaW5nRGlyZWN0aW9ucyIsImRlYnVnTW9kZSIsImZha2VHYW1lRGF0YSIsInN0cnVjdHVyZWRDbG9uZSIsIm9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMiLCJvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyIsImVudW1zIiwicG9wIiwibWF0cmljZXMiLCJzdHJpbmd5TWF0cmljZXMiLCJzdHJpbmd5RmlndXJlTWF0cml4Iiwiam9pbiIsIm9yaWdpbmFsTWF0cml4SG9sZXMiLCJjb2xsZWN0SG9sZXMiLCJpbWFnaW5lRmlndXJlRHJvcCIsImNhbGN1bGF0ZVNjb3JlUmVxdWVzdCIsImNhbGN1bGF0ZVNjb3JlIiwiZGlyZWN0aW9ucyIsIm1ha2VTaW1wbGVQbGFjaW5nU3RlcHMiLCJ0b3BZIiwibGVmdFgiLCJib3R0b21ZIiwicmlnaHRYIiwibWFrZVB1c2hJblBsYWNpbmdTdGVwcyIsImltYWdpbmVGaWd1cmVQbGFjaW5nIiwiZ2FtZU1hdHJpeCIsInRhcmdldFgiLCJ0YXJnZXRZIiwidGFyZ2V0Q29vcmRpbmF0ZSIsImZpZ3VyZVkiLCJmaWd1cmVYIiwiTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyIiwiaW5pdGlhbERlbGF5TXMiLCJiYXNlIiwicG93IiwiUGxhY2luZ0Vycm9yIiwiSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciIsIk5vdFN1cHBvcnRlZERpcmVjdGlvblN0ZXBFcnJvciIsIlN0ZXBEZWNvcmF0b3IiLCJzdGVwIiwiaXNQZXJmb3JtZWQiLCJUYXJnZXRTdGF0ZSIsInN0ZXBzIiwicmVzdWx0IiwiRmlndXJlUGxhY2luZ1BlcmZvcm1lciIsIm5leHRNb3ZlVGltZW91dElkIiwicGxhY2UiLCJwbGFjaW5nUmVzdWx0IiwidGFyZ2V0U3RhdGUiLCJmcm9tRmlndXJlUGxhY2luZ1Jlc3VsdCIsInByb2Nlc3NUaWNrIiwidGFyZ2V0RmlndXJlIiwic3RlcERlY29yYXRvciIsIm5hbWUiLCJDYWxjdWxhdG9yQWdncmVnYXRlIiwiY2FsY3VsYXRvcnMiLCJyZXF1ZXN0IiwiY2FsY3VsYXRvciIsIlNxdWFzaGVkUm93c0NhbGN1bGF0b3IiLCJGaWxsYWJsZUNlbGxzQ2FsY3VsYXRvciIsImZpbGxhYmxlQ2VsbHNDb3VudCIsImZpbGxhYmxlSGVpZ2h0IiwiY2FsY3VsYXRlRmlsbGFibGVTcGFjZSIsImZpbGxhYmxlQ2VsbHNTY29yZSIsIkhvbGVzVjFDYWxjdWxhdG9yIiwiaG9sZXNDb3VudCIsImhvbGVzQ292ZXJlZEhlaWdodCIsImNhbGN1bGF0ZUhvbGVzQW5kQ292ZXJlZEhlaWdodCIsImhvbGVzQ291bnREZWNyZWFzZSIsImhvbGVzU2NvcmUiLCJyZWFsTWF0cml4Iiwib3JpZ2luYWxUaGVIaWdoZXN0SG9sZVkiLCJvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkiLCJjYWxjdWxhdGVUaGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwiY292ZXJlZENvbHVtbnNZcyIsImhvbGVzQ292ZXJlZEhlaWdodHNTdW0iLCJjb3ZlcmVkWSIsInRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkiLCJ0aGVIaWdoZXN0SG9sZVkiLCJGaWxsZWRIZWlnaHRDYWxjdWxhdG9yIiwiY2FsY3VsYXRlSGVpZ2h0IiwibG93ZXN0RW1wdHlZIiwiVHVubmVsc0NhbGN1bGF0b3IiLCJ0dW5uZWxzU3VtSGVpZ2h0IiwidHVubmVsc0NvdW50IiwiY2FsY3VsYXRlVHVubmVsc0V4Y2VwdFVuY292ZXJlZCIsInR1bm5lbHNTY29yZSIsInJlYWxDb3ZlcmVkQ29sdW1ucyIsInR1bm5lbHMiLCJUZXRyaXNTb2x2ZXIiLCJmYWxsaW5nRmlndXJlUGxhY2luZ1Jlc29sdmVyIiwiZmFsbGluZ0ZpZ3VyZXNQbGFjZXIiLCJvbkZpZ3VyZXNTcGF3bmVkIiwidGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMiLCJhZGRFdmVudExpc3RlbmVyIiwidGV0cmlzIl0sInNvdXJjZVJvb3QiOiIifQ==