(()=>{"use strict";var e,t,s;!function(e){e[e.FallingTickProcessed=0]="FallingTickProcessed",e[e.GameOver=1]="GameOver",e[e.FiguresMoved=2]="FiguresMoved",e[e.LevelUp=3]="LevelUp",e[e.FiguresSpawned=4]="FiguresSpawned"}(e||(e={}));class i{constructor(e,t,s,i){this.gameData=e,this.transferredToMatrixFigures=t,this.squashedLines=s,this.droppedLines=i}getEventType(){return e.FallingTickProcessed}}class n{constructor(e){this.gameData=e}getEventType(){return e.GameOver}}class a{constructor(e){this.gameData=e}getEventType(){return e.FiguresMoved}}class r{constructor(e,t){this.gameData=e,this.newFigures=t}getEventType(){return e.FiguresSpawned}}class l{constructor(){this.handlers=new Map}on(e,t,s=!0){let i=this.handlers.get(e)||[];s&&i.some((e=>e===t))||(i.push(t),this.handlers.set(e,i))}off(e,t){let s=this.handlers.get(e)||[],i=s.indexOf(t);i>0&&s.splice(i,1),this.handlers.set(e,s)}fire(e){(this.handlers.get(e.getEventType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.InitGame=0]="InitGame",e[e.ResumeGame=1]="ResumeGame",e[e.PauseGame=2]="PauseGame",e[e.FiguresFallTick=3]="FiguresFallTick",e[e.GameOver=4]="GameOver",e[e.Render=5]="Render",e[e.MoveLeft=6]="MoveLeft",e[e.MoveRight=7]="MoveRight",e[e.TurnClockwise=8]="TurnClockwise",e[e.MoveDown=9]="MoveDown",e[e.FiguresFallDown=10]="FiguresFallDown"}(t||(t={}));class o{constructor(e){this.gameData=e}getCommandType(){return t.InitGame}}class h{constructor(e){this.gameData=e}getCommandType(){return t.ResumeGame}}class c{constructor(e){this.gameData=e}getCommandType(){return t.PauseGame}}class u{constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallTick}}class d{constructor(e){this.gameData=e}getCommandType(){return t.GameOver}}class m{constructor(e){this.gameData=e}getCommandType(){return t.Render}}class g{constructor(e){this.gameData=e}getCommandType(){return t.MoveLeft}}class p{constructor(e){this.gameData=e}getCommandType(){return t.MoveRight}}class f{constructor(e){this.gameData=e}getCommandType(){return t.TurnClockwise}}class w{constructor(e){this.gameData=e}getCommandType(){return t.MoveDown}}class F{constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallDown}}class v{constructor(){this.handlers=new Map}addHandler(e,t,s=!0){let i=this.handlers.get(e)||[];s&&i.some((e=>e===t))||(i.push(t),this.handlers.set(e,i))}removeHandler(e,t){let s=this.handlers.get(e)||[],i=s.indexOf(t);i>0&&s.splice(i,1),this.handlers.set(e,s)}run(e){(this.handlers.get(e.getCommandType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(s||(s={}));class T{getTurn(e){switch(e){case s.One:return this.getFirstTurn();case s.Two:return this.getSecondTurn();case s.Three:return this.getThirdTurn();case s.Four:return this.getForthTurn()}}}class D extends T{getNormalizedFigure(){let e=this.getFigure(),t=e.reduce(((e,t)=>Math.max(e,t.length)),0);return e.map((e=>{let s=e.length;return e.length=t,e.fill(!1,s-1,t-1)}))}getFirstTurn(){return this.getNormalizedFigure()}getSecondTurn(){let e=this.getNormalizedFigure(),t=[],s=e.length,i=e[0].length;for(let n=0;n<i;n++){t[n]=new Array(s).fill(!1);for(let i=0;i<s;i++)t[n][s-i-1]=e[i][n]}return t}getThirdTurn(){return this.getFirstTurn().reverse().map((e=>e.reverse()))}getForthTurn(){return this.getSecondTurn().reverse().map((e=>e.reverse()))}}class C extends D{getFigure(){return["###".split("").map((e=>"#"===e)),"-#-".split("").map((e=>"#"===e))]}}class H extends D{getFigure(){return["###".split("").map((e=>"#"===e)),"--#".split("").map((e=>"#"===e))]}}class y extends D{getFigure(){return["###".split("").map((e=>"#"===e)),"#--".split("").map((e=>"#"===e))]}}class x extends D{getFigure(){return["##".split("").map((e=>"#"===e)),"##".split("").map((e=>"#"===e))]}}class S extends D{getFigure(){return["####".split("").map((e=>"#"===e))]}}class M extends D{getFigure(){return["##-".split("").map((e=>"#"===e)),"-##".split("").map((e=>"#"===e))]}}class B extends D{getFigure(){return["-##".split("").map((e=>"#"===e)),"##-".split("").map((e=>"#"===e))]}}class E{constructor(e,t){this.x=e,this.y=t}}class b{constructor(e,t,s,i){this.figure=e,this.position=t,this.turnState=s,this.color=i}}class G{constructor(e,t,s){this.fieldWidth=e,this.fieldHeight=t,this.figures=s}}class O{constructor(){this.figuresFallen=0,this.linesSquashed=0}}class k{constructor(e=!1,t=!1,s=[],i=[],n=setTimeout((()=>{})),a,r=1,l=0,o=0,h=new O){this.isInitialized=e,this.isGameOver=t,this.fallingFigures=s,this.matrix=i,this.nextTickTimeoutId=n,this.settings=a,this.level=r,this.score=l,this.combo=o,this.stats=h}static makeSimple(e=10,t=20){return new k(!1,!1,[],new Array(t).fill([]).map((t=>new Array(e).fill(!1))),setTimeout((()=>{})),new G(e,t,[new C,new H,new y,new x,new S,new M,new B]))}}class P{constructor(e,s,i){this.timingsHandler=e,this.eventBus=s,this.commandBus=i,this.gameData=k.makeSimple(),this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(t.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(t.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(t.GameOver,this.gameOverHandler.bind(this))}initGameHandler(t){this.gameData=t.gameData,this.gameData.isInitialized=!0,this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}resumeGameHandler(e){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new o(e.gameData)),this.fallTick())}pauseGameHandler(e){this.gameData=e.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new m(this.gameData))}gameOverHandler(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new n(this.gameData))}fallTick(){this.commandBus.run(new u(this.gameData))}onFallTickProcessed(e){clearTimeout(this.gameData.nextTickTimeoutId),this.gameData.isGameOver||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))}}class R{static canFigureBePlaced(e,t,s){return e.every(((e,i)=>e.every(((e,n)=>{const a=t.y+i,r=t.x+n;return!e||a<0&&r>=0&&r<=s[0].length-1||a in s&&r in s[a]&&!s[a][r]}))))}}class I{constructor(e,t,s){this.filled=e,this.filledGameOver=t,this.empty=s}}class L{constructor(e,t=!0,s=new I("#007400","#780000","#fff"),i=new I("#007400","#780000",null),n=new I("#b8e5e3",null,null)){this.containerElement=e,this.renderProjectionFigures=t,this.matrixCellColors=s,this.fallingFigureCellColors=i,this.projectionFigureCellColors=n}}class q{constructor(e,t){this.filled=e,this.empty=t}}class N{constructor(e,s,i){this.renderSettings=e,this.commandBus=s,this.eventBus=i,this.cellsHtmlElementsMap=[],s.addHandler(t.InitGame,this.initHandler.bind(this)),s.addHandler(t.Render,this.renderCommandHandler.bind(this))}initHandler(t){this.table=N.createHtmlElement('<div style="float: left; display: table; border-collapse: collapse"></div>'),this.cellsHtmlElementsMap=[];for(let e=0;e<t.gameData.settings.fieldHeight;e++){let s=N.createHtmlElement('<div style="display: table-row"></div>');this.cellsHtmlElementsMap[e]=[];for(let i=0;i<t.gameData.settings.fieldWidth;i++){let t=N.createHtmlElement('<div style="display: table-cell; border: 1px solid #ccc; width: 20px; height: 20px"></div>');this.cellsHtmlElementsMap[e][i]=t,s.appendChild(t)}this.table.appendChild(s)}this.renderSettings.containerElement.innerHTML="",this.renderSettings.containerElement.appendChild(this.table),this.scoreDisplay=N.createHtmlElement('<div style="float: left; font-family: \'Helvetica Neue\', sans-serif; font-size: 20px; margin-left: 15px;">\n                Level: <span id="level"></span><br>\n                Score: <span id="score"></span><br>\n                Combo: <span id="combo"></span><br>\n                Figures fallen: <span id="figures_fallen"></span><br>\n                Lines squashed: <span id="lines_squashed"></span><br>\n            </div>'),this.renderSettings.containerElement.appendChild(this.scoreDisplay),this.renderSettings.containerElement.appendChild(N.createHtmlElement('<div style="clear: both"></div>')),this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this)),this.eventBus.on(e.GameOver,this.onGameOver.bind(this)),this.eventBus.on(e.FiguresMoved,this.onFiguresMoved.bind(this))}onFiguresMoved(e){this.renderState(e.gameData)}onFallTickProcessed(e){this.renderState(e.gameData)}onGameOver(e){this.renderState(e.gameData)}renderCommandHandler(e){this.renderState(e.gameData)}renderState(e){this.repaintMatrixCells(e.matrix,new E(0,0),e),this.renderSettings.renderProjectionFigures&&this.renderFallingFiguresProjection(e),this.renderFallingFigures(e),this.renderStats(e)}renderFallingFigures(e){e.fallingFigures.forEach((t=>{this.repaintFallingFiguresCells(t,e)}))}renderFallingFiguresProjection(e){e.fallingFigures.forEach((t=>{const s=t.figure.getTurn(t.turnState),i=t.position.x;let n=t.position.y;for(;R.canFigureBePlaced(s,new E(i,n+1),e.matrix);)n++;this.repaintProjectionFiguresCells(s,new E(i,n),e)}))}repaintMatrixCells(e,t,s){let i;i=s.isGameOver?new q(this.renderSettings.matrixCellColors.filledGameOver,this.renderSettings.matrixCellColors.empty):new q(this.renderSettings.matrixCellColors.filled,this.renderSettings.matrixCellColors.empty),this.repaintCells(e,t,i)}repaintFallingFiguresCells(e,t){let s;s=t.isGameOver?new q(this.renderSettings.fallingFigureCellColors.filledGameOver,this.renderSettings.fallingFigureCellColors.empty):new q(e.color||this.renderSettings.fallingFigureCellColors.filled,this.renderSettings.fallingFigureCellColors.empty),this.repaintCells(e.figure.getTurn(e.turnState),e.position,s)}repaintProjectionFiguresCells(e,t,s){let i;i=s.isGameOver?new q(this.renderSettings.projectionFigureCellColors.filledGameOver,this.renderSettings.projectionFigureCellColors.empty):new q(this.renderSettings.projectionFigureCellColors.filled,this.renderSettings.projectionFigureCellColors.empty),this.repaintCells(e,t,i)}repaintCells(e,t,s){e.forEach(((e,i)=>{e.forEach(((e,n)=>{const a=i+t.y,r=n+t.x;if(a in this.cellsHtmlElementsMap&&r in this.cellsHtmlElementsMap[a]){const t=e?s.filled:s.empty;null!==t&&(this.cellsHtmlElementsMap[a][r].style.background=t)}}))}))}renderStats(e){const t=document.getElementById("level"),s=document.getElementById("score"),i=document.getElementById("combo"),n=document.getElementById("figures_fallen"),a=document.getElementById("lines_squashed");null!==t&&(t.innerHTML=e.level.toString()),null!==s&&(s.innerHTML=e.score.toString()),null!==i&&(i.innerHTML=e.combo.toString()),null!==n&&(n.innerHTML=e.stats.figuresFallen.toString()),null!==a&&(a.innerHTML=e.stats.linesSquashed.toString())}static createHtmlElement(e){let t=document.createElement("div");if(t.innerHTML=e,t.children.length>1||null===t.firstElementChild)throw"The HTML must contain only one child";if(!(t.firstElementChild instanceof HTMLElement))throw"Something went wrong while trying to get HTMLElement child from div";return t.firstElementChild}}class A{constructor(){this.transferredFigures=[],this.isGameOver=!1}}class j{constructor(e,s){this.commandBus=e,this.eventBus=s,this.commandBus.addHandler(t.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(t.FiguresFallDown,this.processDropFiguresCommand.bind(this))}processFiguresFallTickCommand(e){const t=this.fallFiguresForOneCell(e.gameData);let s=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new d(e.gameData)),this.eventBus.fire(new i(e.gameData,t.transferredFigures,s,0))}processDropFiguresCommand(e){let t=new A,s=0;for(;e.gameData.fallingFigures.length>0;){const i=this.fallFiguresForOneCell(e.gameData);t.transferredFigures.push(...i.transferredFigures),t.isGameOver=t.isGameOver||i.isGameOver,s++}let n=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new d(e.gameData)),this.eventBus.fire(new i(e.gameData,t.transferredFigures,n,s-1))}fallFiguresForOneCell(e){let t=new A;return e.fallingFigures.forEach(((s,i)=>{if(this.figureCanFall(e.matrix,s))s.position.y++;else{let n=this.transferFigureToMatrix(e.matrix,s);t.transferredFigures.push(...e.fallingFigures.splice(i,1)),t.isGameOver=t.isGameOver||n}})),t}figureCanFall(e,t){return R.canFigureBePlaced(t.figure.getTurn(t.turnState),new E(t.position.x,t.position.y+1),e)}transferFigureToMatrix(e,t){let s=!1;return t.figure.getTurn(t.turnState).forEach(((i,n)=>{i.forEach(((i,a)=>{if(!i)return;let r=t.position.x+a,l=t.position.y+n;l in e&&r in e[l]&&!e[l][r]?e[l][r]=!0:s=!0}))})),s}squashLines(e){let t=[];return e.forEach(((e,s)=>{e.every((e=>e))&&t.push(s)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t}}class z{static ToArray(e){return Object.keys(e).map((e=>Number.parseInt(e))).filter((e=>!Number.isNaN(e)))}static GetRandom(e){const t=z.ToArray(e);return t[Math.floor(Math.random()*t.length)]}}class W{constructor(e,s){this.eventBus=e,this.commandBus=s,this.commandBus.addHandler(t.InitGame,this.initHandler.bind(this))}initHandler(t){this.eventBus.on(e.FallingTickProcessed,this.processOnFallTick.bind(this))}processOnFallTick(e){this.addFigure(e.gameData)}addFigure(e){if(e.fallingFigures.length>0||e.isGameOver)return;const t=Math.floor(Math.random()*e.settings.figures.length),i=e.settings.figures[t],n=z.GetRandom(s),a=i.getTurn(n),l=Math.max(...a.map((e=>e.length))),o=new E(Math.ceil(e.settings.fieldWidth/2-l/2)-1,-a.length),h=new b(i,o,n);e.fallingFigures.push(h),this.eventBus.fire(new r(e,[h]))}}class X{constructor(e,s){this.commandBus=e,this.eventBus=s,this.commandBus.addHandler(t.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(t.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(t.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(t.TurnClockwise,this.processTurnClockwiseCommand.bind(this))}processMoveLeftCommand(e){e.gameData.fallingFigures.forEach((t=>{R.canFigureBePlaced(t.figure.getTurn(t.turnState),new E(t.position.x-1,t.position.y),e.gameData.matrix)&&t.position.x--})),this.eventBus.fire(new a(e.gameData))}processMoveRightCommand(e){e.gameData.fallingFigures.forEach((t=>{R.canFigureBePlaced(t.figure.getTurn(t.turnState),new E(t.position.x+1,t.position.y),e.gameData.matrix)&&t.position.x++})),this.eventBus.fire(new a(e.gameData))}processTurnClockwiseCommand(e){const t=z.ToArray(s);e.gameData.fallingFigures.forEach((s=>{let i=s.turnState+1;i in t||(i=t[0]),R.canFigureBePlaced(s.figure.getTurn(i),s.position,e.gameData.matrix)&&(s.turnState=i)})),this.eventBus.fire(new a(e.gameData))}processMoveDownCommand(e){this.commandBus.run(new u(e.gameData))}}class _{constructor(e){this.commandBus=e,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(e){window.onkeydown=t=>{"ArrowLeft"===t.code?this.commandBus.run(new g(e.gameData)):"ArrowRight"===t.code?this.commandBus.run(new p(e.gameData)):"ArrowUp"===t.code?this.commandBus.run(new f(e.gameData)):"ArrowDown"===t.code||"ArrowDown"===t.code?this.commandBus.run(new w(e.gameData)):"Space"===t.code&&this.commandBus.run(new F(e.gameData))}}}class U{constructor(e,s,i=new Map([[1,100],[2,300],[3,500],[4,800]]),n=50){this.commandBus=e,this.eventBus=s,this.squashedRowsRewardThresholdsMap=i,this.rewardOnCombo=n,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){if(e.squashedLines.length<0)return;let t=0;this.squashedRowsRewardThresholdsMap.forEach(((s,i)=>{i>e.squashedLines.length||(t=s)})),e.gameData.score+=t*e.gameData.level+this.rewardOnCombo*Math.max(0,e.gameData.combo-1)*e.gameData.level+2*e.droppedLines*e.gameData.level}}class Y{constructor(e,s,i,n){this.eventBus=e,this.commandBus=s,this.levelIncreaseOnSquashedRowsNumber=i,this.maxLevels=n,this.squashedRowsCounter=0,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){0!==e.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,e.gameData.level=Math.min(this.maxLevels,e.gameData.level+1)))}}class J{constructor(e,s){this.commandBus=e,this.eventBus=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){e.transferredToMatrixFigures.length<=0||(e.squashedLines.length>0?e.gameData.combo+=1:e.gameData.combo=0)}}class K{constructor(e){this.delayMs=e}getDelayForNextTickMs(e){return this.delayMs}}class Q{constructor(e,s){this.commandBus=e,this.eventBus=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){e.gameData.stats.figuresFallen+=e.transferredToMatrixFigures.length,e.gameData.stats.linesSquashed+=e.squashedLines.length}}class V{constructor(e=new l,t=new v,s=new P(new K(2e3),e,t),i=new X(t,e),n=new _(t),a=new j(t,e),r=new W(e,t),o=new Y(e,t,8,15),h=new J(t,e),c=new U(t,e),u=new Q(t,e),d=new N(new L(document.body),t,e),m=k.makeSimple()){this.eventBus=e,this.commandBus=t,this.gameController=s,this.movingHandler=i,this.movingController=n,this.fallingFiguresProcessor=a,this.figuresSpawner=r,this.levelCounter=o,this.comboCounter=h,this.scoreCounter=c,this.statsCounter=u,this.tableRenderer=d,this.gameData=m}start(e){e=e||k.makeSimple(),this.commandBus.run(new o(e)),this.commandBus.run(new h(e))}resume(){this.commandBus.run(new h(this.gameData))}pause(){this.commandBus.run(new c(this.gameData))}}class Z{constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class ${constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class ee{constructor(e){this.target=e}get persisted(){return!1}}class te{get persisted(){return!1}}class se{constructor(e,t){this.figuresTargetStates=e,this.placingSteps=t}}class ie extends Error{}class ne extends ie{}class ae{constructor(e,t,s){this.commandBus=e,this.scoreCalculator=t,this.holesHelper=s}resolve(e){if(0===e.fallingFigures.length)return;if(1!==e.fallingFigures.length)throw new ne;const t=e.fallingFigures[0];let s=-1/0,i=new se(new Map,[]);this.processStates(e,((e,n,a)=>{n>s&&(s=n,i=new se(new Map([[t,e]]),a))}));let n="debugMode"in window&&window.debugMode,a=i.figuresTargetStates.get(t);if(n&&void 0!==a){let t=structuredClone(e);a.color="#f00",t.fallingFigures=[a],this.commandBus.run(new m(t)),this.processStates(e,void 0,(e=>{e.color="#00f",t.fallingFigures=[e],this.commandBus.run(new m(t))}))}return i}processStates(e,t,i){const n=e.fallingFigures[0];let a=z.ToArray(s);for(;a[0]!==n.turnState;)a.unshift(a.pop());let r=new Map,l=new Set;a.forEach((e=>{let t=n.figure.getTurn(e),s=t.map((e=>e.map((e=>e?"1":"0")).join())).join("\n");l.has(s)||(l.add(s),r.set(e,t))}));const o=this.holesHelper.collectHoles(e.matrix);r.forEach(((s,a)=>{for(let r=0;r<e.settings.fieldWidth-s[0].length+1;r++){let[l,h]=this.imagineFigureDrop(e.matrix,s,r),c=new E(r,l),u=this.squashLines(h),d=new b(n.figure,c,a);i&&i(d);let m=this.scoreCalculator.calculateScore(e,h,u,o),g=this.makeSimplePlacingSteps(d);t&&t(d,m,g)}})),o.filter((e=>e.isOpened&&e.cells.length>0)).forEach((s=>{let a=e.settings.fieldHeight,l=e.settings.fieldWidth,h=-1,c=-1;s.cells.forEach((e=>{a=Math.min(a,e.y),l=Math.min(l,e.x),h=Math.max(h,e.y),c=Math.max(c,e.x)})),r.forEach(((s,r)=>{for(let u=Math.max(a-s.length+1,0);u<=h;u++)for(let a=Math.max(l-s[0].length+1,0);a<=c;a++){let l=new E(a,u),h=new b(n.figure,l,r);if(i&&i(h),R.canFigureBePlaced(s,l,e.matrix)){let i=this.makePushInPlacingSteps(e,h);if(void 0!==i){let n=this.imagineFigurePlacing(e.matrix,s,l),a=this.squashLines(n),r=this.scoreCalculator.calculateScore(e,n,a,o);t&&t(h,r,i)}}}}))}))}squashLines(e){let t=[];return e.forEach(((e,s)=>{e.every((e=>e))&&t.push(s)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t.length}imagineFigureDrop(e,t,s){let i=-t.length;for(;R.canFigureBePlaced(t,new E(s,i+1),e);)i++;return[i,this.imagineFigurePlacing(e,t,new E(s,i))]}imagineFigurePlacing(e,t,s){let i=structuredClone(e);return t.forEach(((e,t)=>{e.forEach(((e,n)=>{const a=s.y+t,r=s.x+n;a in i&&r in i[a]&&e&&(i[a][r]=!0)}))})),i}makePushInPlacingSteps(e,t){let s=t.figure.getTurn(t.turnState),i=this.holesHelper.collectCoveredColumns(e.matrix,t.position.y-1),n=this.holesHelper.findTheWayOutFromHole(e.matrix,t.position,i,s);if(void 0!==n)return[new Z(t.turnState,!0),new $(n,!1),new ee(t.position.y),new $(t.position.x,!0),new te]}makeSimplePlacingSteps(e){return[new Z(e.turnState,!0),new $(e.position.x,!0),new te]}}class re{constructor(e,t=.8){this.initialDelayMs=e,this.base=t}getDelayForNextTickMs(e){return Math.pow(this.base-.007*(e.level-1),e.level-1)*this.initialDelayMs}}class le extends Error{}class oe extends le{}class he extends le{}class ce extends le{}class ue{constructor(e){this.step=e,this.isPerformed=!1}}class de{constructor(e,t){this.figures=e,this.steps=t}static fromFigurePlacingResult(e){if(void 0!==e)return new de(e.figuresTargetStates,e.placingSteps.map((e=>new ue(e))))}}class me{constructor(e,t=new re(100,.9)){this.commandBus=e,this.timingsHandler=t,this.nextMoveTimeoutId=setTimeout((()=>{})),this.gameData=k.makeSimple()}place(e,t){this.gameData=e,this.targetState=de.fromFigurePlacingResult(t),clearTimeout(this.nextMoveTimeoutId),this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData))}processTick(){if(0===this.gameData.fallingFigures.length)return;if(1!==this.gameData.fallingFigures.length)throw new oe;if(void 0===this.targetState)return;const e=this.gameData.fallingFigures[0],t=this.targetState.figures.get(e);if(t){if(e.figure!==t.figure)throw new he("Both of the original and the target falling figures must have the same figure in it.");this.targetState.steps.every((t=>{if(t.isPerformed&&!t.step.persisted)return!0;let s=t.step;if(s instanceof Z){if(e.turnState!==s.target)return this.commandBus.run(new f(this.gameData)),!1;t.isPerformed=!0}else if(s instanceof $){if(e.position.x!==s.target)return e.position.x>s.target?this.commandBus.run(new g(this.gameData)):this.commandBus.run(new p(this.gameData)),!1;t.isPerformed=!0}else if(s instanceof ee){if(e.position.y<s.target)return this.commandBus.run(new w(this.gameData)),!1;t.isPerformed=!0}else{if(!(s instanceof te))throw new ce("Unknown step "+s.constructor.name);this.commandBus.run(new F(this.gameData)),t.isPerformed=!0}return t.isPerformed}))||(this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))}}}class ge{calculateScore(e,t,s,i){const n=e.settings.fieldHeight,a=e.settings.fieldWidth,r=5*s,[l,o]=this.calculateHolesAndCoveredHeight(t,e.matrix),h=i.length-l;let c;c=0===o||0===l?h>0?150*h:70*h:(h>0?150*h:70*h)-o*Math.pow(o,o/(n*l))*5;const u=this.calculateHeight(t),d=-u*Math.pow(u,u/n)*3,[m,g]=this.calculateFillableSpace(t,a);let p=0;g>5&&(p=-m*Math.pow(m,m/(n*a)));const[f,w]=this.calculateTunnelsExceptUncovered(t,e.matrix);let F;F=0===w?0:70*-w-f*Math.pow(f,f/(n*w))*7;const v=c+r+d+F+p;return isNaN(v)&&console.log(t,c,r,d,F,p),v}calculateHoles(e){let t=new Set,s=0;return e.forEach(((e,i)=>{e.forEach(((e,i)=>{e?t.add(i):t.has(i)&&s++}))})),s}calculateHolesAndCoveredHeight(e,t){const[s,i]=this.calculateTheHighestHoleCoveredY(t);let n=new Map,a=0,r=0;return e.forEach(((e,t)=>{e.forEach(((e,l)=>{e&&!n.has(l)&&n.set(l,t);let o=n.get(l);void 0===o||e||(r++,void 0!==s&&void 0!==i&&(t<s?a+=t-o:o<i&&(a+=i-o)))}))})),[r,a]}calculateTheHighestHoleCoveredY(e){let t,s,i=new Map;return e.some(((e,n)=>e.some(((e,a)=>{e&&!i.has(a)&&i.set(a,n);let r=i.get(a);return void 0!==r&&!e&&(s=n,t=r,!0)})))),[s,t]}calculateHeight(e){let t=-1;return e.every(((e,s)=>!!e.every((e=>!e))&&(t=s,!0))),e.length-t-1}calculateTunnelsExceptUncovered(e,t){let s=new Set;t.every((e=>{e.forEach(((e,t)=>{e&&s.add(t)}))}));let i=new Set,n=new Map;const a=e[0].length;e.every(((e,t)=>(e.forEach(((e,t)=>{e&&i.add(t)})),e.forEach(((e,t)=>{e||i.has(t)||s.has(t)||0!==t&&!i.has(t-1)||t!==a-1&&!i.has(t+1)||n.set(t,(n.get(t)||0)+1)})),i.size<a)));let r=0,l=0;return n.forEach((e=>{e>=3&&(r+=e,l++)})),[r,l]}calculateFillableSpace(e,t){let s=new Set,i=0,n=0;return e.every((e=>(e.forEach(((e,t)=>{e&&s.add(t)})),e.forEach(((e,t)=>{!e&&s.size>0&&!s.has(t)&&i++})),s.size<t&&(s.size>0&&n++,!0)))),[i,n]}}class pe{constructor(e,t){this.isOpened=e,this.cells=t}}class fe{collectHoles(e){let t=[];class s{constructor(e=[],t=[],s=[],i=!1,n=!1){this.cells=e,this.previousRowOpenXs=t,this.currentRowOpenXs=s,this.isOpened=i,this.continues=n}}let i=[],n=new Set;return e.forEach(((a,r)=>{i.forEach((e=>e.continues=!1)),a.forEach(((t,a)=>{if(t)n.add(a);else if(n.has(a)){let t=i.find((e=>e.previousRowOpenXs.some((e=>e===a))||e.currentRowOpenXs.length>0&&e.currentRowOpenXs[e.currentRowOpenXs.length-1]===a));void 0===t&&(t=new s,i.push(t)),t.currentRowOpenXs.push(a),t.cells.push(new E(a,r)),t.continues=!0,t.isOpened=t.isOpened||this.doesTheWayOutFromHoleExists(e,new E(a,r),n)}}));let l=[];i.forEach(((s,i)=>{s.continues&&(s.previousRowOpenXs=s.currentRowOpenXs,s.currentRowOpenXs=[]),s.continues&&r!=e.length-1||(t.push(new pe(s.isOpened,s.cells)),l.push(i))})),l.reverse().forEach((e=>i.splice(e,1)))})),t}doesTheWayOutFromHoleExists(e,t,s,i=[[!0]]){return void 0!==this.findTheWayOutFromHole(e,t,s,i)}findTheWayOutFromHole(e,t,s,i=[[!0]]){for(let n=t.x-1;n>=0&&R.canFigureBePlaced(i,new E(n,t.y),e);n--){let e=!0;for(let t=n+i[0].length-1;t>=n;t--)if(s.has(t)){e=!1;break}if(e)return n}for(let n=t.x+1;n<e[0].length&&R.canFigureBePlaced(i,new E(n,t.y),e);n++){let e=!0;for(let t=n;t<n+i[0].length;t++)if(s.has(t)){e=!1;break}if(e)return n}}collectCoveredColumns(e,t){let s=new Set;return e.some(((i,n)=>(i.forEach(((e,t)=>{e&&s.add(t)})),void 0!==t&&n>=t||s.size==e[0].length))),s}}class we{constructor(e,s,i=new ae(s,new ge,new fe),n=new me(s)){this.eventBus=e,this.commandBus=s,this.fallingFigurePlacingResolver=i,this.fallingFiguresPlacer=n,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FiguresSpawned,this.onFiguresSpawned.bind(this))}onFiguresSpawned(e){const t=this.fallingFigurePlacingResolver.resolve(e.gameData);this.fallingFiguresPlacer.place(e.gameData,t)}}document.addEventListener("DOMContentLoaded",(()=>{const e=new l,t=new v;let s=new V(e,t);new we(e,t),s.start()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBSytVLEdBQzNCN0UsRUFBZTJELE1BQVFsUyxFQUFPLEdBQUd0QyxVQUVyQzZRLENBQ1gsRUNoSEcsTUFBTThFLEdBQ1Q3YSxZQUNZc0ksRUFDQUMsRUFDQXVTLEVBQStCLElBQUk5SCxHQUN2Q3pLLEVBQ0EsSUFBSWtQLEdBQ0osSUFBSW1DLElBRUFtQixFQUF1QixJQUFJaEUsR0FBdUJ4TyxJQVBsRCxLQUFBRCxTQUFBQSxFQUNBLEtBQUFDLFdBQUFBLEVBQ0EsS0FBQXVTLDZCQUFBQSxFQUtBLEtBQUFDLHFCQUFBQSxFQUVSMVosS0FBS2tILFdBQVc5RSxXQUFXNUQsRUFBWXVDLFNBQVVmLEtBQUtvSCxnQkFBZ0JDLEtBQUtySCxNQUMvRSxDQUVRb0gsZ0JBQWdCSyxHQUNwQnpILEtBQUtpSCxTQUFTckgsR0FBR3JCLEVBQVVpQixlQUFnQlEsS0FBSzJaLGlCQUFpQnRTLEtBQUtySCxNQUMxRSxDQUVRMlosaUJBQWlCOVosR0FDckIsTUFBTStaLEVBQTZCNVosS0FBS3laLDZCQUE2QjNILFFBQVFqUyxFQUFNakIsVUFDbkZvQixLQUFLMFoscUJBQXFCOUQsTUFBTS9WLEVBQU1qQixTQUFVZ2IsRUFDcEQsRUN2Qko1TyxTQUFTNk8saUJBQWlCLG9CQUFvQixLQUMxQyxNQUFNNVMsRUFBVyxJQUFJeEgsRUFDZnlILEVBQWEsSUFBSS9FLEVBQ3ZCLElBQUkyWCxFQUFTLElBQUkvSixFQUFhOUksRUFBVUMsR0FDM0IsSUFBSXNTLEdBQWF2UyxFQUFVQyxHQUV4QzRTLEVBQU9uSixPQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmlndXJlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0dhbWVDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9SZW5kZXJlci9UYWJsZVJlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IvUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRW51bUhlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZpZ3VyZXNTcGF3bmVyL0Fsd2F5c09uZUZpZ3VyZVNwYXduZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Nb3ZpbmdIYW5kbGVyL01vdmluZ0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Nb3ZpbmdDb250cm9sbGVyL01vdmluZ0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tYm9Db3VudGVyL0NvbWJvQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9TdGF0c0NvdW50ZXIvU3RhdHNDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVGV0cmlzRmFjYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvQ29tbW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1Jlc29sdmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1BlcmZvcm1lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0hvbGVzSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvVGV0cmlzU29sdmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBlbnVtIEV2ZW50VHlwZSB7XG4gICAgRmFsbGluZ1RpY2tQcm9jZXNzZWQsXG4gICAgR2FtZU92ZXIsXG4gICAgRmlndXJlc01vdmVkLFxuICAgIExldmVsVXAsXG4gICAgRmlndXJlc1NwYXduZWQsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcblxuICAgIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGU7XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgdHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSxcbiAgICAgICAgcHVibGljIHNxdWFzaGVkTGluZXM6IG51bWJlcltdLFxuICAgICAgICBwdWJsaWMgZHJvcHBlZExpbmVzOiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVPdmVyRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkdhbWVPdmVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNNb3ZlZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5GaWd1cmVzTW92ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGV2ZWxVcEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5MZXZlbFVwO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNTcGF3bmVkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIHB1YmxpYyBuZXdGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10sXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZpZ3VyZXNTcGF3bmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV2ZW50QnVzIHtcbiAgICBwcml2YXRlIGhhbmRsZXJzOiBNYXA8RXZlbnRUeXBlLCAoKC4uLl86IGFueSkgPT4gdm9pZClbXT4gPSBuZXcgTWFwKCk7XG5cbiAgICBwdWJsaWMgb24oZXZlbnQ6IEV2ZW50VHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCwgdW5pcXVlOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGlmICh1bmlxdWUgJiYgaGFuZGxlcnMuc29tZShib3VuZEhhbmRsZXIgPT4gYm91bmRIYW5kbGVyID09PSBoYW5kbGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIG9mZihldmVudDogRXZlbnRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgbGV0IGluZGV4ID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIGZpcmUoZXZlbnRQYXlsb2FkOiBFdmVudCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudFBheWxvYWQuZ2V0RXZlbnRUeXBlKCkpIHx8IFtdO1xuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge2hhbmRsZXIoZXZlbnRQYXlsb2FkKX0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGVudW0gQ29tbWFuZFR5cGUge1xuICAgIEluaXRHYW1lLFxuICAgIFJlc3VtZUdhbWUsXG4gICAgUGF1c2VHYW1lLFxuICAgIEZpZ3VyZXNGYWxsVGljayxcbiAgICBHYW1lT3ZlcixcbiAgICBSZW5kZXIsXG4gICAgTW92ZUxlZnQsXG4gICAgTW92ZVJpZ2h0LFxuICAgIFR1cm5DbG9ja3dpc2UsXG4gICAgTW92ZURvd24sXG4gICAgRmlndXJlc0ZhbGxEb3duLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcblxuICAgIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgSW5pdEdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkluaXRHYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlc3VtZUdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlJlc3VtZUdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGF1c2VHYW1lQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5QYXVzZUdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbFRpY2s7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZU92ZXJDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkdhbWVPdmVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlckNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUmVuZGVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVMZWZ0Q29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlTGVmdDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlUmlnaHRDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVSaWdodDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUdXJuQ2xvY2t3aXNlQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVEb3duQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlRG93bjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEcm9wRmlndXJlc0NvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxEb3duO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbW1hbmRCdXMge1xuICAgIHByaXZhdGUgaGFuZGxlcnM6IE1hcDxDb21tYW5kVHlwZSwgKChwYXlsb2FkOiBDb21tYW5kKSA9PiB2b2lkKVtdPiA9IG5ldyBNYXAoKTtcblxuICAgIHB1YmxpYyBhZGRIYW5kbGVyKGV2ZW50OiBDb21tYW5kVHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCwgdW5pcXVlOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGlmICh1bmlxdWUgJiYgaGFuZGxlcnMuc29tZShib3VuZEhhbmRsZXIgPT4gYm91bmRIYW5kbGVyID09PSBoYW5kbGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUhhbmRsZXIoZXZlbnQ6IENvbW1hbmRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgbGV0IGluZGV4ID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJ1bihwYXlsb2FkOiBDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KHBheWxvYWQuZ2V0Q29tbWFuZFR5cGUoKSkgfHwgW107XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7aGFuZGxlcihwYXlsb2FkKX0pO1xuICAgIH1cbn1cbiIsImV4cG9ydCBlbnVtIEZpZ3VyZVR1cm5TdGF0ZSB7XG4gICAgT25lLFxuICAgIFR3byxcbiAgICBUaHJlZSxcbiAgICBGb3VyLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZ3VyZSB7XG4gICAgLyoqXG4gICAgICogQW55IGZpZ3VyZSBtdXN0IGJlIGFibGUgdG8gdHVybiA0IHRpbWVzIGluIDIgZGltZW5zaW9ucy5cbiAgICAgKiBBbGwgdHVybnMgYXJlIGNsb2Nrd2lzZS5cbiAgICAgKi9cbiAgICBnZXRUdXJuKGZpZ3VyZVR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlKTogYm9vbGVhbltdW107XG4gICAgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIGdldFNlY29uZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXTtcbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0RmlndXJlIGltcGxlbWVudHMgRmlndXJle1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgcHVibGljIGFic3RyYWN0IGdldFNlY29uZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgcHVibGljIGFic3RyYWN0IGdldFRoaXJkVHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdO1xuXG4gICAgZ2V0VHVybihmaWd1cmVUdXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgc3dpdGNoIChmaWd1cmVUdXJuU3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLk9uZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGaXJzdFR1cm4oKTtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLlR3bzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTZWNvbmRUdXJuKCk7XG4gICAgICAgICAgICBjYXNlIEZpZ3VyZVR1cm5TdGF0ZS5UaHJlZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaGlyZFR1cm4oKTtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLkZvdXI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9ydGhUdXJuKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBnaXZlcyBhbiBlYXN5IHdheSB0byBkZWZpbmUgZmlndXJlcyBmb3IgdGV0cmlzLlxuICogSnVzdCBpbXBsZW1lbnQgdGhlIGdldEZpZ3VyZSBtZXRob2QgYW5kIHJldHVybiBmaWd1cmUgbGlrZSB0aGlzOlxuICogYGBgKHRzKVxuICogcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gKiAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgW3RydWUsICB0cnVlLCB0cnVlXSxcbiAqICAgICAgICAgW2ZhbHNlLCB0cnVlLCBmYWxzZV0sXG4gKiAgICAgICAgIFt0cnVlLCAgdHJ1ZSwgdHJ1ZV0sXG4gKiAgICAgXTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIE9yIGRlZmluZSBpdCBsaWtlIHRoaXMgZm9yIG1vcmUgdmlzdWFsIHByZXNlbnRhdGlvbjpcbiAqIGBgYCh0cylcbiAqIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICogICAgIHJldHVybiBbXG4gKiAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgICAgICBcIi0jLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgXTtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU2ltcGx5Um90YXRhYmxlRmlndXJlIGV4dGVuZHMgQWJzdHJhY3RGaWd1cmUge1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW107XG5cbiAgICBwcml2YXRlIGdldE5vcm1hbGl6ZWRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICBsZXQgZmlndXJlID0gdGhpcy5nZXRGaWd1cmUoKTtcbiAgICAgICAgbGV0IHRoZUxvbmdlc3RSb3dTaXplID0gZmlndXJlLnJlZHVjZShcbiAgICAgICAgICAgIChwcmV2aW91cywgY3VycmVudCkgPT4gTWF0aC5tYXgocHJldmlvdXMsIGN1cnJlbnQubGVuZ3RoKSxcbiAgICAgICAgICAgIDBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGZpZ3VyZS5tYXAocm93ID0+IHtcbiAgICAgICAgICAgIGxldCBvcmlnaW5hbExlbmd0aCA9IHJvdy5sZW5ndGg7XG4gICAgICAgICAgICByb3cubGVuZ3RoID0gdGhlTG9uZ2VzdFJvd1NpemU7XG4gICAgICAgICAgICByZXR1cm4gcm93LmZpbGwoZmFsc2UsIG9yaWdpbmFsTGVuZ3RoIC0gMSwgdGhlTG9uZ2VzdFJvd1NpemUgLSAxKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE5vcm1hbGl6ZWRGaWd1cmUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIGxldCBvcmlnaW5hbEZpZ3VyZSA9IHRoaXMuZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpO1xuICAgICAgICBsZXQgdHVybmVkRmlndXJlOiBib29sZWFuW11bXSA9IFtdO1xuICAgICAgICBsZXQgb3JpZ2luYWxGaWd1cmVIZWlnaHQgPSBvcmlnaW5hbEZpZ3VyZS5sZW5ndGg7XG4gICAgICAgIGxldCBvcmlnaW5hbEZpZ3VyZVdpZHRoID0gb3JpZ2luYWxGaWd1cmVbMF0ubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IG9yaWdpbmFsRmlndXJlV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgdHVybmVkRmlndXJlW3hdID0gbmV3IEFycmF5KG9yaWdpbmFsRmlndXJlSGVpZ2h0KS5maWxsKGZhbHNlKTtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgb3JpZ2luYWxGaWd1cmVIZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgIHR1cm5lZEZpZ3VyZVt4XVtvcmlnaW5hbEZpZ3VyZUhlaWdodCAtIHkgLSAxXSA9IG9yaWdpbmFsRmlndXJlW3ldW3hdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0dXJuZWRGaWd1cmU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRoaXJkVHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHVybigpLnJldmVyc2UoKS5tYXAocm93ID0+IHJvdy5yZXZlcnNlKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZWNvbmRUdXJuKCkucmV2ZXJzZSgpLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVEZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiLSMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJpZ2h0TEZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiLS0jXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExlZnRMRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCIjLS1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3F1YXJlRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIiMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN0aWNrRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMWkZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiLSMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuXG5leHBvcnQgY2xhc3MgUlpGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCItIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIiMjLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0ZpZ3VyZSwgRmlndXJlVHVyblN0YXRlLCBMZWZ0TEZpZ3VyZSwgTFpGaWd1cmUsIFJpZ2h0TEZpZ3VyZSwgUlpGaWd1cmUsIFNxdWFyZUZpZ3VyZSwgU3RpY2tGaWd1cmUsIFRGaWd1cmV9IGZyb20gXCIuL0ZpZ3VyZXNcIjtcblxuLyoqXG4gKiB4IGZvciBob3Jpem9udGFsIHBvc2l0aW9uaW5nXG4gKiB5IGZvciB2ZXJ0aWNhbCBwb3NpdGlvbmluZ1xuICovXG5leHBvcnQgY2xhc3MgQ29vcmRpbmF0ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB4OiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyB5OiBudW1iZXIsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgRmFsbGluZ0ZpZ3VyZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWd1cmU6IEZpZ3VyZSxcbiAgICAgICAgcHVibGljIHBvc2l0aW9uOiBDb29yZGluYXRlLFxuICAgICAgICBwdWJsaWMgdHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUsXG4gICAgICAgIHB1YmxpYyBjb2xvcjogc3RyaW5nfHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lU2V0dGluZ3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZmllbGRXaWR0aDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgZmllbGRIZWlnaHQ6IG51bWJlcixcbiAgICAgICAgcHVibGljIGZpZ3VyZXM6IEZpZ3VyZVtdLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFN0YXRzIHtcbiAgICBwdWJsaWMgZmlndXJlc0ZhbGxlbiA9IDA7XG4gICAgcHVibGljIGxpbmVzU3F1YXNoZWQgPSAwO1xufVxuXG5leHBvcnQgY2xhc3MgR2FtZURhdGEge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlLFxuICAgICAgICBwdWJsaWMgaXNHYW1lT3ZlcjogYm9vbGVhbiA9IGZhbHNlLFxuICAgICAgICBwdWJsaWMgZmFsbGluZ0ZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSA9IFtdLFxuICAgICAgICBwdWJsaWMgbWF0cml4OiBib29sZWFuW11bXSA9IFtdLFxuICAgICAgICBwdWJsaWMgbmV4dFRpY2tUaW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIH0pLFxuICAgICAgICBwdWJsaWMgc2V0dGluZ3M6IEdhbWVTZXR0aW5ncyxcbiAgICAgICAgcHVibGljIGxldmVsOiBudW1iZXIgPSAxLFxuICAgICAgICBwdWJsaWMgc2NvcmU6IG51bWJlciA9IDAsXG4gICAgICAgIHB1YmxpYyBjb21ibzogbnVtYmVyID0gMCxcbiAgICAgICAgcHVibGljIHN0YXRzOiBTdGF0cyA9IG5ldyBTdGF0cygpLFxuICAgICkge31cblxuICAgIHN0YXRpYyBtYWtlU2ltcGxlKHdpZHRoOiBudW1iZXIgPSAxMCwgaGVpZ2h0OiBudW1iZXIgPSAyMCk6IEdhbWVEYXRhIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHYW1lRGF0YShcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIG5ldyBBcnJheShoZWlnaHQpLmZpbGwoW10pXG4gICAgICAgICAgICAgICAgLm1hcChfID0+IG5ldyBBcnJheSh3aWR0aCkuZmlsbChmYWxzZSkpLFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG5ldyBHYW1lU2V0dGluZ3MoXG4gICAgICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJpZ2h0TEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgTGVmdExGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFNxdWFyZUZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgU3RpY2tGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IExaRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSWkZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICApLFxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL1RpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQsIEZpZ3VyZXNNb3ZlZEV2ZW50LCBHYW1lT3ZlckV2ZW50fSBmcm9tIFwiLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCwgSW5pdEdhbWVDb21tYW5kLCBQYXVzZUdhbWVDb21tYW5kLCBSZW5kZXJDb21tYW5kLCBSZXN1bWVHYW1lQ29tbWFuZH0gZnJvbSBcIi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIEdhbWVDb250cm9sbGVyIHtcbiAgICBwcml2YXRlIGdhbWVEYXRhOiBHYW1lRGF0YSA9IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcblxuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgcHJpdmF0ZSB0aW1pbmdzSGFuZGxlcjogVGltaW5nc0hhbmRsZXIsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUmVzdW1lR2FtZSwgdGhpcy5yZXN1bWVHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUGF1c2VHYW1lLCB0aGlzLnBhdXNlR2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkdhbWVPdmVyLCB0aGlzLmdhbWVPdmVySGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGNvbW1hbmQuZ2FtZURhdGE7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbFRpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXN1bWVHYW1lSGFuZGxlcihjb21tYW5kOiBSZXN1bWVHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmdhbWVEYXRhLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEluaXRHYW1lQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mYWxsVGljaygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcGF1c2VHYW1lSGFuZGxlcihjb21tYW5kOiBQYXVzZUdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEgPSBjb21tYW5kLmdhbWVEYXRhO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2FtZU92ZXJIYW5kbGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEdhbWVPdmVyRXZlbnQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmFsbFRpY2soKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIGlmICghdGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICB0aGlzLmZhbGxUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgdGhpcy50aW1pbmdzSGFuZGxlci5nZXREZWxheUZvck5leHRUaWNrTXModGhpcy5nYW1lRGF0YSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0Nvb3JkaW5hdGV9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIEZpZ3VyZVBsYWNpbmdDaGVja2VyIHtcbiAgICBwdWJsaWMgc3RhdGljIGNhbkZpZ3VyZUJlUGxhY2VkKHRhcmdldEZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10sIHRhcmdldFBvc2l0aW9uOiBDb29yZGluYXRlLCBtYXRyaXg6IGJvb2xlYW5bXVtdKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0YXJnZXRGaWd1cmVNYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5ldmVyeSgodmFsdWUsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHRhcmdldFBvc2l0aW9uLnkgKyB5O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxYID0gdGFyZ2V0UG9zaXRpb24ueCArIHg7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB8fCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsWSA8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIDw9IG1hdHJpeFswXS5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgICkgfHwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhbFkgaW4gbWF0cml4XG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCBpbiBtYXRyaXhbcmVhbFldXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhbWF0cml4W3JlYWxZXVtyZWFsWF1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmQsIFJlbmRlckNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgR2FtZU92ZXJFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWxsZWQ6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZmlsbGVkR2FtZU92ZXI6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZW1wdHk6IHN0cmluZ3xudWxsLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXJTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb250YWluZXJFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICAgICAgcHVibGljIHJlbmRlclByb2plY3Rpb25GaWd1cmVzOiBib29sZWFuID0gdHJ1ZSxcbiAgICAgICAgcHVibGljIG1hdHJpeENlbGxDb2xvcnM6IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyA9IG5ldyBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MoXG4gICAgICAgICAgICAnIzAwNzQwMCcsXG4gICAgICAgICAgICAnIzc4MDAwMCcsXG4gICAgICAgICAgICAnI2ZmZicsXG4gICAgICAgICksXG4gICAgICAgIHB1YmxpYyBmYWxsaW5nRmlndXJlQ2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjMDA3NDAwJyxcbiAgICAgICAgICAgICcjNzgwMDAwJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICksXG4gICAgICAgIHB1YmxpYyBwcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjYjhlNWUzJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICApLFxuICAgICkge31cbn1cblxuY2xhc3MgQ2VsbENvbG9ycyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWxsZWQ6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZW1wdHk6IHN0cmluZ3xudWxsLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIge1xuICAgIHByaXZhdGUgY2VsbHNIdG1sRWxlbWVudHNNYXA6IEhUTUxFbGVtZW50W11bXSA9IFtdO1xuICAgIHByaXZhdGUgdGFibGU6IEhUTUxFbGVtZW50fHVuZGVmaW5lZDtcbiAgICBwcml2YXRlIHNjb3JlRGlzcGxheTogSFRNTEVsZW1lbnR8dW5kZWZpbmVkO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBwcml2YXRlIHJlbmRlclNldHRpbmdzOiBUYWJsZVJlbmRlcmVyU2V0dGluZ3MsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLlJlbmRlciwgdGhpcy5yZW5kZXJDb21tYW5kSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLnRhYmxlID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImZsb2F0OiBsZWZ0OyBkaXNwbGF5OiB0YWJsZTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZVwiPjwvZGl2PicpO1xuICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwID0gW107XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY29tbWFuZC5nYW1lRGF0YS5zZXR0aW5ncy5maWVsZEhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBsZXQgcm93ID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImRpc3BsYXk6IHRhYmxlLXJvd1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFt5XSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBjZWxsID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImRpc3BsYXk6IHRhYmxlLWNlbGw7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHhcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3ldW3hdID0gY2VsbDtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50YWJsZSk7XG5cbiAgICAgICAgdGhpcy5zY29yZURpc3BsYXkgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KFxuICAgICAgICAgICAgYDxkaXYgc3R5bGU9XCJmbG9hdDogbGVmdDsgZm9udC1mYW1pbHk6ICdIZWx2ZXRpY2EgTmV1ZScsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMjBweDsgbWFyZ2luLWxlZnQ6IDE1cHg7XCI+XG4gICAgICAgICAgICAgICAgTGV2ZWw6IDxzcGFuIGlkPVwibGV2ZWxcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIFNjb3JlOiA8c3BhbiBpZD1cInNjb3JlXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBDb21ibzogPHNwYW4gaWQ9XCJjb21ib1wiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgRmlndXJlcyBmYWxsZW46IDxzcGFuIGlkPVwiZmlndXJlc19mYWxsZW5cIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIExpbmVzIHNxdWFzaGVkOiA8c3BhbiBpZD1cImxpbmVzX3NxdWFzaGVkXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgIDwvZGl2PmApO1xuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zY29yZURpc3BsYXkpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiY2xlYXI6IGJvdGhcIj48L2Rpdj4nKSk7XG5cbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuR2FtZU92ZXIsIHRoaXMub25HYW1lT3Zlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmlndXJlc01vdmVkLCB0aGlzLm9uRmlndXJlc01vdmVkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GaWd1cmVzTW92ZWQoY29tbWFuZDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChjb21tYW5kOiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkdhbWVPdmVyKGNvbW1hbmQ6IEdhbWVPdmVyRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckNvbW1hbmRIYW5kbGVyKGNvbW1hbmQ6IFJlbmRlckNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclN0YXRlKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlcGFpbnRNYXRyaXhDZWxscyhnYW1lRGF0YS5tYXRyaXgsIG5ldyBDb29yZGluYXRlKDAsIDApLCBnYW1lRGF0YSk7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlclNldHRpbmdzLnJlbmRlclByb2plY3Rpb25GaWd1cmVzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbihnYW1lRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJGYWxsaW5nRmlndXJlcyhnYW1lRGF0YSk7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdHMoZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyRmFsbGluZ0ZpZ3VyZXMoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goZmFsbGluZ0ZpZ3VyZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlcGFpbnRGYWxsaW5nRmlndXJlc0NlbGxzKGZhbGxpbmdGaWd1cmUsIGdhbWVEYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJGYWxsaW5nRmlndXJlc1Byb2plY3Rpb24oZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goZmFsbGluZ0ZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWd1cmVNYXRyaXggPSBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKTtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3Rpb25GaWd1cmVYID0gZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi54O1xuICAgICAgICAgICAgbGV0IHByb2plY3Rpb25GaWd1cmVZID0gZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55O1xuICAgICAgICAgICAgd2hpbGUoRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoZmlndXJlTWF0cml4LCBuZXcgQ29vcmRpbmF0ZShwcm9qZWN0aW9uRmlndXJlWCwgcHJvamVjdGlvbkZpZ3VyZVkgKyAxKSwgZ2FtZURhdGEubWF0cml4KSkge1xuICAgICAgICAgICAgICAgIHByb2plY3Rpb25GaWd1cmVZKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcGFpbnRQcm9qZWN0aW9uRmlndXJlc0NlbGxzKFxuICAgICAgICAgICAgICAgIGZpZ3VyZU1hdHJpeCxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShwcm9qZWN0aW9uRmlndXJlWCwgcHJvamVjdGlvbkZpZ3VyZVkpLFxuICAgICAgICAgICAgICAgIGdhbWVEYXRhXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRNYXRyaXhDZWxscyhtYXRyaXg6IGJvb2xlYW5bXVtdLCBpbmRlbnQ6IENvb3JkaW5hdGUsIGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBsZXQgY29sb3JzOiBDZWxsQ29sb3JzO1xuICAgICAgICBpZiAoZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmZpbGxlZEdhbWVPdmVyLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZmlsbGVkLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMobWF0cml4LCBpbmRlbnQsIGNvbG9ycyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50RmFsbGluZ0ZpZ3VyZXNDZWxscyhmYWxsaW5nRmlndXJlOiBGYWxsaW5nRmlndXJlLCBnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNvbG9yczogQ2VsbENvbG9ycztcbiAgICAgICAgaWYgKGdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnMuZmlsbGVkR2FtZU92ZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlLmNvbG9yIHx8IHRoaXMucmVuZGVyU2V0dGluZ3MuZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnMuZmlsbGVkLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwYWludENlbGxzKFxuICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgY29sb3JzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50UHJvamVjdGlvbkZpZ3VyZXNDZWxscyhtYXRyaXg6IGJvb2xlYW5bXVtdLCBpbmRlbnQ6IENvb3JkaW5hdGUsIGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBsZXQgY29sb3JzOiBDZWxsQ29sb3JzO1xuICAgICAgICBpZiAoZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5maWxsZWRHYW1lT3ZlcixcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZmlsbGVkLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwYWludENlbGxzKG1hdHJpeCwgaW5kZW50LCBjb2xvcnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludENlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgY2VsbENvbG9yczogQ2VsbENvbG9ycyk6IHZvaWQge1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsdWUsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHkgKyBpbmRlbnQueTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWCA9IHggKyBpbmRlbnQueDtcbiAgICAgICAgICAgICAgICBpZiAocmVhbFkgaW4gdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFxuICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCBpbiB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3JlYWxZXVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9IHZhbHVlID8gY2VsbENvbG9ycy5maWxsZWQgOiBjZWxsQ29sb3JzLmVtcHR5O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29sb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbcmVhbFldW3JlYWxYXS5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJTdGF0cyhnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGV2ZWxTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xldmVsJyk7XG4gICAgICAgIGNvbnN0IHNjb3JlU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpO1xuICAgICAgICBjb25zdCBjb21ib1NwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tYm8nKTtcbiAgICAgICAgY29uc3QgZmlndXJlc0ZhbGxlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWd1cmVzX2ZhbGxlbicpO1xuICAgICAgICBjb25zdCBsaW5lc1NxdWFzaGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmVzX3NxdWFzaGVkJyk7XG4gICAgICAgIGlmIChsZXZlbFNwYW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxldmVsU3Bhbi5pbm5lckhUTUwgPSBnYW1lRGF0YS5sZXZlbC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY29yZVNwYW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHNjb3JlU3Bhbi5pbm5lckhUTUwgPSBnYW1lRGF0YS5zY29yZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21ib1NwYW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbWJvU3Bhbi5pbm5lckhUTUwgPSBnYW1lRGF0YS5jb21iby50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWd1cmVzRmFsbGVuICE9PSBudWxsKSB7XG4gICAgICAgICAgICBmaWd1cmVzRmFsbGVuLmlubmVySFRNTCA9IGdhbWVEYXRhLnN0YXRzLmZpZ3VyZXNGYWxsZW4udG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGluZXNTcXVhc2hlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGluZXNTcXVhc2hlZC5pbm5lckhUTUwgPSBnYW1lRGF0YS5zdGF0cy5saW5lc1NxdWFzaGVkLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjcmVhdGVIdG1sRWxlbWVudChodG1sOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgIGlmIChjb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoID4gMSB8fCBjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93ICdUaGUgSFRNTCBtdXN0IGNvbnRhaW4gb25seSBvbmUgY2hpbGQnO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgJ1NvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIHRyeWluZyB0byBnZXQgSFRNTEVsZW1lbnQgY2hpbGQgZnJvbSBkaXYnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtEcm9wRmlndXJlc0NvbW1hbmQsIENvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBHYW1lT3ZlckNvbW1hbmQsIEZpZ3VyZXNGYWxsVGlja0NvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5cbmNsYXNzIEZhbGxpbmdSZXN1bHQge1xuICAgIHB1YmxpYyB0cmFuc2ZlcnJlZEZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSA9IFtdO1xuICAgIHB1YmxpYyBpc0dhbWVPdmVyOiBib29sZWFuID0gZmFsc2U7XG59XG5cbmV4cG9ydCBjbGFzcyBSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3Ige1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5GaWd1cmVzRmFsbFRpY2ssIHRoaXMucHJvY2Vzc0ZpZ3VyZXNGYWxsVGlja0NvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsRG93biwgdGhpcy5wcm9jZXNzRHJvcEZpZ3VyZXNDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0ZpZ3VyZXNGYWxsVGlja0NvbW1hbmQoY29tbWFuZDogRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCkge1xuICAgICAgICBjb25zdCBmYWxsaW5nUmVzdWx0ID0gdGhpcy5mYWxsRmlndXJlc0Zvck9uZUNlbGwoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgICAgIGxldCBzcXVhc2hlZExpbmVzID0gdGhpcy5zcXVhc2hMaW5lcyhjb21tYW5kLmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGlmIChmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEdhbWVPdmVyQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KFxuICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YSxcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLFxuICAgICAgICAgICAgc3F1YXNoZWRMaW5lcyxcbiAgICAgICAgICAgIDBcbiAgICAgICAgKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzRHJvcEZpZ3VyZXNDb21tYW5kKGNvbW1hbmQ6IERyb3BGaWd1cmVzQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBsZXQgZmFsbGluZ1Jlc3VsdCA9IG5ldyBGYWxsaW5nUmVzdWx0KCk7XG4gICAgICAgIGxldCBkcm9wcGVkTGluZXMgPSAwO1xuICAgICAgICB3aGlsZSAoY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBvbmVDZWxsRmFsbGluZ1Jlc3VsdCA9IHRoaXMuZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMucHVzaCguLi5vbmVDZWxsRmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMpO1xuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyID0gZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyIHx8IG9uZUNlbGxGYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXI7XG4gICAgICAgICAgICBkcm9wcGVkTGluZXMrKztcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3F1YXNoZWRMaW5lcyA9IHRoaXMuc3F1YXNoTGluZXMoY29tbWFuZC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBpZiAoZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBHYW1lT3ZlckNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmFsbFRpY2tQcm9jZXNzZWRFdmVudChcbiAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEsXG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyxcbiAgICAgICAgICAgIHNxdWFzaGVkTGluZXMsXG4gICAgICAgICAgICBkcm9wcGVkTGluZXMgLSAxLFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZhbGxGaWd1cmVzRm9yT25lQ2VsbChnYW1lRGF0YTogR2FtZURhdGEpOiBGYWxsaW5nUmVzdWx0IHtcbiAgICAgICAgbGV0IGZhbGxpbmdSZXN1bHQgPSBuZXcgRmFsbGluZ1Jlc3VsdCgpO1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKChmYWxsaW5nRmlndXJlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZmlndXJlQ2FuRmFsbChnYW1lRGF0YS5tYXRyaXgsIGZhbGxpbmdGaWd1cmUpKSB7XG4gICAgICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBmaWd1cmVHYW1lT3ZlclJlc3VsdCA9IHRoaXMudHJhbnNmZXJGaWd1cmVUb01hdHJpeChcbiAgICAgICAgICAgICAgICAgICAgZ2FtZURhdGEubWF0cml4LFxuICAgICAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcy5wdXNoKC4uLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLnNwbGljZShpbmRleCwgMSkpO1xuICAgICAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciA9IGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciB8fCBmaWd1cmVHYW1lT3ZlclJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxsaW5nUmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgZmlndXJlQ2FuRmFsbChtYXRyaXg6IGJvb2xlYW5bXVtdLCBmYWxsaW5nRmlndXJlOiBGYWxsaW5nRmlndXJlKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi54LCBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnkgKyAxKSxcbiAgICAgICAgICAgIG1hdHJpeFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmZXJGaWd1cmVUb01hdHJpeChtYXRyaXg6IGJvb2xlYW5bXVtdLCBmYWxsaW5nRmlndXJlOiBGYWxsaW5nRmlndXJlKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBpc0dhbWVPdmVyID0gZmFsc2U7XG4gICAgICAgIGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpXG4gICAgICAgICAgICAuZm9yRWFjaCgocm93LCBmaWd1cmVDZWxsWSkgPT4ge1xuICAgICAgICAgICAgICAgIHJvdy5mb3JFYWNoKChjZWxsVmFsdWUsIGZpZ3VyZUNlbGxYKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2VsbFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdHJpeFggPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnggKyBmaWd1cmVDZWxsWDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdHJpeFkgPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnkgKyBmaWd1cmVDZWxsWTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdHJpeFkgaW4gbWF0cml4XG4gICAgICAgICAgICAgICAgICAgICAgICAmJiBtYXRyaXhYIGluIG1hdHJpeFttYXRyaXhZXVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIW1hdHJpeFttYXRyaXhZXVttYXRyaXhYXVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeFttYXRyaXhZXVttYXRyaXhYXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0dhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpc0dhbWVPdmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3F1YXNoTGluZXMobWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlcltdIHtcbiAgICAgICAgbGV0IGxpbmVzVG9TcXVhc2g6IG51bWJlcltdID0gW107XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGxldCBjYW5CZVNxdWFzaGVkID0gcm93LmV2ZXJ5KGNlbGwgPT4gY2VsbCk7XG4gICAgICAgICAgICBpZiAoY2FuQmVTcXVhc2hlZCkge1xuICAgICAgICAgICAgICAgIGxpbmVzVG9TcXVhc2gucHVzaCh5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGxpbmVzVG9TcXVhc2guZm9yRWFjaCh5ID0+IHtcbiAgICAgICAgICAgIG1hdHJpeC5zcGxpY2UoeSwgMSk7XG4gICAgICAgICAgICBtYXRyaXgudW5zaGlmdChuZXcgQXJyYXkobWF0cml4WzBdLmxlbmd0aCkuZmlsbChmYWxzZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpbmVzVG9TcXVhc2g7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEVudW1IZWxwZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgVG9BcnJheSh2YWw6IGFueSk6IHR5cGVvZiB2YWxbXSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpXG4gICAgICAgICAgICAubWFwKG4gPT4gTnVtYmVyLnBhcnNlSW50KG4pKVxuICAgICAgICAgICAgLmZpbHRlcihuID0+ICFOdW1iZXIuaXNOYU4obikpIGFzIHVua25vd24gYXMgdHlwZW9mIHZhbFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgR2V0UmFuZG9tKHZhbDogYW55KTogdHlwZW9mIHZhbCB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IEVudW1IZWxwZXIuVG9BcnJheSh2YWwpO1xuICAgICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZhbHVlcy5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gdmFsdWVzW3JhbmRvbUluZGV4XTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQsIEZpZ3VyZXNTcGF3bmVkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi9GaWd1cmVzXCI7XG5pbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RW51bUhlbHBlcn0gZnJvbSBcIi4uL1V0aWxzL0VudW1IZWxwZXJcIjtcblxuZXhwb3J0IGNsYXNzIEFsd2F5c09uZUZpZ3VyZVNwYXduZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRIYW5kbGVyKGV2ZW50OiBJbml0R2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihcbiAgICAgICAgICAgIEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCxcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc09uRmFsbFRpY2suYmluZCh0aGlzKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NPbkZhbGxUaWNrKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWRkRmlndXJlKGV2ZW50LmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZEZpZ3VyZShnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgaWYgKGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA+IDAgfHwgZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlndXJlSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBnYW1lRGF0YS5zZXR0aW5ncy5maWd1cmVzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZSA9IGdhbWVEYXRhLnNldHRpbmdzLmZpZ3VyZXNbZmlndXJlSW5kZXhdO1xuICAgICAgICBjb25zdCB0dXJuU3RhdGUgPSBFbnVtSGVscGVyLkdldFJhbmRvbShGaWd1cmVUdXJuU3RhdGUpO1xuICAgICAgICBjb25zdCBmaWd1cmVNYXRyaXggPSBmaWd1cmUuZ2V0VHVybih0dXJuU3RhdGUpO1xuICAgICAgICBjb25zdCBmaWd1cmVXaWR0aCA9IE1hdGgubWF4KC4uLmZpZ3VyZU1hdHJpeC5tYXAocm93ID0+IHJvdy5sZW5ndGgpKTtcbiAgICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IG5ldyBDb29yZGluYXRlKFxuICAgICAgICAgICAgTWF0aC5jZWlsKGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLyAyIC0gZmlndXJlV2lkdGggLyAyKSAtIDEsXG4gICAgICAgICAgICAtZmlndXJlTWF0cml4Lmxlbmd0aCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZmFsbGluZ0ZpZ3VyZSA9IG5ldyBGYWxsaW5nRmlndXJlKFxuICAgICAgICAgICAgZmlndXJlLFxuICAgICAgICAgICAgY29vcmRpbmF0ZSxcbiAgICAgICAgICAgIHR1cm5TdGF0ZVxuICAgICAgICApO1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5wdXNoKGZhbGxpbmdGaWd1cmUpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNTcGF3bmVkRXZlbnQoZ2FtZURhdGEsIFtmYWxsaW5nRmlndXJlXSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIE1vdmVMZWZ0Q29tbWFuZCwgTW92ZVJpZ2h0Q29tbWFuZCwgVHVybkNsb2Nrd2lzZUNvbW1hbmQsIE1vdmVEb3duQ29tbWFuZCwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi9GaWd1cmVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBGaWd1cmVzTW92ZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmV9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtFbnVtSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvRW51bUhlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgTW92aW5nSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVMZWZ0LCB0aGlzLnByb2Nlc3NNb3ZlTGVmdENvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVSaWdodCwgdGhpcy5wcm9jZXNzTW92ZVJpZ2h0Q29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZURvd24sIHRoaXMucHJvY2Vzc01vdmVEb3duQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuVHVybkNsb2Nrd2lzZSwgdGhpcy5wcm9jZXNzVHVybkNsb2Nrd2lzZUNvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzTW92ZUxlZnRDb21tYW5kKGNvbW1hbmQ6IE1vdmVMZWZ0Q29tbWFuZCk6IHZvaWQge1xuICAgICAgICBjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goZmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbkJlTW92ZWRMZWZ0ID0gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZpZ3VyZS5wb3NpdGlvbi54IC0gMSwgZmlndXJlLnBvc2l0aW9uLnkpLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlTW92ZWRMZWZ0KSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLngtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVSaWdodENvbW1hbmQoY29tbWFuZDogTW92ZVJpZ2h0Q29tbWFuZCk6IHZvaWQge1xuICAgICAgICBjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goZmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbkJlTW92ZWRSaWdodCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCArIDEsIGZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZU1vdmVkUmlnaHQpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24ueCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzVHVybkNsb2Nrd2lzZUNvbW1hbmQoY29tbWFuZDogVHVybkNsb2Nrd2lzZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWxsVHVyblN0YXRlcyA9IEVudW1IZWxwZXIuVG9BcnJheShGaWd1cmVUdXJuU3RhdGUpO1xuICAgICAgICBjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goZmlndXJlID0+IHtcbiAgICAgICAgICAgIGxldCBuZXh0VHVyblN0YXRlID0gZmlndXJlLnR1cm5TdGF0ZSArIDE7XG4gICAgICAgICAgICBpZiAoIShuZXh0VHVyblN0YXRlIGluIGFsbFR1cm5TdGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgbmV4dFR1cm5TdGF0ZSA9IGFsbFR1cm5TdGF0ZXNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjYW5CZVR1cm5lZCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihuZXh0VHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVUdXJuZWQpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUudHVyblN0YXRlID0gbmV4dFR1cm5TdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVEb3duQ29tbWFuZChjb21tYW5kOiBNb3ZlRG93bkNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgRHJvcEZpZ3VyZXNDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIE1vdmVMZWZ0Q29tbWFuZCwgTW92ZVJpZ2h0Q29tbWFuZCwgVHVybkNsb2Nrd2lzZUNvbW1hbmQsIE1vdmVEb3duQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgTW92aW5nQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1c1xuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5wcm9jZXNzSW5pdEdhbWVDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0luaXRHYW1lQ29tbWFuZChjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgd2luZG93Lm9ua2V5ZG93biA9IGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVMZWZ0Q29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVSaWdodENvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dVcCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBUdXJuQ2xvY2t3aXNlQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZURvd25Db21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlRG93bkNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnU3BhY2UnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRHJvcEZpZ3VyZXNDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBGYWxsVGlja1Njb3JlQ291bnRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgc3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcDogTWFwPG51bWJlciwgbnVtYmVyPiA9IG5ldyBNYXAoW1xuICAgICAgICAgICAgWzEsIDEwMF0sXG4gICAgICAgICAgICBbMiwgMzAwXSxcbiAgICAgICAgICAgIFszLCA1MDBdLFxuICAgICAgICAgICAgWzQsIDgwMF0sXG4gICAgICAgIF0pLFxuICAgICAgICBwcml2YXRlIHJld2FyZE9uQ29tYm8gPSA1MCxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsaW5nVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbGluZ1RpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHByZXZpb3VzVGhyZXNob2xkUmV3YXJkID0gMDtcbiAgICAgICAgdGhpcy5zcXVhc2hlZFJvd3NSZXdhcmRUaHJlc2hvbGRzTWFwLmZvckVhY2goKHJld2FyZCwgcm93c1NxdWFzaGVkVGhyZXNob2xkKSA9PiB7XG4gICAgICAgICAgICBpZiAocm93c1NxdWFzaGVkVGhyZXNob2xkID4gZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2aW91c1RocmVzaG9sZFJld2FyZCA9IHJld2FyZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGV2ZW50LmdhbWVEYXRhLnNjb3JlICs9XG4gICAgICAgICAgICBwcmV2aW91c1RocmVzaG9sZFJld2FyZCAqIGV2ZW50LmdhbWVEYXRhLmxldmVsXG4gICAgICAgICAgICArIHRoaXMucmV3YXJkT25Db21ibyAqIE1hdGgubWF4KDAsIGV2ZW50LmdhbWVEYXRhLmNvbWJvIC0gMSkgKiBldmVudC5nYW1lRGF0YS5sZXZlbFxuICAgICAgICAgICAgKyBldmVudC5kcm9wcGVkTGluZXMgKiAyICogZXZlbnQuZ2FtZURhdGEubGV2ZWw7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyIHtcbiAgICBwcml2YXRlIHNxdWFzaGVkUm93c0NvdW50ZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgbGV2ZWxJbmNyZWFzZU9uU3F1YXNoZWRSb3dzTnVtYmVyOiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgbWF4TGV2ZWxzOiBudW1iZXIsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLnByb2Nlc3NJbml0R2FtZUNvbW1hbmQuYmluZCh0aGlzKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NJbml0R2FtZUNvbW1hbmQoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbFRpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbFRpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyKys7XG4gICAgICAgIGlmICh0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIgPj0gdGhpcy5sZXZlbEluY3JlYXNlT25TcXVhc2hlZFJvd3NOdW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlciA9IDA7XG4gICAgICAgICAgICBldmVudC5nYW1lRGF0YS5sZXZlbCA9IE1hdGgubWluKHRoaXMubWF4TGV2ZWxzLCBldmVudC5nYW1lRGF0YS5sZXZlbCArIDEpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgQ29tYm9Db3VudGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHB1YmxpYyBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbFRpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlcy5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGV2ZW50LmdhbWVEYXRhLmNvbWJvICs9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBldmVudC5nYW1lRGF0YS5jb21ibyA9IDA7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1RpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgQ29uc3RUaW1pbmdzSGFuZGxlciBpbXBsZW1lbnRzIFRpbWluZ3NIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGRlbGF5TXM6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBnZXREZWxheUZvck5leHRUaWNrTXMoZ2FtZURhdGE6IEdhbWVEYXRhKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsYXlNcztcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGF0c0NvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxpbmdUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsaW5nVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zdGF0cy5maWd1cmVzRmFsbGVuICs9IGV2ZW50LnRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzLmxlbmd0aDtcbiAgICAgICAgZXZlbnQuZ2FtZURhdGEuc3RhdHMubGluZXNTcXVhc2hlZCArPSBldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0dhbWVDb250cm9sbGVyfSBmcm9tICcuL0dhbWVDb250cm9sbGVyJ1xuaW1wb3J0IHtUYWJsZVJlbmRlcmVyLCBUYWJsZVJlbmRlcmVyU2V0dGluZ3N9IGZyb20gJy4vUmVuZGVyZXIvVGFibGVSZW5kZXJlcidcbmltcG9ydCB7UmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yfSBmcm9tIFwiLi9GYWxsaW5nRmlndXJlc1Byb2Nlc3Nvci9SZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3JcIjtcbmltcG9ydCB7QWx3YXlzT25lRmlndXJlU3Bhd25lcn0gZnJvbSBcIi4vRmlndXJlc1NwYXduZXIvQWx3YXlzT25lRmlndXJlU3Bhd25lclwiO1xuaW1wb3J0IHtFdmVudEJ1c30gZnJvbSBcIi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgSW5pdEdhbWVDb21tYW5kLCBQYXVzZUdhbWVDb21tYW5kLCBSZXN1bWVHYW1lQ29tbWFuZH0gZnJvbSBcIi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge01vdmluZ0hhbmRsZXJ9IGZyb20gXCIuL01vdmluZ0hhbmRsZXIvTW92aW5nSGFuZGxlclwiO1xuaW1wb3J0IHtNb3ZpbmdDb250cm9sbGVyfSBmcm9tIFwiLi9Nb3ZpbmdDb250cm9sbGVyL01vdmluZ0NvbnRyb2xsZXJcIjtcbmltcG9ydCB7TGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlci9MZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7RmFsbFRpY2tTY29yZUNvdW50ZXJ9IGZyb20gXCIuL1Njb3JlQ291bnRlci9GYWxsVGlja1Njb3JlQ291bnRlclwiO1xuaW1wb3J0IHtTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXJ9IGZyb20gXCIuL0xldmVsQ291bnRlci9TcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXJcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuL0NvbW1vblwiO1xuaW1wb3J0IHtDb21ib0NvdW50ZXJ9IGZyb20gXCIuL0NvbWJvQ291bnRlci9Db21ib0NvdW50ZXJcIjtcbmltcG9ydCB7Q29uc3RUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvQ29uc3RUaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtTdGF0c0NvdW50ZXJ9IGZyb20gXCIuL1N0YXRzQ291bnRlci9TdGF0c0NvdW50ZXJcIjtcblxuZXhwb3J0IGNsYXNzIFRldHJpc0ZhY2FkZSB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzID0gbmV3IEV2ZW50QnVzKCksXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1cyA9IG5ldyBDb21tYW5kQnVzKCksXG4gICAgICAgIHByaXZhdGUgZ2FtZUNvbnRyb2xsZXIgPSBuZXcgR2FtZUNvbnRyb2xsZXIoXG4gICAgICAgICAgICAvLyBuZXcgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyKDIwMDApLFxuICAgICAgICAgICAgbmV3IENvbnN0VGltaW5nc0hhbmRsZXIoMjAwMCksXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgbW92aW5nSGFuZGxlciA9IG5ldyBNb3ZpbmdIYW5kbGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIG1vdmluZ0NvbnRyb2xsZXIgPSBuZXcgTW92aW5nQ29udHJvbGxlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IgPSBuZXcgUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmlndXJlc1NwYXduZXIgPSBuZXcgQWx3YXlzT25lRmlndXJlU3Bhd25lcihcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBsZXZlbENvdW50ZXIgPSBuZXcgU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgOCxcbiAgICAgICAgICAgIDE1LFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGNvbWJvQ291bnRlciA9IG5ldyBDb21ib0NvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgc2NvcmVDb3VudGVyID0gbmV3IEZhbGxUaWNrU2NvcmVDb3VudGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIHN0YXRzQ291bnRlciA9IG5ldyBTdGF0c0NvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgdGFibGVSZW5kZXJlciA9IG5ldyBUYWJsZVJlbmRlcmVyKFxuICAgICAgICAgICAgbmV3IFRhYmxlUmVuZGVyZXJTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1c1xuICAgICAgICApLFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGEgPSBHYW1lRGF0YS5tYWtlU2ltcGxlKCksXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHN0YXJ0KGdhbWVEYXRhPzogR2FtZURhdGEpIHtcbiAgICAgICAgZ2FtZURhdGEgPSBnYW1lRGF0YSB8fCBHYW1lRGF0YS5tYWtlU2ltcGxlKCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEluaXRHYW1lQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZXN1bWVHYW1lQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXN1bWUoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlc3VtZUdhbWVDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFBhdXNlR2FtZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vVGV0cmlzL0ZpZ3VyZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBGaWd1cmVQbGFjaW5nU3RlcCB7XG4gICAgZ2V0IHBlcnNpc3RlZCgpOiBib29sZWFuLFxufVxuXG5leHBvcnQgY2xhc3MgVHVyblBsYWNpbmdTdGVwIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1N0ZXB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB0YXJnZXQ6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHJpdmF0ZSBfcGVyc2lzdGVkOiBib29sZWFuLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVhQbGFjaW5nU3RlcCBpbXBsZW1lbnRzIEZpZ3VyZVBsYWNpbmdTdGVwe1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgdGFyZ2V0OiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgX3BlcnNpc3RlZDogYm9vbGVhbixcbiAgICApIHt9XG5cbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc2lzdGVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVZUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHRhcmdldDogbnVtYmVyLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEcm9wUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWd1cmVzVGFyZ2V0U3RhdGVzOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4sXG4gICAgICAgIHB1YmxpYyBwbGFjaW5nU3RlcHM6IEZpZ3VyZVBsYWNpbmdTdGVwW10sXG4gICAgKSB7fVxufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RW51bUhlbHBlcn0gZnJvbSBcIi4uL1RldHJpcy9VdGlscy9FbnVtSGVscGVyXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL1RldHJpcy9GaWd1cmVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVGV0cmlzL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIFJlbmRlckNvbW1hbmR9IGZyb20gXCIuLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge1Njb3JlQ2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yXCI7XG5pbXBvcnQge0Ryb3BQbGFjaW5nU3RlcCwgRmlndXJlUGxhY2luZ1Jlc3VsdCwgRmlndXJlUGxhY2luZ1N0ZXAsIE1vdmVYUGxhY2luZ1N0ZXAsIE1vdmVZUGxhY2luZ1N0ZXAsIFR1cm5QbGFjaW5nU3RlcH0gZnJvbSBcIi4vQ29tbW9uXCI7XG5pbXBvcnQge0hvbGVzSGVscGVyfSBmcm9tIFwiLi9Ib2xlc0hlbHBlclwiO1xuXG5jbGFzcyBQbGFjZVJlc29sdmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuXG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNlUmVzb2x2aW5nRXJyb3Ige1xufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIHNjb3JlQ2FsY3VsYXRvcjogU2NvcmVDYWxjdWxhdG9yLFxuICAgICAgICBwcml2YXRlIGhvbGVzSGVscGVyOiBIb2xlc0hlbHBlcixcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcmVzb2x2ZShnYW1lRGF0YTogR2FtZURhdGEpOiBGaWd1cmVQbGFjaW5nUmVzdWx0fHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuXG4gICAgICAgIGxldCBtYXhTY29yZSA9IC1JbmZpbml0eTtcbiAgICAgICAgbGV0IHRoZUJlc3RSZXN1bHQgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc3VsdChuZXcgTWFwKCksIFtdKTtcblxuICAgICAgICB0aGlzLnByb2Nlc3NTdGF0ZXMoZ2FtZURhdGEsIChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlLCBzY29yZTogbnVtYmVyLCBwbGFjaW5nRGlyZWN0aW9uczogRmlndXJlUGxhY2luZ1N0ZXBbXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNjb3JlID4gbWF4U2NvcmUpIHtcbiAgICAgICAgICAgICAgICBtYXhTY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgICAgIHRoZUJlc3RSZXN1bHQgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc3VsdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IE1hcChbW29yaWdpbmFsRmlndXJlLCBpbWFnaW5hYmxlRmlndXJlXV0pLFxuICAgICAgICAgICAgICAgICAgICBwbGFjaW5nRGlyZWN0aW9uc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gbGV0IGRlYnVnTW9kZSA9IHRydWU7XG4gICAgICAgIGxldCBkZWJ1Z01vZGUgPSAnZGVidWdNb2RlJyBpbiB3aW5kb3cgJiYgd2luZG93LmRlYnVnTW9kZTtcbiAgICAgICAgbGV0IGltYWdpbmFibGVGaWd1cmUgPSB0aGVCZXN0UmVzdWx0LmZpZ3VyZXNUYXJnZXRTdGF0ZXMuZ2V0KG9yaWdpbmFsRmlndXJlKTtcbiAgICAgICAgaWYgKGRlYnVnTW9kZSAmJiBpbWFnaW5hYmxlRmlndXJlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBmYWtlR2FtZURhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZURhdGEpO1xuICAgICAgICAgICAgaW1hZ2luYWJsZUZpZ3VyZS5jb2xvciA9ICcjZjAwJztcbiAgICAgICAgICAgIGZha2VHYW1lRGF0YS5mYWxsaW5nRmlndXJlcyA9IFtpbWFnaW5hYmxlRmlndXJlXTtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQoZmFrZUdhbWVEYXRhKSk7XG5cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1N0YXRlcyhnYW1lRGF0YSwgdW5kZWZpbmVkLCAoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSkgPT4ge1xuICAgICAgICAgICAgICAgIGltYWdpbmFibGVGaWd1cmUuY29sb3IgPSAnIzAwZic7XG4gICAgICAgICAgICAgICAgZmFrZUdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzID0gW2ltYWdpbmFibGVGaWd1cmVdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQoZmFrZUdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoZUJlc3RSZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzU3RhdGVzKFxuICAgICAgICBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXM/OiAoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSwgc2NvcmU6IG51bWJlciwgcGxhY2luZ0RpcmVjdGlvbnM6IEZpZ3VyZVBsYWNpbmdTdGVwW10pID0+IHZvaWQsXG4gICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzPzogKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUpID0+IHZvaWQsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRmlndXJlID0gZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXNbMF07XG5cbiAgICAgICAgbGV0IGVudW1zID0gRW51bUhlbHBlci5Ub0FycmF5KEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIHdoaWxlIChlbnVtc1swXSAhPT0gb3JpZ2luYWxGaWd1cmUudHVyblN0YXRlKSB7XG4gICAgICAgICAgICBlbnVtcy51bnNoaWZ0KGVudW1zLnBvcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWF0cmljZXM6IE1hcDxGaWd1cmVUdXJuU3RhdGUsIGJvb2xlYW5bXVtdPiA9IG5ldyBNYXAoKTtcbiAgICAgICAgbGV0IHN0cmluZ3lNYXRyaWNlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gICAgICAgIGVudW1zLmZvckVhY2godHVyblN0YXRlID0+IHtcbiAgICAgICAgICAgIGxldCBmaWd1cmVNYXRyaXggPSBvcmlnaW5hbEZpZ3VyZS5maWd1cmUuZ2V0VHVybih0dXJuU3RhdGUpO1xuICAgICAgICAgICAgbGV0IHN0cmluZ3lGaWd1cmVNYXRyaXggPSBmaWd1cmVNYXRyaXgubWFwKHJvdyA9PiByb3cubWFwKHZhbCA9PiB2YWwgPyBcIjFcIiA6IFwiMFwiKS5qb2luKCkpLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICBpZiAoIXN0cmluZ3lNYXRyaWNlcy5oYXMoc3RyaW5neUZpZ3VyZU1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBzdHJpbmd5TWF0cmljZXMuYWRkKHN0cmluZ3lGaWd1cmVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIG1hdHJpY2VzLnNldCh0dXJuU3RhdGUsIGZpZ3VyZU1hdHJpeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWF0cml4SG9sZXMgPSB0aGlzLmhvbGVzSGVscGVyLmNvbGxlY3RIb2xlcyhnYW1lRGF0YS5tYXRyaXgpO1xuXG4gICAgICAgIG1hdHJpY2VzLmZvckVhY2goKGZpZ3VyZU1hdHJpeCwgdHVyblN0YXRlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMTsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IFt5LCBpbWFnaW5hYmxlTWF0cml4XSA9IHRoaXMuaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZURhdGEubWF0cml4LCBmaWd1cmVNYXRyaXgsIHgpO1xuICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoeCwgeSk7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFzaGVkTGluZXNDb3VudCA9IHRoaXMuc3F1YXNoTGluZXMoaW1hZ2luYWJsZU1hdHJpeCk7XG4gICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVGaWd1cmUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShvcmlnaW5hbEZpZ3VyZS5maWd1cmUsIGNvb3JkaW5hdGUsIHR1cm5TdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLnNjb3JlQ2FsY3VsYXRvci5jYWxjdWxhdGVTY29yZShnYW1lRGF0YSwgaW1hZ2luYWJsZU1hdHJpeCwgc3F1YXNoZWRMaW5lc0NvdW50LCBvcmlnaW5hbE1hdHJpeEhvbGVzKTtcbiAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9ucyA9IHRoaXMubWFrZVNpbXBsZVBsYWNpbmdTdGVwcyhpbWFnaW5hYmxlRmlndXJlKTtcbiAgICAgICAgICAgICAgICBpZiAob25BZnRlclNjb3JlQ2FsY3VsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICBvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUsIHNjb3JlLCBkaXJlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG9yaWdpbmFsTWF0cml4SG9sZXMuZmlsdGVyKGhvbGUgPT4gaG9sZS5pc09wZW5lZCAmJiBob2xlLmNlbGxzLmxlbmd0aCA+IDApLmZvckVhY2goaG9sZSA9PiB7XG4gICAgICAgICAgICBsZXQgdG9wWSA9IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0LFxuICAgICAgICAgICAgICAgIGxlZnRYID0gZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aCxcbiAgICAgICAgICAgICAgICBib3R0b21ZID0gLTEsXG4gICAgICAgICAgICAgICAgcmlnaHRYID0gLTE7XG4gICAgICAgICAgICBob2xlLmNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgdG9wWSA9IE1hdGgubWluKHRvcFksIGNlbGwueSk7XG4gICAgICAgICAgICAgICAgbGVmdFggPSBNYXRoLm1pbihsZWZ0WCwgY2VsbC54KTtcbiAgICAgICAgICAgICAgICBib3R0b21ZID0gTWF0aC5tYXgoYm90dG9tWSwgY2VsbC55KTtcbiAgICAgICAgICAgICAgICByaWdodFggPSBNYXRoLm1heChyaWdodFgsIGNlbGwueCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWF0cmljZXMuZm9yRWFjaCgoZmlndXJlTWF0cml4LCB0dXJuU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gTWF0aC5tYXgodG9wWSAtIGZpZ3VyZU1hdHJpeC5sZW5ndGggKyAxLCAwKTsgeSA8PSBib3R0b21ZOyB5KyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IE1hdGgubWF4KGxlZnRYIC0gZmlndXJlTWF0cml4WzBdLmxlbmd0aCArIDEsIDApOyB4IDw9IHJpZ2h0WDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29vcmRpbmF0ZSA9IG5ldyBDb29yZGluYXRlKHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVGaWd1cmUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShvcmlnaW5hbEZpZ3VyZS5maWd1cmUsIGNvb3JkaW5hdGUsIHR1cm5TdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25CZWZvcmVTY29yZUNhbGN1bGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyhpbWFnaW5hYmxlRmlndXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIGNvb3JkaW5hdGUsIGdhbWVEYXRhLm1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9ucyA9IHRoaXMubWFrZVB1c2hJblBsYWNpbmdTdGVwcyhnYW1lRGF0YSwgaW1hZ2luYWJsZUZpZ3VyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2luYWJsZU1hdHJpeCA9IHRoaXMuaW1hZ2luZUZpZ3VyZVBsYWNpbmcoZ2FtZURhdGEubWF0cml4LCBmaWd1cmVNYXRyaXgsIGNvb3JkaW5hdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3F1YXNoZWRMaW5lc0NvdW50ID0gdGhpcy5zcXVhc2hMaW5lcyhpbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gdGhpcy5zY29yZUNhbGN1bGF0b3IuY2FsY3VsYXRlU2NvcmUoZ2FtZURhdGEsIGltYWdpbmFibGVNYXRyaXgsIHNxdWFzaGVkTGluZXNDb3VudCwgb3JpZ2luYWxNYXRyaXhIb2xlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFmdGVyU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUsIHNjb3JlLCBkaXJlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNxdWFzaExpbmVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIge1xuICAgICAgICBsZXQgbGluZXNUb1NxdWFzaDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbkJlU3F1YXNoZWQgPSByb3cuZXZlcnkoY2VsbCA9PiBjZWxsKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVNxdWFzaGVkKSB7XG4gICAgICAgICAgICAgICAgbGluZXNUb1NxdWFzaC5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGluZXNUb1NxdWFzaC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgICAgbWF0cml4LnNwbGljZSh5LCAxKTtcbiAgICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KG5ldyBBcnJheShtYXRyaXhbMF0ubGVuZ3RoKS5maWxsKGZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZXNUb1NxdWFzaC5sZW5ndGg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbWFnaW5lRmlndXJlRHJvcChnYW1lTWF0cml4OiBib29sZWFuW11bXSwgZmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0WDogbnVtYmVyKTogW251bWJlciwgYm9vbGVhbltdW11dIHtcbiAgICAgICAgbGV0IHRhcmdldFkgPSAtZmlndXJlTWF0cml4Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUodGFyZ2V0WCwgdGFyZ2V0WSArIDEpLCBnYW1lTWF0cml4KSkge1xuICAgICAgICAgICAgdGFyZ2V0WSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB0YXJnZXRZLFxuICAgICAgICAgICAgdGhpcy5pbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lTWF0cml4LCBmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHRhcmdldFgsIHRhcmdldFkpKSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGltYWdpbmVGaWd1cmVQbGFjaW5nKGdhbWVNYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdLCB0YXJnZXRDb29yZGluYXRlOiBDb29yZGluYXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBsZXQgaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10gPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZU1hdHJpeCk7XG4gICAgICAgIGZpZ3VyZU1hdHJpeC5mb3JFYWNoKChyb3csIGZpZ3VyZVkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIGZpZ3VyZVgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHRhcmdldENvb3JkaW5hdGUueSArIGZpZ3VyZVk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRDb29yZGluYXRlLnggKyBmaWd1cmVYO1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiBpbWFnaW5hYmxlTWF0cml4XG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIGltYWdpbmFibGVNYXRyaXhbcmVhbFldXG4gICAgICAgICAgICAgICAgICAgICYmIHZhbFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlTWF0cml4W3JlYWxZXVtyZWFsWF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW1hZ2luYWJsZU1hdHJpeDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1ha2VQdXNoSW5QbGFjaW5nU3RlcHMoZ2FtZURhdGE6IEdhbWVEYXRhLCBpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlKTogRmlndXJlUGxhY2luZ1N0ZXBbXXx1bmRlZmluZWQge1xuICAgICAgICBsZXQgZmlndXJlTWF0cml4ID0gaW1hZ2luYWJsZUZpZ3VyZS5maWd1cmUuZ2V0VHVybihpbWFnaW5hYmxlRmlndXJlLnR1cm5TdGF0ZSk7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1ucyA9IHRoaXMuaG9sZXNIZWxwZXIuY29sbGVjdENvdmVyZWRDb2x1bW5zKGdhbWVEYXRhLm1hdHJpeCwgaW1hZ2luYWJsZUZpZ3VyZS5wb3NpdGlvbi55IC0gMSk7XG4gICAgICAgIGxldCB0YXJnZXRYID0gdGhpcy5ob2xlc0hlbHBlci5maW5kVGhlV2F5T3V0RnJvbUhvbGUoZ2FtZURhdGEubWF0cml4LCBpbWFnaW5hYmxlRmlndXJlLnBvc2l0aW9uLCBjb3ZlcmVkQ29sdW1ucywgZmlndXJlTWF0cml4KTtcbiAgICAgICAgaWYgKHRhcmdldFggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBuZXcgVHVyblBsYWNpbmdTdGVwKGltYWdpbmFibGVGaWd1cmUudHVyblN0YXRlLCB0cnVlKSxcbiAgICAgICAgICAgIG5ldyBNb3ZlWFBsYWNpbmdTdGVwKHRhcmdldFgsIGZhbHNlKSxcbiAgICAgICAgICAgIG5ldyBNb3ZlWVBsYWNpbmdTdGVwKGltYWdpbmFibGVGaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICBuZXcgTW92ZVhQbGFjaW5nU3RlcChpbWFnaW5hYmxlRmlndXJlLnBvc2l0aW9uLngsIHRydWUpLFxuICAgICAgICAgICAgbmV3IERyb3BQbGFjaW5nU3RlcCgpLFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZVNpbXBsZVBsYWNpbmdTdGVwcyhpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlKTogRmlndXJlUGxhY2luZ1N0ZXBbXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBuZXcgVHVyblBsYWNpbmdTdGVwKGltYWdpbmFibGVGaWd1cmUudHVyblN0YXRlLCB0cnVlKSxcbiAgICAgICAgICAgIG5ldyBNb3ZlWFBsYWNpbmdTdGVwKGltYWdpbmFibGVGaWd1cmUucG9zaXRpb24ueCwgdHJ1ZSksXG4gICAgICAgICAgICBuZXcgRHJvcFBsYWNpbmdTdGVwKCksXG4gICAgICAgIF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIExldmVsQmFzZWRUaW1pbmdzSGFuZGxlciBpbXBsZW1lbnRzIFRpbWluZ3NIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsRGVsYXlNczogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIGJhc2U6IG51bWJlciA9IDAuOCxcbiAgICApIHt9XG5cbiAgICBnZXREZWxheUZvck5leHRUaWNrTXMoZ2FtZURhdGE6IEdhbWVEYXRhKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KHRoaXMuYmFzZSAtIChnYW1lRGF0YS5sZXZlbCAtIDEpICogMC4wMDcsIGdhbWVEYXRhLmxldmVsIC0gMSkgKiB0aGlzLmluaXRpYWxEZWxheU1zO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIERyb3BGaWd1cmVzQ29tbWFuZCwgTW92ZURvd25Db21tYW5kLCBNb3ZlTGVmdENvbW1hbmQsIE1vdmVSaWdodENvbW1hbmQsIFR1cm5DbG9ja3dpc2VDb21tYW5kfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuLi9UZXRyaXMvVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0Ryb3BQbGFjaW5nU3RlcCwgRmlndXJlUGxhY2luZ1Jlc3VsdCwgRmlndXJlUGxhY2luZ1N0ZXAsIE1vdmVYUGxhY2luZ1N0ZXAsIE1vdmVZUGxhY2luZ1N0ZXAsIFR1cm5QbGFjaW5nU3RlcH0gZnJvbSBcIi4vQ29tbW9uXCI7XG5cbmNsYXNzIFBsYWNpbmdFcnJvciBleHRlbmRzIEVycm9yIHt9XG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuY2xhc3MgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuY2xhc3MgTm90U3VwcG9ydGVkRGlyZWN0aW9uU3RlcEVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5cbmNsYXNzIFN0ZXBEZWNvcmF0b3Ige1xuICAgIHB1YmxpYyBpc1BlcmZvcm1lZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgc3RlcDogRmlndXJlUGxhY2luZ1N0ZXAsXG4gICAgKSB7fVxufVxuXG5jbGFzcyBUYXJnZXRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWd1cmVzOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4sXG4gICAgICAgIHB1YmxpYyBzdGVwczogU3RlcERlY29yYXRvcltdXG4gICAgKSB7fVxuXG4gICAgc3RhdGljIGZyb21GaWd1cmVQbGFjaW5nUmVzdWx0KHJlc3VsdD86IEZpZ3VyZVBsYWNpbmdSZXN1bHQpOiBUYXJnZXRTdGF0ZXx1bmRlZmluZWQge1xuICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKFxuICAgICAgICAgICAgcmVzdWx0LmZpZ3VyZXNUYXJnZXRTdGF0ZXMsXG4gICAgICAgICAgICByZXN1bHQucGxhY2luZ1N0ZXBzLm1hcChzdGVwID0+IG5ldyBTdGVwRGVjb3JhdG9yKHN0ZXApKSxcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVQbGFjaW5nUGVyZm9ybWVyIHtcbiAgICBwcml2YXRlIG5leHRNb3ZlVGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiA9IHNldFRpbWVvdXQoKCkgPT4ge30pO1xuICAgIHByaXZhdGUgdGFyZ2V0U3RhdGU/OiBUYXJnZXRTdGF0ZTtcbiAgICBwcml2YXRlIGdhbWVEYXRhOiBHYW1lRGF0YSA9IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgdGltaW5nc0hhbmRsZXIgPSBuZXcgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyKDEwMCwgMC45KSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcGxhY2UoZ2FtZURhdGE6IEdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0PzogRmlndXJlUGxhY2luZ1Jlc3VsdCkge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gZ2FtZURhdGE7XG4gICAgICAgIHRoaXMudGFyZ2V0U3RhdGUgPSBUYXJnZXRTdGF0ZS5mcm9tRmlndXJlUGxhY2luZ1Jlc3VsdChwbGFjaW5nUmVzdWx0KTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubmV4dE1vdmVUaW1lb3V0SWQpO1xuICAgICAgICB0aGlzLm5leHRNb3ZlVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1RpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgIHRoaXMudGltaW5nc0hhbmRsZXIuZ2V0RGVsYXlGb3JOZXh0VGlja01zKHRoaXMuZ2FtZURhdGEpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1RpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0U3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRmlndXJlID0gdGhpcy5nYW1lRGF0YS5mYWxsaW5nRmlndXJlc1swXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0RmlndXJlID0gdGhpcy50YXJnZXRTdGF0ZS5maWd1cmVzLmdldChvcmlnaW5hbEZpZ3VyZSk7XG4gICAgICAgIGlmICghdGFyZ2V0RmlndXJlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUuZmlndXJlICE9PSB0YXJnZXRGaWd1cmUuZmlndXJlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvcihcIkJvdGggb2YgdGhlIG9yaWdpbmFsIGFuZCB0aGUgdGFyZ2V0IGZhbGxpbmcgZmlndXJlcyBtdXN0IGhhdmUgdGhlIHNhbWUgZmlndXJlIGluIGl0LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhbGxTdGVwc1Bhc3NlZCA9IHRoaXMudGFyZ2V0U3RhdGUuc3RlcHMuZXZlcnkoc3RlcERlY29yYXRvciA9PiB7XG4gICAgICAgICAgICBpZiAoc3RlcERlY29yYXRvci5pc1BlcmZvcm1lZCAmJiAhc3RlcERlY29yYXRvci5zdGVwLnBlcnNpc3RlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN0ZXAgPSBzdGVwRGVjb3JhdG9yLnN0ZXA7XG5cbiAgICAgICAgICAgIGlmIChzdGVwIGluc3RhbmNlb2YgVHVyblBsYWNpbmdTdGVwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsRmlndXJlLnR1cm5TdGF0ZSAhPT0gc3RlcC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgVHVybkNsb2Nrd2lzZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0ZXBEZWNvcmF0b3IuaXNQZXJmb3JtZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGVwIGluc3RhbmNlb2YgTW92ZVhQbGFjaW5nU3RlcCkge1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS5wb3NpdGlvbi54ICE9PSBzdGVwLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUucG9zaXRpb24ueCA+IHN0ZXAudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlTGVmdENvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVJpZ2h0Q29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGVwRGVjb3JhdG9yLmlzUGVyZm9ybWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RlcCBpbnN0YW5jZW9mIE1vdmVZUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUucG9zaXRpb24ueSA8IHN0ZXAudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVEb3duQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RlcERlY29yYXRvci5pc1BlcmZvcm1lZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBEcm9wUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBEcm9wRmlndXJlc0NvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgICAgIHN0ZXBEZWNvcmF0b3IuaXNQZXJmb3JtZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRGlyZWN0aW9uU3RlcEVycm9yKFwiVW5rbm93biBzdGVwIFwiICsgc3RlcC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGVwRGVjb3JhdG9yLmlzUGVyZm9ybWVkO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWFsbFN0ZXBzUGFzc2VkKSB7XG4gICAgICAgICAgICAvLyB0aGlzLnByb2Nlc3NUaWNrKCk7XG4gICAgICAgICAgICB0aGlzLm5leHRNb3ZlVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgLy8gMCxcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtIb2xlfSBmcm9tIFwiLi9Ib2xlc0hlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgU2NvcmVDYWxjdWxhdG9yIHtcbiAgICBwdWJsaWMgY2FsY3VsYXRlU2NvcmUoZ2FtZURhdGE6IEdhbWVEYXRhLCBtYXRyaXg6IGJvb2xlYW5bXVtdLCBzcXVhc2hlZExpbmVzQ291bnQ6IG51bWJlciwgb3JpZ2luYWxNYXRyaXhIb2xlczogSG9sZVtdKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgZmllbGRIZWlnaHQgPSBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZEhlaWdodDtcbiAgICAgICAgY29uc3QgZmllbGRXaWR0aCA9IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGg7XG4gICAgICAgIGNvbnN0IHNxdWFzaGVkTGluZXNTY29yZSA9IHNxdWFzaGVkTGluZXNDb3VudCAqIDU7XG5cbiAgICAgICAgY29uc3QgW2hvbGVzQ291bnQsIGhvbGVzQ292ZXJlZEhlaWdodF0gPSB0aGlzLmNhbGN1bGF0ZUhvbGVzQW5kQ292ZXJlZEhlaWdodChtYXRyaXgsIGdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IGhvbGVzQ291bnREZWNyZWFzZSA9IG9yaWdpbmFsTWF0cml4SG9sZXMubGVuZ3RoIC0gaG9sZXNDb3VudDtcbiAgICAgICAgbGV0IGhvbGVzU2NvcmU6IG51bWJlcjtcbiAgICAgICAgaWYgKGhvbGVzQ292ZXJlZEhlaWdodCA9PT0gMCB8fCBob2xlc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICBob2xlc1Njb3JlID0gKGhvbGVzQ291bnREZWNyZWFzZSA+IDAgPyBob2xlc0NvdW50RGVjcmVhc2UgKiAxNTAgOiBob2xlc0NvdW50RGVjcmVhc2UgKiA3MCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBob2xlc1Njb3JlID0gKGhvbGVzQ291bnREZWNyZWFzZSA+IDAgPyBob2xlc0NvdW50RGVjcmVhc2UgKiAxNTAgOiBob2xlc0NvdW50RGVjcmVhc2UgKiA3MClcbiAgICAgICAgICAgICAgICAtIGhvbGVzQ292ZXJlZEhlaWdodCAqIE1hdGgucG93KGhvbGVzQ292ZXJlZEhlaWdodCwgaG9sZXNDb3ZlcmVkSGVpZ2h0IC8gKGZpZWxkSGVpZ2h0ICogaG9sZXNDb3VudCkpICogNTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuY2FsY3VsYXRlSGVpZ2h0KG1hdHJpeCk7XG4gICAgICAgIGNvbnN0IGhlaWdodFNjb3JlID0gLWhlaWdodCAqIE1hdGgucG93KGhlaWdodCwgaGVpZ2h0IC8gZmllbGRIZWlnaHQpICogMztcblxuICAgICAgICBjb25zdCBbZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUhlaWdodF0gPSB0aGlzLmNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UobWF0cml4LCBmaWVsZFdpZHRoKTtcbiAgICAgICAgbGV0IGZpbGxhYmxlQ2VsbHNTY29yZSA9IDA7XG4gICAgICAgIGlmIChmaWxsYWJsZUhlaWdodCA+IDUpIHtcbiAgICAgICAgICAgIGZpbGxhYmxlQ2VsbHNTY29yZSA9IC1maWxsYWJsZUNlbGxzQ291bnQgKiBNYXRoLnBvdyhmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlQ2VsbHNDb3VudCAvIChmaWVsZEhlaWdodCAqIGZpZWxkV2lkdGgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFt0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzQ291bnRdID0gdGhpcy5jYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkKG1hdHJpeCwgZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgbGV0IHR1bm5lbHNTY29yZTogbnVtYmVyO1xuICAgICAgICBpZiAodHVubmVsc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICB0dW5uZWxzU2NvcmUgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHVubmVsc1Njb3JlID0gLXR1bm5lbHNDb3VudCAqIDcwXG4gICAgICAgICAgICAgICAgLSB0dW5uZWxzU3VtSGVpZ2h0ICogTWF0aC5wb3codHVubmVsc1N1bUhlaWdodCwgdHVubmVsc1N1bUhlaWdodCAvIChmaWVsZEhlaWdodCAqIHR1bm5lbHNDb3VudCkpICogNztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNjb3JlID0gaG9sZXNTY29yZSArIHNxdWFzaGVkTGluZXNTY29yZSArIGhlaWdodFNjb3JlICsgdHVubmVsc1Njb3JlICsgZmlsbGFibGVDZWxsc1Njb3JlO1xuICAgICAgICBpZiAoaXNOYU4oc2NvcmUpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtYXRyaXgsIGhvbGVzU2NvcmUsIHNxdWFzaGVkTGluZXNTY29yZSwgaGVpZ2h0U2NvcmUsIHR1bm5lbHNTY29yZSwgZmlsbGFibGVDZWxsc1Njb3JlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NvcmU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVIb2xlcyhpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlciB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPjtcbiAgICAgICAgbGV0IGhvbGVzQ291bnQgPSAwO1xuICAgICAgICBpbWFnaW5hYmxlTWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY292ZXJlZENvbHVtbnMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbGVzQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBob2xlc0NvdW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlSG9sZXNBbmRDb3ZlcmVkSGVpZ2h0KGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdLCByZWFsTWF0cml4OiBib29sZWFuW11bXSk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBjb25zdCBbb3JpZ2luYWxUaGVIaWdoZXN0SG9sZVksIG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWV0gPSB0aGlzLmNhbGN1bGF0ZVRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkocmVhbE1hdHJpeCk7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uc1lzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj47XG4gICAgICAgIGxldCBob2xlc0NvdmVyZWRIZWlnaHRzU3VtID0gMDtcbiAgICAgICAgbGV0IGhvbGVzQ291bnQgPSAwO1xuICAgICAgICBpbWFnaW5hYmxlTWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwgJiYgIWNvdmVyZWRDb2x1bW5zWXMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zWXMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY292ZXJlZFkgPSBjb3ZlcmVkQ29sdW1uc1lzLmdldCh4KTtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZFkgIT09IHVuZGVmaW5lZCAmJiAhdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbGVzQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVZICE9PSB1bmRlZmluZWQgJiYgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5IDwgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZVkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xlc0NvdmVyZWRIZWlnaHRzU3VtICs9IHkgLSBjb3ZlcmVkWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY292ZXJlZFkgPCBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob2xlc0NvdmVyZWRIZWlnaHRzU3VtICs9IG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSAtIGNvdmVyZWRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW2hvbGVzQ291bnQsIGhvbGVzQ292ZXJlZEhlaWdodHNTdW1dO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWShtYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlcnx1bmRlZmluZWQsIG51bWJlcnx1bmRlZmluZWRdIHtcbiAgICAgICAgbGV0IHRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCB0aGVIaWdoZXN0SG9sZVkgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uc1lzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj47XG4gICAgICAgIG1hdHJpeC5zb21lKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByb3cuc29tZSgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAmJiAhY292ZXJlZENvbHVtbnNZcy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnNZcy5zZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb3ZlcmVkWSA9IGNvdmVyZWRDb2x1bW5zWXMuZ2V0KHgpO1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkWSAhPT0gdW5kZWZpbmVkICYmICF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhlSGlnaGVzdEhvbGVZID0geTtcbiAgICAgICAgICAgICAgICAgICAgdGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSA9IGNvdmVyZWRZO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW3RoZUhpZ2hlc3RIb2xlWSwgdGhlSGlnaGVzdEhvbGVDb3ZlcmVkWV07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVIZWlnaHQobWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlciB7XG4gICAgICAgIGxldCBsb3dlc3RFbXB0eVkgPSAtMTtcbiAgICAgICAgbWF0cml4LmV2ZXJ5KChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGlmIChyb3cuZXZlcnkodmFsID0+ICF2YWwpKSB7XG4gICAgICAgICAgICAgICAgbG93ZXN0RW1wdHlZID0geTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1hdHJpeC5sZW5ndGggLSBsb3dlc3RFbXB0eVkgLSAxO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlVHVubmVsc0V4Y2VwdFVuY292ZXJlZChpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSwgcmVhbE1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgbGV0IHJlYWxDb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICByZWFsTWF0cml4LmV2ZXJ5KChyb3cpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWxDb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICAgICAgbGV0IHR1bm5lbHMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPjtcbiAgICAgICAgY29uc3QgZmllbGRXaWR0aCA9IGltYWdpbmFibGVNYXRyaXhbMF0ubGVuZ3RoO1xuICAgICAgICBpbWFnaW5hYmxlTWF0cml4LmV2ZXJ5KChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWxcbiAgICAgICAgICAgICAgICAgICAgJiYgIWltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeClcbiAgICAgICAgICAgICAgICAgICAgJiYgIXJlYWxDb3ZlcmVkQ29sdW1ucy5oYXMoeClcbiAgICAgICAgICAgICAgICAgICAgJiYgKHggPT09IDAgfHwgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4IC0gMSkpXG4gICAgICAgICAgICAgICAgICAgICYmICh4ID09PSBmaWVsZFdpZHRoIC0gMSB8fCBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHggKyAxKSlcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgdHVubmVscy5zZXQoeCwgKHR1bm5lbHMuZ2V0KHgpIHx8IDApICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLnNpemUgPCBmaWVsZFdpZHRoO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHR1bm5lbHNTdW1IZWlnaHQgPSAwO1xuICAgICAgICBsZXQgdHVubmVsc0NvdW50ID0gMDtcbiAgICAgICAgdHVubmVscy5mb3JFYWNoKGhlaWdodCA9PiB7XG4gICAgICAgICAgICBpZiAoaGVpZ2h0ID49IDMpIHtcbiAgICAgICAgICAgICAgICB0dW5uZWxzU3VtSGVpZ2h0ICs9IGhlaWdodDtcbiAgICAgICAgICAgICAgICB0dW5uZWxzQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbdHVubmVsc1N1bUhlaWdodCwgdHVubmVsc0NvdW50XTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UobWF0cml4OiBib29sZWFuW11bXSwgZmllbGRXaWR0aDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICBsZXQgZmlsbGFibGVDZWxsc0NvdW50ID0gMDtcbiAgICAgICAgbGV0IGZpbGxhYmxlSGVpZ2h0ID0gMDtcbiAgICAgICAgbWF0cml4LmV2ZXJ5KHJvdyA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWwgJiYgY292ZXJlZENvbHVtbnMuc2l6ZSA+IDAgJiYgIWNvdmVyZWRDb2x1bW5zLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUNlbGxzQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5zaXplIDwgZmllbGRXaWR0aCkge1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUhlaWdodCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUhlaWdodF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9UZXRyaXMvVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcblxuZXhwb3J0IGNsYXNzIEhvbGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgaXNPcGVuZWQ6IGJvb2xlYW4sXG4gICAgICAgIHB1YmxpYyBjZWxsczogQ29vcmRpbmF0ZVtdLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEhvbGVzSGVscGVyIHtcbiAgICBwdWJsaWMgY29sbGVjdEhvbGVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBIb2xlW10ge1xuICAgICAgICBsZXQgaG9sZXM6IEhvbGVbXSA9IFtdO1xuICAgICAgICBjbGFzcyBIb2xlSW5Qcm9jZXNzIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICAgICAgICAgIHB1YmxpYyBjZWxsczogQ29vcmRpbmF0ZVtdID0gW10sXG4gICAgICAgICAgICAgICAgcHVibGljIHByZXZpb3VzUm93T3BlblhzOiBudW1iZXJbXSA9IFtdLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBjdXJyZW50Um93T3BlblhzOiBudW1iZXJbXSA9IFtdLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBpc09wZW5lZDogYm9vbGVhbiA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBjb250aW51ZXM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgICAgICkge31cbiAgICAgICAgfVxuICAgICAgICBsZXQgaG9sZXNJblByb2Nlc3M6IEhvbGVJblByb2Nlc3NbXSA9IFtdO1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnM6IFNldDxudW1iZXI+ID0gbmV3IFNldCgpO1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBob2xlc0luUHJvY2Vzcy5mb3JFYWNoKGhvbGUgPT4gaG9sZS5jb250aW51ZXMgPSBmYWxzZSk7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3ZlcmVkQ29sdW1ucy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2Nlc3NpbmdIb2xlID0gaG9sZXNJblByb2Nlc3MuZmluZChob2xlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBob2xlLnByZXZpb3VzUm93T3BlblhzLnNvbWUocHJldlggPT4gcHJldlggPT09IHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKGhvbGUuY3VycmVudFJvd09wZW5Ycy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGhvbGUuY3VycmVudFJvd09wZW5Yc1tob2xlLmN1cnJlbnRSb3dPcGVuWHMubGVuZ3RoIC0gMV0gPT09IHgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NpbmdIb2xlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NpbmdIb2xlID0gbmV3IEhvbGVJblByb2Nlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGVzSW5Qcm9jZXNzLnB1c2gocHJvY2Vzc2luZ0hvbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NpbmdIb2xlLmN1cnJlbnRSb3dPcGVuWHMucHVzaCh4KTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuY2VsbHMucHVzaChuZXcgQ29vcmRpbmF0ZSh4LCB5KSk7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NpbmdIb2xlLmNvbnRpbnVlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NpbmdIb2xlLmlzT3BlbmVkID0gcHJvY2Vzc2luZ0hvbGUuaXNPcGVuZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHRoaXMuZG9lc1RoZVdheU91dEZyb21Ib2xlRXhpc3RzKG1hdHJpeCwgbmV3IENvb3JkaW5hdGUoeCwgeSksIGNvdmVyZWRDb2x1bW5zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZTogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgICAgIGhvbGVzSW5Qcm9jZXNzLmZvckVhY2goKGhvbGUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaG9sZS5jb250aW51ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZS5wcmV2aW91c1Jvd09wZW5YcyA9IGhvbGUuY3VycmVudFJvd09wZW5YcztcbiAgICAgICAgICAgICAgICAgICAgaG9sZS5jdXJyZW50Um93T3BlblhzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaG9sZS5jb250aW51ZXMgfHwgeSA9PSBtYXRyaXgubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBob2xlcy5wdXNoKG5ldyBIb2xlKFxuICAgICAgICAgICAgICAgICAgICAgICAgaG9sZS5pc09wZW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGUuY2VsbHMsXG4gICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgICAgICBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZS5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaG9sZXNJblByb2dyZXNzVG9SZW1vdmUucmV2ZXJzZSgpLmZvckVhY2goaSA9PiBob2xlc0luUHJvY2Vzcy5zcGxpY2UoaSwgMSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGhvbGVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBkb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMobWF0cml4OiBib29sZWFuW11bXSwgaW5pdGlhbENvb3JkaW5hdGU6IENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zOiBTZXQ8bnVtYmVyPiwgZmlndXJlTWF0cml4OiBib29sZWFuW11bXSA9IFtbdHJ1ZV1dKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRUaGVXYXlPdXRGcm9tSG9sZShtYXRyaXgsIGluaXRpYWxDb29yZGluYXRlLCBjb3ZlcmVkQ29sdW1ucywgZmlndXJlTWF0cml4KSAhPT0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHB1YmxpYyBmaW5kVGhlV2F5T3V0RnJvbUhvbGUobWF0cml4OiBib29sZWFuW11bXSwgaW5pdGlhbENvb3JkaW5hdGU6IENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zOiBTZXQ8bnVtYmVyPiwgZmlndXJlTWF0cml4OiBib29sZWFuW11bXSA9IFtbdHJ1ZV1dKTogbnVtYmVyfHVuZGVmaW5lZCB7XG4gICAgICAgIC8vIHRyeWluZyB0byBmaW5kIHRoZSB3YXkgb3V0IGZyb20gdGhlIGxlZnQgc2lkZVxuICAgICAgICBmb3IgKGxldCB4ID0gaW5pdGlhbENvb3JkaW5hdGUueCAtIDE7IHggPj0gMDsgeC0tKSB7XG4gICAgICAgICAgICBpZiAoIUZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUoeCwgaW5pdGlhbENvb3JkaW5hdGUueSksIG1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBjaGVja0ZhbGxYID0geCArIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGggLSAxOyBjaGVja0ZhbGxYID49IHg7IGNoZWNrRmFsbFgtLSkge1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5oYXMoY2hlY2tGYWxsWCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsQ29sdW1uc0ZyZWVUb0ZhbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFsbENvbHVtbnNGcmVlVG9GYWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0cnlpbmcgdG8gZmluZCB0aGUgd2F5IG91dCBmcm9tIHRoZSByaWdodCBzaWRlXG4gICAgICAgIGZvciAobGV0IHggPSBpbml0aWFsQ29vcmRpbmF0ZS54ICsgMTsgeCA8IG1hdHJpeFswXS5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgaWYgKCFGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHgsIGluaXRpYWxDb29yZGluYXRlLnkpLCBtYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYWxsQ29sdW1uc0ZyZWVUb0ZhbGwgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgY2hlY2tGYWxsWCA9IHg7IGNoZWNrRmFsbFggPCB4ICsgZmlndXJlTWF0cml4WzBdLmxlbmd0aDsgY2hlY2tGYWxsWCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyhjaGVja0ZhbGxYKSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWxsQ29sdW1uc0ZyZWVUb0ZhbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbGxlY3RDb3ZlcmVkQ29sdW1ucyhtYXRyaXg6IGJvb2xlYW5bXVtdLCB0b1k/OiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uczogU2V0PG51bWJlcj4gPSBuZXcgU2V0KCk7XG4gICAgICAgIG1hdHJpeC5zb21lKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAodG9ZICE9PSB1bmRlZmluZWQgJiYgeSA+PSB0b1kpXG4gICAgICAgICAgICAgICAgfHwgY292ZXJlZENvbHVtbnMuc2l6ZSA9PSBtYXRyaXhbMF0ubGVuZ3RoO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvdmVyZWRDb2x1bW5zO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmlndXJlc1NwYXduZWRFdmVudH0gZnJvbSBcIi4uL1RldHJpcy9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUmVzb2x2ZXJ9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlclwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUGVyZm9ybWVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyXCI7XG5pbXBvcnQge1Njb3JlQ2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yXCI7XG5pbXBvcnQge0hvbGVzSGVscGVyfSBmcm9tIFwiLi9Ib2xlc0hlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzU29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBmYWxsaW5nRmlndXJlUGxhY2luZ1Jlc29sdmVyID0gbmV3IEZpZ3VyZVBsYWNpbmdSZXNvbHZlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBuZXcgU2NvcmVDYWxjdWxhdG9yKCksXG4gICAgICAgICAgICBuZXcgSG9sZXNIZWxwZXIoKSxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBmYWxsaW5nRmlndXJlc1BsYWNlciA9IG5ldyBGaWd1cmVQbGFjaW5nUGVyZm9ybWVyKGNvbW1hbmRCdXMpLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZpZ3VyZXNTcGF3bmVkLCB0aGlzLm9uRmlndXJlc1NwYXduZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZpZ3VyZXNTcGF3bmVkKGV2ZW50OiBGaWd1cmVzU3Bhd25lZEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzID0gdGhpcy5mYWxsaW5nRmlndXJlUGxhY2luZ1Jlc29sdmVyLnJlc29sdmUoZXZlbnQuZ2FtZURhdGEpO1xuICAgICAgICB0aGlzLmZhbGxpbmdGaWd1cmVzUGxhY2VyLnBsYWNlKGV2ZW50LmdhbWVEYXRhLCB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGV0cmlzRmFjYWRlIH0gZnJvbSAnLi9UZXRyaXMvVGV0cmlzRmFjYWRlJ1xuaW1wb3J0IHtFdmVudEJ1c30gZnJvbSBcIi4vVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXN9IGZyb20gXCIuL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7VGV0cmlzU29sdmVyfSBmcm9tIFwiLi9UZXRyaXNTb2x2ZXIvVGV0cmlzU29sdmVyXCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKTtcbiAgICBjb25zdCBjb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoKTtcbiAgICBsZXQgdGV0cmlzID0gbmV3IFRldHJpc0ZhY2FkZShldmVudEJ1cywgY29tbWFuZEJ1cyk7XG4gICAgbGV0IHNvbHZlciA9IG5ldyBUZXRyaXNTb2x2ZXIoZXZlbnRCdXMsIGNvbW1hbmRCdXMpO1xuXG4gICAgdGV0cmlzLnN0YXJ0KCk7XG59KVxuIl0sIm5hbWVzIjpbIkV2ZW50VHlwZSIsIkNvbW1hbmRUeXBlIiwiRmlndXJlVHVyblN0YXRlIiwiRmFsbFRpY2tQcm9jZXNzZWRFdmVudCIsImNvbnN0cnVjdG9yIiwiZ2FtZURhdGEiLCJ0cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlcyIsInNxdWFzaGVkTGluZXMiLCJkcm9wcGVkTGluZXMiLCJnZXRFdmVudFR5cGUiLCJGYWxsaW5nVGlja1Byb2Nlc3NlZCIsIkdhbWVPdmVyRXZlbnQiLCJHYW1lT3ZlciIsIkZpZ3VyZXNNb3ZlZEV2ZW50IiwiRmlndXJlc01vdmVkIiwiRmlndXJlc1NwYXduZWRFdmVudCIsIm5ld0ZpZ3VyZXMiLCJGaWd1cmVzU3Bhd25lZCIsIkV2ZW50QnVzIiwiaGFuZGxlcnMiLCJNYXAiLCJvbiIsImV2ZW50IiwiaGFuZGxlciIsInVuaXF1ZSIsInRoaXMiLCJnZXQiLCJzb21lIiwiYm91bmRIYW5kbGVyIiwicHVzaCIsInNldCIsIm9mZiIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImZpcmUiLCJldmVudFBheWxvYWQiLCJmb3JFYWNoIiwiSW5pdEdhbWVDb21tYW5kIiwiZ2V0Q29tbWFuZFR5cGUiLCJJbml0R2FtZSIsIlJlc3VtZUdhbWVDb21tYW5kIiwiUmVzdW1lR2FtZSIsIlBhdXNlR2FtZUNvbW1hbmQiLCJQYXVzZUdhbWUiLCJGaWd1cmVzRmFsbFRpY2tDb21tYW5kIiwiRmlndXJlc0ZhbGxUaWNrIiwiR2FtZU92ZXJDb21tYW5kIiwiUmVuZGVyQ29tbWFuZCIsIlJlbmRlciIsIk1vdmVMZWZ0Q29tbWFuZCIsIk1vdmVMZWZ0IiwiTW92ZVJpZ2h0Q29tbWFuZCIsIk1vdmVSaWdodCIsIlR1cm5DbG9ja3dpc2VDb21tYW5kIiwiVHVybkNsb2Nrd2lzZSIsIk1vdmVEb3duQ29tbWFuZCIsIk1vdmVEb3duIiwiRHJvcEZpZ3VyZXNDb21tYW5kIiwiRmlndXJlc0ZhbGxEb3duIiwiQ29tbWFuZEJ1cyIsImFkZEhhbmRsZXIiLCJyZW1vdmVIYW5kbGVyIiwicnVuIiwicGF5bG9hZCIsIkFic3RyYWN0RmlndXJlIiwiZ2V0VHVybiIsImZpZ3VyZVR1cm5TdGF0ZSIsIk9uZSIsImdldEZpcnN0VHVybiIsIlR3byIsImdldFNlY29uZFR1cm4iLCJUaHJlZSIsImdldFRoaXJkVHVybiIsIkZvdXIiLCJnZXRGb3J0aFR1cm4iLCJTaW1wbHlSb3RhdGFibGVGaWd1cmUiLCJnZXROb3JtYWxpemVkRmlndXJlIiwiZmlndXJlIiwiZ2V0RmlndXJlIiwidGhlTG9uZ2VzdFJvd1NpemUiLCJyZWR1Y2UiLCJwcmV2aW91cyIsImN1cnJlbnQiLCJNYXRoIiwibWF4IiwibGVuZ3RoIiwibWFwIiwicm93Iiwib3JpZ2luYWxMZW5ndGgiLCJmaWxsIiwib3JpZ2luYWxGaWd1cmUiLCJ0dXJuZWRGaWd1cmUiLCJvcmlnaW5hbEZpZ3VyZUhlaWdodCIsIm9yaWdpbmFsRmlndXJlV2lkdGgiLCJ4IiwiQXJyYXkiLCJ5IiwicmV2ZXJzZSIsIlRGaWd1cmUiLCJzcGxpdCIsIml0ZW0iLCJSaWdodExGaWd1cmUiLCJMZWZ0TEZpZ3VyZSIsIlNxdWFyZUZpZ3VyZSIsIlN0aWNrRmlndXJlIiwiTFpGaWd1cmUiLCJSWkZpZ3VyZSIsIkNvb3JkaW5hdGUiLCJGYWxsaW5nRmlndXJlIiwicG9zaXRpb24iLCJ0dXJuU3RhdGUiLCJjb2xvciIsIkdhbWVTZXR0aW5ncyIsImZpZWxkV2lkdGgiLCJmaWVsZEhlaWdodCIsImZpZ3VyZXMiLCJTdGF0cyIsImZpZ3VyZXNGYWxsZW4iLCJsaW5lc1NxdWFzaGVkIiwiR2FtZURhdGEiLCJpc0luaXRpYWxpemVkIiwiaXNHYW1lT3ZlciIsImZhbGxpbmdGaWd1cmVzIiwibWF0cml4IiwibmV4dFRpY2tUaW1lb3V0SWQiLCJzZXRUaW1lb3V0Iiwic2V0dGluZ3MiLCJsZXZlbCIsInNjb3JlIiwiY29tYm8iLCJzdGF0cyIsInN0YXRpYyIsIndpZHRoIiwiaGVpZ2h0IiwiXyIsIkdhbWVDb250cm9sbGVyIiwidGltaW5nc0hhbmRsZXIiLCJldmVudEJ1cyIsImNvbW1hbmRCdXMiLCJtYWtlU2ltcGxlIiwiaW5pdEdhbWVIYW5kbGVyIiwiYmluZCIsInJlc3VtZUdhbWVIYW5kbGVyIiwicGF1c2VHYW1lSGFuZGxlciIsImdhbWVPdmVySGFuZGxlciIsImNvbW1hbmQiLCJvbkZhbGxUaWNrUHJvY2Vzc2VkIiwiZmFsbFRpY2siLCJjbGVhclRpbWVvdXQiLCJnZXREZWxheUZvck5leHRUaWNrTXMiLCJGaWd1cmVQbGFjaW5nQ2hlY2tlciIsInRhcmdldEZpZ3VyZU1hdHJpeCIsInRhcmdldFBvc2l0aW9uIiwiZXZlcnkiLCJ2YWx1ZSIsInJlYWxZIiwicmVhbFgiLCJUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MiLCJmaWxsZWQiLCJmaWxsZWRHYW1lT3ZlciIsImVtcHR5IiwiVGFibGVSZW5kZXJlclNldHRpbmdzIiwiY29udGFpbmVyRWxlbWVudCIsInJlbmRlclByb2plY3Rpb25GaWd1cmVzIiwibWF0cml4Q2VsbENvbG9ycyIsImZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzIiwicHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMiLCJDZWxsQ29sb3JzIiwiVGFibGVSZW5kZXJlciIsInJlbmRlclNldHRpbmdzIiwiY2VsbHNIdG1sRWxlbWVudHNNYXAiLCJpbml0SGFuZGxlciIsInJlbmRlckNvbW1hbmRIYW5kbGVyIiwidGFibGUiLCJjcmVhdGVIdG1sRWxlbWVudCIsImNlbGwiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsInNjb3JlRGlzcGxheSIsIm9uR2FtZU92ZXIiLCJvbkZpZ3VyZXNNb3ZlZCIsInJlbmRlclN0YXRlIiwicmVwYWludE1hdHJpeENlbGxzIiwicmVuZGVyRmFsbGluZ0ZpZ3VyZXNQcm9qZWN0aW9uIiwicmVuZGVyRmFsbGluZ0ZpZ3VyZXMiLCJyZW5kZXJTdGF0cyIsImZhbGxpbmdGaWd1cmUiLCJyZXBhaW50RmFsbGluZ0ZpZ3VyZXNDZWxscyIsImZpZ3VyZU1hdHJpeCIsInByb2plY3Rpb25GaWd1cmVYIiwicHJvamVjdGlvbkZpZ3VyZVkiLCJjYW5GaWd1cmVCZVBsYWNlZCIsInJlcGFpbnRQcm9qZWN0aW9uRmlndXJlc0NlbGxzIiwiaW5kZW50IiwiY29sb3JzIiwicmVwYWludENlbGxzIiwiY2VsbENvbG9ycyIsInN0eWxlIiwiYmFja2dyb3VuZCIsImxldmVsU3BhbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzY29yZVNwYW4iLCJjb21ib1NwYW4iLCJ0b1N0cmluZyIsImh0bWwiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2hpbGRyZW4iLCJmaXJzdEVsZW1lbnRDaGlsZCIsIkhUTUxFbGVtZW50IiwiRmFsbGluZ1Jlc3VsdCIsInRyYW5zZmVycmVkRmlndXJlcyIsIlJlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvciIsInByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kIiwicHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZCIsImZhbGxpbmdSZXN1bHQiLCJmYWxsRmlndXJlc0Zvck9uZUNlbGwiLCJzcXVhc2hMaW5lcyIsIm9uZUNlbGxGYWxsaW5nUmVzdWx0IiwiZmlndXJlQ2FuRmFsbCIsImZpZ3VyZUdhbWVPdmVyUmVzdWx0IiwidHJhbnNmZXJGaWd1cmVUb01hdHJpeCIsImZpZ3VyZUNlbGxZIiwiY2VsbFZhbHVlIiwiZmlndXJlQ2VsbFgiLCJtYXRyaXhYIiwibWF0cml4WSIsImxpbmVzVG9TcXVhc2giLCJ1bnNoaWZ0IiwiRW51bUhlbHBlciIsInZhbCIsIk9iamVjdCIsImtleXMiLCJuIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJmaWx0ZXIiLCJpc05hTiIsInZhbHVlcyIsIlRvQXJyYXkiLCJmbG9vciIsInJhbmRvbSIsIkFsd2F5c09uZUZpZ3VyZVNwYXduZXIiLCJwcm9jZXNzT25GYWxsVGljayIsImFkZEZpZ3VyZSIsImZpZ3VyZUluZGV4IiwiR2V0UmFuZG9tIiwiZmlndXJlV2lkdGgiLCJjb29yZGluYXRlIiwiY2VpbCIsIk1vdmluZ0hhbmRsZXIiLCJwcm9jZXNzTW92ZUxlZnRDb21tYW5kIiwicHJvY2Vzc01vdmVSaWdodENvbW1hbmQiLCJwcm9jZXNzTW92ZURvd25Db21tYW5kIiwicHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kIiwiYWxsVHVyblN0YXRlcyIsIm5leHRUdXJuU3RhdGUiLCJNb3ZpbmdDb250cm9sbGVyIiwicHJvY2Vzc0luaXRHYW1lQ29tbWFuZCIsIndpbmRvdyIsIm9ua2V5ZG93biIsImNvZGUiLCJGYWxsVGlja1Njb3JlQ291bnRlciIsInNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXAiLCJyZXdhcmRPbkNvbWJvIiwib25GYWxsaW5nVGlja1Byb2Nlc3NlZCIsInByZXZpb3VzVGhyZXNob2xkUmV3YXJkIiwicmV3YXJkIiwicm93c1NxdWFzaGVkVGhyZXNob2xkIiwiU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyIiwibGV2ZWxJbmNyZWFzZU9uU3F1YXNoZWRSb3dzTnVtYmVyIiwibWF4TGV2ZWxzIiwic3F1YXNoZWRSb3dzQ291bnRlciIsIm1pbiIsIkNvbWJvQ291bnRlciIsIkNvbnN0VGltaW5nc0hhbmRsZXIiLCJkZWxheU1zIiwiU3RhdHNDb3VudGVyIiwiVGV0cmlzRmFjYWRlIiwiZ2FtZUNvbnRyb2xsZXIiLCJtb3ZpbmdIYW5kbGVyIiwibW92aW5nQ29udHJvbGxlciIsImZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIiwiZmlndXJlc1NwYXduZXIiLCJsZXZlbENvdW50ZXIiLCJjb21ib0NvdW50ZXIiLCJzY29yZUNvdW50ZXIiLCJzdGF0c0NvdW50ZXIiLCJ0YWJsZVJlbmRlcmVyIiwiYm9keSIsInN0YXJ0IiwicmVzdW1lIiwicGF1c2UiLCJUdXJuUGxhY2luZ1N0ZXAiLCJ0YXJnZXQiLCJfcGVyc2lzdGVkIiwicGVyc2lzdGVkIiwiTW92ZVhQbGFjaW5nU3RlcCIsIk1vdmVZUGxhY2luZ1N0ZXAiLCJEcm9wUGxhY2luZ1N0ZXAiLCJGaWd1cmVQbGFjaW5nUmVzdWx0IiwiZmlndXJlc1RhcmdldFN0YXRlcyIsInBsYWNpbmdTdGVwcyIsIlBsYWNlUmVzb2x2aW5nRXJyb3IiLCJFcnJvciIsIkdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yIiwiRmlndXJlUGxhY2luZ1Jlc29sdmVyIiwic2NvcmVDYWxjdWxhdG9yIiwiaG9sZXNIZWxwZXIiLCJyZXNvbHZlIiwibWF4U2NvcmUiLCJ0aGVCZXN0UmVzdWx0IiwicHJvY2Vzc1N0YXRlcyIsImltYWdpbmFibGVGaWd1cmUiLCJwbGFjaW5nRGlyZWN0aW9ucyIsImRlYnVnTW9kZSIsInVuZGVmaW5lZCIsImZha2VHYW1lRGF0YSIsInN0cnVjdHVyZWRDbG9uZSIsIm9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMiLCJvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyIsImVudW1zIiwicG9wIiwibWF0cmljZXMiLCJzdHJpbmd5TWF0cmljZXMiLCJTZXQiLCJzdHJpbmd5RmlndXJlTWF0cml4Iiwiam9pbiIsImhhcyIsImFkZCIsIm9yaWdpbmFsTWF0cml4SG9sZXMiLCJjb2xsZWN0SG9sZXMiLCJpbWFnaW5hYmxlTWF0cml4IiwiaW1hZ2luZUZpZ3VyZURyb3AiLCJzcXVhc2hlZExpbmVzQ291bnQiLCJjYWxjdWxhdGVTY29yZSIsImRpcmVjdGlvbnMiLCJtYWtlU2ltcGxlUGxhY2luZ1N0ZXBzIiwiaG9sZSIsImlzT3BlbmVkIiwiY2VsbHMiLCJ0b3BZIiwibGVmdFgiLCJib3R0b21ZIiwicmlnaHRYIiwibWFrZVB1c2hJblBsYWNpbmdTdGVwcyIsImltYWdpbmVGaWd1cmVQbGFjaW5nIiwiZ2FtZU1hdHJpeCIsInRhcmdldFgiLCJ0YXJnZXRZIiwidGFyZ2V0Q29vcmRpbmF0ZSIsImZpZ3VyZVkiLCJmaWd1cmVYIiwiY292ZXJlZENvbHVtbnMiLCJjb2xsZWN0Q292ZXJlZENvbHVtbnMiLCJmaW5kVGhlV2F5T3V0RnJvbUhvbGUiLCJMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXIiLCJpbml0aWFsRGVsYXlNcyIsImJhc2UiLCJwb3ciLCJQbGFjaW5nRXJyb3IiLCJJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yIiwiTm90U3VwcG9ydGVkRGlyZWN0aW9uU3RlcEVycm9yIiwiU3RlcERlY29yYXRvciIsInN0ZXAiLCJpc1BlcmZvcm1lZCIsIlRhcmdldFN0YXRlIiwic3RlcHMiLCJyZXN1bHQiLCJGaWd1cmVQbGFjaW5nUGVyZm9ybWVyIiwibmV4dE1vdmVUaW1lb3V0SWQiLCJwbGFjZSIsInBsYWNpbmdSZXN1bHQiLCJ0YXJnZXRTdGF0ZSIsImZyb21GaWd1cmVQbGFjaW5nUmVzdWx0IiwicHJvY2Vzc1RpY2siLCJ0YXJnZXRGaWd1cmUiLCJzdGVwRGVjb3JhdG9yIiwibmFtZSIsIlNjb3JlQ2FsY3VsYXRvciIsInNxdWFzaGVkTGluZXNTY29yZSIsImhvbGVzQ291bnQiLCJob2xlc0NvdmVyZWRIZWlnaHQiLCJjYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQiLCJob2xlc0NvdW50RGVjcmVhc2UiLCJob2xlc1Njb3JlIiwiY2FsY3VsYXRlSGVpZ2h0IiwiaGVpZ2h0U2NvcmUiLCJmaWxsYWJsZUNlbGxzQ291bnQiLCJmaWxsYWJsZUhlaWdodCIsImNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UiLCJmaWxsYWJsZUNlbGxzU2NvcmUiLCJ0dW5uZWxzU3VtSGVpZ2h0IiwidHVubmVsc0NvdW50IiwiY2FsY3VsYXRlVHVubmVsc0V4Y2VwdFVuY292ZXJlZCIsInR1bm5lbHNTY29yZSIsImNvbnNvbGUiLCJsb2ciLCJjYWxjdWxhdGVIb2xlcyIsInJlYWxNYXRyaXgiLCJvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSIsIm9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSIsImNhbGN1bGF0ZVRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkiLCJjb3ZlcmVkQ29sdW1uc1lzIiwiaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSIsImNvdmVyZWRZIiwidGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSIsInRoZUhpZ2hlc3RIb2xlWSIsImxvd2VzdEVtcHR5WSIsInJlYWxDb3ZlcmVkQ29sdW1ucyIsImltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyIsInR1bm5lbHMiLCJzaXplIiwiSG9sZSIsIkhvbGVzSGVscGVyIiwiaG9sZXMiLCJIb2xlSW5Qcm9jZXNzIiwicHJldmlvdXNSb3dPcGVuWHMiLCJjdXJyZW50Um93T3BlblhzIiwiY29udGludWVzIiwiaG9sZXNJblByb2Nlc3MiLCJwcm9jZXNzaW5nSG9sZSIsImZpbmQiLCJwcmV2WCIsImRvZXNUaGVXYXlPdXRGcm9tSG9sZUV4aXN0cyIsImhvbGVzSW5Qcm9ncmVzc1RvUmVtb3ZlIiwiaSIsImluaXRpYWxDb29yZGluYXRlIiwiYWxsQ29sdW1uc0ZyZWVUb0ZhbGwiLCJjaGVja0ZhbGxYIiwidG9ZIiwiVGV0cmlzU29sdmVyIiwiZmFsbGluZ0ZpZ3VyZVBsYWNpbmdSZXNvbHZlciIsImZhbGxpbmdGaWd1cmVzUGxhY2VyIiwib25GaWd1cmVzU3Bhd25lZCIsInRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRldHJpcyJdLCJzb3VyY2VSb290IjoiIn0=