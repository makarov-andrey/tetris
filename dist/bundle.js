(()=>{"use strict";var e;!function(e){e[e.FallingTickProcessed=0]="FallingTickProcessed",e[e.GameOver=1]="GameOver",e[e.FiguresMoved=2]="FiguresMoved",e[e.LevelUp=3]="LevelUp",e[e.FiguresSpawned=4]="FiguresSpawned"}(e||(e={}));var t,n=function(){function t(e,t,n,i){this.gameData=e,this.transferredToMatrixFigures=t,this.squashedLines=n,this.droppedLines=i}return t.prototype.getEventType=function(){return e.FallingTickProcessed},t}(),i=function(){function t(e){this.gameData=e}return t.prototype.getEventType=function(){return e.GameOver},t}(),r=function(){function t(e){this.gameData=e}return t.prototype.getEventType=function(){return e.FiguresMoved},t}(),o=function(){function t(e,t){this.gameData=e,this.newFigures=t}return t.prototype.getEventType=function(){return e.FiguresSpawned},t}(),a=function(){function e(){this.handlers=new Map}return e.prototype.on=function(e,t,n){void 0===n&&(n=!0);var i=this.handlers.get(e)||[];n&&i.some((function(e){return e===t}))||(i.push(t),this.handlers.set(e,i))},e.prototype.off=function(e,t){var n=this.handlers.get(e)||[],i=n.indexOf(t);i>0&&n.splice(i,1),this.handlers.set(e,n)},e.prototype.fire=function(e){(this.handlers.get(e.getEventType())||[]).forEach((function(t){t(e)}))},e}();!function(e){e[e.InitGame=0]="InitGame",e[e.ResumeGame=1]="ResumeGame",e[e.PauseGame=2]="PauseGame",e[e.FiguresFallTick=3]="FiguresFallTick",e[e.GameOver=4]="GameOver",e[e.Render=5]="Render",e[e.MoveLeft=6]="MoveLeft",e[e.MoveRight=7]="MoveRight",e[e.TurnClockwise=8]="TurnClockwise",e[e.MoveDown=9]="MoveDown",e[e.FiguresFallDown=10]="FiguresFallDown"}(t||(t={}));var s,u,l=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.InitGame},e}(),c=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.ResumeGame},e}(),h=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.PauseGame},e}(),f=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.FiguresFallTick},e}(),d=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.GameOver},e}(),m=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.Render},e}(),p=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveLeft},e}(),g=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveRight},e}(),v=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.TurnClockwise},e}(),y=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveDown},e}(),w=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.FiguresFallDown},e}(),F=function(){function e(){this.handlers=new Map}return e.prototype.addHandler=function(e,t,n){void 0===n&&(n=!0);var i=this.handlers.get(e)||[];n&&i.some((function(e){return e===t}))||(i.push(t),this.handlers.set(e,i))},e.prototype.removeHandler=function(e,t){var n=this.handlers.get(e)||[],i=n.indexOf(t);i>0&&n.splice(i,1),this.handlers.set(e,n)},e.prototype.run=function(e){(this.handlers.get(e.getCommandType())||[]).forEach((function(t){t(e)}))},e}(),T=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(u||(u={}));var D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getNormalizedFigure=function(){var e=this.getFigure(),t=e.reduce((function(e,t){return Math.max(e,t.length)}),0);return e.map((function(e){var n=e.length;return e.length=t,e.fill(!1,n-1,t-1)}))},t.prototype.getFirstTurn=function(){return this.getNormalizedFigure()},t.prototype.getSecondTurn=function(){for(var e=this.getNormalizedFigure(),t=[],n=e.length,i=e[0].length,r=0;r<i;r++){t[r]=new Array(n).fill(!1);for(var o=0;o<n;o++)t[r][n-o-1]=e[o][r]}return t},t.prototype.getThirdTurn=function(){return this.getFirstTurn().reverse().map((function(e){return e.reverse()}))},t.prototype.getForthTurn=function(){return this.getSecondTurn().reverse().map((function(e){return e.reverse()}))},t}(function(){function e(){}return e.prototype.getTurn=function(e){switch(e){case u.One:return this.getFirstTurn();case u.Two:return this.getSecondTurn();case u.Three:return this.getThirdTurn();case u.Four:return this.getForthTurn()}},e}()),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"-#-".split("").map((function(e){return"#"===e}))]},t}(D),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"--#".split("").map((function(e){return"#"===e}))]},t}(D),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"#--".split("").map((function(e){return"#"===e}))]},t}(D),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["##".split("").map((function(e){return"#"===e})),"##".split("").map((function(e){return"#"===e}))]},t}(D),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["####".split("").map((function(e){return"#"===e}))]},t}(D),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["##-".split("").map((function(e){return"#"===e})),"-##".split("").map((function(e){return"#"===e}))]},t}(D),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["-##".split("").map((function(e){return"#"===e})),"##-".split("").map((function(e){return"#"===e}))]},t}(D),x=function(e,t){this.x=e,this.y=t},G=function(e,t,n,i){void 0===i&&(i=void 0),this.figure=e,this.position=t,this.turnState=n,this.color=i},O=function(e,t,n){this.fieldWidth=e,this.fieldHeight=t,this.figures=n},k=function(){function e(e,t,n,i,r,o,a,s,u){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=setTimeout((function(){}))),void 0===a&&(a=1),void 0===s&&(s=0),void 0===u&&(u=0),this.isInitialized=e,this.isGameOver=t,this.fallingFigures=n,this.matrix=i,this.nextTickTimeoutId=r,this.settings=o,this.level=a,this.score=s,this.combo=u}return e.makeSimple=function(t,n){return void 0===t&&(t=10),void 0===n&&(n=20),new e(!1,!1,[],new Array(n).fill([]).map((function(e){return new Array(t).fill(!1)})),setTimeout((function(){})),new O(t,n,[new C,new M,new B,new H,new S,new b,new E]))},e}(),P=function(){function n(e,n,i){this.timingsHandler=e,this.eventBus=n,this.commandBus=i,this.gameData=k.makeSimple(),this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(t.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(t.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(t.GameOver,this.gameOverHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.gameData=t.gameData,this.gameData.isInitialized=!0,this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.resumeGameHandler=function(e){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new l(e.gameData)),this.fallTick())},n.prototype.pauseGameHandler=function(e){this.gameData=e.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new m(this.gameData))},n.prototype.gameOverHandler=function(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new i(this.gameData))},n.prototype.fallTick=function(){this.commandBus.run(new f(this.gameData))},n.prototype.onFallTickProcessed=function(e){clearTimeout(this.gameData.nextTickTimeoutId),this.gameData.isGameOver||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))},n}(),L=function(){function e(){}return e.canFigureBePlaced=function(e,t,n){return e.every((function(e,i){return e.every((function(e,r){var o=t.y+i,a=t.x+r;return!e||o<0&&a>=0&&a<=n[0].length-1||o in n&&a in n[o]&&!n[o][a]}))}))},e}(),I=function(e,t,n){this.filled=e,this.filledGameOver=t,this.empty=n},R=function(e,t,n,i,r){void 0===t&&(t=!0),void 0===n&&(n=new I("#007400","#780000","#fff")),void 0===i&&(i=new I("#007400","#780000",null)),void 0===r&&(r=new I("#b8e5e3",null,null)),this.containerElement=e,this.renderProjectionFigures=t,this.matrixCellColors=n,this.fallingFigureCellColors=i,this.projectionFigureCellColors=r},_=function(e,t){this.filled=e,this.empty=t},j=function(){function n(e,n,i){this.renderSettings=e,this.commandBus=n,this.eventBus=i,this.cellsHtmlElementsMap=[],n.addHandler(t.InitGame,this.initHandler.bind(this)),n.addHandler(t.Render,this.renderCommandHandler.bind(this))}return n.prototype.initHandler=function(t){this.table=n.createHtmlElement('<div style="float: left; display: table; border-collapse: collapse"></div>'),this.cellsHtmlElementsMap=[];for(var i=0;i<t.gameData.settings.fieldHeight;i++){var r=n.createHtmlElement('<div style="display: table-row"></div>');this.cellsHtmlElementsMap[i]=[];for(var o=0;o<t.gameData.settings.fieldWidth;o++){var a=n.createHtmlElement('<div style="display: table-cell; border: 1px solid #ccc; width: 20px; height: 20px"></div>');this.cellsHtmlElementsMap[i][o]=a,r.appendChild(a)}this.table.appendChild(r)}this.renderSettings.containerElement.innerHTML="",this.renderSettings.containerElement.appendChild(this.table),this.scoreDisplay=n.createHtmlElement('<div style="float: left; font-family: \'Helvetica Neue\', sans-serif; font-size: 20px; margin-left: 15px;">\n                Level: <span id="level"></span><br>\n                Score: <span id="score"></span><br>\n                Combo: <span id="combo"></span><br>\n            </div>'),this.renderSettings.containerElement.appendChild(this.scoreDisplay),this.renderSettings.containerElement.appendChild(n.createHtmlElement('<div style="clear: both"></div>')),this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this)),this.eventBus.on(e.GameOver,this.onGameOver.bind(this)),this.eventBus.on(e.FiguresMoved,this.onFiguresMoved.bind(this))},n.prototype.onFiguresMoved=function(e){this.renderState(e.gameData)},n.prototype.onFallTickProcessed=function(e){this.renderState(e.gameData)},n.prototype.onGameOver=function(e){this.renderState(e.gameData)},n.prototype.renderCommandHandler=function(e){this.renderState(e.gameData)},n.prototype.renderState=function(e){this.repaintMatrixCells(e.matrix,new x(0,0),e),this.renderSettings.renderProjectionFigures&&this.renderFallingFiguresProjection(e),this.renderFallingFigures(e),this.renderStats(e)},n.prototype.renderFallingFigures=function(e){var t=this;e.fallingFigures.forEach((function(n){t.repaintFallingFiguresCells(n,e)}))},n.prototype.renderFallingFiguresProjection=function(e){var t=this;e.fallingFigures.forEach((function(n){for(var i=n.figure.getTurn(n.turnState),r=n.position.x,o=n.position.y;L.canFigureBePlaced(i,new x(r,o+1),e.matrix);)o++;t.repaintProjectionFiguresCells(i,new x(r,o),e)}))},n.prototype.repaintMatrixCells=function(e,t,n){var i;i=n.isGameOver?new _(this.renderSettings.matrixCellColors.filledGameOver,this.renderSettings.matrixCellColors.empty):new _(this.renderSettings.matrixCellColors.filled,this.renderSettings.matrixCellColors.empty),this.repaintCells(e,t,i)},n.prototype.repaintFallingFiguresCells=function(e,t){var n;n=t.isGameOver?new _(this.renderSettings.fallingFigureCellColors.filledGameOver,this.renderSettings.fallingFigureCellColors.empty):new _(e.color||this.renderSettings.fallingFigureCellColors.filled,this.renderSettings.fallingFigureCellColors.empty),this.repaintCells(e.figure.getTurn(e.turnState),e.position,n)},n.prototype.repaintProjectionFiguresCells=function(e,t,n){var i;i=n.isGameOver?new _(this.renderSettings.projectionFigureCellColors.filledGameOver,this.renderSettings.projectionFigureCellColors.empty):new _(this.renderSettings.projectionFigureCellColors.filled,this.renderSettings.projectionFigureCellColors.empty),this.repaintCells(e,t,i)},n.prototype.repaintCells=function(e,t,n){var i=this;e.forEach((function(e,r){e.forEach((function(e,o){var a=r+t.y,s=o+t.x;if(a in i.cellsHtmlElementsMap&&s in i.cellsHtmlElementsMap[a]){var u=e?n.filled:n.empty;null!==u&&(i.cellsHtmlElementsMap[a][s].style.background=u)}}))}))},n.prototype.renderStats=function(e){var t=document.getElementById("level"),n=document.getElementById("score"),i=document.getElementById("combo");null!==t&&(t.innerHTML=e.level.toString()),null!==n&&(n.innerHTML=e.score.toString()),null!==i&&(i.innerHTML=e.combo.toString())},n.createHtmlElement=function(e){var t=document.createElement("div");if(t.innerHTML=e,t.children.length>1||null===t.firstElementChild)throw"The HTML must contain only one child";if(!(t.firstElementChild instanceof HTMLElement))throw"Something went wrong while trying to get HTMLElement child from div";return t.firstElementChild},n}(),A=function(){this.transferredFigures=[],this.isGameOver=!1},q=function(){function e(e,n){this.commandBus=e,this.eventBus=n,this.commandBus.addHandler(t.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(t.FiguresFallDown,this.processDropFiguresCommand.bind(this))}return e.prototype.processFiguresFallTickCommand=function(e){var t=this.fallFiguresForOneCell(e.gameData),i=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new d(e.gameData)),this.eventBus.fire(new n(e.gameData,t.transferredFigures,i,0))},e.prototype.processDropFiguresCommand=function(e){for(var t,i=new A,r=0;e.gameData.fallingFigures.length>0;){var o=this.fallFiguresForOneCell(e.gameData);(t=i.transferredFigures).push.apply(t,o.transferredFigures),i.isGameOver=i.isGameOver||o.isGameOver,r++}var a=this.squashLines(e.gameData.matrix);i.isGameOver&&this.commandBus.run(new d(e.gameData)),this.eventBus.fire(new n(e.gameData,i.transferredFigures,a,r-1))},e.prototype.fallFiguresForOneCell=function(e){var t=this,n=new A;return e.fallingFigures.forEach((function(i,r){var o;if(t.figureCanFall(e.matrix,i))i.position.y++;else{var a=t.transferFigureToMatrix(e.matrix,i);(o=n.transferredFigures).push.apply(o,e.fallingFigures.splice(r,1)),n.isGameOver=n.isGameOver||a}})),n},e.prototype.figureCanFall=function(e,t){return L.canFigureBePlaced(t.figure.getTurn(t.turnState),new x(t.position.x,t.position.y+1),e)},e.prototype.transferFigureToMatrix=function(e,t){var n=!1;return t.figure.getTurn(t.turnState).forEach((function(i,r){i.forEach((function(i,o){if(i){var a=t.position.x+o,s=t.position.y+r;s in e&&a in e[s]&&!e[s][a]?e[s][a]=!0:n=!0}}))})),n},e.prototype.squashLines=function(e){var t=[];return e.forEach((function(e,n){e.every((function(e){return e}))&&t.push(n)}),0),t.forEach((function(t){e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t},e}(),N=function(){function e(){}return e.ToArray=function(e){return Object.keys(e).map((function(e){return Number.parseInt(e)})).filter((function(e){return!Number.isNaN(e)}))},e.GetRandom=function(t){var n=e.ToArray(t);return n[Math.floor(Math.random()*n.length)]},e}(),z=function(){function n(e,n){this.eventBus=e,this.commandBus=n,this.commandBus.addHandler(t.InitGame,this.initHandler.bind(this))}return n.prototype.initHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.processOnFallTick.bind(this))},n.prototype.processOnFallTick=function(e){this.addFigure(e.gameData)},n.prototype.addFigure=function(e){if(!(e.fallingFigures.length>0||e.isGameOver)){var t=Math.floor(Math.random()*e.settings.figures.length),n=e.settings.figures[t],i=N.GetRandom(u),r=n.getTurn(i),a=Math.max.apply(Math,r.map((function(e){return e.length}))),s=new x(Math.ceil(e.settings.fieldWidth/2-a/2)-1,-r.length),l=new G(n,s,i);e.fallingFigures.push(l),this.eventBus.fire(new o(e,[l]))}},n}(),W=function(){function e(e,n){this.commandBus=e,this.eventBus=n,this.commandBus.addHandler(t.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(t.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(t.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(t.TurnClockwise,this.processTurnClockwiseCommand.bind(this))}return e.prototype.processMoveLeftCommand=function(e){e.gameData.fallingFigures.forEach((function(t){L.canFigureBePlaced(t.figure.getTurn(t.turnState),new x(t.position.x-1,t.position.y),e.gameData.matrix)&&t.position.x--})),this.eventBus.fire(new r(e.gameData))},e.prototype.processMoveRightCommand=function(e){e.gameData.fallingFigures.forEach((function(t){L.canFigureBePlaced(t.figure.getTurn(t.turnState),new x(t.position.x+1,t.position.y),e.gameData.matrix)&&t.position.x++})),this.eventBus.fire(new r(e.gameData))},e.prototype.processTurnClockwiseCommand=function(e){var t=N.ToArray(u);e.gameData.fallingFigures.forEach((function(n){var i=n.turnState+1;i in t||(i=t[0]),L.canFigureBePlaced(n.figure.getTurn(i),n.position,e.gameData.matrix)&&(n.turnState=i)})),this.eventBus.fire(new r(e.gameData))},e.prototype.processMoveDownCommand=function(e){this.commandBus.run(new f(e.gameData))},e}(),U=function(){function e(e){this.commandBus=e,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}return e.prototype.processInitGameCommand=function(e){var t=this;window.onkeydown=function(n){"ArrowLeft"===n.code?t.commandBus.run(new p(e.gameData)):"ArrowRight"===n.code?t.commandBus.run(new g(e.gameData)):"ArrowUp"===n.code?t.commandBus.run(new v(e.gameData)):"ArrowDown"===n.code||"ArrowDown"===n.code?t.commandBus.run(new y(e.gameData)):"Space"===n.code&&t.commandBus.run(new w(e.gameData))}},e}(),Y=function(){function n(e,n,i,r){void 0===i&&(i=new Map([[1,100],[2,300],[3,500],[4,800]])),void 0===r&&(r=50),this.commandBus=e,this.eventBus=n,this.squashedRowsRewardThresholdsMap=i,this.rewardOnCombo=r,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))},n.prototype.onFallingTickProcessed=function(e){if(!(e.squashedLines.length<0)){var t=0;this.squashedRowsRewardThresholdsMap.forEach((function(n,i){i>e.squashedLines.length||(t=n)})),e.gameData.score+=t*e.gameData.level+this.rewardOnCombo*Math.max(0,e.gameData.combo-1)*e.gameData.level+2*e.droppedLines*e.gameData.level}},n}(),J=function(){function n(e,n,i,r){this.eventBus=e,this.commandBus=n,this.levelIncreaseOnSquashedRowsNumber=i,this.maxLevels=r,this.squashedRowsCounter=0,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}return n.prototype.processInitGameCommand=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.onFallTickProcessed=function(e){0!==e.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,e.gameData.level=Math.min(this.maxLevels,e.gameData.level+1)))},n}(),K=function(){function n(e,n){this.commandBus=e,this.eventBus=n,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.onFallTickProcessed=function(e){e.transferredToMatrixFigures.length<=0||(e.squashedLines.length>0?e.gameData.combo+=1:e.gameData.combo=0)},n}(),Q=function(){function e(e){this.delayMs=e}return e.prototype.getDelayForNextTickMs=function(e){return this.delayMs},e}(),V=function(){function e(e,t,n,i,r,o,s,u,l,c,h,f){void 0===e&&(e=new a),void 0===t&&(t=new F),void 0===n&&(n=new P(new Q(2e3),e,t)),void 0===i&&(i=new W(t,e)),void 0===r&&(r=new U(t)),void 0===o&&(o=new q(t,e)),void 0===s&&(s=new z(e,t)),void 0===u&&(u=new J(e,t,8,15)),void 0===l&&(l=new K(t,e)),void 0===c&&(c=new Y(t,e)),void 0===h&&(h=new j(new R(document.body),t,e)),void 0===f&&(f=k.makeSimple()),this.eventBus=e,this.commandBus=t,this.gameController=n,this.movingHandler=i,this.movingController=r,this.fallingFiguresProcessor=o,this.figuresSpawner=s,this.levelCounter=u,this.comboCounter=l,this.scoreCounter=c,this.tableRenderer=h,this.gameData=f}return e.prototype.start=function(e){e=e||k.makeSimple(),this.commandBus.run(new l(e)),this.commandBus.run(new c(e))},e.prototype.resume=function(){this.commandBus.run(new c(this.gameData))},e.prototype.pause=function(){this.commandBus.run(new h(this.gameData))},e}(),X=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return X(t,e),t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return X(t,e),t}(Error)),$=function(){function e(e){this.commandBus=e}return e.prototype.resolveTargetPosition=function(e){var t=this;if(0===e.fallingFigures.length)return new Map;if(1!==e.fallingFigures.length)throw new Z;for(var n=e.fallingFigures[0],i=N.ToArray(u);i[0]!==n.turnState;)i.unshift(i.pop());var r=new Map;i.forEach((function(e){r.set(e,n.figure.getTurn(e))}));var o=-1/0,a=new G(n.figure,new x(n.position.x,n.position.y),n.turnState);if(r.forEach((function(n,i){for(var r=0;r<e.settings.fieldWidth-n[0].length+1;r++){var s=t.imagineFigureDrop(e.matrix,n,r),u=s[0],l=s[1],c=t.calculateScore(e,l);c>o&&(o=c,a.turnState=i,a.position.x=r,a.position.y=u)}})),"debugMode"in window&&window.debugMode){var s=structuredClone(e);a.color="#f00",s.fallingFigures=[a],this.commandBus.run(new m(s)),r.forEach((function(i,r){for(var o=0;o<e.settings.fieldWidth-i[0].length+1;o++){var a=t.imagineFigureDrop(e.matrix,i,o),s=a[0],u=a[1];t.calculateScore(e,u,!0,new G(n.figure,new x(o,s),r,"#00f"))}})),r.forEach((function(i,r){for(var o=0;o<e.settings.fieldWidth-i[0].length+1;o++){var a=t.imagineFigureDrop(e.matrix,i,o),s=a[0],u=a[1];t.calculateScore(e,u,!0,new G(n.figure,new x(o,s),r,"#00f"))}}))}return new Map([[n,a]])},e.prototype.calculateScore=function(e,t,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=void 0),n&&i){var r=structuredClone(e);r.fallingFigures=[i],this.commandBus.run(new m(r))}var o,a=e.settings.fieldHeight,s=e.settings.fieldWidth,u=5*this.squashLines(t),l=this.calculateHoles(e.matrix),c=this.calculateHolesAndCoveredHeight(t,e.matrix),h=c[0],f=c[1],d=l-h;o=0===f||0===h?d>0?150*d:70*d:(d>0?150*d:70*d)-f*Math.pow(f,f/(a*h))*5;var p=this.calculateHeight(t),g=-p*Math.pow(p,p/a)*3,v=this.calculateFillableSpace(t,s),y=v[0],w=0;v[1]>5&&(w=-y*Math.pow(y,y/(a*s)));var F,T=this.calculateTunnelsExceptUncovered(t,e.matrix),D=T[0],C=T[1],M=o+u+g+(F=0===C?0:70*-C-D*Math.pow(D,D/(a*C))*7)+w;return isNaN(M)&&console.log(t,o,u,g,F,w),M},e.prototype.squashLines=function(e){var t=[];return e.forEach((function(e,n){e.every((function(e){return e}))&&t.push(n)}),0),t.forEach((function(t){e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t.length},e.prototype.imagineFigureDrop=function(e,t,n){for(var i=e.map((function(e){return e.slice()})),r=-t.length;L.canFigureBePlaced(t,new x(n,r+1),e);)r++;return t.forEach((function(e,t){e.forEach((function(e,o){var a=r+t,s=n+o;a in i&&s in i[a]&&e&&(i[a][s]=!0)}))})),[r,i]},e.prototype.calculateHoles=function(e){var t=new Set,n=0;return e.forEach((function(e,i){e.forEach((function(e,i){e?t.add(i):t.has(i)&&n++}))})),n},e.prototype.calculateHolesAndCoveredHeight=function(e,t){var n=this.calculateTheHighestHoleCoveredY(t),i=n[0],r=n[1],o=new Map,a=0,s=0;return e.forEach((function(e,t){e.forEach((function(e,n){e&&!o.has(n)&&o.set(n,t);var u=o.get(n);void 0===u||e||(s++,void 0!==i&&void 0!==r&&(t<i?a+=t-u:u<r&&(a+=r-u)))}))})),[s,a]},e.prototype.calculateTheHighestHoleCoveredY=function(e){var t=void 0,n=void 0,i=new Map;return e.some((function(e,r){return e.some((function(e,o){e&&!i.has(o)&&i.set(o,r);var a=i.get(o);return void 0!==a&&!e&&(n=r,t=a,!0)}))})),[n,t]},e.prototype.calculateHeight=function(e){var t=-1;return e.every((function(e,n){return!!e.every((function(e){return!e}))&&(t=n,!0)})),e.length-t-1},e.prototype.calculateTunnelsExceptUncovered=function(e,t){var n=new Set;t.every((function(e){e.forEach((function(e,t){e&&n.add(t)}))}));var i=new Set,r=new Map,o=e[0].length;e.every((function(e,t){return e.forEach((function(e,t){e&&i.add(t)})),e.forEach((function(e,t){e||i.has(t)||n.has(t)||0!==t&&!i.has(t-1)||t!==o-1&&!i.has(t+1)||r.set(t,(r.get(t)||0)+1)})),i.size<o}));var a=0,s=0;return r.forEach((function(e){e>=3&&(a+=e,s++)})),[a,s]},e.prototype.calculateFillableSpace=function(e,t){var n=new Set,i=0,r=0;return e.every((function(e){return e.forEach((function(e,t){e&&n.add(t)})),e.forEach((function(e,t){!e&&n.size>0&&!n.has(t)&&i++})),n.size<t&&(n.size>0&&r++,!0)})),[i,r]},e}(),ee=function(){function e(e,t){void 0===t&&(t=.8),this.initialDelayMs=e,this.base=t}return e.prototype.getDelayForNextTickMs=function(e){return Math.pow(this.base-.007*(e.level-1),e.level-1)*this.initialDelayMs},e}(),te=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t}(Error),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t}(ne),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t}(ne),oe=function(){function e(e,t){void 0===t&&(t=new ee(100,.9)),this.commandBus=e,this.timingsHandler=t,this.nextMoveTimeoutId=setTimeout((function(){})),this.targetFallingFiguresStates=new Map,this.gameData=k.makeSimple()}return e.prototype.place=function(e,t){this.gameData=e,this.targetFallingFiguresStates=t,clearTimeout(this.nextMoveTimeoutId),this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData))},e.prototype.processTick=function(){if(0!==this.gameData.fallingFigures.length){if(1!==this.gameData.fallingFigures.length)throw new ie;var e=this.gameData.fallingFigures[0],t=this.targetFallingFiguresStates.get(e);if(t){if(e.figure!==t.figure)throw new re("Both of the original and the target falling figures must have the same figure in it.");if(e.turnState!=t.turnState)this.commandBus.run(new v(this.gameData));else{if(e.position.x==t.position.x)return void this.commandBus.run(new w(this.gameData));e.position.x>t.position.x?this.commandBus.run(new p(this.gameData)):this.commandBus.run(new g(this.gameData))}this.processTick()}}},e}(),ae=function(){function n(e,n,i,r){void 0===i&&(i=new $(n)),void 0===r&&(r=new oe(n)),this.eventBus=e,this.commandBus=n,this.fallingFigurePlacingResolver=i,this.fallingFiguresPlacer=r,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FiguresSpawned,this.onFiguresSpawned.bind(this))},n.prototype.onFiguresSpawned=function(e){var t=this.fallingFigurePlacingResolver.resolveTargetPosition(e.gameData);this.fallingFiguresPlacer.place(e.gameData,t)},n}();document.addEventListener("DOMContentLoaded",(function(){var e=new a,t=new F,n=new V(e,t);new ae(e,t),n.start()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBWWdDLFNBQVVmLEtBQUtnRyxnQkFBZ0JDLEtBQUtqRyxNQUMvRSxDQVVKLE9BUlksWUFBQWdHLGdCQUFSLFNBQXdCSyxHQUNwQnJHLEtBQUs4RixTQUFTbEcsR0FBR2QsRUFBVVcsZUFBZ0JPLEtBQUtzVixpQkFBaUJyUCxLQUFLakcsTUFDMUUsRUFFUSxZQUFBc1YsaUJBQVIsU0FBeUJ6VixHQUNyQixJQUFNZ1YsRUFBNkI3VSxLQUFLa1YsNkJBQTZCdEUsc0JBQXNCL1EsRUFBTWIsVUFDakdnQixLQUFLbVYscUJBQXFCTCxNQUFNalYsRUFBTWIsU0FBVTZWLEVBQ3BELEVBQ0osRUFsQkEsR0NBQTdLLFNBQVN1TCxpQkFBaUIsb0JBQW9CLFdBQzFDLElBQU16UCxFQUFXLElBQUkySixFQUNmMUosRUFBYSxJQUFJMkosRUFDbkI4RixFQUFTLElBQUlDLEVBQWEzUCxFQUFVQyxHQUMzQixJQUFJMlAsR0FBYTVQLEVBQVVDLEdBRXhDeVAsRUFBT2xGLE9BQ1gsRyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9GaWd1cmVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tbW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvR2FtZUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1JlbmRlcmVyL1RhYmxlUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9GYWxsaW5nRmlndXJlc1Byb2Nlc3Nvci9SZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9VdGlscy9FbnVtSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmlndXJlc1NwYXduZXIvQWx3YXlzT25lRmlndXJlU3Bhd25lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL01vdmluZ0hhbmRsZXIvTW92aW5nSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL01vdmluZ0NvbnRyb2xsZXIvTW92aW5nQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1Njb3JlQ291bnRlci9GYWxsVGlja1Njb3JlQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0xldmVsQ291bnRlci9TcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVGltaW5nc0hhbmRsZXIvQ29uc3RUaW1pbmdzSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RldHJpc0ZhY2FkZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGVudW0gRXZlbnRUeXBlIHtcbiAgICBGYWxsaW5nVGlja1Byb2Nlc3NlZCxcbiAgICBHYW1lT3ZlcixcbiAgICBGaWd1cmVzTW92ZWQsXG4gICAgTGV2ZWxVcCxcbiAgICBGaWd1cmVzU3Bhd25lZCxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudCB7XG4gICAgZ2FtZURhdGE6IEdhbWVEYXRhO1xuXG4gICAgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZTtcbn1cblxuZXhwb3J0IGNsYXNzIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIHB1YmxpYyB0cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdLFxuICAgICAgICBwdWJsaWMgc3F1YXNoZWRMaW5lczogbnVtYmVyW10sXG4gICAgICAgIHB1YmxpYyBkcm9wcGVkTGluZXM6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZU92ZXJFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuR2FtZU92ZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc01vdmVkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZpZ3VyZXNNb3ZlZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMZXZlbFVwRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkxldmVsVXA7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc1NwYXduZWRFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIG5ld0ZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuRmlndXJlc1NwYXduZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRXZlbnRCdXMge1xuICAgIHByaXZhdGUgaGFuZGxlcnM6IE1hcDxFdmVudFR5cGUsICgoLi4uXzogYW55KSA9PiB2b2lkKVtdPiA9IG5ldyBNYXAoKTtcblxuICAgIHB1YmxpYyBvbihldmVudDogRXZlbnRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb2ZmKGV2ZW50OiBFdmVudFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZmlyZShldmVudFBheWxvYWQ6IEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50UGF5bG9hZC5nZXRFdmVudFR5cGUoKSkgfHwgW107XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7aGFuZGxlcihldmVudFBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgZW51bSBDb21tYW5kVHlwZSB7XG4gICAgSW5pdEdhbWUsXG4gICAgUmVzdW1lR2FtZSxcbiAgICBQYXVzZUdhbWUsXG4gICAgRmlndXJlc0ZhbGxUaWNrLFxuICAgIEdhbWVPdmVyLFxuICAgIFJlbmRlcixcbiAgICBNb3ZlTGVmdCxcbiAgICBNb3ZlUmlnaHQsXG4gICAgVHVybkNsb2Nrd2lzZSxcbiAgICBNb3ZlRG93bixcbiAgICBGaWd1cmVzRmFsbERvd24sXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZCB7XG4gICAgZ2FtZURhdGE6IEdhbWVEYXRhO1xuXG4gICAgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGU7XG59XG5cbmV4cG9ydCBjbGFzcyBJbml0R2FtZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuSW5pdEdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVzdW1lR2FtZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUmVzdW1lR2FtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQYXVzZUdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlBhdXNlR2FtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVzRmFsbFRpY2tDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsVGljaztcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lT3ZlckNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuR2FtZU92ZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVuZGVyQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5SZW5kZXI7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZUxlZnRDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVMZWZ0O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVSaWdodENvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZVJpZ2h0O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFR1cm5DbG9ja3dpc2VDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlR1cm5DbG9ja3dpc2U7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZURvd25Db21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVEb3duO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERyb3BGaWd1cmVzQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJ1cyB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPENvbW1hbmRUeXBlLCAoKHBheWxvYWQ6IENvbW1hbmQpID0+IHZvaWQpW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIGFkZEhhbmRsZXIoZXZlbnQ6IENvbW1hbmRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSGFuZGxlcihldmVudDogQ29tbWFuZFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuKHBheWxvYWQ6IENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQocGF5bG9hZC5nZXRDb21tYW5kVHlwZSgpKSB8fCBbXTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtoYW5kbGVyKHBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gRmlndXJlVHVyblN0YXRlIHtcbiAgICBPbmUsXG4gICAgVHdvLFxuICAgIFRocmVlLFxuICAgIEZvdXIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlndXJlIHtcbiAgICAvKipcbiAgICAgKiBBbnkgZmlndXJlIG11c3QgYmUgYWJsZSB0byB0dXJuIDQgdGltZXMgaW4gMiBkaW1lbnNpb25zLlxuICAgICAqIEFsbCB0dXJucyBhcmUgY2xvY2t3aXNlLlxuICAgICAqL1xuICAgIGdldFR1cm4oZmlndXJlVHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUpOiBib29sZWFuW11bXTtcbiAgICBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RGaWd1cmUgaW1wbGVtZW50cyBGaWd1cmV7XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW107XG5cbiAgICBnZXRUdXJuKGZpZ3VyZVR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBzd2l0Y2ggKGZpZ3VyZVR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuT25lOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuVHdvOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKTtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLlRocmVlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRoaXJkVHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuRm91cjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3J0aFR1cm4oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdpdmVzIGFuIGVhc3kgd2F5IHRvIGRlZmluZSBmaWd1cmVzIGZvciB0ZXRyaXMuXG4gKiBKdXN0IGltcGxlbWVudCB0aGUgZ2V0RmlndXJlIG1ldGhvZCBhbmQgcmV0dXJuIGZpZ3VyZSBsaWtlIHRoaXM6XG4gKiBgYGAodHMpXG4gKiBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAqICAgICByZXR1cm4gW1xuICogICAgICAgICBbdHJ1ZSwgIHRydWUsIHRydWVdLFxuICogICAgICAgICBbZmFsc2UsIHRydWUsIGZhbHNlXSxcbiAqICAgICAgICAgW3RydWUsICB0cnVlLCB0cnVlXSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKlxuICogT3IgZGVmaW5lIGl0IGxpa2UgdGhpcyBmb3IgbW9yZSB2aXN1YWwgcHJlc2VudGF0aW9uOlxuICogYGBgKHRzKVxuICogcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gKiAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgICAgIFwiLSMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUgZXh0ZW5kcyBBYnN0cmFjdEZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldEZpZ3VyZSgpOiBib29sZWFuW11bXTtcblxuICAgIHByaXZhdGUgZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIGxldCBmaWd1cmUgPSB0aGlzLmdldEZpZ3VyZSgpO1xuICAgICAgICBsZXQgdGhlTG9uZ2VzdFJvd1NpemUgPSBmaWd1cmUucmVkdWNlKFxuICAgICAgICAgICAgKHByZXZpb3VzLCBjdXJyZW50KSA9PiBNYXRoLm1heChwcmV2aW91cywgY3VycmVudC5sZW5ndGgpLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmlndXJlLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsTGVuZ3RoID0gcm93Lmxlbmd0aDtcbiAgICAgICAgICAgIHJvdy5sZW5ndGggPSB0aGVMb25nZXN0Um93U2l6ZTtcbiAgICAgICAgICAgIHJldHVybiByb3cuZmlsbChmYWxzZSwgb3JpZ2luYWxMZW5ndGggLSAxLCB0aGVMb25nZXN0Um93U2l6ZSAtIDEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlID0gdGhpcy5nZXROb3JtYWxpemVkRmlndXJlKCk7XG4gICAgICAgIGxldCB0dXJuZWRGaWd1cmU6IGJvb2xlYW5bXVtdID0gW107XG4gICAgICAgIGxldCBvcmlnaW5hbEZpZ3VyZUhlaWdodCA9IG9yaWdpbmFsRmlndXJlLmxlbmd0aDtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlV2lkdGggPSBvcmlnaW5hbEZpZ3VyZVswXS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgb3JpZ2luYWxGaWd1cmVXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICB0dXJuZWRGaWd1cmVbeF0gPSBuZXcgQXJyYXkob3JpZ2luYWxGaWd1cmVIZWlnaHQpLmZpbGwoZmFsc2UpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBvcmlnaW5hbEZpZ3VyZUhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdHVybmVkRmlndXJlW3hdW29yaWdpbmFsRmlndXJlSGVpZ2h0IC0geSAtIDFdID0gb3JpZ2luYWxGaWd1cmVbeV1beF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR1cm5lZEZpZ3VyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RUdXJuKCkucmV2ZXJzZSgpLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKS5yZXZlcnNlKCkubWFwKHJvdyA9PiByb3cucmV2ZXJzZSgpKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBURmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmlnaHRMRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItLSNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGVmdExGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIiMtLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTcXVhcmVGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RpY2tGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExaRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBSWkZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIi0jI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RmlndXJlLCBGaWd1cmVUdXJuU3RhdGUsIExlZnRMRmlndXJlLCBMWkZpZ3VyZSwgUmlnaHRMRmlndXJlLCBSWkZpZ3VyZSwgU3F1YXJlRmlndXJlLCBTdGlja0ZpZ3VyZSwgVEZpZ3VyZX0gZnJvbSBcIi4vRmlndXJlc1wiO1xuXG4vKipcbiAqIHggZm9yIGhvcml6b250YWwgcG9zaXRpb25pbmdcbiAqIHkgZm9yIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBDb29yZGluYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHg6IG51bWJlcixcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsaW5nRmlndXJlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZ3VyZTogRmlndXJlLFxuICAgICAgICBwdWJsaWMgcG9zaXRpb246IENvb3JkaW5hdGUsXG4gICAgICAgIHB1YmxpYyB0dXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHVibGljIGNvbG9yOiBzdHJpbmd8dW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWVsZFdpZHRoOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBmaWVsZEhlaWdodDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgZmlndXJlczogRmlndXJlW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZURhdGEge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlLFxuICAgICAgICBwdWJsaWMgaXNHYW1lT3ZlcjogYm9vbGVhbiA9IGZhbHNlLFxuICAgICAgICBwdWJsaWMgZmFsbGluZ0ZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSA9IFtdLFxuICAgICAgICBwdWJsaWMgbWF0cml4OiBib29sZWFuW11bXSA9IFtdLFxuICAgICAgICBwdWJsaWMgbmV4dFRpY2tUaW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIH0pLFxuICAgICAgICBwdWJsaWMgc2V0dGluZ3M6IEdhbWVTZXR0aW5ncyxcbiAgICAgICAgcHVibGljIGxldmVsOiBudW1iZXIgPSAxLFxuICAgICAgICBwdWJsaWMgc2NvcmU6IG51bWJlciA9IDAsXG4gICAgICAgIHB1YmxpYyBjb21ibzogbnVtYmVyID0gMCxcbiAgICApIHt9XG5cbiAgICBzdGF0aWMgbWFrZVNpbXBsZSh3aWR0aDogbnVtYmVyID0gMTAsIGhlaWdodDogbnVtYmVyID0gMjApOiBHYW1lRGF0YSB7XG4gICAgICAgIHJldHVybiBuZXcgR2FtZURhdGEoXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgW10sXG4gICAgICAgICAgICBuZXcgQXJyYXkoaGVpZ2h0KS5maWxsKFtdKVxuICAgICAgICAgICAgICAgIC5tYXAoXyA9PiBuZXcgQXJyYXkod2lkdGgpLmZpbGwoZmFsc2UpKSxcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgR2FtZVNldHRpbmdzKFxuICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBURmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSaWdodExGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IExlZnRMRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTcXVhcmVGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFN0aWNrRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBMWkZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgUlpGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKVxuICAgIH1cbn1cbiIsImltcG9ydCB7VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL1RpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQsIEZpZ3VyZXNNb3ZlZEV2ZW50LCBHYW1lT3ZlckV2ZW50fSBmcm9tIFwiLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCwgSW5pdEdhbWVDb21tYW5kLCBQYXVzZUdhbWVDb21tYW5kLCBSZW5kZXJDb21tYW5kLCBSZXN1bWVHYW1lQ29tbWFuZH0gZnJvbSBcIi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIEdhbWVDb250cm9sbGVyIHtcbiAgICBwcml2YXRlIGdhbWVEYXRhOiBHYW1lRGF0YSA9IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcblxuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgcHJpdmF0ZSB0aW1pbmdzSGFuZGxlcjogVGltaW5nc0hhbmRsZXIsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUmVzdW1lR2FtZSwgdGhpcy5yZXN1bWVHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUGF1c2VHYW1lLCB0aGlzLnBhdXNlR2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkdhbWVPdmVyLCB0aGlzLmdhbWVPdmVySGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGNvbW1hbmQuZ2FtZURhdGE7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbFRpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXN1bWVHYW1lSGFuZGxlcihjb21tYW5kOiBSZXN1bWVHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmdhbWVEYXRhLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEluaXRHYW1lQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mYWxsVGljaygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcGF1c2VHYW1lSGFuZGxlcihjb21tYW5kOiBQYXVzZUdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEgPSBjb21tYW5kLmdhbWVEYXRhO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2FtZU92ZXJIYW5kbGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEdhbWVPdmVyRXZlbnQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmFsbFRpY2soKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIGlmICghdGhpcy5nYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICB0aGlzLmZhbGxUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgdGhpcy50aW1pbmdzSGFuZGxlci5nZXREZWxheUZvck5leHRUaWNrTXModGhpcy5nYW1lRGF0YSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0Nvb3JkaW5hdGV9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIEZpZ3VyZVBsYWNpbmdDaGVja2VyIHtcbiAgICBwdWJsaWMgc3RhdGljIGNhbkZpZ3VyZUJlUGxhY2VkKHRhcmdldEZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10sIHRhcmdldFBvc2l0aW9uOiBDb29yZGluYXRlLCBtYXRyaXg6IGJvb2xlYW5bXVtdKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0YXJnZXRGaWd1cmVNYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5ldmVyeSgodmFsdWUsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWSA9IHRhcmdldFBvc2l0aW9uLnkgKyB5O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxYID0gdGFyZ2V0UG9zaXRpb24ueCArIHg7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB8fCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsWSA8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYID49IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIDw9IG1hdHJpeFswXS5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgICkgfHwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhbFkgaW4gbWF0cml4XG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCBpbiBtYXRyaXhbcmVhbFldXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhbWF0cml4W3JlYWxZXVtyZWFsWF1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmQsIFJlbmRlckNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgR2FtZU92ZXJFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWxsZWQ6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZmlsbGVkR2FtZU92ZXI6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZW1wdHk6IHN0cmluZ3xudWxsLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXJTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb250YWluZXJFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICAgICAgcHVibGljIHJlbmRlclByb2plY3Rpb25GaWd1cmVzOiBib29sZWFuID0gdHJ1ZSxcbiAgICAgICAgcHVibGljIG1hdHJpeENlbGxDb2xvcnM6IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyA9IG5ldyBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MoXG4gICAgICAgICAgICAnIzAwNzQwMCcsXG4gICAgICAgICAgICAnIzc4MDAwMCcsXG4gICAgICAgICAgICAnI2ZmZicsXG4gICAgICAgICksXG4gICAgICAgIHB1YmxpYyBmYWxsaW5nRmlndXJlQ2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjMDA3NDAwJyxcbiAgICAgICAgICAgICcjNzgwMDAwJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICksXG4gICAgICAgIHB1YmxpYyBwcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjYjhlNWUzJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICApLFxuICAgICkge31cbn1cblxuY2xhc3MgQ2VsbENvbG9ycyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWxsZWQ6IHN0cmluZ3xudWxsLFxuICAgICAgICBwdWJsaWMgZW1wdHk6IHN0cmluZ3xudWxsLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIge1xuICAgIHByaXZhdGUgY2VsbHNIdG1sRWxlbWVudHNNYXA6IEhUTUxFbGVtZW50W11bXSA9IFtdO1xuICAgIHByaXZhdGUgdGFibGU6IEhUTUxFbGVtZW50fHVuZGVmaW5lZDtcbiAgICBwcml2YXRlIHNjb3JlRGlzcGxheTogSFRNTEVsZW1lbnR8dW5kZWZpbmVkO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBwcml2YXRlIHJlbmRlclNldHRpbmdzOiBUYWJsZVJlbmRlcmVyU2V0dGluZ3MsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLlJlbmRlciwgdGhpcy5yZW5kZXJDb21tYW5kSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLnRhYmxlID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImZsb2F0OiBsZWZ0OyBkaXNwbGF5OiB0YWJsZTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZVwiPjwvZGl2PicpO1xuICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwID0gW107XG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY29tbWFuZC5nYW1lRGF0YS5zZXR0aW5ncy5maWVsZEhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBsZXQgcm93ID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImRpc3BsYXk6IHRhYmxlLXJvd1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFt5XSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIGxldCBjZWxsID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImRpc3BsYXk6IHRhYmxlLWNlbGw7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHhcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3ldW3hdID0gY2VsbDtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50YWJsZSk7XG5cbiAgICAgICAgdGhpcy5zY29yZURpc3BsYXkgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KFxuICAgICAgICAgICAgYDxkaXYgc3R5bGU9XCJmbG9hdDogbGVmdDsgZm9udC1mYW1pbHk6ICdIZWx2ZXRpY2EgTmV1ZScsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMjBweDsgbWFyZ2luLWxlZnQ6IDE1cHg7XCI+XG4gICAgICAgICAgICAgICAgTGV2ZWw6IDxzcGFuIGlkPVwibGV2ZWxcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIFNjb3JlOiA8c3BhbiBpZD1cInNjb3JlXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBDb21ibzogPHNwYW4gaWQ9XCJjb21ib1wiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICA8L2Rpdj5gKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc2NvcmVEaXNwbGF5KTtcblxuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImNsZWFyOiBib3RoXCI+PC9kaXY+JykpO1xuXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbFRpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkdhbWVPdmVyLCB0aGlzLm9uR2FtZU92ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZpZ3VyZXNNb3ZlZCwgdGhpcy5vbkZpZ3VyZXNNb3ZlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmlndXJlc01vdmVkKGNvbW1hbmQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbFRpY2tQcm9jZXNzZWQoY29tbWFuZDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25HYW1lT3Zlcihjb21tYW5kOiBHYW1lT3ZlckV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJDb21tYW5kSGFuZGxlcihjb21tYW5kOiBSZW5kZXJDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJTdGF0ZShnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBhaW50TWF0cml4Q2VsbHMoZ2FtZURhdGEubWF0cml4LCBuZXcgQ29vcmRpbmF0ZSgwLCAwKSwgZ2FtZURhdGEpO1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJTZXR0aW5ncy5yZW5kZXJQcm9qZWN0aW9uRmlndXJlcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGYWxsaW5nRmlndXJlc1Byb2plY3Rpb24oZ2FtZURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyRmFsbGluZ0ZpZ3VyZXMoZ2FtZURhdGEpO1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRzKGdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZhbGxpbmdGaWd1cmVzKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZhbGxpbmdGaWd1cmUgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXBhaW50RmFsbGluZ0ZpZ3VyZXNDZWxscyhmYWxsaW5nRmlndXJlLCBnYW1lRGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyRmFsbGluZ0ZpZ3VyZXNQcm9qZWN0aW9uKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZhbGxpbmdGaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlndXJlTWF0cml4ID0gZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0aW9uRmlndXJlWCA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueDtcbiAgICAgICAgICAgIGxldCBwcm9qZWN0aW9uRmlndXJlWSA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueTtcbiAgICAgICAgICAgIHdoaWxlKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUocHJvamVjdGlvbkZpZ3VyZVgsIHByb2plY3Rpb25GaWd1cmVZICsgMSksIGdhbWVEYXRhLm1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0aW9uRmlndXJlWSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXBhaW50UHJvamVjdGlvbkZpZ3VyZXNDZWxscyhcbiAgICAgICAgICAgICAgICBmaWd1cmVNYXRyaXgsXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUocHJvamVjdGlvbkZpZ3VyZVgsIHByb2plY3Rpb25GaWd1cmVZKSxcbiAgICAgICAgICAgICAgICBnYW1lRGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50TWF0cml4Q2VsbHMobWF0cml4OiBib29sZWFuW11bXSwgaW5kZW50OiBDb29yZGluYXRlLCBnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNvbG9yczogQ2VsbENvbG9ycztcbiAgICAgICAgaWYgKGdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5maWxsZWRHYW1lT3ZlcixcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmZpbGxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwYWludENlbGxzKG1hdHJpeCwgaW5kZW50LCBjb2xvcnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMoZmFsbGluZ0ZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmZpbGxlZEdhbWVPdmVyLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5jb2xvciB8fCB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmZpbGxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhcbiAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbixcbiAgICAgICAgICAgIGNvbG9yc1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMobWF0cml4OiBib29sZWFuW11bXSwgaW5kZW50OiBDb29yZGluYXRlLCBnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNvbG9yczogQ2VsbENvbG9ycztcbiAgICAgICAgaWYgKGdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZmlsbGVkR2FtZU92ZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmZpbGxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhtYXRyaXgsIGluZGVudCwgY29sb3JzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRDZWxscyhtYXRyaXg6IGJvb2xlYW5bXVtdLCBpbmRlbnQ6IENvb3JkaW5hdGUsIGNlbGxDb2xvcnM6IENlbGxDb2xvcnMpOiB2b2lkIHtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbHVlLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFkgPSB5ICsgaW5kZW50Lnk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB4ICsgaW5kZW50Lng7XG4gICAgICAgICAgICAgICAgaWYgKHJlYWxZIGluIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBcbiAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggaW4gdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFtyZWFsWV1cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSB2YWx1ZSA/IGNlbGxDb2xvcnMuZmlsbGVkIDogY2VsbENvbG9ycy5lbXB0eTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3JlYWxZXVtyZWFsWF0uc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyU3RhdHMoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxldmVsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZXZlbCcpO1xuICAgICAgICBjb25zdCBzY29yZVNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbiAgICAgICAgY29uc3QgY29tYm9TcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbWJvJyk7XG4gICAgICAgIGlmIChsZXZlbFNwYW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxldmVsU3Bhbi5pbm5lckhUTUwgPSBnYW1lRGF0YS5sZXZlbC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY29yZVNwYW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHNjb3JlU3Bhbi5pbm5lckhUTUwgPSBnYW1lRGF0YS5zY29yZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21ib1NwYW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbWJvU3Bhbi5pbm5lckhUTUwgPSBnYW1lRGF0YS5jb21iby50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlSHRtbEVsZW1lbnQoaHRtbDogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICBpZiAoY29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCA+IDEgfHwgY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyAnVGhlIEhUTUwgbXVzdCBjb250YWluIG9ubHkgb25lIGNoaWxkJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93ICdTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSB0cnlpbmcgdG8gZ2V0IEhUTUxFbGVtZW50IGNoaWxkIGZyb20gZGl2JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RHJvcEZpZ3VyZXNDb21tYW5kLCBDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgR2FtZU92ZXJDb21tYW5kLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuXG5jbGFzcyBGYWxsaW5nUmVzdWx0IHtcbiAgICBwdWJsaWMgdHJhbnNmZXJyZWRGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10gPSBbXTtcbiAgICBwdWJsaWMgaXNHYW1lT3ZlcjogYm9vbGVhbiA9IGZhbHNlO1xufVxuXG5leHBvcnQgY2xhc3MgUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxUaWNrLCB0aGlzLnByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd24sIHRoaXMucHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kKGNvbW1hbmQ6IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQpIHtcbiAgICAgICAgY29uc3QgZmFsbGluZ1Jlc3VsdCA9IHRoaXMuZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgICAgICBsZXQgc3F1YXNoZWRMaW5lcyA9IHRoaXMuc3F1YXNoTGluZXMoY29tbWFuZC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBpZiAoZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBHYW1lT3ZlckNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmFsbFRpY2tQcm9jZXNzZWRFdmVudChcbiAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEsXG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyxcbiAgICAgICAgICAgIHNxdWFzaGVkTGluZXMsXG4gICAgICAgICAgICAwXG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZChjb21tYW5kOiBEcm9wRmlndXJlc0NvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGZhbGxpbmdSZXN1bHQgPSBuZXcgRmFsbGluZ1Jlc3VsdCgpO1xuICAgICAgICBsZXQgZHJvcHBlZExpbmVzID0gMDtcbiAgICAgICAgd2hpbGUgKGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgb25lQ2VsbEZhbGxpbmdSZXN1bHQgPSB0aGlzLmZhbGxGaWd1cmVzRm9yT25lQ2VsbChjb21tYW5kLmdhbWVEYXRhKTtcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLnB1c2goLi4ub25lQ2VsbEZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzKTtcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciA9IGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciB8fCBvbmVDZWxsRmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyO1xuICAgICAgICAgICAgZHJvcHBlZExpbmVzKys7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNxdWFzaGVkTGluZXMgPSB0aGlzLnNxdWFzaExpbmVzKGNvbW1hbmQuZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgaWYgKGZhbGxpbmdSZXN1bHQuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgR2FtZU92ZXJDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQoXG4gICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLFxuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMsXG4gICAgICAgICAgICBzcXVhc2hlZExpbmVzLFxuICAgICAgICAgICAgZHJvcHBlZExpbmVzIC0gMSxcbiAgICAgICAgKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmYWxsRmlndXJlc0Zvck9uZUNlbGwoZ2FtZURhdGE6IEdhbWVEYXRhKTogRmFsbGluZ1Jlc3VsdCB7XG4gICAgICAgIGxldCBmYWxsaW5nUmVzdWx0ID0gbmV3IEZhbGxpbmdSZXN1bHQoKTtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaCgoZmFsbGluZ0ZpZ3VyZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZ3VyZUNhbkZhbGwoZ2FtZURhdGEubWF0cml4LCBmYWxsaW5nRmlndXJlKSkge1xuICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlndXJlR2FtZU92ZXJSZXN1bHQgPSB0aGlzLnRyYW5zZmVyRmlndXJlVG9NYXRyaXgoXG4gICAgICAgICAgICAgICAgICAgIGdhbWVEYXRhLm1hdHJpeCxcbiAgICAgICAgICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMucHVzaCguLi5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5zcGxpY2UoaW5kZXgsIDEpKTtcbiAgICAgICAgICAgICAgICBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgPSBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgfHwgZmlndXJlR2FtZU92ZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsbGluZ1Jlc3VsdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpZ3VyZUNhbkZhbGwobWF0cml4OiBib29sZWFuW11bXSwgZmFsbGluZ0ZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueCwgZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55ICsgMSksXG4gICAgICAgICAgICBtYXRyaXhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZmVyRmlndXJlVG9NYXRyaXgobWF0cml4OiBib29sZWFuW11bXSwgZmFsbGluZ0ZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgaXNHYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKVxuICAgICAgICAgICAgLmZvckVhY2goKHJvdywgZmlndXJlQ2VsbFkpID0+IHtcbiAgICAgICAgICAgICAgICByb3cuZm9yRWFjaCgoY2VsbFZhbHVlLCBmaWd1cmVDZWxsWCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGxWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRyaXhYID0gZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi54ICsgZmlndXJlQ2VsbFg7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRyaXhZID0gZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55ICsgZmlndXJlQ2VsbFk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRyaXhZIGluIG1hdHJpeFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgbWF0cml4WCBpbiBtYXRyaXhbbWF0cml4WV1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFtYXRyaXhbbWF0cml4WV1bbWF0cml4WF1cbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXhbbWF0cml4WV1bbWF0cml4WF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNHYW1lT3ZlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNHYW1lT3ZlcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNxdWFzaExpbmVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXJbXSB7XG4gICAgICAgIGxldCBsaW5lc1RvU3F1YXNoOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBsZXQgY2FuQmVTcXVhc2hlZCA9IHJvdy5ldmVyeShjZWxsID0+IGNlbGwpO1xuICAgICAgICAgICAgaWYgKGNhbkJlU3F1YXNoZWQpIHtcbiAgICAgICAgICAgICAgICBsaW5lc1RvU3F1YXNoLnB1c2goeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgICBsaW5lc1RvU3F1YXNoLmZvckVhY2goeSA9PiB7XG4gICAgICAgICAgICBtYXRyaXguc3BsaWNlKHksIDEpO1xuICAgICAgICAgICAgbWF0cml4LnVuc2hpZnQobmV3IEFycmF5KG1hdHJpeFswXS5sZW5ndGgpLmZpbGwoZmFsc2UpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaW5lc1RvU3F1YXNoO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBFbnVtSGVscGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIFRvQXJyYXkodmFsOiBhbnkpOiB0eXBlb2YgdmFsW10ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKVxuICAgICAgICAgICAgLm1hcChuID0+IE51bWJlci5wYXJzZUludChuKSlcbiAgICAgICAgICAgIC5maWx0ZXIobiA9PiAhTnVtYmVyLmlzTmFOKG4pKSBhcyB1bmtub3duIGFzIHR5cGVvZiB2YWxbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIEdldFJhbmRvbSh2YWw6IGFueSk6IHR5cGVvZiB2YWwge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBFbnVtSGVscGVyLlRvQXJyYXkodmFsKTtcbiAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWx1ZXMubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlc1tyYW5kb21JbmRleF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50LCBGaWd1cmVzU3Bhd25lZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vRmlndXJlc1wiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9VdGlscy9FbnVtSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBBbHdheXNPbmVGaWd1cmVTcGF3bmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0SGFuZGxlcihldmVudDogSW5pdEdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oXG4gICAgICAgICAgICBFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NPbkZhbGxUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzT25GYWxsVGljayhldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFkZEZpZ3VyZShldmVudC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRGaWd1cmUoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPiAwIHx8IGdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpZ3VyZUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ2FtZURhdGEuc2V0dGluZ3MuZmlndXJlcy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBmaWd1cmUgPSBnYW1lRGF0YS5zZXR0aW5ncy5maWd1cmVzW2ZpZ3VyZUluZGV4XTtcbiAgICAgICAgY29uc3QgdHVyblN0YXRlID0gRW51bUhlbHBlci5HZXRSYW5kb20oRmlndXJlVHVyblN0YXRlKTtcbiAgICAgICAgY29uc3QgZmlndXJlTWF0cml4ID0gZmlndXJlLmdldFR1cm4odHVyblN0YXRlKTtcbiAgICAgICAgY29uc3QgZmlndXJlV2lkdGggPSBNYXRoLm1heCguLi5maWd1cmVNYXRyaXgubWFwKHJvdyA9PiByb3cubGVuZ3RoKSk7XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBuZXcgQ29vcmRpbmF0ZShcbiAgICAgICAgICAgIE1hdGguY2VpbChnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoIC8gMiAtIGZpZ3VyZVdpZHRoIC8gMikgLSAxLFxuICAgICAgICAgICAgLWZpZ3VyZU1hdHJpeC5sZW5ndGgsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZhbGxpbmdGaWd1cmUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShcbiAgICAgICAgICAgIGZpZ3VyZSxcbiAgICAgICAgICAgIGNvb3JkaW5hdGUsXG4gICAgICAgICAgICB0dXJuU3RhdGVcbiAgICAgICAgKTtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMucHVzaChmYWxsaW5nRmlndXJlKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzU3Bhd25lZEV2ZW50KGdhbWVEYXRhLCBbZmFsbGluZ0ZpZ3VyZV0pKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBNb3ZlTGVmdENvbW1hbmQsIE1vdmVSaWdodENvbW1hbmQsIFR1cm5DbG9ja3dpc2VDb21tYW5kLCBNb3ZlRG93bkNvbW1hbmQsIEZpZ3VyZXNGYWxsVGlja0NvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vRmlndXJlc1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRmlndXJlc01vdmVkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcbmltcG9ydCB7RW51bUhlbHBlcn0gZnJvbSBcIi4uL1V0aWxzL0VudW1IZWxwZXJcIjtcblxuZXhwb3J0IGNsYXNzIE1vdmluZ0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlTGVmdCwgdGhpcy5wcm9jZXNzTW92ZUxlZnRDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlUmlnaHQsIHRoaXMucHJvY2Vzc01vdmVSaWdodENvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVEb3duLCB0aGlzLnByb2Nlc3NNb3ZlRG93bkNvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLlR1cm5DbG9ja3dpc2UsIHRoaXMucHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVMZWZ0Q29tbWFuZChjb21tYW5kOiBNb3ZlTGVmdENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkTGVmdCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCAtIDEsIGZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZU1vdmVkTGVmdCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbi54LS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kKGNvbW1hbmQ6IE1vdmVSaWdodENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkUmlnaHQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4oZmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmlndXJlLnBvc2l0aW9uLnggKyAxLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVNb3ZlZFJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLngrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQ6IFR1cm5DbG9ja3dpc2VDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFsbFR1cm5TdGF0ZXMgPSBFbnVtSGVscGVyLlRvQXJyYXkoRmlndXJlVHVyblN0YXRlKTtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV4dFR1cm5TdGF0ZSA9IGZpZ3VyZS50dXJuU3RhdGUgKyAxO1xuICAgICAgICAgICAgaWYgKCEobmV4dFR1cm5TdGF0ZSBpbiBhbGxUdXJuU3RhdGVzKSkge1xuICAgICAgICAgICAgICAgIG5leHRUdXJuU3RhdGUgPSBhbGxUdXJuU3RhdGVzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FuQmVUdXJuZWQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4obmV4dFR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlVHVybmVkKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnR1cm5TdGF0ZSA9IG5leHRUdXJuU3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlRG93bkNvbW1hbmQoY29tbWFuZDogTW92ZURvd25Db21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIERyb3BGaWd1cmVzQ29tbWFuZCwgSW5pdEdhbWVDb21tYW5kLCBNb3ZlTGVmdENvbW1hbmQsIE1vdmVSaWdodENvbW1hbmQsIFR1cm5DbG9ja3dpc2VDb21tYW5kLCBNb3ZlRG93bkNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIE1vdmluZ0NvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXNcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMucHJvY2Vzc0luaXRHYW1lQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NJbml0R2FtZUNvbW1hbmQoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHdpbmRvdy5vbmtleWRvd24gPSBldmVudCA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93TGVmdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlTGVmdENvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlUmlnaHRDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93VXAnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgVHVybkNsb2Nrd2lzZUNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVEb3duQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZURvd25Db21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ1NwYWNlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IERyb3BGaWd1cmVzQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgRmFsbFRpY2tTY29yZUNvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIHNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXA6IE1hcDxudW1iZXIsIG51bWJlcj4gPSBuZXcgTWFwKFtcbiAgICAgICAgICAgIFsxLCAxMDBdLFxuICAgICAgICAgICAgWzIsIDMwMF0sXG4gICAgICAgICAgICBbMywgNTAwXSxcbiAgICAgICAgICAgIFs0LCA4MDBdLFxuICAgICAgICBdKSxcbiAgICAgICAgcHJpdmF0ZSByZXdhcmRPbkNvbWJvID0gNTAsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA8IDApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGxldCBwcmV2aW91c1RocmVzaG9sZFJld2FyZCA9IDA7XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcC5mb3JFYWNoKChyZXdhcmQsIHJvd3NTcXVhc2hlZFRocmVzaG9sZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvd3NTcXVhc2hlZFRocmVzaG9sZCA+IGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgPSByZXdhcmQ7XG4gICAgICAgIH0pO1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zY29yZSArPVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgKiBldmVudC5nYW1lRGF0YS5sZXZlbFxuICAgICAgICAgICAgKyB0aGlzLnJld2FyZE9uQ29tYm8gKiBNYXRoLm1heCgwLCBldmVudC5nYW1lRGF0YS5jb21ibyAtIDEpICogZXZlbnQuZ2FtZURhdGEubGV2ZWxcbiAgICAgICAgICAgICsgZXZlbnQuZHJvcHBlZExpbmVzICogMiAqIGV2ZW50LmdhbWVEYXRhLmxldmVsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIFNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciB7XG4gICAgcHJpdmF0ZSBzcXVhc2hlZFJvd3NDb3VudGVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlcjogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIG1heExldmVsczogbnVtYmVyLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5wcm9jZXNzSW5pdEdhbWVDb21tYW5kLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlcisrO1xuICAgICAgICBpZiAodGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyID49IHRoaXMubGV2ZWxJbmNyZWFzZU9uU3F1YXNoZWRSb3dzTnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIgPSAwO1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEubGV2ZWwgPSBNYXRoLm1pbih0aGlzLm1heExldmVscywgZXZlbnQuZ2FtZURhdGEubGV2ZWwgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIENvbWJvQ291bnRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwdWJsaWMgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBldmVudC5nYW1lRGF0YS5jb21ibyArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEuY29tYm8gPSAwO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIENvbnN0VGltaW5nc0hhbmRsZXIgaW1wbGVtZW50cyBUaW1pbmdzSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBkZWxheU1zOiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgZ2V0RGVsYXlGb3JOZXh0VGlja01zKGdhbWVEYXRhOiBHYW1lRGF0YSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGF5TXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lQ29udHJvbGxlcn0gZnJvbSAnLi9HYW1lQ29udHJvbGxlcidcbmltcG9ydCB7VGFibGVSZW5kZXJlciwgVGFibGVSZW5kZXJlclNldHRpbmdzfSBmcm9tICcuL1JlbmRlcmVyL1RhYmxlUmVuZGVyZXInXG5pbXBvcnQge1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3Nvcn0gZnJvbSBcIi4vRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IvUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yXCI7XG5pbXBvcnQge0Fsd2F5c09uZUZpZ3VyZVNwYXduZXJ9IGZyb20gXCIuL0ZpZ3VyZXNTcGF3bmVyL0Fsd2F5c09uZUZpZ3VyZVNwYXduZXJcIjtcbmltcG9ydCB7RXZlbnRCdXN9IGZyb20gXCIuL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIEluaXRHYW1lQ29tbWFuZCwgUGF1c2VHYW1lQ29tbWFuZCwgUmVzdW1lR2FtZUNvbW1hbmR9IGZyb20gXCIuL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtNb3ZpbmdIYW5kbGVyfSBmcm9tIFwiLi9Nb3ZpbmdIYW5kbGVyL01vdmluZ0hhbmRsZXJcIjtcbmltcG9ydCB7TW92aW5nQ29udHJvbGxlcn0gZnJvbSBcIi4vTW92aW5nQ29udHJvbGxlci9Nb3ZpbmdDb250cm9sbGVyXCI7XG5pbXBvcnQge0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0ZhbGxUaWNrU2NvcmVDb3VudGVyfSBmcm9tIFwiLi9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXJcIjtcbmltcG9ydCB7U3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyfSBmcm9tIFwiLi9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi9Db21tb25cIjtcbmltcG9ydCB7Q29tYm9Db3VudGVyfSBmcm9tIFwiLi9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyXCI7XG5pbXBvcnQge0NvbnN0VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXJcIjtcblxuZXhwb3J0IGNsYXNzIFRldHJpc0ZhY2FkZSB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzID0gbmV3IEV2ZW50QnVzKCksXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1cyA9IG5ldyBDb21tYW5kQnVzKCksXG4gICAgICAgIHByaXZhdGUgZ2FtZUNvbnRyb2xsZXIgPSBuZXcgR2FtZUNvbnRyb2xsZXIoXG4gICAgICAgICAgICAvLyBuZXcgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyKDIwMDApLFxuICAgICAgICAgICAgbmV3IENvbnN0VGltaW5nc0hhbmRsZXIoMjAwMCksXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgbW92aW5nSGFuZGxlciA9IG5ldyBNb3ZpbmdIYW5kbGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIG1vdmluZ0NvbnRyb2xsZXIgPSBuZXcgTW92aW5nQ29udHJvbGxlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IgPSBuZXcgUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmlndXJlc1NwYXduZXIgPSBuZXcgQWx3YXlzT25lRmlndXJlU3Bhd25lcihcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBsZXZlbENvdW50ZXIgPSBuZXcgU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgOCxcbiAgICAgICAgICAgIDE1LFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGNvbWJvQ291bnRlciA9IG5ldyBDb21ib0NvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgc2NvcmVDb3VudGVyID0gbmV3IEZhbGxUaWNrU2NvcmVDb3VudGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIHRhYmxlUmVuZGVyZXIgPSBuZXcgVGFibGVSZW5kZXJlcihcbiAgICAgICAgICAgIG5ldyBUYWJsZVJlbmRlcmVyU2V0dGluZ3MoXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXNcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIGdhbWVEYXRhID0gR2FtZURhdGEubWFrZVNpbXBsZSgpLFxuICAgICkge31cblxuICAgIHB1YmxpYyBzdGFydChnYW1lRGF0YT86IEdhbWVEYXRhKSB7XG4gICAgICAgIGdhbWVEYXRhID0gZ2FtZURhdGEgfHwgR2FtZURhdGEubWFrZVNpbXBsZSgpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBJbml0R2FtZUNvbW1hbmQoZ2FtZURhdGEpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVzdW1lR2FtZUNvbW1hbmQoZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzdW1lKCkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZXN1bWVHYW1lQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHBhdXNlKCkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBQYXVzZUdhbWVDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtFbnVtSGVscGVyfSBmcm9tIFwiLi4vVGV0cmlzL1V0aWxzL0VudW1IZWxwZXJcIjtcbmltcG9ydCB7RmlndXJlLCBGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi9UZXRyaXMvRmlndXJlc1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1RldHJpcy9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBSZW5kZXJDb21tYW5kfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuXG5jbGFzcyBQbGFjZVJlc29sdmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuXG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNlUmVzb2x2aW5nRXJyb3Ige1xufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHJlc29sdmVUYXJnZXRQb3NpdGlvbihnYW1lRGF0YTogR2FtZURhdGEpOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4ge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRmlndXJlID0gZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXNbMF07XG5cbiAgICAgICAgbGV0IGVudW1zID0gRW51bUhlbHBlci5Ub0FycmF5KEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIHdoaWxlIChlbnVtc1swXSAhPT0gb3JpZ2luYWxGaWd1cmUudHVyblN0YXRlKSB7XG4gICAgICAgICAgICBlbnVtcy51bnNoaWZ0KGVudW1zLnBvcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWF0cmljZXM6IE1hcDxGaWd1cmVUdXJuU3RhdGUsIGJvb2xlYW5bXVtdPiA9IG5ldyBNYXAoKTtcbiAgICAgICAgZW51bXMuZm9yRWFjaCh0dXJuU3RhdGUgPT4ge1xuICAgICAgICAgICAgbWF0cmljZXMuc2V0KHR1cm5TdGF0ZSwgb3JpZ2luYWxGaWd1cmUuZmlndXJlLmdldFR1cm4odHVyblN0YXRlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbWF4U2NvcmUgPSAtSW5maW5pdHk7XG4gICAgICAgIGxldCB0aGVCZXN0VGFyZ2V0RmlndXJlU3RhdGUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShcbiAgICAgICAgICAgIG9yaWdpbmFsRmlndXJlLmZpZ3VyZSxcbiAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKG9yaWdpbmFsRmlndXJlLnBvc2l0aW9uLngsIG9yaWdpbmFsRmlndXJlLnBvc2l0aW9uLnkpLFxuICAgICAgICAgICAgb3JpZ2luYWxGaWd1cmUudHVyblN0YXRlXG4gICAgICAgICk7XG5cbiAgICAgICAgbWF0cmljZXMuZm9yRWFjaCgoZmlndXJlTWF0cml4LCB0dXJuU3RhdGUpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aCAtIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGggKyAxOyB4KyspIHtcbiAgICAgICAgICAgICAgICBsZXQgW3ksIGltYWdpbmFibGVNYXRyaXhdID0gdGhpcy5pbWFnaW5lRmlndXJlRHJvcChnYW1lRGF0YS5tYXRyaXgsIGZpZ3VyZU1hdHJpeCwgeCk7XG4gICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gdGhpcy5jYWxjdWxhdGVTY29yZShnYW1lRGF0YSwgaW1hZ2luYWJsZU1hdHJpeCk7XG4gICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gbWF4U2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4U2NvcmUgPSBzY29yZTtcbiAgICAgICAgICAgICAgICAgICAgdGhlQmVzdFRhcmdldEZpZ3VyZVN0YXRlLnR1cm5TdGF0ZSA9IHR1cm5TdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhlQmVzdFRhcmdldEZpZ3VyZVN0YXRlLnBvc2l0aW9uLnggPSB4O1xuICAgICAgICAgICAgICAgICAgICB0aGVCZXN0VGFyZ2V0RmlndXJlU3RhdGUucG9zaXRpb24ueSA9IHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoJ2RlYnVnTW9kZScgaW4gd2luZG93ICYmIHdpbmRvdy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgLy8gaWYgKHRydWUpIHtcbiAgICAgICAgICAgIGxldCBmYWtlR2FtZURhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZURhdGEpO1xuICAgICAgICAgICAgdGhlQmVzdFRhcmdldEZpZ3VyZVN0YXRlLmNvbG9yID0gJyNmMDAnO1xuICAgICAgICAgICAgZmFrZUdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzID0gW3RoZUJlc3RUYXJnZXRGaWd1cmVTdGF0ZV07XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZW5kZXJDb21tYW5kKGZha2VHYW1lRGF0YSkpO1xuXG4gICAgICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aCAtIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGggKyAxOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IFt5LCBpbWFnaW5hYmxlTWF0cml4XSA9IHRoaXMuaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZURhdGEubWF0cml4LCBmaWd1cmVNYXRyaXgsIHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVNjb3JlKGdhbWVEYXRhLCBpbWFnaW5hYmxlTWF0cml4LCB0cnVlLCBuZXcgRmFsbGluZ0ZpZ3VyZShcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRmlndXJlLmZpZ3VyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKHgsIHkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHVyblN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyMwMGYnXG4gICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aCAtIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGggKyAxOyB4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IFt5LCBpbWFnaW5hYmxlTWF0cml4XSA9IHRoaXMuaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZURhdGEubWF0cml4LCBmaWd1cmVNYXRyaXgsIHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVNjb3JlKGdhbWVEYXRhLCBpbWFnaW5hYmxlTWF0cml4LCB0cnVlLCBuZXcgRmFsbGluZ0ZpZ3VyZShcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRmlndXJlLmZpZ3VyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKHgsIHkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHVyblN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyMwMGYnXG4gICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBNYXAoW1xuICAgICAgICAgICAgW29yaWdpbmFsRmlndXJlLCB0aGVCZXN0VGFyZ2V0RmlndXJlU3RhdGVdLFxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVNjb3JlKGdhbWVEYXRhOiBHYW1lRGF0YSwgaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10sIGRlYnVnTW9kZTogYm9vbGVhbiA9IGZhbHNlLCBmYWtlRmlndXJlOiBGYWxsaW5nRmlndXJlfHVuZGVmaW5lZCA9IHVuZGVmaW5lZCk6IG51bWJlciB7XG4gICAgICAgIGlmIChkZWJ1Z01vZGUgJiYgZmFrZUZpZ3VyZSkge1xuICAgICAgICAgICAgbGV0IGZha2VHYW1lRGF0YSA9IHN0cnVjdHVyZWRDbG9uZShnYW1lRGF0YSk7XG4gICAgICAgICAgICBmYWtlR2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMgPSBbZmFrZUZpZ3VyZV07XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZW5kZXJDb21tYW5kKGZha2VHYW1lRGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpZWxkSGVpZ2h0ID0gZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoO1xuICAgICAgICBjb25zdCBzcXVhc2hlZExpbmVzQ291bnQgPSB0aGlzLnNxdWFzaExpbmVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICBjb25zdCBzcXVhc2hlZExpbmVzU2NvcmUgPSBzcXVhc2hlZExpbmVzQ291bnQgKiA1O1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsSG9sZXNDb3VudCA9IHRoaXMuY2FsY3VsYXRlSG9sZXMoZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgY29uc3QgW2hvbGVzQ291bnQsIGhvbGVzQ292ZXJlZEhlaWdodF0gPSB0aGlzLmNhbGN1bGF0ZUhvbGVzQW5kQ292ZXJlZEhlaWdodChpbWFnaW5hYmxlTWF0cml4LCBnYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBjb25zdCBob2xlc0NvdW50RGVjcmVhc2UgPSBvcmlnaW5hbEhvbGVzQ291bnQgLSBob2xlc0NvdW50O1xuICAgICAgICBsZXQgaG9sZXNTY29yZTogbnVtYmVyO1xuICAgICAgICBpZiAoaG9sZXNDb3ZlcmVkSGVpZ2h0ID09PSAwIHx8IGhvbGVzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIGhvbGVzU2NvcmUgPSAoaG9sZXNDb3VudERlY3JlYXNlID4gMCA/IGhvbGVzQ291bnREZWNyZWFzZSAqIDE1MCA6IGhvbGVzQ291bnREZWNyZWFzZSAqIDcwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhvbGVzU2NvcmUgPSAoaG9sZXNDb3VudERlY3JlYXNlID4gMCA/IGhvbGVzQ291bnREZWNyZWFzZSAqIDE1MCA6IGhvbGVzQ291bnREZWNyZWFzZSAqIDcwKVxuICAgICAgICAgICAgICAgIC0gaG9sZXNDb3ZlcmVkSGVpZ2h0ICogTWF0aC5wb3coaG9sZXNDb3ZlcmVkSGVpZ2h0LCBob2xlc0NvdmVyZWRIZWlnaHQgLyAoZmllbGRIZWlnaHQgKiBob2xlc0NvdW50KSkgKiA1O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jYWxjdWxhdGVIZWlnaHQoaW1hZ2luYWJsZU1hdHJpeCk7XG4gICAgICAgIGNvbnN0IGhlaWdodFNjb3JlID0gLWhlaWdodCAqIE1hdGgucG93KGhlaWdodCwgaGVpZ2h0IC8gZmllbGRIZWlnaHQpICogMztcblxuICAgICAgICBjb25zdCBbZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUhlaWdodF0gPSB0aGlzLmNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UoaW1hZ2luYWJsZU1hdHJpeCwgZmllbGRXaWR0aCk7XG4gICAgICAgIGxldCBmaWxsYWJsZUNlbGxzU2NvcmUgPSAwO1xuICAgICAgICBpZiAoZmlsbGFibGVIZWlnaHQgPiA1KSB7XG4gICAgICAgICAgICBmaWxsYWJsZUNlbGxzU2NvcmUgPSAtZmlsbGFibGVDZWxsc0NvdW50ICogTWF0aC5wb3coZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUNlbGxzQ291bnQgLyAoZmllbGRIZWlnaHQgKiBmaWVsZFdpZHRoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBbdHVubmVsc1N1bUhlaWdodCwgdHVubmVsc0NvdW50XSA9IHRoaXMuY2FsY3VsYXRlVHVubmVsc0V4Y2VwdFVuY292ZXJlZChpbWFnaW5hYmxlTWF0cml4LCBnYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBsZXQgdHVubmVsc1Njb3JlOiBudW1iZXI7XG4gICAgICAgIGlmICh0dW5uZWxzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHR1bm5lbHNTY29yZSA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0dW5uZWxzU2NvcmUgPSAtdHVubmVsc0NvdW50ICogNzBcbiAgICAgICAgICAgICAgICAtIHR1bm5lbHNTdW1IZWlnaHQgKiBNYXRoLnBvdyh0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzU3VtSGVpZ2h0IC8gKGZpZWxkSGVpZ2h0ICogdHVubmVsc0NvdW50KSkgKiA3O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2NvcmUgPSBob2xlc1Njb3JlICsgc3F1YXNoZWRMaW5lc1Njb3JlICsgaGVpZ2h0U2NvcmUgKyB0dW5uZWxzU2NvcmUgKyBmaWxsYWJsZUNlbGxzU2NvcmU7XG4gICAgICAgIGlmIChpc05hTihzY29yZSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGltYWdpbmFibGVNYXRyaXgsIGhvbGVzU2NvcmUsIHNxdWFzaGVkTGluZXNTY29yZSwgaGVpZ2h0U2NvcmUsIHR1bm5lbHNTY29yZSwgZmlsbGFibGVDZWxsc1Njb3JlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NvcmU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcXVhc2hMaW5lcyhtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxpbmVzVG9TcXVhc2g6IG51bWJlcltdID0gW107XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGxldCBjYW5CZVNxdWFzaGVkID0gcm93LmV2ZXJ5KGNlbGwgPT4gY2VsbCk7XG4gICAgICAgICAgICBpZiAoY2FuQmVTcXVhc2hlZCkge1xuICAgICAgICAgICAgICAgIGxpbmVzVG9TcXVhc2gucHVzaCh5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGxpbmVzVG9TcXVhc2guZm9yRWFjaCh5ID0+IHtcbiAgICAgICAgICAgIG1hdHJpeC5zcGxpY2UoeSwgMSk7XG4gICAgICAgICAgICBtYXRyaXgudW5zaGlmdChuZXcgQXJyYXkobWF0cml4WzBdLmxlbmd0aCkuZmlsbChmYWxzZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpbmVzVG9TcXVhc2gubGVuZ3RoO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZU1hdHJpeDogYm9vbGVhbltdW10sIGZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10sIHRhcmdldFg6IG51bWJlcik6IFtudW1iZXIsIGJvb2xlYW5bXVtdXSB7XG4gICAgICAgIGxldCBpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSA9IGdhbWVNYXRyaXgubWFwKHJvdyA9PiByb3cuc2xpY2UoKSk7XG4gICAgICAgIGxldCB0YXJnZXRZID0gLWZpZ3VyZU1hdHJpeC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHRhcmdldFgsIHRhcmdldFkgKyAxKSwgZ2FtZU1hdHJpeCkpIHtcbiAgICAgICAgICAgIHRhcmdldFkrKztcbiAgICAgICAgfVxuICAgICAgICBmaWd1cmVNYXRyaXguZm9yRWFjaCgocm93LCBmaWd1cmVZKSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCBmaWd1cmVYKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFkgPSB0YXJnZXRZICsgZmlndXJlWTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWCA9IHRhcmdldFggKyBmaWd1cmVYO1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiBpbWFnaW5hYmxlTWF0cml4XG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIGltYWdpbmFibGVNYXRyaXhbcmVhbFldXG4gICAgICAgICAgICAgICAgICAgICYmIHZhbFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlTWF0cml4W3JlYWxZXVtyZWFsWF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW3RhcmdldFksIGltYWdpbmFibGVNYXRyaXhdO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlSG9sZXMoaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIge1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj47XG4gICAgICAgIGxldCBob2xlc0NvdW50ID0gMDtcbiAgICAgICAgaW1hZ2luYWJsZU1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBob2xlc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaG9sZXNDb3VudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhvbGVzQW5kQ292ZXJlZEhlaWdodChpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSwgcmVhbE1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgY29uc3QgW29yaWdpbmFsVGhlSGlnaGVzdEhvbGVZLCBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFldID0gdGhpcy5jYWxjdWxhdGVUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKHJlYWxNYXRyaXgpO1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnNZcyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBsZXQgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSA9IDA7XG4gICAgICAgIGxldCBob2xlc0NvdW50ID0gMDtcbiAgICAgICAgaW1hZ2luYWJsZU1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmICFjb3ZlcmVkQ29sdW1uc1lzLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1uc1lzLnNldCh4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvdmVyZWRZID0gY292ZXJlZENvbHVtbnNZcy5nZXQoeCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRZICE9PSB1bmRlZmluZWQgJiYgIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICBob2xlc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSAhPT0gdW5kZWZpbmVkICYmIG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSArPSB5IC0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdmVyZWRZIDwgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bSArPSBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgLSBjb3ZlcmVkWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtob2xlc0NvdW50LCBob2xlc0NvdmVyZWRIZWlnaHRzU3VtXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkobWF0cml4OiBib29sZWFuW11bXSk6IFtudW1iZXJ8dW5kZWZpbmVkLCBudW1iZXJ8dW5kZWZpbmVkXSB7XG4gICAgICAgIGxldCB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgdGhlSGlnaGVzdEhvbGVZID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnNZcyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBtYXRyaXguc29tZSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcm93LnNvbWUoKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwgJiYgIWNvdmVyZWRDb2x1bW5zWXMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zWXMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY292ZXJlZFkgPSBjb3ZlcmVkQ29sdW1uc1lzLmdldCh4KTtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZFkgIT09IHVuZGVmaW5lZCAmJiAhdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoZUhpZ2hlc3RIb2xlWSA9IHk7XG4gICAgICAgICAgICAgICAgICAgIHRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgPSBjb3ZlcmVkWTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt0aGVIaWdoZXN0SG9sZVksIHRoZUhpZ2hlc3RIb2xlQ292ZXJlZFldO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlSGVpZ2h0KG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXIge1xuICAgICAgICBsZXQgbG93ZXN0RW1wdHlZID0gLTE7XG4gICAgICAgIG1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBpZiAocm93LmV2ZXJ5KHZhbCA9PiAhdmFsKSkge1xuICAgICAgICAgICAgICAgIGxvd2VzdEVtcHR5WSA9IHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtYXRyaXgubGVuZ3RoIC0gbG93ZXN0RW1wdHlZIC0gMTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQoaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10sIHJlYWxNYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGxldCByZWFsQ292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICAgICAgcmVhbE1hdHJpeC5ldmVyeSgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZWFsQ292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGxldCB0dW5uZWxzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj47XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSBpbWFnaW5hYmxlTWF0cml4WzBdLmxlbmd0aDtcbiAgICAgICAgaW1hZ2luYWJsZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdmFsXG4gICAgICAgICAgICAgICAgICAgICYmICFpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHgpXG4gICAgICAgICAgICAgICAgICAgICYmICFyZWFsQ292ZXJlZENvbHVtbnMuaGFzKHgpXG4gICAgICAgICAgICAgICAgICAgICYmICh4ID09PSAwIHx8IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeCAtIDEpKVxuICAgICAgICAgICAgICAgICAgICAmJiAoeCA9PT0gZmllbGRXaWR0aCAtIDEgfHwgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4ICsgMSkpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHR1bm5lbHMuc2V0KHgsICh0dW5uZWxzLmdldCh4KSB8fCAwKSArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5zaXplIDwgZmllbGRXaWR0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCB0dW5uZWxzU3VtSGVpZ2h0ID0gMDtcbiAgICAgICAgbGV0IHR1bm5lbHNDb3VudCA9IDA7XG4gICAgICAgIHR1bm5lbHMuZm9yRWFjaChoZWlnaHQgPT4ge1xuICAgICAgICAgICAgaWYgKGhlaWdodCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgdHVubmVsc1N1bUhlaWdodCArPSBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgdHVubmVsc0NvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW3R1bm5lbHNTdW1IZWlnaHQsIHR1bm5lbHNDb3VudF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVGaWxsYWJsZVNwYWNlKG1hdHJpeDogYm9vbGVhbltdW10sIGZpZWxkV2lkdGg6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBsZXQgY292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICAgICAgbGV0IGZpbGxhYmxlQ2VsbHNDb3VudCA9IDA7XG4gICAgICAgIGxldCBmaWxsYWJsZUhlaWdodCA9IDA7XG4gICAgICAgIG1hdHJpeC5ldmVyeShyb3cgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdmFsICYmIGNvdmVyZWRDb2x1bW5zLnNpemUgPiAwICYmICFjb3ZlcmVkQ29sdW1ucy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbGFibGVDZWxsc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY292ZXJlZENvbHVtbnMuc2l6ZSA8IGZpZWxkV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY292ZXJlZENvbHVtbnMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbGFibGVIZWlnaHQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW2ZpbGxhYmxlQ2VsbHNDb3VudCwgZmlsbGFibGVIZWlnaHRdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXIgaW1wbGVtZW50cyBUaW1pbmdzSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbERlbGF5TXM6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBiYXNlOiBudW1iZXIgPSAwLjgsXG4gICAgKSB7fVxuXG4gICAgZ2V0RGVsYXlGb3JOZXh0VGlja01zKGdhbWVEYXRhOiBHYW1lRGF0YSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdyh0aGlzLmJhc2UgLSAoZ2FtZURhdGEubGV2ZWwgLSAxKSAqIDAuMDA3LCBnYW1lRGF0YS5sZXZlbCAtIDEpICogdGhpcy5pbml0aWFsRGVsYXlNcztcbiAgICB9XG59XG4iLCJpbXBvcnQge0ZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBEcm9wRmlndXJlc0NvbW1hbmQsIE1vdmVMZWZ0Q29tbWFuZCwgTW92ZVJpZ2h0Q29tbWFuZCwgVHVybkNsb2Nrd2lzZUNvbW1hbmR9IGZyb20gXCIuLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4uL1RldHJpcy9UaW1pbmdzSGFuZGxlci9MZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJcIjtcblxuY2xhc3MgUGxhY2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige31cbmNsYXNzIEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5jbGFzcyBJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVQbGFjaW5nUGVyZm9ybWVyIHtcbiAgICBwcml2YXRlIG5leHRNb3ZlVGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiA9IHNldFRpbWVvdXQoKCkgPT4ge30pO1xuICAgIHByaXZhdGUgdGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXM6IE1hcDxGYWxsaW5nRmlndXJlLCBGYWxsaW5nRmlndXJlPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIGdhbWVEYXRhOiBHYW1lRGF0YSA9IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgdGltaW5nc0hhbmRsZXIgPSBuZXcgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyKDEwMCwgMC45KSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcGxhY2UoZ2FtZURhdGE6IEdhbWVEYXRhLCB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlczogTWFwPEZhbGxpbmdGaWd1cmUsIEZhbGxpbmdGaWd1cmU+KSB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEgPSBnYW1lRGF0YTtcbiAgICAgICAgdGhpcy50YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyA9IHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5uZXh0TW92ZVRpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMubmV4dE1vdmVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgdGhpcy50aW1pbmdzSGFuZGxlci5nZXREZWxheUZvck5leHRUaWNrTXModGhpcy5nYW1lRGF0YSksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzVGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IHRoaXMuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXNbMF07XG4gICAgICAgIGNvbnN0IHRhcmdldEZpZ3VyZSA9IHRoaXMudGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMuZ2V0KG9yaWdpbmFsRmlndXJlKTtcbiAgICAgICAgaWYgKCF0YXJnZXRGaWd1cmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS5maWd1cmUgIT09IHRhcmdldEZpZ3VyZS5maWd1cmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yKFwiQm90aCBvZiB0aGUgb3JpZ2luYWwgYW5kIHRoZSB0YXJnZXQgZmFsbGluZyBmaWd1cmVzIG11c3QgaGF2ZSB0aGUgc2FtZSBmaWd1cmUgaW4gaXQuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsRmlndXJlLnR1cm5TdGF0ZSAhPSB0YXJnZXRGaWd1cmUudHVyblN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBUdXJuQ2xvY2t3aXNlQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3JpZ2luYWxGaWd1cmUucG9zaXRpb24ueCAhPSB0YXJnZXRGaWd1cmUucG9zaXRpb24ueCkge1xuICAgICAgICAgICAgaWYgKG9yaWdpbmFsRmlndXJlLnBvc2l0aW9uLnggPiB0YXJnZXRGaWd1cmUucG9zaXRpb24ueCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVMZWZ0Q29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVSaWdodENvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRHJvcEZpZ3VyZXNDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvY2Vzc1RpY2soKTtcblxuICAgICAgICAvLyB0aGlzLm5leHRNb3ZlVGltZW91dElkID0gc2V0VGltZW91dChcbiAgICAgICAgLy8gICAgIHRoaXMucHJvY2Vzc1RpY2suYmluZCh0aGlzKSxcbiAgICAgICAgLy8gICAgIDAsXG4gICAgICAgIC8vICAgICB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKSxcbiAgICAgICAgLy8gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZpZ3VyZXNTcGF3bmVkRXZlbnR9IGZyb20gXCIuLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1Jlc29sdmVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUmVzb2x2ZXJcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1BlcmZvcm1lcn0gZnJvbSBcIi4vRmlndXJlUGxhY2luZ1BlcmZvcm1lclwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzU29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBmYWxsaW5nRmlndXJlUGxhY2luZ1Jlc29sdmVyID0gbmV3IEZpZ3VyZVBsYWNpbmdSZXNvbHZlcihjb21tYW5kQnVzKSxcbiAgICAgICAgcHJpdmF0ZSBmYWxsaW5nRmlndXJlc1BsYWNlciA9IG5ldyBGaWd1cmVQbGFjaW5nUGVyZm9ybWVyKGNvbW1hbmRCdXMpLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZpZ3VyZXNTcGF3bmVkLCB0aGlzLm9uRmlndXJlc1NwYXduZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZpZ3VyZXNTcGF3bmVkKGV2ZW50OiBGaWd1cmVzU3Bhd25lZEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzID0gdGhpcy5mYWxsaW5nRmlndXJlUGxhY2luZ1Jlc29sdmVyLnJlc29sdmVUYXJnZXRQb3NpdGlvbihldmVudC5nYW1lRGF0YSk7XG4gICAgICAgIHRoaXMuZmFsbGluZ0ZpZ3VyZXNQbGFjZXIucGxhY2UoZXZlbnQuZ2FtZURhdGEsIHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBUZXRyaXNGYWNhZGUgfSBmcm9tICcuL1RldHJpcy9UZXRyaXNGYWNhZGUnXG5pbXBvcnQge0V2ZW50QnVzfSBmcm9tIFwiLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1c30gZnJvbSBcIi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtUZXRyaXNTb2x2ZXJ9IGZyb20gXCIuL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXJcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICBjb25zdCBldmVudEJ1cyA9IG5ldyBFdmVudEJ1cygpO1xuICAgIGNvbnN0IGNvbW1hbmRCdXMgPSBuZXcgQ29tbWFuZEJ1cygpO1xuICAgIGxldCB0ZXRyaXMgPSBuZXcgVGV0cmlzRmFjYWRlKGV2ZW50QnVzLCBjb21tYW5kQnVzKTtcbiAgICBsZXQgc29sdmVyID0gbmV3IFRldHJpc1NvbHZlcihldmVudEJ1cywgY29tbWFuZEJ1cyk7XG5cbiAgICB0ZXRyaXMuc3RhcnQoKTtcbn0pXG4iXSwibmFtZXMiOlsiRXZlbnRUeXBlIiwiQ29tbWFuZFR5cGUiLCJnYW1lRGF0YSIsInRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzIiwic3F1YXNoZWRMaW5lcyIsImRyb3BwZWRMaW5lcyIsImdldEV2ZW50VHlwZSIsIkZhbGxpbmdUaWNrUHJvY2Vzc2VkIiwiR2FtZU92ZXIiLCJGaWd1cmVzTW92ZWQiLCJuZXdGaWd1cmVzIiwiRmlndXJlc1NwYXduZWQiLCJoYW5kbGVycyIsIk1hcCIsIm9uIiwiZXZlbnQiLCJoYW5kbGVyIiwidW5pcXVlIiwidGhpcyIsImdldCIsInNvbWUiLCJib3VuZEhhbmRsZXIiLCJwdXNoIiwic2V0Iiwib2ZmIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmlyZSIsImV2ZW50UGF5bG9hZCIsImZvckVhY2giLCJGaWd1cmVUdXJuU3RhdGUiLCJnZXRDb21tYW5kVHlwZSIsIkluaXRHYW1lIiwiUmVzdW1lR2FtZSIsIlBhdXNlR2FtZSIsIkZpZ3VyZXNGYWxsVGljayIsIlJlbmRlciIsIk1vdmVMZWZ0IiwiTW92ZVJpZ2h0IiwiVHVybkNsb2Nrd2lzZSIsIk1vdmVEb3duIiwiRmlndXJlc0ZhbGxEb3duIiwiYWRkSGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJydW4iLCJwYXlsb2FkIiwiZ2V0Tm9ybWFsaXplZEZpZ3VyZSIsImZpZ3VyZSIsImdldEZpZ3VyZSIsInRoZUxvbmdlc3RSb3dTaXplIiwicmVkdWNlIiwicHJldmlvdXMiLCJjdXJyZW50IiwiTWF0aCIsIm1heCIsImxlbmd0aCIsIm1hcCIsInJvdyIsIm9yaWdpbmFsTGVuZ3RoIiwiZmlsbCIsImdldEZpcnN0VHVybiIsImdldFNlY29uZFR1cm4iLCJvcmlnaW5hbEZpZ3VyZSIsInR1cm5lZEZpZ3VyZSIsIm9yaWdpbmFsRmlndXJlSGVpZ2h0Iiwib3JpZ2luYWxGaWd1cmVXaWR0aCIsIngiLCJBcnJheSIsInkiLCJnZXRUaGlyZFR1cm4iLCJyZXZlcnNlIiwiZ2V0Rm9ydGhUdXJuIiwiZ2V0VHVybiIsImZpZ3VyZVR1cm5TdGF0ZSIsIk9uZSIsIlR3byIsIlRocmVlIiwiRm91ciIsInNwbGl0IiwiaXRlbSIsIlNpbXBseVJvdGF0YWJsZUZpZ3VyZSIsInBvc2l0aW9uIiwidHVyblN0YXRlIiwiY29sb3IiLCJmaWVsZFdpZHRoIiwiZmllbGRIZWlnaHQiLCJmaWd1cmVzIiwiaXNJbml0aWFsaXplZCIsImlzR2FtZU92ZXIiLCJmYWxsaW5nRmlndXJlcyIsIm1hdHJpeCIsIm5leHRUaWNrVGltZW91dElkIiwic2V0dGluZ3MiLCJsZXZlbCIsInNjb3JlIiwiY29tYm8iLCJzZXRUaW1lb3V0IiwibWFrZVNpbXBsZSIsIndpZHRoIiwiaGVpZ2h0IiwiR2FtZURhdGEiLCJfIiwiR2FtZVNldHRpbmdzIiwiVEZpZ3VyZSIsIlJpZ2h0TEZpZ3VyZSIsIkxlZnRMRmlndXJlIiwiU3F1YXJlRmlndXJlIiwiU3RpY2tGaWd1cmUiLCJMWkZpZ3VyZSIsIlJaRmlndXJlIiwidGltaW5nc0hhbmRsZXIiLCJldmVudEJ1cyIsImNvbW1hbmRCdXMiLCJpbml0R2FtZUhhbmRsZXIiLCJiaW5kIiwicmVzdW1lR2FtZUhhbmRsZXIiLCJwYXVzZUdhbWVIYW5kbGVyIiwiZ2FtZU92ZXJIYW5kbGVyIiwiY29tbWFuZCIsIm9uRmFsbFRpY2tQcm9jZXNzZWQiLCJJbml0R2FtZUNvbW1hbmQiLCJmYWxsVGljayIsImNsZWFyVGltZW91dCIsIlJlbmRlckNvbW1hbmQiLCJHYW1lT3ZlckV2ZW50IiwiRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCIsImdldERlbGF5Rm9yTmV4dFRpY2tNcyIsImNhbkZpZ3VyZUJlUGxhY2VkIiwidGFyZ2V0RmlndXJlTWF0cml4IiwidGFyZ2V0UG9zaXRpb24iLCJldmVyeSIsInZhbHVlIiwicmVhbFkiLCJyZWFsWCIsImZpbGxlZCIsImZpbGxlZEdhbWVPdmVyIiwiZW1wdHkiLCJjb250YWluZXJFbGVtZW50IiwicmVuZGVyUHJvamVjdGlvbkZpZ3VyZXMiLCJtYXRyaXhDZWxsQ29sb3JzIiwiZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnMiLCJwcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycyIsIlRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyIsInJlbmRlclNldHRpbmdzIiwiY2VsbHNIdG1sRWxlbWVudHNNYXAiLCJpbml0SGFuZGxlciIsInJlbmRlckNvbW1hbmRIYW5kbGVyIiwidGFibGUiLCJUYWJsZVJlbmRlcmVyIiwiY3JlYXRlSHRtbEVsZW1lbnQiLCJjZWxsIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJzY29yZURpc3BsYXkiLCJvbkdhbWVPdmVyIiwib25GaWd1cmVzTW92ZWQiLCJyZW5kZXJTdGF0ZSIsInJlcGFpbnRNYXRyaXhDZWxscyIsIkNvb3JkaW5hdGUiLCJyZW5kZXJGYWxsaW5nRmlndXJlc1Byb2plY3Rpb24iLCJyZW5kZXJGYWxsaW5nRmlndXJlcyIsInJlbmRlclN0YXRzIiwiZmFsbGluZ0ZpZ3VyZSIsInJlcGFpbnRGYWxsaW5nRmlndXJlc0NlbGxzIiwiZmlndXJlTWF0cml4IiwicHJvamVjdGlvbkZpZ3VyZVgiLCJwcm9qZWN0aW9uRmlndXJlWSIsIkZpZ3VyZVBsYWNpbmdDaGVja2VyIiwicmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMiLCJpbmRlbnQiLCJjb2xvcnMiLCJDZWxsQ29sb3JzIiwicmVwYWludENlbGxzIiwiY2VsbENvbG9ycyIsInN0eWxlIiwiYmFja2dyb3VuZCIsImxldmVsU3BhbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzY29yZVNwYW4iLCJjb21ib1NwYW4iLCJ0b1N0cmluZyIsImh0bWwiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2hpbGRyZW4iLCJmaXJzdEVsZW1lbnRDaGlsZCIsIkhUTUxFbGVtZW50IiwidHJhbnNmZXJyZWRGaWd1cmVzIiwicHJvY2Vzc0ZpZ3VyZXNGYWxsVGlja0NvbW1hbmQiLCJwcm9jZXNzRHJvcEZpZ3VyZXNDb21tYW5kIiwiZmFsbGluZ1Jlc3VsdCIsImZhbGxGaWd1cmVzRm9yT25lQ2VsbCIsInNxdWFzaExpbmVzIiwiR2FtZU92ZXJDb21tYW5kIiwiRmFsbFRpY2tQcm9jZXNzZWRFdmVudCIsIkZhbGxpbmdSZXN1bHQiLCJvbmVDZWxsRmFsbGluZ1Jlc3VsdCIsImZpZ3VyZUNhbkZhbGwiLCJmaWd1cmVHYW1lT3ZlclJlc3VsdCIsInRyYW5zZmVyRmlndXJlVG9NYXRyaXgiLCJmaWd1cmVDZWxsWSIsImNlbGxWYWx1ZSIsImZpZ3VyZUNlbGxYIiwibWF0cml4WCIsIm1hdHJpeFkiLCJsaW5lc1RvU3F1YXNoIiwidW5zaGlmdCIsIlRvQXJyYXkiLCJ2YWwiLCJPYmplY3QiLCJrZXlzIiwibiIsIk51bWJlciIsInBhcnNlSW50IiwiZmlsdGVyIiwiaXNOYU4iLCJHZXRSYW5kb20iLCJ2YWx1ZXMiLCJFbnVtSGVscGVyIiwiZmxvb3IiLCJyYW5kb20iLCJwcm9jZXNzT25GYWxsVGljayIsImFkZEZpZ3VyZSIsImZpZ3VyZUluZGV4IiwiZmlndXJlV2lkdGgiLCJjb29yZGluYXRlIiwiY2VpbCIsIkZhbGxpbmdGaWd1cmUiLCJGaWd1cmVzU3Bhd25lZEV2ZW50IiwicHJvY2Vzc01vdmVMZWZ0Q29tbWFuZCIsInByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kIiwicHJvY2Vzc01vdmVEb3duQ29tbWFuZCIsInByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZCIsIkZpZ3VyZXNNb3ZlZEV2ZW50IiwiYWxsVHVyblN0YXRlcyIsIm5leHRUdXJuU3RhdGUiLCJwcm9jZXNzSW5pdEdhbWVDb21tYW5kIiwid2luZG93Iiwib25rZXlkb3duIiwiY29kZSIsIk1vdmVMZWZ0Q29tbWFuZCIsIk1vdmVSaWdodENvbW1hbmQiLCJUdXJuQ2xvY2t3aXNlQ29tbWFuZCIsIk1vdmVEb3duQ29tbWFuZCIsIkRyb3BGaWd1cmVzQ29tbWFuZCIsInNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXAiLCJyZXdhcmRPbkNvbWJvIiwib25GYWxsaW5nVGlja1Byb2Nlc3NlZCIsInByZXZpb3VzVGhyZXNob2xkUmV3YXJkIiwicmV3YXJkIiwicm93c1NxdWFzaGVkVGhyZXNob2xkIiwibGV2ZWxJbmNyZWFzZU9uU3F1YXNoZWRSb3dzTnVtYmVyIiwibWF4TGV2ZWxzIiwic3F1YXNoZWRSb3dzQ291bnRlciIsIm1pbiIsImRlbGF5TXMiLCJnYW1lQ29udHJvbGxlciIsIm1vdmluZ0hhbmRsZXIiLCJtb3ZpbmdDb250cm9sbGVyIiwiZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJmaWd1cmVzU3Bhd25lciIsImxldmVsQ291bnRlciIsImNvbWJvQ291bnRlciIsInNjb3JlQ291bnRlciIsInRhYmxlUmVuZGVyZXIiLCJFdmVudEJ1cyIsIkNvbW1hbmRCdXMiLCJHYW1lQ29udHJvbGxlciIsIkNvbnN0VGltaW5nc0hhbmRsZXIiLCJNb3ZpbmdIYW5kbGVyIiwiTW92aW5nQ29udHJvbGxlciIsIlJlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvciIsIkFsd2F5c09uZUZpZ3VyZVNwYXduZXIiLCJTcXVhc2hlZFJvd3NDb3VudGVyQmFzZWRMZXZlbENvdW50ZXIiLCJDb21ib0NvdW50ZXIiLCJGYWxsVGlja1Njb3JlQ291bnRlciIsIlRhYmxlUmVuZGVyZXJTZXR0aW5ncyIsImJvZHkiLCJzdGFydCIsIlJlc3VtZUdhbWVDb21tYW5kIiwicmVzdW1lIiwicGF1c2UiLCJQYXVzZUdhbWVDb21tYW5kIiwiRXJyb3IiLCJyZXNvbHZlVGFyZ2V0UG9zaXRpb24iLCJHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciIsImVudW1zIiwicG9wIiwibWF0cmljZXMiLCJtYXhTY29yZSIsInRoZUJlc3RUYXJnZXRGaWd1cmVTdGF0ZSIsImltYWdpbmVGaWd1cmVEcm9wIiwiaW1hZ2luYWJsZU1hdHJpeCIsImNhbGN1bGF0ZVNjb3JlIiwiZGVidWdNb2RlIiwiZmFrZUdhbWVEYXRhIiwic3RydWN0dXJlZENsb25lIiwiZmFrZUZpZ3VyZSIsImhvbGVzU2NvcmUiLCJzcXVhc2hlZExpbmVzU2NvcmUiLCJvcmlnaW5hbEhvbGVzQ291bnQiLCJjYWxjdWxhdGVIb2xlcyIsImNhbGN1bGF0ZUhvbGVzQW5kQ292ZXJlZEhlaWdodCIsImhvbGVzQ291bnQiLCJob2xlc0NvdmVyZWRIZWlnaHQiLCJob2xlc0NvdW50RGVjcmVhc2UiLCJwb3ciLCJjYWxjdWxhdGVIZWlnaHQiLCJoZWlnaHRTY29yZSIsImNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UiLCJmaWxsYWJsZUNlbGxzQ291bnQiLCJmaWxsYWJsZUNlbGxzU2NvcmUiLCJ0dW5uZWxzU2NvcmUiLCJjYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkIiwidHVubmVsc1N1bUhlaWdodCIsInR1bm5lbHNDb3VudCIsImNvbnNvbGUiLCJsb2ciLCJnYW1lTWF0cml4IiwidGFyZ2V0WCIsInNsaWNlIiwidGFyZ2V0WSIsImZpZ3VyZVkiLCJmaWd1cmVYIiwiY292ZXJlZENvbHVtbnMiLCJTZXQiLCJhZGQiLCJoYXMiLCJyZWFsTWF0cml4IiwiY2FsY3VsYXRlVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSIsIm9yaWdpbmFsVGhlSGlnaGVzdEhvbGVZIiwib3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwiY292ZXJlZENvbHVtbnNZcyIsImhvbGVzQ292ZXJlZEhlaWdodHNTdW0iLCJjb3ZlcmVkWSIsInVuZGVmaW5lZCIsInRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkiLCJ0aGVIaWdoZXN0SG9sZVkiLCJsb3dlc3RFbXB0eVkiLCJyZWFsQ292ZXJlZENvbHVtbnMiLCJpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMiLCJ0dW5uZWxzIiwic2l6ZSIsImZpbGxhYmxlSGVpZ2h0IiwiaW5pdGlhbERlbGF5TXMiLCJiYXNlIiwiUGxhY2luZ0Vycm9yIiwiTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyIiwibmV4dE1vdmVUaW1lb3V0SWQiLCJ0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyIsInBsYWNlIiwicHJvY2Vzc1RpY2siLCJ0YXJnZXRGaWd1cmUiLCJJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yIiwiZmFsbGluZ0ZpZ3VyZVBsYWNpbmdSZXNvbHZlciIsImZhbGxpbmdGaWd1cmVzUGxhY2VyIiwiRmlndXJlUGxhY2luZ1Jlc29sdmVyIiwiRmlndXJlUGxhY2luZ1BlcmZvcm1lciIsIm9uRmlndXJlc1NwYXduZWQiLCJhZGRFdmVudExpc3RlbmVyIiwidGV0cmlzIiwiVGV0cmlzRmFjYWRlIiwiVGV0cmlzU29sdmVyIl0sInNvdXJjZVJvb3QiOiIifQ==