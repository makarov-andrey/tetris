(()=>{"use strict";var e,t,s;!function(e){e[e.FallingTickProcessed=0]="FallingTickProcessed",e[e.GameOver=1]="GameOver",e[e.FiguresMoved=2]="FiguresMoved",e[e.LevelUp=3]="LevelUp",e[e.FiguresSpawned=4]="FiguresSpawned"}(e||(e={}));class i{constructor(e,t,s,i){this.gameData=e,this.transferredToMatrixFigures=t,this.squashedLines=s,this.droppedLines=i}getEventType(){return e.FallingTickProcessed}}class n{constructor(e){this.gameData=e}getEventType(){return e.GameOver}}class a{constructor(e){this.gameData=e}getEventType(){return e.FiguresMoved}}class r{constructor(e,t){this.gameData=e,this.newFigures=t}getEventType(){return e.FiguresSpawned}}class l{constructor(){this.handlers=new Map}on(e,t,s=!0){let i=this.handlers.get(e)||[];s&&i.some((e=>e===t))||(i.push(t),this.handlers.set(e,i))}off(e,t){let s=this.handlers.get(e)||[],i=s.indexOf(t);i>0&&s.splice(i,1),this.handlers.set(e,s)}fire(e){(this.handlers.get(e.getEventType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.InitGame=0]="InitGame",e[e.ResumeGame=1]="ResumeGame",e[e.PauseGame=2]="PauseGame",e[e.FiguresFallTick=3]="FiguresFallTick",e[e.GameOver=4]="GameOver",e[e.Render=5]="Render",e[e.MoveLeft=6]="MoveLeft",e[e.MoveRight=7]="MoveRight",e[e.TurnClockwise=8]="TurnClockwise",e[e.MoveDown=9]="MoveDown",e[e.FiguresFallDown=10]="FiguresFallDown",e[e.MoveToX=11]="MoveToX",e[e.MoveToY=12]="MoveToY",e[e.TurnToState=13]="TurnToState"}(t||(t={}));class o{constructor(e){this.gameData=e}getCommandType(){return t.InitGame}}class c{constructor(e){this.gameData=e}getCommandType(){return t.ResumeGame}}class u{constructor(e){this.gameData=e}getCommandType(){return t.PauseGame}}class h{constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallTick}}class m{constructor(e){this.gameData=e}getCommandType(){return t.GameOver}}class d{constructor(e){this.gameData=e}getCommandType(){return t.Render}}class g{constructor(e){this.gameData=e}getCommandType(){return t.MoveLeft}}class p{constructor(e){this.gameData=e}getCommandType(){return t.MoveRight}}class f{constructor(e){this.gameData=e}getCommandType(){return t.TurnClockwise}}class w{constructor(e){this.gameData=e}getCommandType(){return t.MoveDown}}class v{constructor(e,t){this.gameData=e,this.x=t}getCommandType(){return t.MoveToX}}class F{constructor(e,t){this.gameData=e,this.y=t}getCommandType(){return t.MoveToY}}class T{constructor(e,t){this.gameData=e,this.turnState=t}getCommandType(){return t.TurnToState}}class C{constructor(e){this.gameData=e}getCommandType(){return t.FiguresFallDown}}class D{constructor(){this.handlers=new Map}addHandler(e,t,s=!0){let i=this.handlers.get(e)||[];s&&i.some((e=>e===t))||(i.push(t),this.handlers.set(e,i))}removeHandler(e,t){let s=this.handlers.get(e)||[],i=s.indexOf(t);i>0&&s.splice(i,1),this.handlers.set(e,s)}run(e){(this.handlers.get(e.getCommandType())||[]).forEach((t=>{t(e)}))}}!function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(s||(s={}));class S{getTurn(e){switch(e){case s.One:return this.getFirstTurn();case s.Two:return this.getSecondTurn();case s.Three:return this.getThirdTurn();case s.Four:return this.getForthTurn()}}}class x extends S{getNormalizedFigure(){let e=this.getFigure(),t=e.reduce(((e,t)=>Math.max(e,t.length)),0);return e.map((e=>{let s=e.length;return e.length=t,e.fill(!1,s-1,t-1)}))}getFirstTurn(){return this.getNormalizedFigure()}getSecondTurn(){let e=this.getNormalizedFigure(),t=[],s=e.length,i=e[0].length;for(let n=0;n<i;n++){t[n]=new Array(s).fill(!1);for(let i=0;i<s;i++)t[n][s-i-1]=e[i][n]}return t}getThirdTurn(){return this.getFirstTurn().reverse().map((e=>e.reverse()))}getForthTurn(){return this.getSecondTurn().reverse().map((e=>e.reverse()))}}class M extends x{getFigure(){return["###".split("").map((e=>"#"===e)),"-#-".split("").map((e=>"#"===e))]}}class y extends x{getFigure(){return["###".split("").map((e=>"#"===e)),"--#".split("").map((e=>"#"===e))]}}class B extends x{getFigure(){return["###".split("").map((e=>"#"===e)),"#--".split("").map((e=>"#"===e))]}}class H extends x{getFigure(){return["##".split("").map((e=>"#"===e)),"##".split("").map((e=>"#"===e))]}}class E extends x{getFigure(){return["####".split("").map((e=>"#"===e))]}}class b extends x{getFigure(){return["##-".split("").map((e=>"#"===e)),"-##".split("").map((e=>"#"===e))]}}class G extends x{getFigure(){return["-##".split("").map((e=>"#"===e)),"##-".split("").map((e=>"#"===e))]}}class O{constructor(e,t){this.x=e,this.y=t}}class k{constructor(e,t,s,i){this.figure=e,this.position=t,this.turnState=s,this.color=i}}class P{constructor(e,t,s){this.fieldWidth=e,this.fieldHeight=t,this.figures=s}}class L{constructor(){this.figuresFallen=0,this.linesSquashed=0}}class R{constructor(e=!1,t=!1,s=[],i=[],n=setTimeout((()=>{})),a,r=1,l=0,o=0,c=new L){this.isInitialized=e,this.isGameOver=t,this.fallingFigures=s,this.matrix=i,this.nextTickTimeoutId=n,this.settings=a,this.level=r,this.score=l,this.combo=o,this.stats=c}static makeSimple(e=10,t=20){return new R(!1,!1,[],new Array(t).fill([]).map((t=>new Array(e).fill(!1))),setTimeout((()=>{})),new P(e,t,[new M,new y,new B,new H,new E,new b,new G]))}}class I{constructor(e,s,i){this.timingsHandler=e,this.eventBus=s,this.commandBus=i,this.gameData=R.makeSimple(),this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(t.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(t.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(t.GameOver,this.gameOverHandler.bind(this))}initGameHandler(t){this.gameData=t.gameData,this.gameData.isInitialized=!0,this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}resumeGameHandler(e){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new o(e.gameData)),this.fallTick())}pauseGameHandler(e){this.gameData=e.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new d(this.gameData))}gameOverHandler(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new n(this.gameData))}fallTick(){this.commandBus.run(new h(this.gameData))}onFallTickProcessed(e){clearTimeout(this.gameData.nextTickTimeoutId),this.gameData.isGameOver||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))}}class q{static canFigureBePlaced(e,t,s){return e.every(((e,i)=>e.every(((e,n)=>{const a=t.y+i,r=t.x+n;return!e||a<0&&r>=0&&r<=s[0].length-1||a in s&&r in s[a]&&!s[a][r]}))))}}class X{constructor(e,t,s){this.filled=e,this.filledGameOver=t,this.empty=s}}class A{constructor(e,t=!0,s=new X("#007400","#780000","#fff"),i=new X("#007400","#780000",null),n=new X("#b8e5e3",null,null)){this.containerElement=e,this.renderProjectionFigures=t,this.matrixCellColors=s,this.fallingFigureCellColors=i,this.projectionFigureCellColors=n}}class j{constructor(e,t){this.filled=e,this.empty=t}}class z{constructor(e,s,i){this.renderSettings=e,this.commandBus=s,this.eventBus=i,this.cellsHtmlElementsMap=[],s.addHandler(t.InitGame,this.initHandler.bind(this)),s.addHandler(t.Render,this.renderCommandHandler.bind(this))}initHandler(t){this.table=z.createHtmlElement('<div style="float: left; display: table; border-collapse: collapse"></div>'),this.cellsHtmlElementsMap=[];for(let e=0;e<t.gameData.settings.fieldHeight;e++){let s=z.createHtmlElement('<div style="display: table-row"></div>');this.cellsHtmlElementsMap[e]=[];for(let i=0;i<t.gameData.settings.fieldWidth;i++){let t=z.createHtmlElement('<div style="display: table-cell; border: 1px solid #ccc; width: 20px; height: 20px"></div>');this.cellsHtmlElementsMap[e][i]=t,s.appendChild(t)}this.table.appendChild(s)}this.renderSettings.containerElement.innerHTML="",this.renderSettings.containerElement.appendChild(this.table),this.scoreDisplay=z.createHtmlElement('<div style="float: left; font-family: \'Helvetica Neue\', sans-serif; font-size: 20px; margin-left: 15px;">\n                Level: <span id="level"></span><br>\n                Score: <span id="score"></span><br>\n                Combo: <span id="combo"></span><br>\n                Figures fallen: <span id="figures_fallen"></span><br>\n                Lines squashed: <span id="lines_squashed"></span><br>\n            </div>'),this.renderSettings.containerElement.appendChild(this.scoreDisplay),this.renderSettings.containerElement.appendChild(z.createHtmlElement('<div style="clear: both"></div>')),this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this)),this.eventBus.on(e.GameOver,this.onGameOver.bind(this)),this.eventBus.on(e.FiguresMoved,this.onFiguresMoved.bind(this))}onFiguresMoved(e){this.renderState(e.gameData)}onFallTickProcessed(e){this.renderState(e.gameData)}onGameOver(e){this.renderState(e.gameData)}renderCommandHandler(e){this.renderState(e.gameData)}renderState(e){this.repaintMatrixCells(e.matrix,new O(0,0),e),this.renderSettings.renderProjectionFigures&&this.renderFallingFiguresProjection(e),this.renderFallingFigures(e),this.renderStats(e)}renderFallingFigures(e){e.fallingFigures.forEach((t=>{this.repaintFallingFiguresCells(t,e)}))}renderFallingFiguresProjection(e){e.fallingFigures.forEach((t=>{const s=t.figure.getTurn(t.turnState),i=t.position.x;let n=t.position.y;for(;q.canFigureBePlaced(s,new O(i,n+1),e.matrix);)n++;this.repaintProjectionFiguresCells(s,new O(i,n),e)}))}repaintMatrixCells(e,t,s){let i;i=s.isGameOver?new j(this.renderSettings.matrixCellColors.filledGameOver,this.renderSettings.matrixCellColors.empty):new j(this.renderSettings.matrixCellColors.filled,this.renderSettings.matrixCellColors.empty),this.repaintCells(e,t,i)}repaintFallingFiguresCells(e,t){let s;s=t.isGameOver?new j(this.renderSettings.fallingFigureCellColors.filledGameOver,this.renderSettings.fallingFigureCellColors.empty):new j(e.color||this.renderSettings.fallingFigureCellColors.filled,this.renderSettings.fallingFigureCellColors.empty),this.repaintCells(e.figure.getTurn(e.turnState),e.position,s)}repaintProjectionFiguresCells(e,t,s){let i;i=s.isGameOver?new j(this.renderSettings.projectionFigureCellColors.filledGameOver,this.renderSettings.projectionFigureCellColors.empty):new j(this.renderSettings.projectionFigureCellColors.filled,this.renderSettings.projectionFigureCellColors.empty),this.repaintCells(e,t,i)}repaintCells(e,t,s){e.forEach(((e,i)=>{e.forEach(((e,n)=>{const a=i+t.y,r=n+t.x;if(a in this.cellsHtmlElementsMap&&r in this.cellsHtmlElementsMap[a]){const t=e?s.filled:s.empty;null!==t&&(this.cellsHtmlElementsMap[a][r].style.background=t)}}))}))}renderStats(e){const t=document.getElementById("level"),s=document.getElementById("score"),i=document.getElementById("combo"),n=document.getElementById("figures_fallen"),a=document.getElementById("lines_squashed");null!==t&&(t.innerHTML=e.level.toString()),null!==s&&(s.innerHTML=e.score.toString()),null!==i&&(i.innerHTML=e.combo.toString()),null!==n&&(n.innerHTML=e.stats.figuresFallen.toString()),null!==a&&(a.innerHTML=e.stats.linesSquashed.toString())}static createHtmlElement(e){let t=document.createElement("div");if(t.innerHTML=e,t.children.length>1||null===t.firstElementChild)throw"The HTML must contain only one child";if(!(t.firstElementChild instanceof HTMLElement))throw"Something went wrong while trying to get HTMLElement child from div";return t.firstElementChild}}class N{constructor(){this.transferredFigures=[],this.isGameOver=!1}}class W{constructor(e,s){this.commandBus=e,this.eventBus=s,this.commandBus.addHandler(t.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(t.FiguresFallDown,this.processDropFiguresCommand.bind(this))}processFiguresFallTickCommand(e){const t=this.fallFiguresForOneCell(e.gameData);let s=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new m(e.gameData)),this.eventBus.fire(new i(e.gameData,t.transferredFigures,s,0))}processDropFiguresCommand(e){let t=new N,s=0;for(;e.gameData.fallingFigures.length>0;){const i=this.fallFiguresForOneCell(e.gameData);t.transferredFigures.push(...i.transferredFigures),t.isGameOver=t.isGameOver||i.isGameOver,s++}let n=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new m(e.gameData)),this.eventBus.fire(new i(e.gameData,t.transferredFigures,n,s-1))}fallFiguresForOneCell(e){let t=new N;return e.fallingFigures.forEach(((s,i)=>{if(this.figureCanFall(e.matrix,s))s.position.y++;else{let n=this.transferFigureToMatrix(e.matrix,s);t.transferredFigures.push(...e.fallingFigures.splice(i,1)),t.isGameOver=t.isGameOver||n}})),t}figureCanFall(e,t){return q.canFigureBePlaced(t.figure.getTurn(t.turnState),new O(t.position.x,t.position.y+1),e)}transferFigureToMatrix(e,t){let s=!1;return t.figure.getTurn(t.turnState).forEach(((i,n)=>{i.forEach(((i,a)=>{if(!i)return;let r=t.position.x+a,l=t.position.y+n;l in e&&r in e[l]&&!e[l][r]?e[l][r]=!0:s=!0}))})),s}squashLines(e){let t=[];return e.forEach(((e,s)=>{e.every((e=>e))&&t.push(s)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t}}class Y{static ToArray(e){return Object.keys(e).map((e=>Number.parseInt(e))).filter((e=>!Number.isNaN(e)))}static GetRandom(e){const t=Y.ToArray(e);return t[Math.floor(Math.random()*t.length)]}}class _{constructor(e,s){this.eventBus=e,this.commandBus=s,this.commandBus.addHandler(t.InitGame,this.initHandler.bind(this))}initHandler(t){this.eventBus.on(e.FallingTickProcessed,this.processOnFallTick.bind(this))}processOnFallTick(e){this.addFigure(e.gameData)}addFigure(e){if(e.fallingFigures.length>0||e.isGameOver)return;const t=Math.floor(Math.random()*e.settings.figures.length),i=e.settings.figures[t],n=Y.GetRandom(s),a=i.getTurn(n),l=Math.max(...a.map((e=>e.length))),o=new O(Math.ceil(e.settings.fieldWidth/2-l/2)-1,-a.length),c=new k(i,o,n);e.fallingFigures.push(c),this.eventBus.fire(new r(e,[c]))}}class U{constructor(e,s){this.commandBus=e,this.eventBus=s,this.commandBus.addHandler(t.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(t.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(t.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(t.TurnClockwise,this.processTurnClockwiseCommand.bind(this)),this.commandBus.addHandler(t.MoveToX,this.processMoveToXCommand.bind(this)),this.commandBus.addHandler(t.MoveToY,this.processMoveToYCommand.bind(this)),this.commandBus.addHandler(t.TurnToState,this.processTurnToStateCommand.bind(this))}processMoveLeftCommand(e){e.gameData.fallingFigures.forEach((t=>{q.canFigureBePlaced(t.figure.getTurn(t.turnState),new O(t.position.x-1,t.position.y),e.gameData.matrix)&&t.position.x--})),this.eventBus.fire(new a(e.gameData))}processMoveRightCommand(e){e.gameData.fallingFigures.forEach((t=>{q.canFigureBePlaced(t.figure.getTurn(t.turnState),new O(t.position.x+1,t.position.y),e.gameData.matrix)&&t.position.x++})),this.eventBus.fire(new a(e.gameData))}processTurnClockwiseCommand(e){const t=Y.ToArray(s);e.gameData.fallingFigures.forEach((s=>{let i=s.turnState+1;i in t||(i=t[0]),q.canFigureBePlaced(s.figure.getTurn(i),s.position,e.gameData.matrix)&&(s.turnState=i)})),this.eventBus.fire(new a(e.gameData))}processMoveDownCommand(e){this.commandBus.run(new h(e.gameData))}processMoveToXCommand(e){e.x<0||e.x>e.gameData.settings.fieldWidth-1||(e.gameData.fallingFigures.forEach((t=>{const s=e.x>t.position.x?1:-1;for(;t.position.x!==e.x&&q.canFigureBePlaced(t.figure.getTurn(t.turnState),new O(t.position.x+s,t.position.y),e.gameData.matrix);)t.position.x+=s})),this.eventBus.fire(new a(e.gameData)))}processMoveToYCommand(e){e.y<0||(e.gameData.fallingFigures.forEach((t=>{for(;t.position.y<e.y&&q.canFigureBePlaced(t.figure.getTurn(t.turnState),new O(t.position.x,t.position.y+1),e.gameData.matrix);)t.position.y++})),this.eventBus.fire(new a(e.gameData)))}processTurnToStateCommand(e){e.gameData.fallingFigures.forEach((t=>{q.canFigureBePlaced(t.figure.getTurn(e.turnState),t.position,e.gameData.matrix)&&(t.turnState=e.turnState)})),this.eventBus.fire(new a(e.gameData))}}class J{constructor(e,s,i=new Map([[1,100],[2,300],[3,500],[4,800]]),n=50){this.commandBus=e,this.eventBus=s,this.squashedRowsRewardThresholdsMap=i,this.rewardOnCombo=n,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){if(e.squashedLines.length<0)return;let t=0;this.squashedRowsRewardThresholdsMap.forEach(((s,i)=>{i>e.squashedLines.length||(t=s)})),e.gameData.score+=t*e.gameData.level+this.rewardOnCombo*Math.max(0,e.gameData.combo-1)*e.gameData.level+2*e.droppedLines*e.gameData.level}}class K{constructor(e,s,i,n){this.eventBus=e,this.commandBus=s,this.levelIncreaseOnSquashedRowsNumber=i,this.maxLevels=n,this.squashedRowsCounter=0,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){0!==e.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,e.gameData.level=Math.min(this.maxLevels,e.gameData.level+1)))}}class Q{constructor(e,s){this.commandBus=e,this.eventBus=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))}onFallTickProcessed(e){e.transferredToMatrixFigures.length<=0||(e.squashedLines.length>0?e.gameData.combo+=1:e.gameData.combo=0)}}class V{constructor(e){this.delayMs=e}getDelayForNextTickMs(e){return this.delayMs}}class Z{constructor(e,s){this.commandBus=e,this.eventBus=s,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))}onFallingTickProcessed(e){e.gameData.stats.figuresFallen+=e.transferredToMatrixFigures.length,e.gameData.stats.linesSquashed+=e.squashedLines.length}}class ${constructor(e){this.commandBus=e,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}processInitGameCommand(e){window.onkeydown=t=>{"ArrowLeft"===t.code?this.commandBus.run(new g(e.gameData)):"ArrowRight"===t.code?this.commandBus.run(new p(e.gameData)):"ArrowUp"===t.code?this.commandBus.run(new f(e.gameData)):"ArrowDown"===t.code||"ArrowDown"===t.code?this.commandBus.run(new w(e.gameData)):"Space"===t.code&&this.commandBus.run(new C(e.gameData))}}}class ee{constructor(e=new l,t=new D,s=new I(new V(2e3),e,t),i=new U(t,e),n=new $(t),a=new W(t,e),r=new _(e,t),o=new K(e,t,8,15),c=new Q(t,e),u=new J(t,e),h=new Z(t,e),m=new z(new A(document.body),t,e),d=R.makeSimple()){this.eventBus=e,this.commandBus=t,this.gameController=s,this.movingHandler=i,this.keyboardController=n,this.fallingFiguresProcessor=a,this.figuresSpawner=r,this.levelCounter=o,this.comboCounter=c,this.scoreCounter=u,this.statsCounter=h,this.tableRenderer=m,this.gameData=d}start(e){e=e||R.makeSimple(),this.commandBus.run(new o(e)),this.commandBus.run(new c(e))}resume(){this.commandBus.run(new c(this.gameData))}pause(){this.commandBus.run(new u(this.gameData))}}class te{constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class se{constructor(e,t){this.target=e,this._persisted=t}get persisted(){return this._persisted}}class ie{constructor(e){this.target=e}get persisted(){return!1}}class ne{get persisted(){return!1}}class ae{constructor(e,t){this.figuresTargetStates=e,this.placingSteps=t}}class re{constructor(e,t){this.isOpened=e,this.cells=t}}class le{static collectHoles(e){let t=[];class s{constructor(e=[],t=[],s=[],i=!1,n=!1){this.cells=e,this.previousRowOpenXs=t,this.currentRowOpenXs=s,this.isOpened=i,this.continues=n}}let i=[],n=new Set;return e.forEach(((a,r)=>{i.forEach((e=>e.continues=!1)),a.forEach(((t,a)=>{if(t)n.add(a);else if(n.has(a)){let t=i.find((e=>e.previousRowOpenXs.some((e=>e===a))||e.currentRowOpenXs.length>0&&e.currentRowOpenXs[e.currentRowOpenXs.length-1]===a));void 0===t&&(t=new s,i.push(t)),t.currentRowOpenXs.push(a),t.cells.push(new O(a,r)),t.continues=!0,t.isOpened=t.isOpened||this.doesTheWayOutFromHoleExists(e,new O(a,r),n,[[!0,!0]])}}));let l=[];i.forEach(((s,i)=>{s.continues&&(s.previousRowOpenXs=s.currentRowOpenXs,s.currentRowOpenXs=[]),s.continues&&r!=e.length-1||(t.push(new re(s.isOpened,s.cells)),l.push(i))})),l.reverse().forEach((e=>i.splice(e,1)))})),t}static doesTheWayOutFromHoleExists(e,t,s,i){return void 0!==this.findTheWayOutFromHole(e,t,s,i)}static findTheWayOutFromHole(e,t,s,i){s instanceof Map&&(s=le.convertCoveredColumnsToXs(s));for(let n=t.x-1;n>=0&&q.canFigureBePlaced(i,new O(n,t.y),e);n--){let e=!0;for(let t=n+i[0].length-1;t>=n;t--)if(s.has(t)){e=!1;break}if(e)return n}for(let n=t.x+1;n<e[0].length&&q.canFigureBePlaced(i,new O(n,t.y),e);n++){let e=!0;for(let t=n;t<n+i[0].length;t++)if(s.has(t)){e=!1;break}if(e)return n}}static collectCoveredColumnsXs(e,t){return le.convertCoveredColumnsToXs(le.collectCoveredColumns(e,t))}static convertCoveredColumnsToXs(e){return new Set([...e.keys()])}static collectCoveredColumns(e,t){let s=new Map;return e.some(((i,n)=>(i.forEach(((e,t)=>{e&&s.set(t,n)})),void 0!==t&&n>=t||s.size==e[0].length))),s}}class oe{constructor(e,t,s,i,n,a){this.gameData=e,this.originalHoles=t,this.originalCoveredColumns=s,this.imaginableMatrix=i,this.imaginableCoveredColumns=n,this.squashedLinesCount=a}}class ce extends Error{}class ue extends ce{}class he{constructor(e,t){this.commandBus=e,this.scoreCalculator=t}resolve(e){if(0===e.fallingFigures.length)return;if(1!==e.fallingFigures.length)throw new ue;const t=e.fallingFigures[0];let s=-1/0,i=new ae(new Map,[]);this.processStates(e,((e,n,a)=>{n>s&&(s=n,i=new ae(new Map([[t,e]]),a))}));let n="debugMode"in window&&window.debugMode,a=i.figuresTargetStates.get(t);if(n&&void 0!==a){let t=structuredClone(e);a.color="#f00",t.fallingFigures=[a],this.commandBus.run(new d(t)),this.processStates(e,void 0,(e=>{e.color="#00f",t.fallingFigures=[e],this.commandBus.run(new d(t))}))}return i}processStates(e,t,i){const n=e.fallingFigures[0];let a=Y.ToArray(s);for(;a[0]!==n.turnState;)a.unshift(a.pop());let r=new Map,l=new Set;a.forEach((e=>{let t=n.figure.getTurn(e),s=t.map((e=>e.map((e=>e?"1":"0")).join())).join("\n");l.has(s)||(l.add(s),r.set(e,t))}));const o=le.collectHoles(e.matrix),c=le.collectCoveredColumns(e.matrix);r.forEach(((s,a)=>{for(let r=0;r<e.settings.fieldWidth-s[0].length+1;r++){let[l,u]=this.imagineFigureDrop(e.matrix,s,r),h=new O(r,l),m=this.squashLines(u),d=new k(n.figure,h,a);i&&i(d);let g=le.collectCoveredColumns(u),p=new oe(e,o,c,u,g,m),f=this.scoreCalculator.calculateScore(p),w=this.makeSimplePlacingSteps(d);t&&t(d,f,w)}})),o.filter((e=>e.isOpened&&e.cells.length>0)).forEach((s=>{let a=e.settings.fieldHeight,l=e.settings.fieldWidth,u=-1,h=-1;s.cells.forEach((e=>{a=Math.min(a,e.y),l=Math.min(l,e.x),u=Math.max(u,e.y),h=Math.max(h,e.x)})),r.forEach(((s,r)=>{for(let m=Math.max(a-s.length+1,0);m<=u;m++)for(let a=Math.max(l-s[0].length+1,0);a<=h;a++){let l=new O(a,m),u=new k(n.figure,l,r);if(i&&i(u),q.canFigureBePlaced(s,l,e.matrix)){let i=this.makePushInPlacingSteps(e,u,c);if(void 0!==i){let n=this.imagineFigurePlacing(e.matrix,s,l),a=this.squashLines(n),r=le.collectCoveredColumns(n),h=new oe(e,o,c,n,r,a),m=this.scoreCalculator.calculateScore(h);t&&t(u,m,i)}}}}))}))}squashLines(e){let t=[];return e.forEach(((e,s)=>{e.every((e=>e))&&t.push(s)}),0),t.forEach((t=>{e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t.length}imagineFigureDrop(e,t,s){let i=-t.length;for(;q.canFigureBePlaced(t,new O(s,i+1),e);)i++;return[i,this.imagineFigurePlacing(e,t,new O(s,i))]}imagineFigurePlacing(e,t,s){let i=structuredClone(e);return t.forEach(((e,t)=>{e.forEach(((e,n)=>{const a=s.y+t,r=s.x+n;a in i&&r in i[a]&&e&&(i[a][r]=!0)}))})),i}makePushInPlacingSteps(e,t,s){let i=t.figure.getTurn(t.turnState),n=le.findTheWayOutFromHole(e.matrix,t.position,s,i);if(void 0!==n)return[new te(t.turnState,!0),new se(n,!1),new ie(t.position.y),new se(t.position.x,!0),new ne]}makeSimplePlacingSteps(e){return[new te(e.turnState,!0),new se(e.position.x,!0),new ne]}}class me{constructor(e){this.calculators=e}calculateScore(e){return this.calculators.reduce(((t,s)=>t+s.calculateScore(e)),0)}}class de{calculateScore(e){return 5*e.squashedLinesCount}}class ge{calculateScore(e){const t=e.gameData.settings.fieldHeight,s=e.gameData.settings.fieldWidth,[i,n]=this.calculateFillableSpace(e.imaginableMatrix,s);let a=0;return n>5&&(a=-i*Math.pow(i,i/(t*s))),a}calculateFillableSpace(e,t){let s=new Set,i=0,n=0;return e.every((e=>(e.forEach(((e,t)=>{e&&s.add(t)})),e.forEach(((e,t)=>{!e&&s.size>0&&!s.has(t)&&i++})),s.size<t&&(s.size>0&&n++,!0)))),[i,n]}}class pe{calculateScore(e){const[t,s]=this.calculateHolesAndCoveredHeight(e.imaginableMatrix,e.gameData.matrix),i=e.originalHoles.length-t;let n;return n=0===s||0===t?i>0?150*i:70*i:(i>0?150*i:70*i)-s*Math.pow(s,s/(e.gameData.settings.fieldHeight*t))*5,n}calculateHolesAndCoveredHeight(e,t){const[s,i]=this.calculateTheHighestHoleCoveredY(t);let n=new Map,a=0,r=0;return e.forEach(((e,t)=>{e.forEach(((e,l)=>{e&&!n.has(l)&&n.set(l,t);let o=n.get(l);void 0===o||e||(r++,void 0!==s&&void 0!==i&&(t<s?a+=t-o:o<i&&(a+=i-o)))}))})),[r,a]}calculateTheHighestHoleCoveredY(e){let t,s,i=new Map;return e.some(((e,n)=>e.some(((e,a)=>{e&&!i.has(a)&&i.set(a,n);let r=i.get(a);return void 0!==r&&!e&&(s=n,t=r,!0)})))),[s,t]}}class fe{calculateScore(e){const t=this.calculateHeight(e.imaginableMatrix);return-t*Math.pow(t,t/e.gameData.settings.fieldHeight)*3}calculateHeight(e){let t=-1;return e.every(((e,s)=>!!e.every((e=>!e))&&(t=s,!0))),e.length-t-1}}class we{calculateScore(e){const[t,s]=this.calculateTunnelsExceptUncovered(e.imaginableMatrix,e.gameData.matrix);let i;return i=0===s?0:70*-s-t*Math.pow(t,t/(e.gameData.settings.fieldHeight*s))*7,i}calculateTunnelsExceptUncovered(e,t){let s=new Set;t.every((e=>{e.forEach(((e,t)=>{e&&s.add(t)}))}));let i=new Set,n=new Map;const a=e[0].length;e.every(((e,t)=>(e.forEach(((e,t)=>{e&&i.add(t)})),e.forEach(((e,t)=>{e||i.has(t)||s.has(t)||0!==t&&!i.has(t-1)||t!==a-1&&!i.has(t+1)||n.set(t,(n.get(t)||0)+1)})),i.size<a)));let r=0,l=0;return n.forEach((e=>{e>=3&&(r+=e,l++)})),[r,l]}}class ve{constructor(e,s,i,n){this.eventBus=e,this.commandBus=s,this.figurePlacingResolver=i,this.figurePlacingPerformer=n,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this))}initGameHandler(t){this.eventBus.on(e.FiguresSpawned,this.onFiguresSpawned.bind(this))}onFiguresSpawned(e){const t=this.figurePlacingResolver.resolve(e.gameData);this.figurePlacingPerformer.place(e.gameData,t)}}class Fe extends Error{}class Te extends Fe{}class Ce extends Fe{}class De extends Fe{}class Se{constructor(e){this.commandBus=e}place(e,t){setTimeout((()=>this.placeImpl(e,t)),0)}placeImpl(e,t){if(0===e.fallingFigures.length)return;if(1!==e.fallingFigures.length)throw new Te;if(void 0===t)return;const s=e.fallingFigures[0],i=t.figuresTargetStates.get(s);if(i){if(s.figure!==i.figure)throw new Ce("Both of the original and the target falling figures must have the same figure in it.");t.placingSteps.forEach((t=>{if(t instanceof te)this.commandBus.run(new T(e,t.target));else if(t instanceof se)this.commandBus.run(new v(e,t.target));else if(t instanceof ie)this.commandBus.run(new F(e,t.target));else{if(!(t instanceof ne))throw new De("Unknown step "+t.constructor.name);this.commandBus.run(new C(e))}}))}}}class xe{static initSolver(e,t){return new ve(e,t,new he(t,new me([new ge,new fe,new pe,new de,new we])),new Se(t))}}document.addEventListener("DOMContentLoaded",(()=>{const e=new l,t=new D;let s=new ee(e,t);xe.initSolver(e,t),s.start()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBZWIsU0FBV2lXLEVBQWFqVyxPQUN2QyxNQUFNLElBQUk0VixHQUE2Qix3RkFHM0NHLEVBQWM1SCxhQUFhclIsU0FBUW9aLElBQy9CLEdBQUlBLGFBQWdCeEksR0FDaEJ4UixLQUFLd0gsV0FBV3pFLElBQUksSUFBSVIsRUFBbUIzRCxFQUFVb2IsRUFBS3ZJLGNBQ3ZELEdBQUl1SSxhQUFnQnBJLEdBQ3ZCNVIsS0FBS3dILFdBQVd6RSxJQUFJLElBQUlkLEVBQWVyRCxFQUFVb2IsRUFBS3ZJLGNBQ25ELEdBQUl1SSxhQUFnQm5JLEdBQ3ZCN1IsS0FBS3dILFdBQVd6RSxJQUFJLElBQUlYLEVBQWV4RCxFQUFVb2IsRUFBS3ZJLGFBQ25ELE1BQUl1SSxhQUFnQmxJLElBR3ZCLE1BQU0sSUFBSTZILEdBQStCLGdCQUFrQkssRUFBS3JiLFlBQVlzYixNQUY1RWphLEtBQUt3SCxXQUFXekUsSUFBSSxJQUFJTCxFQUFtQjlELEcsS0FLdkQsRUMxQ0csTUFBTXNiLEdBQ1RqVCxrQkFDSU0sRUFDQUMsR0FFQSxPQUFPLElBQUkyUixHQUNQNVIsRUFDQUMsRUFDQSxJQUFJaU4sR0FDQWpOLEVBQ0EsSUFBSXVQLEdBQW9CLENBQ3BCLElBQUlLLEdBQ0osSUFBSXFCLEdBQ0osSUFBSWYsR0FDSixJQUFJUCxHQUNKLElBQUl5QixNQU9aLElBQUlnQixHQUE4QnBTLEdBRTFDLEVDbENKOEQsU0FBUzZPLGlCQUFpQixvQkFBb0IsS0FDMUMsTUFBTTVTLEVBQVcsSUFBSTlILEVBQ2YrSCxFQUFhLElBQUk1RSxFQUN2QixJQUFJd1gsRUFBUyxJQUFJM0osR0FBYWxKLEVBQVVDLEdBQ3hDMFMsR0FBbUJHLFdBQVc5UyxFQUFVQyxHQUV4QzRTLEVBQU8vSSxPQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmlndXJlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0dhbWVDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9SZW5kZXJlci9UYWJsZVJlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IvUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRW51bUhlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZpZ3VyZXNTcGF3bmVyL0Fsd2F5c09uZUZpZ3VyZVNwYXduZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Nb3ZpbmdIYW5kbGVyL01vdmluZ0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tYm9Db3VudGVyL0NvbWJvQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9TdGF0c0NvdW50ZXIvU3RhdHNDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvS2V5Ym9hcmRDb250cm9sbGVyL0tleWJvYXJkQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RldHJpc0ZhY2FkZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1V0aWxzL0hvbGVzSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci9GaWd1cmVQbGFjaW5nUmVzb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9TY29yZUNhbGN1bGF0b3IvQ2FsY3VsYXRvckFnZ3JlZ2F0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9TcXVhc2hlZFJvd3MvU3F1YXNoZWRSb3dzQ2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci9GaWxsYWJsZUNlbGxzL0ZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL0hvbGVzL0hvbGVzVjFDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL0ZpbGxlZEhlaWdodC9GaWxsZWRIZWlnaHRDYWxjdWxhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvU2NvcmVDYWxjdWxhdG9yL1R1bm5lbHMvVHVubmVsc0NhbGN1bGF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9UZXRyaXNTb2x2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpc1NvbHZlci9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyL0luc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvVGV0cmlzU29sdmVyRmFjYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBlbnVtIEV2ZW50VHlwZSB7XG4gICAgRmFsbGluZ1RpY2tQcm9jZXNzZWQsXG4gICAgR2FtZU92ZXIsXG4gICAgRmlndXJlc01vdmVkLFxuICAgIExldmVsVXAsXG4gICAgRmlndXJlc1NwYXduZWQsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcblxuICAgIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGU7XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgdHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXM6IEZhbGxpbmdGaWd1cmVbXSxcbiAgICAgICAgcHVibGljIHNxdWFzaGVkTGluZXM6IG51bWJlcltdLFxuICAgICAgICBwdWJsaWMgZHJvcHBlZExpbmVzOiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVPdmVyRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkdhbWVPdmVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNNb3ZlZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5GaWd1cmVzTW92ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGV2ZWxVcEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5MZXZlbFVwO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNTcGF3bmVkRXZlbnQgaW1wbGVtZW50cyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIHB1YmxpYyBuZXdGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10sXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldEV2ZW50VHlwZSgpOiBFdmVudFR5cGUge1xuICAgICAgICByZXR1cm4gRXZlbnRUeXBlLkZpZ3VyZXNTcGF3bmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV2ZW50QnVzIHtcbiAgICBwcml2YXRlIGhhbmRsZXJzOiBNYXA8RXZlbnRUeXBlLCAoKC4uLl86IGFueSkgPT4gdm9pZClbXT4gPSBuZXcgTWFwKCk7XG5cbiAgICBwdWJsaWMgb24oZXZlbnQ6IEV2ZW50VHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCwgdW5pcXVlOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGlmICh1bmlxdWUgJiYgaGFuZGxlcnMuc29tZShib3VuZEhhbmRsZXIgPT4gYm91bmRIYW5kbGVyID09PSBoYW5kbGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIG9mZihldmVudDogRXZlbnRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgbGV0IGluZGV4ID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHVibGljIGZpcmUoZXZlbnRQYXlsb2FkOiBFdmVudCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudFBheWxvYWQuZ2V0RXZlbnRUeXBlKCkpIHx8IFtdO1xuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge2hhbmRsZXIoZXZlbnRQYXlsb2FkKX0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vRmlndXJlc1wiO1xuXG5leHBvcnQgZW51bSBDb21tYW5kVHlwZSB7XG4gICAgSW5pdEdhbWUsXG4gICAgUmVzdW1lR2FtZSxcbiAgICBQYXVzZUdhbWUsXG4gICAgRmlndXJlc0ZhbGxUaWNrLFxuICAgIEdhbWVPdmVyLFxuICAgIFJlbmRlcixcbiAgICBNb3ZlTGVmdCxcbiAgICBNb3ZlUmlnaHQsXG4gICAgVHVybkNsb2Nrd2lzZSxcbiAgICBNb3ZlRG93bixcbiAgICBGaWd1cmVzRmFsbERvd24sXG4gICAgTW92ZVRvWCxcbiAgICBNb3ZlVG9ZLFxuICAgIFR1cm5Ub1N0YXRlLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmQge1xuICAgIGdhbWVEYXRhOiBHYW1lRGF0YTtcblxuICAgIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgSW5pdEdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkluaXRHYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlc3VtZUdhbWVDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlJlc3VtZUdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUGF1c2VHYW1lQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5QYXVzZUdhbWU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbFRpY2s7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZU92ZXJDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkdhbWVPdmVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlckNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUmVuZGVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVMZWZ0Q29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlTGVmdDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlUmlnaHRDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVSaWdodDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUdXJuQ2xvY2t3aXNlQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVEb3duQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlRG93bjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlVG9YQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgeDogbnVtYmVyXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLk1vdmVUb1g7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVRvWUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZVRvWTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUdXJuVG9TdGF0ZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIHR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlR1cm5Ub1N0YXRlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERyb3BGaWd1cmVzQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29tbWFuZEJ1cyB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPENvbW1hbmRUeXBlLCAoKHBheWxvYWQ6IENvbW1hbmQpID0+IHZvaWQpW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIGFkZEhhbmRsZXIoZXZlbnQ6IENvbW1hbmRUeXBlLCBoYW5kbGVyOiAoLi4uXzogYW55KSA9PiB2b2lkLCB1bmlxdWU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgaWYgKHVuaXF1ZSAmJiBoYW5kbGVycy5zb21lKGJvdW5kSGFuZGxlciA9PiBib3VuZEhhbmRsZXIgPT09IGhhbmRsZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSGFuZGxlcihldmVudDogQ29tbWFuZFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBsZXQgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuKHBheWxvYWQ6IENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQocGF5bG9hZC5nZXRDb21tYW5kVHlwZSgpKSB8fCBbXTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtoYW5kbGVyKHBheWxvYWQpfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gRmlndXJlVHVyblN0YXRlIHtcbiAgICBPbmUsXG4gICAgVHdvLFxuICAgIFRocmVlLFxuICAgIEZvdXIsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlndXJlIHtcbiAgICAvKipcbiAgICAgKiBBbnkgZmlndXJlIG11c3QgYmUgYWJsZSB0byB0dXJuIDQgdGltZXMgaW4gMiBkaW1lbnNpb25zLlxuICAgICAqIEFsbCB0dXJucyBhcmUgY2xvY2t3aXNlLlxuICAgICAqL1xuICAgIGdldFR1cm4oZmlndXJlVHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUpOiBib29sZWFuW11bXTtcbiAgICBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RGaWd1cmUgaW1wbGVtZW50cyBGaWd1cmV7XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0U2Vjb25kVHVybigpOiBib29sZWFuW11bXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW107XG5cbiAgICBnZXRUdXJuKGZpZ3VyZVR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlKTogYm9vbGVhbltdW10ge1xuICAgICAgICBzd2l0Y2ggKGZpZ3VyZVR1cm5TdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuT25lOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZpcnN0VHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuVHdvOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKTtcbiAgICAgICAgICAgIGNhc2UgRmlndXJlVHVyblN0YXRlLlRocmVlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRoaXJkVHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuRm91cjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3J0aFR1cm4oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdpdmVzIGFuIGVhc3kgd2F5IHRvIGRlZmluZSBmaWd1cmVzIGZvciB0ZXRyaXMuXG4gKiBKdXN0IGltcGxlbWVudCB0aGUgZ2V0RmlndXJlIG1ldGhvZCBhbmQgcmV0dXJuIGZpZ3VyZSBsaWtlIHRoaXM6XG4gKiBgYGAodHMpXG4gKiBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAqICAgICByZXR1cm4gW1xuICogICAgICAgICBbdHJ1ZSwgIHRydWUsIHRydWVdLFxuICogICAgICAgICBbZmFsc2UsIHRydWUsIGZhbHNlXSxcbiAqICAgICAgICAgW3RydWUsICB0cnVlLCB0cnVlXSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKlxuICogT3IgZGVmaW5lIGl0IGxpa2UgdGhpcyBmb3IgbW9yZSB2aXN1YWwgcHJlc2VudGF0aW9uOlxuICogYGBgKHRzKVxuICogcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gKiAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgICAgIFwiLSMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICBdO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUgZXh0ZW5kcyBBYnN0cmFjdEZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldEZpZ3VyZSgpOiBib29sZWFuW11bXTtcblxuICAgIHByaXZhdGUgZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIGxldCBmaWd1cmUgPSB0aGlzLmdldEZpZ3VyZSgpO1xuICAgICAgICBsZXQgdGhlTG9uZ2VzdFJvd1NpemUgPSBmaWd1cmUucmVkdWNlKFxuICAgICAgICAgICAgKHByZXZpb3VzLCBjdXJyZW50KSA9PiBNYXRoLm1heChwcmV2aW91cywgY3VycmVudC5sZW5ndGgpLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmlndXJlLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgbGV0IG9yaWdpbmFsTGVuZ3RoID0gcm93Lmxlbmd0aDtcbiAgICAgICAgICAgIHJvdy5sZW5ndGggPSB0aGVMb25nZXN0Um93U2l6ZTtcbiAgICAgICAgICAgIHJldHVybiByb3cuZmlsbChmYWxzZSwgb3JpZ2luYWxMZW5ndGggLSAxLCB0aGVMb25nZXN0Um93U2l6ZSAtIDEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9ybWFsaXplZEZpZ3VyZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlID0gdGhpcy5nZXROb3JtYWxpemVkRmlndXJlKCk7XG4gICAgICAgIGxldCB0dXJuZWRGaWd1cmU6IGJvb2xlYW5bXVtdID0gW107XG4gICAgICAgIGxldCBvcmlnaW5hbEZpZ3VyZUhlaWdodCA9IG9yaWdpbmFsRmlndXJlLmxlbmd0aDtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlV2lkdGggPSBvcmlnaW5hbEZpZ3VyZVswXS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgb3JpZ2luYWxGaWd1cmVXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICB0dXJuZWRGaWd1cmVbeF0gPSBuZXcgQXJyYXkob3JpZ2luYWxGaWd1cmVIZWlnaHQpLmZpbGwoZmFsc2UpO1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBvcmlnaW5hbEZpZ3VyZUhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgdHVybmVkRmlndXJlW3hdW29yaWdpbmFsRmlndXJlSGVpZ2h0IC0geSAtIDFdID0gb3JpZ2luYWxGaWd1cmVbeV1beF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR1cm5lZEZpZ3VyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGhpcmRUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RUdXJuKCkucmV2ZXJzZSgpLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlY29uZFR1cm4oKS5yZXZlcnNlKCkubWFwKHJvdyA9PiByb3cucmV2ZXJzZSgpKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBURmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUmlnaHRMRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItLSNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGVmdExGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIiMtLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTcXVhcmVGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RpY2tGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExaRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCItIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBSWkZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIi0jI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIyMtXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RmlndXJlLCBGaWd1cmVUdXJuU3RhdGUsIExlZnRMRmlndXJlLCBMWkZpZ3VyZSwgUmlnaHRMRmlndXJlLCBSWkZpZ3VyZSwgU3F1YXJlRmlndXJlLCBTdGlja0ZpZ3VyZSwgVEZpZ3VyZX0gZnJvbSBcIi4vRmlndXJlc1wiO1xuXG4vKipcbiAqIHggZm9yIGhvcml6b250YWwgcG9zaXRpb25pbmdcbiAqIHkgZm9yIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBDb29yZGluYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHg6IG51bWJlcixcbiAgICAgICAgcHVibGljIHk6IG51bWJlcixcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGYWxsaW5nRmlndXJlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZ3VyZTogRmlndXJlLFxuICAgICAgICBwdWJsaWMgcG9zaXRpb246IENvb3JkaW5hdGUsXG4gICAgICAgIHB1YmxpYyB0dXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHVibGljIGNvbG9yOiBzdHJpbmd8dW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWVsZFdpZHRoOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBmaWVsZEhlaWdodDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgZmlndXJlczogRmlndXJlW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgU3RhdHMge1xuICAgIHB1YmxpYyBmaWd1cmVzRmFsbGVuID0gMDtcbiAgICBwdWJsaWMgbGluZXNTcXVhc2hlZCA9IDA7XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lRGF0YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBpc0dhbWVPdmVyOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIHB1YmxpYyBmYWxsaW5nRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBtYXRyaXg6IGJvb2xlYW5bXVtdID0gW10sXG4gICAgICAgIHB1YmxpYyBuZXh0VGlja1RpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgfSksXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nczogR2FtZVNldHRpbmdzLFxuICAgICAgICBwdWJsaWMgbGV2ZWw6IG51bWJlciA9IDEsXG4gICAgICAgIHB1YmxpYyBzY29yZTogbnVtYmVyID0gMCxcbiAgICAgICAgcHVibGljIGNvbWJvOiBudW1iZXIgPSAwLFxuICAgICAgICBwdWJsaWMgc3RhdHM6IFN0YXRzID0gbmV3IFN0YXRzKCksXG4gICAgKSB7fVxuXG4gICAgc3RhdGljIG1ha2VTaW1wbGUod2lkdGg6IG51bWJlciA9IDEwLCBoZWlnaHQ6IG51bWJlciA9IDIwKTogR2FtZURhdGEge1xuICAgICAgICByZXR1cm4gbmV3IEdhbWVEYXRhKFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgbmV3IEFycmF5KGhlaWdodCkuZmlsbChbXSlcbiAgICAgICAgICAgICAgICAubWFwKF8gPT4gbmV3IEFycmF5KHdpZHRoKS5maWxsKGZhbHNlKSksXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmV3IEdhbWVTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmlnaHRMRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBMZWZ0TEZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgU3F1YXJlRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTdGlja0ZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgTFpGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJaRmlndXJlKCksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc01vdmVkRXZlbnQsIEdhbWVPdmVyRXZlbnR9IGZyb20gXCIuL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlbmRlckNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgR2FtZUNvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgZ2FtZURhdGE6IEdhbWVEYXRhID0gR2FtZURhdGEubWFrZVNpbXBsZSgpO1xuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBwcml2YXRlIHRpbWluZ3NIYW5kbGVyOiBUaW1pbmdzSGFuZGxlcixcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5SZXN1bWVHYW1lLCB0aGlzLnJlc3VtZUdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5QYXVzZUdhbWUsIHRoaXMucGF1c2VHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuR2FtZU92ZXIsIHRoaXMuZ2FtZU92ZXJIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gY29tbWFuZC5nYW1lRGF0YTtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc3VtZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFJlc3VtZUdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZhbGxUaWNrKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXVzZUdhbWVIYW5kbGVyKGNvbW1hbmQ6IFBhdXNlR2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGNvbW1hbmQuZ2FtZURhdGE7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVuZGVyQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnYW1lT3ZlckhhbmRsZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgR2FtZU92ZXJFdmVudCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmYWxsVGljaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgaWYgKCF0aGlzLmdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgIHRoaXMuZmFsbFRpY2suYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ0NoZWNrZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgY2FuRmlndXJlQmVQbGFjZWQodGFyZ2V0RmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0UG9zaXRpb246IENvb3JkaW5hdGUsIG1hdHJpeDogYm9vbGVhbltdW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldEZpZ3VyZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcm93LmV2ZXJ5KCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0gdGFyZ2V0UG9zaXRpb24ueSArIHk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB0YXJnZXRQb3NpdGlvbi54ICsgeDtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXZhbHVlXG4gICAgICAgICAgICAgICAgICAgIHx8IChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxZIDwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPj0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggPD0gbWF0cml4WzBdLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgKSB8fCAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsWSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIG1hdHJpeFtyZWFsWV1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFtYXRyaXhbcmVhbFldW3JlYWxYXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZCwgUmVuZGVyQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50LCBHYW1lT3ZlckV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGxlZDogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBmaWxsZWRHYW1lT3Zlcjogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBlbXB0eTogc3RyaW5nfG51bGwsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlclNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBwdWJsaWMgcmVuZGVyUHJvamVjdGlvbkZpZ3VyZXM6IGJvb2xlYW4gPSB0cnVlLFxuICAgICAgICBwdWJsaWMgbWF0cml4Q2VsbENvbG9yczogVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzID0gbmV3IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyhcbiAgICAgICAgICAgICcjMDA3NDAwJyxcbiAgICAgICAgICAgICcjNzgwMDAwJyxcbiAgICAgICAgICAgICcjZmZmJyxcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIGZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyMwMDc0MDAnLFxuICAgICAgICAgICAgJyM3ODAwMDAnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIHByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyNiOGU1ZTMnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICksXG4gICAgKSB7fVxufVxuXG5jbGFzcyBDZWxsQ29sb3JzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpbGxlZDogc3RyaW5nfG51bGwsXG4gICAgICAgIHB1YmxpYyBlbXB0eTogc3RyaW5nfG51bGwsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVGFibGVSZW5kZXJlciB7XG4gICAgcHJpdmF0ZSBjZWxsc0h0bWxFbGVtZW50c01hcDogSFRNTEVsZW1lbnRbXVtdID0gW107XG4gICAgcHJpdmF0ZSB0YWJsZTogSFRNTEVsZW1lbnR8dW5kZWZpbmVkO1xuICAgIHByaXZhdGUgc2NvcmVEaXNwbGF5OiBIVE1MRWxlbWVudHx1bmRlZmluZWQ7XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHByaXZhdGUgcmVuZGVyU2V0dGluZ3M6IFRhYmxlUmVuZGVyZXJTZXR0aW5ncyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuUmVuZGVyLCB0aGlzLnJlbmRlckNvbW1hbmRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMudGFibGUgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZmxvYXQ6IGxlZnQ7IGRpc3BsYXk6IHRhYmxlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlXCI+PC9kaXY+Jyk7XG4gICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXAgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIGxldCByb3cgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtcm93XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3ldID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNvbW1hbmQuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNlbGwgPSBUYWJsZVJlbmRlcmVyLmNyZWF0ZUh0bWxFbGVtZW50KCc8ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtY2VsbDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgd2lkdGg6IDIwcHg7IGhlaWdodDogMjBweFwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbeV1beF0gPSBjZWxsO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlKTtcblxuICAgICAgICB0aGlzLnNjb3JlRGlzcGxheSA9IFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoXG4gICAgICAgICAgICBgPGRpdiBzdHlsZT1cImZsb2F0OiBsZWZ0OyBmb250LWZhbWlseTogJ0hlbHZldGljYSBOZXVlJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAyMHB4OyBtYXJnaW4tbGVmdDogMTVweDtcIj5cbiAgICAgICAgICAgICAgICBMZXZlbDogPHNwYW4gaWQ9XCJsZXZlbFwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgU2NvcmU6IDxzcGFuIGlkPVwic2NvcmVcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIENvbWJvOiA8c3BhbiBpZD1cImNvbWJvXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBGaWd1cmVzIGZhbGxlbjogPHNwYW4gaWQ9XCJmaWd1cmVzX2ZhbGxlblwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgTGluZXMgc3F1YXNoZWQ6IDxzcGFuIGlkPVwibGluZXNfc3F1YXNoZWRcIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgPC9kaXY+YCk7XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNjb3JlRGlzcGxheSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoJzxkaXYgc3R5bGU9XCJjbGVhcjogYm90aFwiPjwvZGl2PicpKTtcblxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5HYW1lT3ZlciwgdGhpcy5vbkdhbWVPdmVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GaWd1cmVzTW92ZWQsIHRoaXMub25GaWd1cmVzTW92ZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZpZ3VyZXNNb3ZlZChjb21tYW5kOiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGNvbW1hbmQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uR2FtZU92ZXIoY29tbWFuZDogR2FtZU92ZXJFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQ29tbWFuZEhhbmRsZXIoY29tbWFuZDogUmVuZGVyQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyU3RhdGUoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVwYWludE1hdHJpeENlbGxzKGdhbWVEYXRhLm1hdHJpeCwgbmV3IENvb3JkaW5hdGUoMCwgMCksIGdhbWVEYXRhKTtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyU2V0dGluZ3MucmVuZGVyUHJvamVjdGlvbkZpZ3VyZXMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmFsbGluZ0ZpZ3VyZXNQcm9qZWN0aW9uKGdhbWVEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlckZhbGxpbmdGaWd1cmVzKGdhbWVEYXRhKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0cyhnYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJGYWxsaW5nRmlndXJlcyhnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMoZmFsbGluZ0ZpZ3VyZSwgZ2FtZURhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbihnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmYWxsaW5nRmlndXJlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdGlvbkZpZ3VyZVggPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBsZXQgcHJvamVjdGlvbkZpZ3VyZVkgPSBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnk7XG4gICAgICAgICAgICB3aGlsZShGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSArIDEpLCBnYW1lRGF0YS5tYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbkZpZ3VyZVkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMoXG4gICAgICAgICAgICAgICAgZmlndXJlTWF0cml4LFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKHByb2plY3Rpb25GaWd1cmVYLCBwcm9qZWN0aW9uRmlndXJlWSksXG4gICAgICAgICAgICAgICAgZ2FtZURhdGFcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludE1hdHJpeENlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZmlsbGVkR2FtZU92ZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhtYXRyaXgsIGluZGVudCwgY29sb3JzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRGYWxsaW5nRmlndXJlc0NlbGxzKGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUsIGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBsZXQgY29sb3JzOiBDZWxsQ29sb3JzO1xuICAgICAgICBpZiAoZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWRHYW1lT3ZlcixcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUuY29sb3IgfHwgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5mYWxsaW5nRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMoXG4gICAgICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUucG9zaXRpb24sXG4gICAgICAgICAgICBjb2xvcnNcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRQcm9qZWN0aW9uRmlndXJlc0NlbGxzKG1hdHJpeDogYm9vbGVhbltdW10sIGluZGVudDogQ29vcmRpbmF0ZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmZpbGxlZEdhbWVPdmVyLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5maWxsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXBhaW50Q2VsbHMobWF0cml4LCBpbmRlbnQsIGNvbG9ycyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50Q2VsbHMobWF0cml4OiBib29sZWFuW11bXSwgaW5kZW50OiBDb29yZGluYXRlLCBjZWxsQ29sb3JzOiBDZWxsQ29sb3JzKTogdm9pZCB7XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWx1ZSwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0geSArIGluZGVudC55O1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxYID0geCArIGluZGVudC54O1xuICAgICAgICAgICAgICAgIGlmIChyZWFsWSBpbiB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwXG4gICAgICAgICAgICAgICAgICAgICYmIHJlYWxYIGluIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbcmVhbFldXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdmFsdWUgPyBjZWxsQ29sb3JzLmZpbGxlZCA6IGNlbGxDb2xvcnMuZW1wdHk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFtyZWFsWV1bcmVhbFhdLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclN0YXRzKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBjb25zdCBsZXZlbFNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGV2ZWwnKTtcbiAgICAgICAgY29uc3Qgc2NvcmVTcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7XG4gICAgICAgIGNvbnN0IGNvbWJvU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21ibycpO1xuICAgICAgICBjb25zdCBmaWd1cmVzRmFsbGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZ3VyZXNfZmFsbGVuJyk7XG4gICAgICAgIGNvbnN0IGxpbmVzU3F1YXNoZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZXNfc3F1YXNoZWQnKTtcbiAgICAgICAgaWYgKGxldmVsU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV2ZWxTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmxldmVsLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjb3JlU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2NvcmVTcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLnNjb3JlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbWJvU3BhbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29tYm9TcGFuLmlubmVySFRNTCA9IGdhbWVEYXRhLmNvbWJvLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZ3VyZXNGYWxsZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZpZ3VyZXNGYWxsZW4uaW5uZXJIVE1MID0gZ2FtZURhdGEuc3RhdHMuZmlndXJlc0ZhbGxlbi50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaW5lc1NxdWFzaGVkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsaW5lc1NxdWFzaGVkLmlubmVySFRNTCA9IGdhbWVEYXRhLnN0YXRzLmxpbmVzU3F1YXNoZWQudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZUh0bWxFbGVtZW50KGh0bWw6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPiAxIHx8IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgJ1RoZSBIVE1MIG11c3QgY29udGFpbiBvbmx5IG9uZSBjaGlsZCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyAnU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgdHJ5aW5nIHRvIGdldCBIVE1MRWxlbWVudCBjaGlsZCBmcm9tIGRpdic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0Ryb3BGaWd1cmVzQ29tbWFuZCwgQ29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEdhbWVPdmVyQ29tbWFuZCwgRmlndXJlc0ZhbGxUaWNrQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcblxuY2xhc3MgRmFsbGluZ1Jlc3VsdCB7XG4gICAgcHVibGljIHRyYW5zZmVycmVkRmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdID0gW107XG4gICAgcHVibGljIGlzR2FtZU92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbn1cblxuZXhwb3J0IGNsYXNzIFJlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsVGljaywgdGhpcy5wcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxEb3duLCB0aGlzLnByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZChjb21tYW5kOiBGaWd1cmVzRmFsbFRpY2tDb21tYW5kKSB7XG4gICAgICAgIGNvbnN0IGZhbGxpbmdSZXN1bHQgPSB0aGlzLmZhbGxGaWd1cmVzRm9yT25lQ2VsbChjb21tYW5kLmdhbWVEYXRhKTtcbiAgICAgICAgbGV0IHNxdWFzaGVkTGluZXMgPSB0aGlzLnNxdWFzaExpbmVzKGNvbW1hbmQuZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgaWYgKGZhbGxpbmdSZXN1bHQuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgR2FtZU92ZXJDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQoXG4gICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLFxuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMsXG4gICAgICAgICAgICBzcXVhc2hlZExpbmVzLFxuICAgICAgICAgICAgMFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQoY29tbWFuZDogRHJvcEZpZ3VyZXNDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGxldCBmYWxsaW5nUmVzdWx0ID0gbmV3IEZhbGxpbmdSZXN1bHQoKTtcbiAgICAgICAgbGV0IGRyb3BwZWRMaW5lcyA9IDA7XG4gICAgICAgIHdoaWxlIChjb21tYW5kLmdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG9uZUNlbGxGYWxsaW5nUmVzdWx0ID0gdGhpcy5mYWxsRmlndXJlc0Zvck9uZUNlbGwoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcy5wdXNoKC4uLm9uZUNlbGxGYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyk7XG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgPSBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgfHwgb25lQ2VsbEZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlcjtcbiAgICAgICAgICAgIGRyb3BwZWRMaW5lcysrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzcXVhc2hlZExpbmVzID0gdGhpcy5zcXVhc2hMaW5lcyhjb21tYW5kLmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGlmIChmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEdhbWVPdmVyQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KFxuICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YSxcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLFxuICAgICAgICAgICAgc3F1YXNoZWRMaW5lcyxcbiAgICAgICAgICAgIGRyb3BwZWRMaW5lcyAtIDEsXG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGdhbWVEYXRhOiBHYW1lRGF0YSk6IEZhbGxpbmdSZXN1bHQge1xuICAgICAgICBsZXQgZmFsbGluZ1Jlc3VsdCA9IG5ldyBGYWxsaW5nUmVzdWx0KCk7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmZvckVhY2goKGZhbGxpbmdGaWd1cmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWd1cmVDYW5GYWxsKGdhbWVEYXRhLm1hdHJpeCwgZmFsbGluZ0ZpZ3VyZSkpIHtcbiAgICAgICAgICAgICAgICBmYWxsaW5nRmlndXJlLnBvc2l0aW9uLnkrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpZ3VyZUdhbWVPdmVyUmVzdWx0ID0gdGhpcy50cmFuc2ZlckZpZ3VyZVRvTWF0cml4KFxuICAgICAgICAgICAgICAgICAgICBnYW1lRGF0YS5tYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLnB1c2goLi4uZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuc3BsaWNlKGluZGV4LCAxKSk7XG4gICAgICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyID0gZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyIHx8IGZpZ3VyZUdhbWVPdmVyUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbGxpbmdSZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWd1cmVDYW5GYWxsKG1hdHJpeDogYm9vbGVhbltdW10sIGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmYWxsaW5nRmlndXJlLnBvc2l0aW9uLngsIGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSArIDEpLFxuICAgICAgICAgICAgbWF0cml4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFuc2ZlckZpZ3VyZVRvTWF0cml4KG1hdHJpeDogYm9vbGVhbltdW10sIGZhbGxpbmdGaWd1cmU6IEZhbGxpbmdGaWd1cmUpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGlzR2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChyb3csIGZpZ3VyZUNlbGxZKSA9PiB7XG4gICAgICAgICAgICAgICAgcm93LmZvckVhY2goKGNlbGxWYWx1ZSwgZmlndXJlQ2VsbFgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxsVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cml4WCA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueCArIGZpZ3VyZUNlbGxYO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0cml4WSA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSArIGZpZ3VyZUNlbGxZO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0cml4WSBpbiBtYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIG1hdHJpeFggaW4gbWF0cml4W21hdHJpeFldXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhbWF0cml4W21hdHJpeFldW21hdHJpeFhdXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W21hdHJpeFldW21hdHJpeFhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlzR2FtZU92ZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcXVhc2hMaW5lcyhtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyW10ge1xuICAgICAgICBsZXQgbGluZXNUb1NxdWFzaDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbkJlU3F1YXNoZWQgPSByb3cuZXZlcnkoY2VsbCA9PiBjZWxsKTtcbiAgICAgICAgICAgIGlmIChjYW5CZVNxdWFzaGVkKSB7XG4gICAgICAgICAgICAgICAgbGluZXNUb1NxdWFzaC5wdXNoKHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGluZXNUb1NxdWFzaC5mb3JFYWNoKHkgPT4ge1xuICAgICAgICAgICAgbWF0cml4LnNwbGljZSh5LCAxKTtcbiAgICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KG5ldyBBcnJheShtYXRyaXhbMF0ubGVuZ3RoKS5maWxsKGZhbHNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGluZXNUb1NxdWFzaDtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRW51bUhlbHBlciB7XG4gICAgcHVibGljIHN0YXRpYyBUb0FycmF5KHZhbDogYW55KTogdHlwZW9mIHZhbFtdIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbClcbiAgICAgICAgICAgIC5tYXAobiA9PiBOdW1iZXIucGFyc2VJbnQobikpXG4gICAgICAgICAgICAuZmlsdGVyKG4gPT4gIU51bWJlci5pc05hTihuKSkgYXMgdW5rbm93biBhcyB0eXBlb2YgdmFsW107XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBHZXRSYW5kb20odmFsOiBhbnkpOiB0eXBlb2YgdmFsIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gRW51bUhlbHBlci5Ub0FycmF5KHZhbCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiB2YWx1ZXNbcmFuZG9tSW5kZXhdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCwgRmlndXJlc1NwYXduZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtFbnVtSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvRW51bUhlbHBlclwiO1xuXG5leHBvcnQgY2xhc3MgQWx3YXlzT25lRmlndXJlU3Bhd25lciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEhhbmRsZXIoZXZlbnQ6IEluaXRHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKFxuICAgICAgICAgICAgRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLFxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzT25GYWxsVGljay5iaW5kKHRoaXMpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc09uRmFsbFRpY2soZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hZGRGaWd1cmUoZXZlbnQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkRmlndXJlKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID4gMCB8fCBnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWd1cmVJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdhbWVEYXRhLnNldHRpbmdzLmZpZ3VyZXMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgZmlndXJlID0gZ2FtZURhdGEuc2V0dGluZ3MuZmlndXJlc1tmaWd1cmVJbmRleF07XG4gICAgICAgIGNvbnN0IHR1cm5TdGF0ZSA9IEVudW1IZWxwZXIuR2V0UmFuZG9tKEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZU1hdHJpeCA9IGZpZ3VyZS5nZXRUdXJuKHR1cm5TdGF0ZSk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZVdpZHRoID0gTWF0aC5tYXgoLi4uZmlndXJlTWF0cml4Lm1hcChyb3cgPT4gcm93Lmxlbmd0aCkpO1xuICAgICAgICBjb25zdCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoXG4gICAgICAgICAgICBNYXRoLmNlaWwoZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aCAvIDIgLSBmaWd1cmVXaWR0aCAvIDIpIC0gMSxcbiAgICAgICAgICAgIC1maWd1cmVNYXRyaXgubGVuZ3RoLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmYWxsaW5nRmlndXJlID0gbmV3IEZhbGxpbmdGaWd1cmUoXG4gICAgICAgICAgICBmaWd1cmUsXG4gICAgICAgICAgICBjb29yZGluYXRlLFxuICAgICAgICAgICAgdHVyblN0YXRlXG4gICAgICAgICk7XG4gICAgICAgIGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLnB1c2goZmFsbGluZ0ZpZ3VyZSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc1NwYXduZWRFdmVudChnYW1lRGF0YSwgW2ZhbGxpbmdGaWd1cmVdKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDb21tYW5kQnVzLFxuICAgIENvbW1hbmRUeXBlLFxuICAgIE1vdmVMZWZ0Q29tbWFuZCxcbiAgICBNb3ZlUmlnaHRDb21tYW5kLFxuICAgIFR1cm5DbG9ja3dpc2VDb21tYW5kLFxuICAgIE1vdmVEb3duQ29tbWFuZCxcbiAgICBGaWd1cmVzRmFsbFRpY2tDb21tYW5kLFxuICAgIE1vdmVUb1hDb21tYW5kLFxuICAgIE1vdmVUb1lDb21tYW5kLFxuICAgIFR1cm5Ub1N0YXRlQ29tbWFuZFxufSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL0ZpZ3VyZXNcIjtcbmltcG9ydCB7RXZlbnRCdXMsIEZpZ3VyZXNNb3ZlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9VdGlscy9FbnVtSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZpbmdIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZUxlZnQsIHRoaXMucHJvY2Vzc01vdmVMZWZ0Q29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZVJpZ2h0LCB0aGlzLnByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlRG93biwgdGhpcy5wcm9jZXNzTW92ZURvd25Db21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5UdXJuQ2xvY2t3aXNlLCB0aGlzLnByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuTW92ZVRvWCwgdGhpcy5wcm9jZXNzTW92ZVRvWENvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVUb1ksIHRoaXMucHJvY2Vzc01vdmVUb1lDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5UdXJuVG9TdGF0ZSwgdGhpcy5wcm9jZXNzVHVyblRvU3RhdGVDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVMZWZ0Q29tbWFuZChjb21tYW5kOiBNb3ZlTGVmdENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkTGVmdCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCAtIDEsIGZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZU1vdmVkTGVmdCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbi54LS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kKGNvbW1hbmQ6IE1vdmVSaWdodENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkUmlnaHQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4oZmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmlndXJlLnBvc2l0aW9uLnggKyAxLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVNb3ZlZFJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLngrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQ6IFR1cm5DbG9ja3dpc2VDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFsbFR1cm5TdGF0ZXMgPSBFbnVtSGVscGVyLlRvQXJyYXkoRmlndXJlVHVyblN0YXRlKTtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV4dFR1cm5TdGF0ZSA9IGZpZ3VyZS50dXJuU3RhdGUgKyAxO1xuICAgICAgICAgICAgaWYgKCEobmV4dFR1cm5TdGF0ZSBpbiBhbGxUdXJuU3RhdGVzKSkge1xuICAgICAgICAgICAgICAgIG5leHRUdXJuU3RhdGUgPSBhbGxUdXJuU3RhdGVzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FuQmVUdXJuZWQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4obmV4dFR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlVHVybmVkKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnR1cm5TdGF0ZSA9IG5leHRUdXJuU3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlRG93bkNvbW1hbmQoY29tbWFuZDogTW92ZURvd25Db21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVUb1hDb21tYW5kKGNvbW1hbmQ6IE1vdmVUb1hDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmIChjb21tYW5kLnggPCAwIHx8IGNvbW1hbmQueCA+IChjb21tYW5kLmdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSAxKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaChmaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW92aW5nTW9kaWZpZXIgPSBjb21tYW5kLnggPiBmaWd1cmUucG9zaXRpb24ueCA/IDEgOiAtMTtcbiAgICAgICAgICAgIHdoaWxlIChmaWd1cmUucG9zaXRpb24ueCAhPT0gY29tbWFuZC54ICYmIEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCArIG1vdmluZ01vZGlmaWVyLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBmaWd1cmUucG9zaXRpb24ueCArPSBtb3ZpbmdNb2RpZmllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVUb1lDb21tYW5kKGNvbW1hbmQ6IE1vdmVUb1lDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGlmIChjb21tYW5kLnkgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICB3aGlsZSAoZmlndXJlLnBvc2l0aW9uLnkgPCBjb21tYW5kLnkgJiYgRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICAgICAgZmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZpZ3VyZS5wb3NpdGlvbi54LCBmaWd1cmUucG9zaXRpb24ueSArIDEpLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLnkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R1cm5Ub1N0YXRlQ29tbWFuZChjb21tYW5kOiBUdXJuVG9TdGF0ZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZVR1cm5lZCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihjb21tYW5kLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlVHVybmVkKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnR1cm5TdGF0ZSA9IGNvbW1hbmQudHVyblN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzTW92ZWRFdmVudChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgRmFsbFRpY2tTY29yZUNvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIHNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXA6IE1hcDxudW1iZXIsIG51bWJlcj4gPSBuZXcgTWFwKFtcbiAgICAgICAgICAgIFsxLCAxMDBdLFxuICAgICAgICAgICAgWzIsIDMwMF0sXG4gICAgICAgICAgICBbMywgNTAwXSxcbiAgICAgICAgICAgIFs0LCA4MDBdLFxuICAgICAgICBdKSxcbiAgICAgICAgcHJpdmF0ZSByZXdhcmRPbkNvbWJvID0gNTAsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA8IDApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGxldCBwcmV2aW91c1RocmVzaG9sZFJld2FyZCA9IDA7XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcC5mb3JFYWNoKChyZXdhcmQsIHJvd3NTcXVhc2hlZFRocmVzaG9sZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvd3NTcXVhc2hlZFRocmVzaG9sZCA+IGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgPSByZXdhcmQ7XG4gICAgICAgIH0pO1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zY29yZSArPVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgKiBldmVudC5nYW1lRGF0YS5sZXZlbFxuICAgICAgICAgICAgKyB0aGlzLnJld2FyZE9uQ29tYm8gKiBNYXRoLm1heCgwLCBldmVudC5nYW1lRGF0YS5jb21ibyAtIDEpICogZXZlbnQuZ2FtZURhdGEubGV2ZWxcbiAgICAgICAgICAgICsgZXZlbnQuZHJvcHBlZExpbmVzICogMiAqIGV2ZW50LmdhbWVEYXRhLmxldmVsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIFNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciB7XG4gICAgcHJpdmF0ZSBzcXVhc2hlZFJvd3NDb3VudGVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlcjogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIG1heExldmVsczogbnVtYmVyLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5wcm9jZXNzSW5pdEdhbWVDb21tYW5kLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlcisrO1xuICAgICAgICBpZiAodGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyID49IHRoaXMubGV2ZWxJbmNyZWFzZU9uU3F1YXNoZWRSb3dzTnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIgPSAwO1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEubGV2ZWwgPSBNYXRoLm1pbih0aGlzLm1heExldmVscywgZXZlbnQuZ2FtZURhdGEubGV2ZWwgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIENvbWJvQ291bnRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwdWJsaWMgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBldmVudC5nYW1lRGF0YS5jb21ibyArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEuY29tYm8gPSAwO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIENvbnN0VGltaW5nc0hhbmRsZXIgaW1wbGVtZW50cyBUaW1pbmdzSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBkZWxheU1zOiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgZ2V0RGVsYXlGb3JOZXh0VGlja01zKGdhbWVEYXRhOiBHYW1lRGF0YSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGF5TXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgU3RhdHNDb3VudGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsaW5nVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbGluZ1RpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpIHtcbiAgICAgICAgZXZlbnQuZ2FtZURhdGEuc3RhdHMuZmlndXJlc0ZhbGxlbiArPSBldmVudC50cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlcy5sZW5ndGg7XG4gICAgICAgIGV2ZW50LmdhbWVEYXRhLnN0YXRzLmxpbmVzU3F1YXNoZWQgKz0gZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGg7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgRHJvcEZpZ3VyZXNDb21tYW5kLCBJbml0R2FtZUNvbW1hbmQsIE1vdmVMZWZ0Q29tbWFuZCwgTW92ZVJpZ2h0Q29tbWFuZCwgVHVybkNsb2Nrd2lzZUNvbW1hbmQsIE1vdmVEb3duQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmRDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzXG4gICAgKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLnByb2Nlc3NJbml0R2FtZUNvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB3aW5kb3cub25rZXlkb3duID0gZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZUxlZnRDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVJpZ2h0Q29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFR1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlRG93bkNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVEb3duQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdTcGFjZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBEcm9wRmlndXJlc0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7R2FtZUNvbnRyb2xsZXJ9IGZyb20gJy4vR2FtZUNvbnRyb2xsZXInXG5pbXBvcnQge1RhYmxlUmVuZGVyZXIsIFRhYmxlUmVuZGVyZXJTZXR0aW5nc30gZnJvbSAnLi9SZW5kZXJlci9UYWJsZVJlbmRlcmVyJ1xuaW1wb3J0IHtSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3J9IGZyb20gXCIuL0ZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yL1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvclwiO1xuaW1wb3J0IHtBbHdheXNPbmVGaWd1cmVTcGF3bmVyfSBmcm9tIFwiLi9GaWd1cmVzU3Bhd25lci9BbHdheXNPbmVGaWd1cmVTcGF3bmVyXCI7XG5pbXBvcnQge0V2ZW50QnVzfSBmcm9tIFwiLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBJbml0R2FtZUNvbW1hbmQsIFBhdXNlR2FtZUNvbW1hbmQsIFJlc3VtZUdhbWVDb21tYW5kfSBmcm9tIFwiLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7TW92aW5nSGFuZGxlcn0gZnJvbSBcIi4vTW92aW5nSGFuZGxlci9Nb3ZpbmdIYW5kbGVyXCI7XG5pbXBvcnQge0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0ZhbGxUaWNrU2NvcmVDb3VudGVyfSBmcm9tIFwiLi9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXJcIjtcbmltcG9ydCB7U3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyfSBmcm9tIFwiLi9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi9Db21tb25cIjtcbmltcG9ydCB7Q29tYm9Db3VudGVyfSBmcm9tIFwiLi9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyXCI7XG5pbXBvcnQge0NvbnN0VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7U3RhdHNDb3VudGVyfSBmcm9tIFwiLi9TdGF0c0NvdW50ZXIvU3RhdHNDb3VudGVyXCI7XG5pbXBvcnQge0tleWJvYXJkQ29udHJvbGxlcn0gZnJvbSBcIi4vS2V5Ym9hcmRDb250cm9sbGVyL0tleWJvYXJkQ29udHJvbGxlclwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzRmFjYWRlIHtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKSxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzID0gbmV3IENvbW1hbmRCdXMoKSxcbiAgICAgICAgcHJpdmF0ZSBnYW1lQ29udHJvbGxlciA9IG5ldyBHYW1lQ29udHJvbGxlcihcbiAgICAgICAgICAgIC8vIG5ldyBMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXIoMjAwMCksXG4gICAgICAgICAgICBuZXcgQ29uc3RUaW1pbmdzSGFuZGxlcigyMDAwKSxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBtb3ZpbmdIYW5kbGVyID0gbmV3IE1vdmluZ0hhbmRsZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUga2V5Ym9hcmRDb250cm9sbGVyID0gbmV3IEtleWJvYXJkQ29udHJvbGxlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IgPSBuZXcgUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmlndXJlc1NwYXduZXIgPSBuZXcgQWx3YXlzT25lRmlndXJlU3Bhd25lcihcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBsZXZlbENvdW50ZXIgPSBuZXcgU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgOCxcbiAgICAgICAgICAgIDE1LFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGNvbWJvQ291bnRlciA9IG5ldyBDb21ib0NvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgc2NvcmVDb3VudGVyID0gbmV3IEZhbGxUaWNrU2NvcmVDb3VudGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIHN0YXRzQ291bnRlciA9IG5ldyBTdGF0c0NvdW50ZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgdGFibGVSZW5kZXJlciA9IG5ldyBUYWJsZVJlbmRlcmVyKFxuICAgICAgICAgICAgbmV3IFRhYmxlUmVuZGVyZXJTZXR0aW5ncyhcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1c1xuICAgICAgICApLFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGEgPSBHYW1lRGF0YS5tYWtlU2ltcGxlKCksXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHN0YXJ0KGdhbWVEYXRhPzogR2FtZURhdGEpIHtcbiAgICAgICAgZ2FtZURhdGEgPSBnYW1lRGF0YSB8fCBHYW1lRGF0YS5tYWtlU2ltcGxlKCk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEluaXRHYW1lQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZXN1bWVHYW1lQ29tbWFuZChnYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXN1bWUoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlc3VtZUdhbWVDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFBhdXNlR2FtZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vVGV0cmlzL0ZpZ3VyZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBGaWd1cmVQbGFjaW5nU3RlcCB7XG4gICAgZ2V0IHBlcnNpc3RlZCgpOiBib29sZWFuLFxufVxuXG5leHBvcnQgY2xhc3MgVHVyblBsYWNpbmdTdGVwIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1N0ZXB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB0YXJnZXQ6IEZpZ3VyZVR1cm5TdGF0ZSxcbiAgICAgICAgcHJpdmF0ZSBfcGVyc2lzdGVkOiBib29sZWFuLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZWQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVhQbGFjaW5nU3RlcCBpbXBsZW1lbnRzIEZpZ3VyZVBsYWNpbmdTdGVwe1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgdGFyZ2V0OiBudW1iZXIsXG4gICAgICAgIHByaXZhdGUgX3BlcnNpc3RlZDogYm9vbGVhbixcbiAgICApIHt9XG5cbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc2lzdGVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVZUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHRhcmdldDogbnVtYmVyLFxuICAgICkge31cblxuICAgIGdldCBwZXJzaXN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEcm9wUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBnZXQgcGVyc2lzdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWd1cmVzVGFyZ2V0U3RhdGVzOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4sXG4gICAgICAgIHB1YmxpYyBwbGFjaW5nU3RlcHM6IEZpZ3VyZVBsYWNpbmdTdGVwW10sXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgSG9sZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBpc09wZW5lZDogYm9vbGVhbixcbiAgICAgICAgcHVibGljIGNlbGxzOiBDb29yZGluYXRlW10sXG4gICAgKSB7fVxufVxuIiwiaW1wb3J0IHtIb2xlfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0Nvb3JkaW5hdGV9IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vLi4vVGV0cmlzL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBIb2xlc0hlbHBlciB7XG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0SG9sZXMobWF0cml4OiBib29sZWFuW11bXSk6IEhvbGVbXSB7XG4gICAgICAgIGxldCBob2xlczogSG9sZVtdID0gW107XG5cbiAgICAgICAgY2xhc3MgSG9sZUluUHJvY2VzcyB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgICAgICAgICBwdWJsaWMgY2VsbHM6IENvb3JkaW5hdGVbXSA9IFtdLFxuICAgICAgICAgICAgICAgIHB1YmxpYyBwcmV2aW91c1Jvd09wZW5YczogbnVtYmVyW10gPSBbXSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgY3VycmVudFJvd09wZW5YczogbnVtYmVyW10gPSBbXSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgaXNPcGVuZWQ6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgICAgICAgICBwdWJsaWMgY29udGludWVzOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBob2xlc0luUHJvY2VzczogSG9sZUluUHJvY2Vzc1tdID0gW107XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uczogU2V0PG51bWJlcj4gPSBuZXcgU2V0KCk7XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGhvbGVzSW5Qcm9jZXNzLmZvckVhY2goaG9sZSA9PiBob2xlLmNvbnRpbnVlcyA9IGZhbHNlKTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvY2Vzc2luZ0hvbGUgPSBob2xlc0luUHJvY2Vzcy5maW5kKGhvbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvbGUucHJldmlvdXNSb3dPcGVuWHMuc29tZShwcmV2WCA9PiBwcmV2WCA9PT0geClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoaG9sZS5jdXJyZW50Um93T3BlblhzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgaG9sZS5jdXJyZW50Um93T3BlblhzW2hvbGUuY3VycmVudFJvd09wZW5Ycy5sZW5ndGggLSAxXSA9PT0geCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc2luZ0hvbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUgPSBuZXcgSG9sZUluUHJvY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9sZXNJblByb2Nlc3MucHVzaChwcm9jZXNzaW5nSG9sZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuY3VycmVudFJvd09wZW5Ycy5wdXNoKHgpO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nSG9sZS5jZWxscy5wdXNoKG5ldyBDb29yZGluYXRlKHgsIHkpKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuY29udGludWVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ0hvbGUuaXNPcGVuZWQgPSBwcm9jZXNzaW5nSG9sZS5pc09wZW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5kb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMobWF0cml4LCBuZXcgQ29vcmRpbmF0ZSh4LCB5KSwgY292ZXJlZENvbHVtbnMsIFtbdHJ1ZSwgdHJ1ZV1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZTogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgICAgIGhvbGVzSW5Qcm9jZXNzLmZvckVhY2goKGhvbGUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaG9sZS5jb250aW51ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZS5wcmV2aW91c1Jvd09wZW5YcyA9IGhvbGUuY3VycmVudFJvd09wZW5YcztcbiAgICAgICAgICAgICAgICAgICAgaG9sZS5jdXJyZW50Um93T3BlblhzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaG9sZS5jb250aW51ZXMgfHwgeSA9PSBtYXRyaXgubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBob2xlcy5wdXNoKG5ldyBIb2xlKFxuICAgICAgICAgICAgICAgICAgICAgICAgaG9sZS5pc09wZW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGUuY2VsbHMsXG4gICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgICAgICBob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZS5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaG9sZXNJblByb2dyZXNzVG9SZW1vdmUucmV2ZXJzZSgpLmZvckVhY2goaSA9PiBob2xlc0luUHJvY2Vzcy5zcGxpY2UoaSwgMSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGhvbGVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZG9lc1RoZVdheU91dEZyb21Ib2xlRXhpc3RzKG1hdHJpeDogYm9vbGVhbltdW10sIGluaXRpYWxDb29yZGluYXRlOiBDb29yZGluYXRlLCBjb3ZlcmVkQ29sdW1uczogU2V0PG51bWJlcj4sIGZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZFRoZVdheU91dEZyb21Ib2xlKG1hdHJpeCwgaW5pdGlhbENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zLCBmaWd1cmVNYXRyaXgpICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmaW5kVGhlV2F5T3V0RnJvbUhvbGUobWF0cml4OiBib29sZWFuW11bXSwgaW5pdGlhbENvb3JkaW5hdGU6IENvb3JkaW5hdGUsIGNvdmVyZWRDb2x1bW5zOiBTZXQ8bnVtYmVyPnxNYXA8bnVtYmVyLCBudW1iZXI+LCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucyA9IEhvbGVzSGVscGVyLmNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMoY292ZXJlZENvbHVtbnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRyeWluZyB0byBmaW5kIHRoZSB3YXkgb3V0IGZyb20gdGhlIGxlZnQgc2lkZVxuICAgICAgICBsZXQgdGFyZ2V0WENhbmRpZGF0ZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGxldCB4ID0gaW5pdGlhbENvb3JkaW5hdGUueCAtIDE7IHggPj0gMDsgeC0tKSB7XG4gICAgICAgICAgICBpZiAoIUZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUoeCwgaW5pdGlhbENvb3JkaW5hdGUueSksIG1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBjaGVja0ZhbGxYID0geCArIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGggLSAxOyBjaGVja0ZhbGxYID49IHg7IGNoZWNrRmFsbFgtLSkge1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5oYXMoY2hlY2tGYWxsWCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsQ29sdW1uc0ZyZWVUb0ZhbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFsbENvbHVtbnNGcmVlVG9GYWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0cnlpbmcgdG8gZmluZCB0aGUgd2F5IG91dCBmcm9tIHRoZSByaWdodCBzaWRlXG4gICAgICAgIGZvciAobGV0IHggPSBpbml0aWFsQ29vcmRpbmF0ZS54ICsgMTsgeCA8IG1hdHJpeFswXS5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgaWYgKCFGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHgsIGluaXRpYWxDb29yZGluYXRlLnkpLCBtYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYWxsQ29sdW1uc0ZyZWVUb0ZhbGwgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgY2hlY2tGYWxsWCA9IHg7IGNoZWNrRmFsbFggPCB4ICsgZmlndXJlTWF0cml4WzBdLmxlbmd0aDsgY2hlY2tGYWxsWCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLmhhcyhjaGVja0ZhbGxYKSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxDb2x1bW5zRnJlZVRvRmFsbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWxsQ29sdW1uc0ZyZWVUb0ZhbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0Q292ZXJlZENvbHVtbnNYcyhtYXRyaXg6IGJvb2xlYW5bXVtdLCB0b1k/OiBudW1iZXIpOiBTZXQ8bnVtYmVyPiB7XG4gICAgICAgIHJldHVybiBIb2xlc0hlbHBlci5jb252ZXJ0Q292ZXJlZENvbHVtbnNUb1hzKFxuICAgICAgICAgICAgSG9sZXNIZWxwZXIuY29sbGVjdENvdmVyZWRDb2x1bW5zKG1hdHJpeCwgdG9ZKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMoY292ZXJlZENvbHVtbnM6IE1hcDxudW1iZXIsIG51bWJlcj4pOiBTZXQ8bnVtYmVyPiB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0KFsuLi5jb3ZlcmVkQ29sdW1ucy5rZXlzKCldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDQvNCw0L/RgyB4OiB5XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBjb2xsZWN0Q292ZXJlZENvbHVtbnMobWF0cml4OiBib29sZWFuW11bXSwgdG9ZPzogbnVtYmVyKTogTWFwPG51bWJlciwgbnVtYmVyPiB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1uczogTWFwPG51bWJlciwgbnVtYmVyPiA9IG5ldyBNYXAoKTtcbiAgICAgICAgbWF0cml4LnNvbWUoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnMuc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICh0b1kgIT09IHVuZGVmaW5lZCAmJiB5ID49IHRvWSlcbiAgICAgICAgICAgICAgICB8fCBjb3ZlcmVkQ29sdW1ucy5zaXplID09IG1hdHJpeFswXS5sZW5ndGg7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY292ZXJlZENvbHVtbnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uLy4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7SG9sZX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIG9yaWdpbmFsSG9sZXM6IEhvbGVbXSxcbiAgICAgICAgcHVibGljIG9yaWdpbmFsQ292ZXJlZENvbHVtbnM6IE1hcDxudW1iZXIsIG51bWJlcj4sXG4gICAgICAgIHB1YmxpYyBpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSxcbiAgICAgICAgcHVibGljIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1uczogTWFwPG51bWJlciwgbnVtYmVyPixcbiAgICAgICAgcHVibGljIHNxdWFzaGVkTGluZXNDb3VudDogbnVtYmVyLFxuICAgICkge31cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlcjtcbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi8uLi9UZXRyaXMvVXRpbHMvRW51bUhlbHBlclwiO1xuaW1wb3J0IHtGaWd1cmVUdXJuU3RhdGV9IGZyb20gXCIuLi8uLi9UZXRyaXMvRmlndXJlc1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uLy4uL1RldHJpcy9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBSZW5kZXJDb21tYW5kfSBmcm9tIFwiLi4vLi4vVGV0cmlzL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtEcm9wUGxhY2luZ1N0ZXAsIEZpZ3VyZVBsYWNpbmdSZXN1bHQsIEZpZ3VyZVBsYWNpbmdTdGVwLCBNb3ZlWFBsYWNpbmdTdGVwLCBNb3ZlWVBsYWNpbmdTdGVwLCBUdXJuUGxhY2luZ1N0ZXB9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7Q2FsY3VsYXRvckFnZ3JlZ2F0ZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvci9DYWxjdWxhdG9yQWdncmVnYXRlXCI7XG5pbXBvcnQge0hvbGVzSGVscGVyfSBmcm9tIFwiLi4vVXRpbHMvSG9sZXNIZWxwZXJcIjtcbmltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0fSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9yL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuXG5jbGFzcyBQbGFjZVJlc29sdmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuXG5jbGFzcyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvciBleHRlbmRzIFBsYWNlUmVzb2x2aW5nRXJyb3Ige1xufVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIHNjb3JlQ2FsY3VsYXRvcjogQ2FsY3VsYXRvckFnZ3JlZ2F0ZSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcmVzb2x2ZShnYW1lRGF0YTogR2FtZURhdGEpOiBGaWd1cmVQbGFjaW5nUmVzdWx0fHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzWzBdO1xuXG4gICAgICAgIGxldCBtYXhTY29yZSA9IC1JbmZpbml0eTtcbiAgICAgICAgbGV0IHRoZUJlc3RSZXN1bHQgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc3VsdChuZXcgTWFwKCksIFtdKTtcblxuICAgICAgICB0aGlzLnByb2Nlc3NTdGF0ZXMoZ2FtZURhdGEsIChpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlLCBzY29yZTogbnVtYmVyLCBwbGFjaW5nRGlyZWN0aW9uczogRmlndXJlUGxhY2luZ1N0ZXBbXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNjb3JlID4gbWF4U2NvcmUpIHtcbiAgICAgICAgICAgICAgICBtYXhTY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgICAgIHRoZUJlc3RSZXN1bHQgPSBuZXcgRmlndXJlUGxhY2luZ1Jlc3VsdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IE1hcChbW29yaWdpbmFsRmlndXJlLCBpbWFnaW5hYmxlRmlndXJlXV0pLFxuICAgICAgICAgICAgICAgICAgICBwbGFjaW5nRGlyZWN0aW9uc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gbGV0IGRlYnVnTW9kZSA9IHRydWU7XG4gICAgICAgIGxldCBkZWJ1Z01vZGUgPSAnZGVidWdNb2RlJyBpbiB3aW5kb3cgJiYgd2luZG93LmRlYnVnTW9kZTtcbiAgICAgICAgbGV0IGltYWdpbmFibGVGaWd1cmUgPSB0aGVCZXN0UmVzdWx0LmZpZ3VyZXNUYXJnZXRTdGF0ZXMuZ2V0KG9yaWdpbmFsRmlndXJlKTtcbiAgICAgICAgaWYgKGRlYnVnTW9kZSAmJiBpbWFnaW5hYmxlRmlndXJlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBmYWtlR2FtZURhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZURhdGEpO1xuICAgICAgICAgICAgaW1hZ2luYWJsZUZpZ3VyZS5jb2xvciA9ICcjZjAwJztcbiAgICAgICAgICAgIGZha2VHYW1lRGF0YS5mYWxsaW5nRmlndXJlcyA9IFtpbWFnaW5hYmxlRmlndXJlXTtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQoZmFrZUdhbWVEYXRhKSk7XG5cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1N0YXRlcyhnYW1lRGF0YSwgdW5kZWZpbmVkLCAoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSkgPT4ge1xuICAgICAgICAgICAgICAgIGltYWdpbmFibGVGaWd1cmUuY29sb3IgPSAnIzAwZic7XG4gICAgICAgICAgICAgICAgZmFrZUdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzID0gW2ltYWdpbmFibGVGaWd1cmVdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQoZmFrZUdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoZUJlc3RSZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzU3RhdGVzKFxuICAgICAgICBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXM/OiAoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSwgc2NvcmU6IG51bWJlciwgcGxhY2luZ0RpcmVjdGlvbnM6IEZpZ3VyZVBsYWNpbmdTdGVwW10pID0+IHZvaWQsXG4gICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzPzogKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUpID0+IHZvaWQsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRmlndXJlID0gZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXNbMF07XG5cbiAgICAgICAgbGV0IGVudW1zID0gRW51bUhlbHBlci5Ub0FycmF5KEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIHdoaWxlIChlbnVtc1swXSAhPT0gb3JpZ2luYWxGaWd1cmUudHVyblN0YXRlKSB7XG4gICAgICAgICAgICBlbnVtcy51bnNoaWZ0KGVudW1zLnBvcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWF0cmljZXM6IE1hcDxGaWd1cmVUdXJuU3RhdGUsIGJvb2xlYW5bXVtdPiA9IG5ldyBNYXAoKTtcbiAgICAgICAgbGV0IHN0cmluZ3lNYXRyaWNlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gICAgICAgIGVudW1zLmZvckVhY2godHVyblN0YXRlID0+IHtcbiAgICAgICAgICAgIGxldCBmaWd1cmVNYXRyaXggPSBvcmlnaW5hbEZpZ3VyZS5maWd1cmUuZ2V0VHVybih0dXJuU3RhdGUpO1xuICAgICAgICAgICAgbGV0IHN0cmluZ3lGaWd1cmVNYXRyaXggPSBmaWd1cmVNYXRyaXgubWFwKHJvdyA9PiByb3cubWFwKHZhbCA9PiB2YWwgPyBcIjFcIiA6IFwiMFwiKS5qb2luKCkpLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICBpZiAoIXN0cmluZ3lNYXRyaWNlcy5oYXMoc3RyaW5neUZpZ3VyZU1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBzdHJpbmd5TWF0cmljZXMuYWRkKHN0cmluZ3lGaWd1cmVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIG1hdHJpY2VzLnNldCh0dXJuU3RhdGUsIGZpZ3VyZU1hdHJpeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWF0cml4SG9sZXMgPSBIb2xlc0hlbHBlci5jb2xsZWN0SG9sZXMoZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxDb3ZlcmVkQ29sdW1ucyA9IEhvbGVzSGVscGVyLmNvbGxlY3RDb3ZlcmVkQ29sdW1ucyhnYW1lRGF0YS5tYXRyaXgpO1xuXG4gICAgICAgIG1hdHJpY2VzLmZvckVhY2goKGZpZ3VyZU1hdHJpeCwgdHVyblN0YXRlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMTsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IFt5LCBpbWFnaW5hYmxlTWF0cml4XSA9IHRoaXMuaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZURhdGEubWF0cml4LCBmaWd1cmVNYXRyaXgsIHgpO1xuICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoeCwgeSk7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFzaGVkTGluZXNDb3VudCA9IHRoaXMuc3F1YXNoTGluZXMoaW1hZ2luYWJsZU1hdHJpeCk7XG4gICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVGaWd1cmUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShvcmlnaW5hbEZpZ3VyZS5maWd1cmUsIGNvb3JkaW5hdGUsIHR1cm5TdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zID0gSG9sZXNIZWxwZXIuY29sbGVjdENvdmVyZWRDb2x1bW5zKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIGxldCBjYWxjdWxhdGVTY29yZVJlcXVlc3QgPSBuZXcgQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0KFxuICAgICAgICAgICAgICAgICAgICBnYW1lRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYXRyaXhIb2xlcyxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxDb3ZlcmVkQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZU1hdHJpeCxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICBzcXVhc2hlZExpbmVzQ291bnRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuc2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKGNhbGN1bGF0ZVNjb3JlUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbnMgPSB0aGlzLm1ha2VTaW1wbGVQbGFjaW5nU3RlcHMoaW1hZ2luYWJsZUZpZ3VyZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgb25BZnRlclNjb3JlQ2FsY3VsYXRlcyhpbWFnaW5hYmxlRmlndXJlLCBzY29yZSwgZGlyZWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBvcmlnaW5hbE1hdHJpeEhvbGVzLmZpbHRlcihob2xlID0+IGhvbGUuaXNPcGVuZWQgJiYgaG9sZS5jZWxscy5sZW5ndGggPiAwKS5mb3JFYWNoKGhvbGUgPT4ge1xuICAgICAgICAgICAgbGV0IHRvcFkgPSBnYW1lRGF0YS5zZXR0aW5ncy5maWVsZEhlaWdodCxcbiAgICAgICAgICAgICAgICBsZWZ0WCA9IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGgsXG4gICAgICAgICAgICAgICAgYm90dG9tWSA9IC0xLFxuICAgICAgICAgICAgICAgIHJpZ2h0WCA9IC0xO1xuICAgICAgICAgICAgaG9sZS5jZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgIHRvcFkgPSBNYXRoLm1pbih0b3BZLCBjZWxsLnkpO1xuICAgICAgICAgICAgICAgIGxlZnRYID0gTWF0aC5taW4obGVmdFgsIGNlbGwueCk7XG4gICAgICAgICAgICAgICAgYm90dG9tWSA9IE1hdGgubWF4KGJvdHRvbVksIGNlbGwueSk7XG4gICAgICAgICAgICAgICAgcmlnaHRYID0gTWF0aC5tYXgocmlnaHRYLCBjZWxsLngpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1hdHJpY2VzLmZvckVhY2goKGZpZ3VyZU1hdHJpeCwgdHVyblN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IE1hdGgubWF4KHRvcFkgLSBmaWd1cmVNYXRyaXgubGVuZ3RoICsgMSwgMCk7IHkgPD0gYm90dG9tWTsgeSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSBNYXRoLm1heChsZWZ0WCAtIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGggKyAxLCAwKTsgeCA8PSByaWdodFg7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvb3JkaW5hdGUgPSBuZXcgQ29vcmRpbmF0ZSh4LCB5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlRmlndXJlID0gbmV3IEZhbGxpbmdGaWd1cmUob3JpZ2luYWxGaWd1cmUuZmlndXJlLCBjb29yZGluYXRlLCB0dXJuU3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVTY29yZUNhbGN1bGF0ZXMoaW1hZ2luYWJsZUZpZ3VyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoZmlndXJlTWF0cml4LCBjb29yZGluYXRlLCBnYW1lRGF0YS5tYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbnMgPSB0aGlzLm1ha2VQdXNoSW5QbGFjaW5nU3RlcHMoZ2FtZURhdGEsIGltYWdpbmFibGVGaWd1cmUsIG9yaWdpbmFsQ292ZXJlZENvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVNYXRyaXggPSB0aGlzLmltYWdpbmVGaWd1cmVQbGFjaW5nKGdhbWVEYXRhLm1hdHJpeCwgZmlndXJlTWF0cml4LCBjb29yZGluYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNxdWFzaGVkTGluZXNDb3VudCA9IHRoaXMuc3F1YXNoTGluZXMoaW1hZ2luYWJsZU1hdHJpeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMgPSBIb2xlc0hlbHBlci5jb2xsZWN0Q292ZXJlZENvbHVtbnMoaW1hZ2luYWJsZU1hdHJpeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWxjdWxhdGVTY29yZVJlcXVlc3QgPSBuZXcgQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1hdHJpeEhvbGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxDb3ZlcmVkQ29sdW1ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVNYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcXVhc2hlZExpbmVzQ291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gdGhpcy5zY29yZUNhbGN1bGF0b3IuY2FsY3VsYXRlU2NvcmUoY2FsY3VsYXRlU2NvcmVSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMoaW1hZ2luYWJsZUZpZ3VyZSwgc2NvcmUsIGRpcmVjdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3F1YXNoTGluZXMobWF0cml4OiBib29sZWFuW11bXSk6IG51bWJlciB7XG4gICAgICAgIGxldCBsaW5lc1RvU3F1YXNoOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBsZXQgY2FuQmVTcXVhc2hlZCA9IHJvdy5ldmVyeShjZWxsID0+IGNlbGwpO1xuICAgICAgICAgICAgaWYgKGNhbkJlU3F1YXNoZWQpIHtcbiAgICAgICAgICAgICAgICBsaW5lc1RvU3F1YXNoLnB1c2goeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgICBsaW5lc1RvU3F1YXNoLmZvckVhY2goeSA9PiB7XG4gICAgICAgICAgICBtYXRyaXguc3BsaWNlKHksIDEpO1xuICAgICAgICAgICAgbWF0cml4LnVuc2hpZnQobmV3IEFycmF5KG1hdHJpeFswXS5sZW5ndGgpLmZpbGwoZmFsc2UpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaW5lc1RvU3F1YXNoLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGltYWdpbmVGaWd1cmVEcm9wKGdhbWVNYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdLCB0YXJnZXRYOiBudW1iZXIpOiBbbnVtYmVyLCBib29sZWFuW11bXV0ge1xuICAgICAgICBsZXQgdGFyZ2V0WSA9IC1maWd1cmVNYXRyaXgubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoZmlndXJlTWF0cml4LCBuZXcgQ29vcmRpbmF0ZSh0YXJnZXRYLCB0YXJnZXRZICsgMSksIGdhbWVNYXRyaXgpKSB7XG4gICAgICAgICAgICB0YXJnZXRZKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHRhcmdldFksXG4gICAgICAgICAgICB0aGlzLmltYWdpbmVGaWd1cmVQbGFjaW5nKGdhbWVNYXRyaXgsIGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUodGFyZ2V0WCwgdGFyZ2V0WSkpLFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW1hZ2luZUZpZ3VyZVBsYWNpbmcoZ2FtZU1hdHJpeDogYm9vbGVhbltdW10sIGZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10sIHRhcmdldENvb3JkaW5hdGU6IENvb3JkaW5hdGUpOiBib29sZWFuW11bXSB7XG4gICAgICAgIGxldCBpbWFnaW5hYmxlTWF0cml4OiBib29sZWFuW11bXSA9IHN0cnVjdHVyZWRDbG9uZShnYW1lTWF0cml4KTtcbiAgICAgICAgZmlndXJlTWF0cml4LmZvckVhY2goKHJvdywgZmlndXJlWSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgZmlndXJlWCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxZID0gdGFyZ2V0Q29vcmRpbmF0ZS55ICsgZmlndXJlWTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWCA9IHRhcmdldENvb3JkaW5hdGUueCArIGZpZ3VyZVg7XG4gICAgICAgICAgICAgICAgaWYgKHJlYWxZIGluIGltYWdpbmFibGVNYXRyaXhcbiAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggaW4gaW1hZ2luYWJsZU1hdHJpeFtyZWFsWV1cbiAgICAgICAgICAgICAgICAgICAgJiYgdmFsXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdpbmFibGVNYXRyaXhbcmVhbFldW3JlYWxYXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpbWFnaW5hYmxlTWF0cml4O1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZVB1c2hJblBsYWNpbmdTdGVwcyhnYW1lRGF0YTogR2FtZURhdGEsIGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUsIG9yaWdpbmFsQ292ZXJlZENvbHVtbnM6IE1hcDxudW1iZXIsIG51bWJlcj4pOiBGaWd1cmVQbGFjaW5nU3RlcFtdIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgbGV0IGZpZ3VyZU1hdHJpeCA9IGltYWdpbmFibGVGaWd1cmUuZmlndXJlLmdldFR1cm4oaW1hZ2luYWJsZUZpZ3VyZS50dXJuU3RhdGUpO1xuICAgICAgICBsZXQgdGFyZ2V0WCA9IEhvbGVzSGVscGVyLmZpbmRUaGVXYXlPdXRGcm9tSG9sZShnYW1lRGF0YS5tYXRyaXgsIGltYWdpbmFibGVGaWd1cmUucG9zaXRpb24sIG9yaWdpbmFsQ292ZXJlZENvbHVtbnMsIGZpZ3VyZU1hdHJpeCk7XG4gICAgICAgIGlmICh0YXJnZXRYID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgbmV3IFR1cm5QbGFjaW5nU3RlcChpbWFnaW5hYmxlRmlndXJlLnR1cm5TdGF0ZSwgdHJ1ZSksXG4gICAgICAgICAgICBuZXcgTW92ZVhQbGFjaW5nU3RlcCh0YXJnZXRYLCBmYWxzZSksXG4gICAgICAgICAgICBuZXcgTW92ZVlQbGFjaW5nU3RlcChpbWFnaW5hYmxlRmlndXJlLnBvc2l0aW9uLnkpLFxuICAgICAgICAgICAgbmV3IE1vdmVYUGxhY2luZ1N0ZXAoaW1hZ2luYWJsZUZpZ3VyZS5wb3NpdGlvbi54LCB0cnVlKSxcbiAgICAgICAgICAgIG5ldyBEcm9wUGxhY2luZ1N0ZXAoKSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1ha2VTaW1wbGVQbGFjaW5nU3RlcHMoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSk6IEZpZ3VyZVBsYWNpbmdTdGVwW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgbmV3IFR1cm5QbGFjaW5nU3RlcChpbWFnaW5hYmxlRmlndXJlLnR1cm5TdGF0ZSwgdHJ1ZSksXG4gICAgICAgICAgICBuZXcgTW92ZVhQbGFjaW5nU3RlcChpbWFnaW5hYmxlRmlndXJlLnBvc2l0aW9uLngsIHRydWUpLFxuICAgICAgICAgICAgbmV3IERyb3BQbGFjaW5nU3RlcCgpLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0LCBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2V9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgQ2FsY3VsYXRvckFnZ3JlZ2F0ZSBpbXBsZW1lbnRzIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY2FsY3VsYXRvcnM6IFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZVtdXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0b3JzLnJlZHVjZSgoc2NvcmUsIGNhbGN1bGF0b3IpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzY29yZSArIGNhbGN1bGF0b3IuY2FsY3VsYXRlU2NvcmUocmVxdWVzdCk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q2FsY3VsYXRlU2NvcmVSZXF1ZXN0LCBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2V9IGZyb20gXCIuLi9TY29yZUNhbGN1bGF0b3JJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIFNxdWFzaGVkUm93c0NhbGN1bGF0b3IgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiByZXF1ZXN0LnNxdWFzaGVkTGluZXNDb3VudCAqIDU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDYWxjdWxhdGVTY29yZVJlcXVlc3QsIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uLy4uLy4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7SG9sZX0gZnJvbSBcIi4uLy4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgRmlsbGFibGVDZWxsc0NhbGN1bGF0b3IgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGZpZWxkSGVpZ2h0ID0gcmVxdWVzdC5nYW1lRGF0YS5zZXR0aW5ncy5maWVsZEhlaWdodDtcbiAgICAgICAgY29uc3QgZmllbGRXaWR0aCA9IHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aDtcbiAgICAgICAgY29uc3QgW2ZpbGxhYmxlQ2VsbHNDb3VudCwgZmlsbGFibGVIZWlnaHRdID0gdGhpcy5jYWxjdWxhdGVGaWxsYWJsZVNwYWNlKHJlcXVlc3QuaW1hZ2luYWJsZU1hdHJpeCwgZmllbGRXaWR0aCk7XG4gICAgICAgIGxldCBmaWxsYWJsZUNlbGxzU2NvcmUgPSAwO1xuICAgICAgICBpZiAoZmlsbGFibGVIZWlnaHQgPiA1KSB7XG4gICAgICAgICAgICBmaWxsYWJsZUNlbGxzU2NvcmUgPSAtZmlsbGFibGVDZWxsc0NvdW50ICogTWF0aC5wb3coZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUNlbGxzQ291bnQgLyAoZmllbGRIZWlnaHQgKiBmaWVsZFdpZHRoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGxhYmxlQ2VsbHNTY29yZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UobWF0cml4OiBib29sZWFuW11bXSwgZmllbGRXaWR0aDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGxldCBjb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICBsZXQgZmlsbGFibGVDZWxsc0NvdW50ID0gMDtcbiAgICAgICAgbGV0IGZpbGxhYmxlSGVpZ2h0ID0gMDtcbiAgICAgICAgbWF0cml4LmV2ZXJ5KHJvdyA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWwgJiYgY292ZXJlZENvbHVtbnMuc2l6ZSA+IDAgJiYgIWNvdmVyZWRDb2x1bW5zLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUNlbGxzQ291bnQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5zaXplIDwgZmllbGRXaWR0aCkge1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkQ29sdW1ucy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZUhlaWdodCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbZmlsbGFibGVDZWxsc0NvdW50LCBmaWxsYWJsZUhlaWdodF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDYWxjdWxhdGVTY29yZVJlcXVlc3QsIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuXG5leHBvcnQgY2xhc3MgSG9sZXNWMUNhbGN1bGF0b3IgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IFtob2xlc0NvdW50LCBob2xlc0NvdmVyZWRIZWlnaHRdID0gdGhpcy5jYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQocmVxdWVzdC5pbWFnaW5hYmxlTWF0cml4LCByZXF1ZXN0LmdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IGhvbGVzQ291bnREZWNyZWFzZSA9IHJlcXVlc3Qub3JpZ2luYWxIb2xlcy5sZW5ndGggLSBob2xlc0NvdW50O1xuICAgICAgICBsZXQgaG9sZXNTY29yZTogbnVtYmVyO1xuICAgICAgICBpZiAoaG9sZXNDb3ZlcmVkSGVpZ2h0ID09PSAwIHx8IGhvbGVzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIGhvbGVzU2NvcmUgPSAoaG9sZXNDb3VudERlY3JlYXNlID4gMCA/IGhvbGVzQ291bnREZWNyZWFzZSAqIDE1MCA6IGhvbGVzQ291bnREZWNyZWFzZSAqIDcwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhvbGVzU2NvcmUgPSAoaG9sZXNDb3VudERlY3JlYXNlID4gMCA/IGhvbGVzQ291bnREZWNyZWFzZSAqIDE1MCA6IGhvbGVzQ291bnREZWNyZWFzZSAqIDcwKVxuICAgICAgICAgICAgICAgIC0gaG9sZXNDb3ZlcmVkSGVpZ2h0ICogTWF0aC5wb3coaG9sZXNDb3ZlcmVkSGVpZ2h0LCBob2xlc0NvdmVyZWRIZWlnaHQgLyAocmVxdWVzdC5nYW1lRGF0YS5zZXR0aW5ncy5maWVsZEhlaWdodCAqIGhvbGVzQ291bnQpKSAqIDU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhvbGVzU2NvcmU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQoaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10sIHJlYWxNYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGNvbnN0IFtvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSwgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZXSA9IHRoaXMuY2FsY3VsYXRlVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWShyZWFsTWF0cml4KTtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zWXMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPjtcbiAgICAgICAgbGV0IGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gPSAwO1xuICAgICAgICBsZXQgaG9sZXNDb3VudCA9IDA7XG4gICAgICAgIGltYWdpbmFibGVNYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAmJiAhY292ZXJlZENvbHVtbnNZcy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnNZcy5zZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb3ZlcmVkWSA9IGNvdmVyZWRDb2x1bW5zWXMuZ2V0KHgpO1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkWSAhPT0gdW5kZWZpbmVkICYmICF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxUaGVIaWdoZXN0SG9sZVkgIT09IHVuZGVmaW5lZCAmJiBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkgPCBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gKz0geSAtIGNvdmVyZWRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3ZlcmVkWSA8IG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gKz0gb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZIC0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbaG9sZXNDb3VudCwgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bV07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKG1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyfHVuZGVmaW5lZCwgbnVtYmVyfHVuZGVmaW5lZF0ge1xuICAgICAgICBsZXQgdGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHRoZUhpZ2hlc3RIb2xlWSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zWXMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPjtcbiAgICAgICAgbWF0cml4LnNvbWUoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5zb21lKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmICFjb3ZlcmVkQ29sdW1uc1lzLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1uc1lzLnNldCh4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvdmVyZWRZID0gY292ZXJlZENvbHVtbnNZcy5nZXQoeCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRZICE9PSB1bmRlZmluZWQgJiYgIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGVIaWdoZXN0SG9sZVkgPSB5O1xuICAgICAgICAgICAgICAgICAgICB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZID0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbdGhlSGlnaGVzdEhvbGVZLCB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZXTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhbGN1bGF0ZVNjb3JlUmVxdWVzdCwgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlfSBmcm9tIFwiLi4vU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vLi4vLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtIb2xlfSBmcm9tIFwiLi4vLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWxsZWRIZWlnaHRDYWxjdWxhdG9yIGltcGxlbWVudHMgU2NvcmVDYWxjdWxhdG9ySW50ZXJmYWNlIHtcbiAgICBwdWJsaWMgY2FsY3VsYXRlU2NvcmUocmVxdWVzdDogQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0KTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jYWxjdWxhdGVIZWlnaHQocmVxdWVzdC5pbWFnaW5hYmxlTWF0cml4KTtcbiAgICAgICAgcmV0dXJuIC1oZWlnaHQgKiBNYXRoLnBvdyhoZWlnaHQsIGhlaWdodCAvIHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQpICogMztcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhlaWdodChtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxvd2VzdEVtcHR5WSA9IC0xO1xuICAgICAgICBtYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvdy5ldmVyeSh2YWwgPT4gIXZhbCkpIHtcbiAgICAgICAgICAgICAgICBsb3dlc3RFbXB0eVkgPSB5O1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWF0cml4Lmxlbmd0aCAtIGxvd2VzdEVtcHR5WSAtIDE7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDYWxjdWxhdGVTY29yZVJlcXVlc3QsIFNjb3JlQ2FsY3VsYXRvckludGVyZmFjZX0gZnJvbSBcIi4uL1Njb3JlQ2FsY3VsYXRvckludGVyZmFjZVwiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uLy4uLy4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7SG9sZX0gZnJvbSBcIi4uLy4uL0NvbW1vblwiO1xuXG5leHBvcnQgY2xhc3MgVHVubmVsc0NhbGN1bGF0b3IgaW1wbGVtZW50cyBTY29yZUNhbGN1bGF0b3JJbnRlcmZhY2Uge1xuICAgIGNhbGN1bGF0ZVNjb3JlKHJlcXVlc3Q6IENhbGN1bGF0ZVNjb3JlUmVxdWVzdCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IFt0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzQ291bnRdID0gdGhpcy5jYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkKHJlcXVlc3QuaW1hZ2luYWJsZU1hdHJpeCwgcmVxdWVzdC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBsZXQgdHVubmVsc1Njb3JlOiBudW1iZXI7XG4gICAgICAgIGlmICh0dW5uZWxzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHR1bm5lbHNTY29yZSA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0dW5uZWxzU2NvcmUgPSAtdHVubmVsc0NvdW50ICogNzBcbiAgICAgICAgICAgICAgICAtIHR1bm5lbHNTdW1IZWlnaHQgKiBNYXRoLnBvdyh0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzU3VtSGVpZ2h0IC8gKHJlcXVlc3QuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQgKiB0dW5uZWxzQ291bnQpKSAqIDc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR1bm5lbHNTY29yZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQoaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10sIHJlYWxNYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGxldCByZWFsQ292ZXJlZENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICAgICAgcmVhbE1hdHJpeC5ldmVyeSgocm93KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZWFsQ292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGxldCB0dW5uZWxzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj47XG4gICAgICAgIGNvbnN0IGZpZWxkV2lkdGggPSBpbWFnaW5hYmxlTWF0cml4WzBdLmxlbmd0aDtcbiAgICAgICAgaW1hZ2luYWJsZU1hdHJpeC5ldmVyeSgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuYWRkKHgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdmFsXG4gICAgICAgICAgICAgICAgICAgICYmICFpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHgpXG4gICAgICAgICAgICAgICAgICAgICYmICFyZWFsQ292ZXJlZENvbHVtbnMuaGFzKHgpXG4gICAgICAgICAgICAgICAgICAgICYmICh4ID09PSAwIHx8IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeCAtIDEpKVxuICAgICAgICAgICAgICAgICAgICAmJiAoeCA9PT0gZmllbGRXaWR0aCAtIDEgfHwgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4ICsgMSkpXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHR1bm5lbHMuc2V0KHgsICh0dW5uZWxzLmdldCh4KSB8fCAwKSArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5zaXplIDwgZmllbGRXaWR0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCB0dW5uZWxzU3VtSGVpZ2h0ID0gMDtcbiAgICAgICAgbGV0IHR1bm5lbHNDb3VudCA9IDA7XG4gICAgICAgIHR1bm5lbHMuZm9yRWFjaChoZWlnaHQgPT4ge1xuICAgICAgICAgICAgaWYgKGhlaWdodCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgdHVubmVsc1N1bUhlaWdodCArPSBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgdHVubmVsc0NvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gW3R1bm5lbHNTdW1IZWlnaHQsIHR1bm5lbHNDb3VudF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGaWd1cmVzU3Bhd25lZEV2ZW50fSBmcm9tIFwiLi4vVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdSZXNvbHZlcn0gZnJvbSBcIi4vRmlndXJlUGxhY2luZ1Jlc29sdmVyL0ZpZ3VyZVBsYWNpbmdSZXNvbHZlclwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUGVyZm9ybWVySW50ZXJmYWNlfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIFRldHJpc1NvbHZlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZmlndXJlUGxhY2luZ1Jlc29sdmVyOiBGaWd1cmVQbGFjaW5nUmVzb2x2ZXIsXG4gICAgICAgIHByaXZhdGUgZmlndXJlUGxhY2luZ1BlcmZvcm1lcjogRmlndXJlUGxhY2luZ1BlcmZvcm1lckludGVyZmFjZSxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GaWd1cmVzU3Bhd25lZCwgdGhpcy5vbkZpZ3VyZXNTcGF3bmVkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GaWd1cmVzU3Bhd25lZChldmVudDogRmlndXJlc1NwYXduZWRFdmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyA9IHRoaXMuZmlndXJlUGxhY2luZ1Jlc29sdmVyLnJlc29sdmUoZXZlbnQuZ2FtZURhdGEpO1xuICAgICAgICB0aGlzLmZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIucGxhY2UoZXZlbnQuZ2FtZURhdGEsIHRhcmdldEZhbGxpbmdGaWd1cmVzU3RhdGVzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nUmVzdWx0fSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBQbGFjaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7fVxuZXhwb3J0IGNsYXNzIEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yIGV4dGVuZHMgUGxhY2luZ0Vycm9yIHt9XG5leHBvcnQgY2xhc3MgSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuZXhwb3J0IGNsYXNzIE5vdFN1cHBvcnRlZERpcmVjdGlvblN0ZXBFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2Uge1xuICAgIC8qKlxuICAgICAqIEB0aHJvd3MgUGxhY2luZ0Vycm9yXG4gICAgICovXG4gICAgcGxhY2UoZ2FtZURhdGE6IEdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0PzogRmlndXJlUGxhY2luZ1Jlc3VsdCk6IHZvaWQ7XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtcbiAgICBDb21tYW5kQnVzLFxuICAgIERyb3BGaWd1cmVzQ29tbWFuZCxcbiAgICBNb3ZlRG93bkNvbW1hbmQsXG4gICAgTW92ZUxlZnRDb21tYW5kLFxuICAgIE1vdmVSaWdodENvbW1hbmQsXG4gICAgTW92ZVRvWENvbW1hbmQsXG4gICAgTW92ZVRvWUNvbW1hbmQsXG4gICAgVHVybkNsb2Nrd2lzZUNvbW1hbmQsXG4gICAgVHVyblRvU3RhdGVDb21tYW5kXG59IGZyb20gXCIuLi8uLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0Ryb3BQbGFjaW5nU3RlcCwgRmlndXJlUGxhY2luZ1Jlc3VsdCwgTW92ZVhQbGFjaW5nU3RlcCwgTW92ZVlQbGFjaW5nU3RlcCwgVHVyblBsYWNpbmdTdGVwfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2UsIEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yLCBJbmNvbnNpc3RlbnRUYXJnZXRTdGF0ZUVycm9yLCBOb3RTdXBwb3J0ZWREaXJlY3Rpb25TdGVwRXJyb3J9IGZyb20gXCIuL0ZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIEluc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1BlcmZvcm1lckludGVyZmFjZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcGxhY2UoZ2FtZURhdGE6IEdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0PzogRmlndXJlUGxhY2luZ1Jlc3VsdCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucGxhY2VJbXBsKGdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0KSwgMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwbGFjZUltcGwoZ2FtZURhdGE6IEdhbWVEYXRhLCBwbGFjaW5nUmVzdWx0PzogRmlndXJlUGxhY2luZ1Jlc3VsdCkge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBsYWNpbmdSZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRmlndXJlID0gZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXNbMF07XG4gICAgICAgIGNvbnN0IHRhcmdldEZpZ3VyZSA9IHBsYWNpbmdSZXN1bHQuZmlndXJlc1RhcmdldFN0YXRlcy5nZXQob3JpZ2luYWxGaWd1cmUpO1xuICAgICAgICBpZiAoIXRhcmdldEZpZ3VyZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsRmlndXJlLmZpZ3VyZSAhPT0gdGFyZ2V0RmlndXJlLmZpZ3VyZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEluY29uc2lzdGVudFRhcmdldFN0YXRlRXJyb3IoXCJCb3RoIG9mIHRoZSBvcmlnaW5hbCBhbmQgdGhlIHRhcmdldCBmYWxsaW5nIGZpZ3VyZXMgbXVzdCBoYXZlIHRoZSBzYW1lIGZpZ3VyZSBpbiBpdC5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBwbGFjaW5nUmVzdWx0LnBsYWNpbmdTdGVwcy5mb3JFYWNoKHN0ZXAgPT4ge1xuICAgICAgICAgICAgaWYgKHN0ZXAgaW5zdGFuY2VvZiBUdXJuUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBUdXJuVG9TdGF0ZUNvbW1hbmQoZ2FtZURhdGEsIHN0ZXAudGFyZ2V0KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBNb3ZlWFBsYWNpbmdTdGVwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVRvWENvbW1hbmQoZ2FtZURhdGEsIHN0ZXAudGFyZ2V0KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBNb3ZlWVBsYWNpbmdTdGVwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVRvWUNvbW1hbmQoZ2FtZURhdGEsIHN0ZXAudGFyZ2V0KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBEcm9wUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBEcm9wRmlndXJlc0NvbW1hbmQoZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZERpcmVjdGlvblN0ZXBFcnJvcihcIlVua25vd24gc3RlcCBcIiArIHN0ZXAuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXN9IGZyb20gXCIuLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1c30gZnJvbSBcIi4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1Jlc29sdmVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUmVzb2x2ZXIvRmlndXJlUGxhY2luZ1Jlc29sdmVyXCI7XG5pbXBvcnQge0FuaW1hdGVkRmlndXJlUGxhY2luZ1BlcmZvcm1lcn0gZnJvbSBcIi4vRmlndXJlUGxhY2luZ1BlcmZvcm1lci9BbmltYXRlZEZpZ3VyZVBsYWNpbmdQZXJmb3JtZXJcIjtcbmltcG9ydCB7Q2FsY3VsYXRvckFnZ3JlZ2F0ZX0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yL0NhbGN1bGF0b3JBZ2dyZWdhdGVcIjtcbmltcG9ydCB7U3F1YXNoZWRSb3dzQ2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yL1NxdWFzaGVkUm93cy9TcXVhc2hlZFJvd3NDYWxjdWxhdG9yXCI7XG5pbXBvcnQge0ZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3IvRmlsbGFibGVDZWxscy9GaWxsYWJsZUNlbGxzQ2FsY3VsYXRvclwiO1xuaW1wb3J0IHtIb2xlc1YxQ2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yL0hvbGVzL0hvbGVzVjFDYWxjdWxhdG9yXCI7XG5pbXBvcnQge0hvbGVzVjJDYWxjdWxhdG9yfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3IvSG9sZXMvSG9sZXNWMkNhbGN1bGF0b3JcIjtcbmltcG9ydCB7RmlsbGVkSGVpZ2h0Q2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yL0ZpbGxlZEhlaWdodC9GaWxsZWRIZWlnaHRDYWxjdWxhdG9yXCI7XG5pbXBvcnQge1R1bm5lbHNDYWxjdWxhdG9yfSBmcm9tIFwiLi9TY29yZUNhbGN1bGF0b3IvVHVubmVscy9UdW5uZWxzQ2FsY3VsYXRvclwiO1xuaW1wb3J0IHtUZXRyaXNTb2x2ZXJ9IGZyb20gXCIuL1RldHJpc1NvbHZlclwiO1xuaW1wb3J0IHtMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuLi9UZXRyaXMvVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0luc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUGVyZm9ybWVyL0luc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBUZXRyaXNTb2x2ZXJGYWNhZGUge1xuICAgIHN0YXRpYyBpbml0U29sdmVyKFxuICAgICAgICBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGV0cmlzU29sdmVyKFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgbmV3IEZpZ3VyZVBsYWNpbmdSZXNvbHZlcihcbiAgICAgICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgICAgIG5ldyBDYWxjdWxhdG9yQWdncmVnYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IEZpbGxhYmxlQ2VsbHNDYWxjdWxhdG9yKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBGaWxsZWRIZWlnaHRDYWxjdWxhdG9yKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBIb2xlc1YxQ2FsY3VsYXRvcigpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgU3F1YXNoZWRSb3dzQ2FsY3VsYXRvcigpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVHVubmVsc0NhbGN1bGF0b3IoKSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICAvLyBuZXcgQW5pbWF0ZWRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyKFxuICAgICAgICAgICAgLy8gICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICAvLyAgICAgbmV3IExldmVsQmFzZWRUaW1pbmdzSGFuZGxlcigxMDAsIDAuOSksXG4gICAgICAgICAgICAvLyApLFxuICAgICAgICAgICAgbmV3IEluc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyKGNvbW1hbmRCdXMpLFxuICAgICAgICApXG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1c30gZnJvbSBcIi4vVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXN9IGZyb20gXCIuL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7VGV0cmlzRmFjYWRlfSBmcm9tICcuL1RldHJpcy9UZXRyaXNGYWNhZGUnXG5pbXBvcnQge1RldHJpc1NvbHZlckZhY2FkZX0gZnJvbSBcIi4vVGV0cmlzU29sdmVyL1RldHJpc1NvbHZlckZhY2FkZVwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IGV2ZW50QnVzID0gbmV3IEV2ZW50QnVzKCk7XG4gICAgY29uc3QgY29tbWFuZEJ1cyA9IG5ldyBDb21tYW5kQnVzKCk7XG4gICAgbGV0IHRldHJpcyA9IG5ldyBUZXRyaXNGYWNhZGUoZXZlbnRCdXMsIGNvbW1hbmRCdXMpO1xuICAgIFRldHJpc1NvbHZlckZhY2FkZS5pbml0U29sdmVyKGV2ZW50QnVzLCBjb21tYW5kQnVzKTtcblxuICAgIHRldHJpcy5zdGFydCgpO1xufSk7XG4iXSwibmFtZXMiOlsiRXZlbnRUeXBlIiwiQ29tbWFuZFR5cGUiLCJGaWd1cmVUdXJuU3RhdGUiLCJGYWxsVGlja1Byb2Nlc3NlZEV2ZW50IiwiY29uc3RydWN0b3IiLCJnYW1lRGF0YSIsInRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzIiwic3F1YXNoZWRMaW5lcyIsImRyb3BwZWRMaW5lcyIsImdldEV2ZW50VHlwZSIsIkZhbGxpbmdUaWNrUHJvY2Vzc2VkIiwiR2FtZU92ZXJFdmVudCIsIkdhbWVPdmVyIiwiRmlndXJlc01vdmVkRXZlbnQiLCJGaWd1cmVzTW92ZWQiLCJGaWd1cmVzU3Bhd25lZEV2ZW50IiwibmV3RmlndXJlcyIsIkZpZ3VyZXNTcGF3bmVkIiwiRXZlbnRCdXMiLCJoYW5kbGVycyIsIk1hcCIsIm9uIiwiZXZlbnQiLCJoYW5kbGVyIiwidW5pcXVlIiwidGhpcyIsImdldCIsInNvbWUiLCJib3VuZEhhbmRsZXIiLCJwdXNoIiwic2V0Iiwib2ZmIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmlyZSIsImV2ZW50UGF5bG9hZCIsImZvckVhY2giLCJJbml0R2FtZUNvbW1hbmQiLCJnZXRDb21tYW5kVHlwZSIsIkluaXRHYW1lIiwiUmVzdW1lR2FtZUNvbW1hbmQiLCJSZXN1bWVHYW1lIiwiUGF1c2VHYW1lQ29tbWFuZCIsIlBhdXNlR2FtZSIsIkZpZ3VyZXNGYWxsVGlja0NvbW1hbmQiLCJGaWd1cmVzRmFsbFRpY2siLCJHYW1lT3ZlckNvbW1hbmQiLCJSZW5kZXJDb21tYW5kIiwiUmVuZGVyIiwiTW92ZUxlZnRDb21tYW5kIiwiTW92ZUxlZnQiLCJNb3ZlUmlnaHRDb21tYW5kIiwiTW92ZVJpZ2h0IiwiVHVybkNsb2Nrd2lzZUNvbW1hbmQiLCJUdXJuQ2xvY2t3aXNlIiwiTW92ZURvd25Db21tYW5kIiwiTW92ZURvd24iLCJNb3ZlVG9YQ29tbWFuZCIsIngiLCJNb3ZlVG9YIiwiTW92ZVRvWUNvbW1hbmQiLCJ5IiwiTW92ZVRvWSIsIlR1cm5Ub1N0YXRlQ29tbWFuZCIsInR1cm5TdGF0ZSIsIlR1cm5Ub1N0YXRlIiwiRHJvcEZpZ3VyZXNDb21tYW5kIiwiRmlndXJlc0ZhbGxEb3duIiwiQ29tbWFuZEJ1cyIsImFkZEhhbmRsZXIiLCJyZW1vdmVIYW5kbGVyIiwicnVuIiwicGF5bG9hZCIsIkFic3RyYWN0RmlndXJlIiwiZ2V0VHVybiIsImZpZ3VyZVR1cm5TdGF0ZSIsIk9uZSIsImdldEZpcnN0VHVybiIsIlR3byIsImdldFNlY29uZFR1cm4iLCJUaHJlZSIsImdldFRoaXJkVHVybiIsIkZvdXIiLCJnZXRGb3J0aFR1cm4iLCJTaW1wbHlSb3RhdGFibGVGaWd1cmUiLCJnZXROb3JtYWxpemVkRmlndXJlIiwiZmlndXJlIiwiZ2V0RmlndXJlIiwidGhlTG9uZ2VzdFJvd1NpemUiLCJyZWR1Y2UiLCJwcmV2aW91cyIsImN1cnJlbnQiLCJNYXRoIiwibWF4IiwibGVuZ3RoIiwibWFwIiwicm93Iiwib3JpZ2luYWxMZW5ndGgiLCJmaWxsIiwib3JpZ2luYWxGaWd1cmUiLCJ0dXJuZWRGaWd1cmUiLCJvcmlnaW5hbEZpZ3VyZUhlaWdodCIsIm9yaWdpbmFsRmlndXJlV2lkdGgiLCJBcnJheSIsInJldmVyc2UiLCJURmlndXJlIiwic3BsaXQiLCJpdGVtIiwiUmlnaHRMRmlndXJlIiwiTGVmdExGaWd1cmUiLCJTcXVhcmVGaWd1cmUiLCJTdGlja0ZpZ3VyZSIsIkxaRmlndXJlIiwiUlpGaWd1cmUiLCJDb29yZGluYXRlIiwiRmFsbGluZ0ZpZ3VyZSIsInBvc2l0aW9uIiwiY29sb3IiLCJHYW1lU2V0dGluZ3MiLCJmaWVsZFdpZHRoIiwiZmllbGRIZWlnaHQiLCJmaWd1cmVzIiwiU3RhdHMiLCJmaWd1cmVzRmFsbGVuIiwibGluZXNTcXVhc2hlZCIsIkdhbWVEYXRhIiwiaXNJbml0aWFsaXplZCIsImlzR2FtZU92ZXIiLCJmYWxsaW5nRmlndXJlcyIsIm1hdHJpeCIsIm5leHRUaWNrVGltZW91dElkIiwic2V0VGltZW91dCIsInNldHRpbmdzIiwibGV2ZWwiLCJzY29yZSIsImNvbWJvIiwic3RhdHMiLCJzdGF0aWMiLCJ3aWR0aCIsImhlaWdodCIsIl8iLCJHYW1lQ29udHJvbGxlciIsInRpbWluZ3NIYW5kbGVyIiwiZXZlbnRCdXMiLCJjb21tYW5kQnVzIiwibWFrZVNpbXBsZSIsImluaXRHYW1lSGFuZGxlciIsImJpbmQiLCJyZXN1bWVHYW1lSGFuZGxlciIsInBhdXNlR2FtZUhhbmRsZXIiLCJnYW1lT3ZlckhhbmRsZXIiLCJjb21tYW5kIiwib25GYWxsVGlja1Byb2Nlc3NlZCIsImZhbGxUaWNrIiwiY2xlYXJUaW1lb3V0IiwiZ2V0RGVsYXlGb3JOZXh0VGlja01zIiwiRmlndXJlUGxhY2luZ0NoZWNrZXIiLCJ0YXJnZXRGaWd1cmVNYXRyaXgiLCJ0YXJnZXRQb3NpdGlvbiIsImV2ZXJ5IiwidmFsdWUiLCJyZWFsWSIsInJlYWxYIiwiVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzIiwiZmlsbGVkIiwiZmlsbGVkR2FtZU92ZXIiLCJlbXB0eSIsIlRhYmxlUmVuZGVyZXJTZXR0aW5ncyIsImNvbnRhaW5lckVsZW1lbnQiLCJyZW5kZXJQcm9qZWN0aW9uRmlndXJlcyIsIm1hdHJpeENlbGxDb2xvcnMiLCJmYWxsaW5nRmlndXJlQ2VsbENvbG9ycyIsInByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzIiwiQ2VsbENvbG9ycyIsIlRhYmxlUmVuZGVyZXIiLCJyZW5kZXJTZXR0aW5ncyIsImNlbGxzSHRtbEVsZW1lbnRzTWFwIiwiaW5pdEhhbmRsZXIiLCJyZW5kZXJDb21tYW5kSGFuZGxlciIsInRhYmxlIiwiY3JlYXRlSHRtbEVsZW1lbnQiLCJjZWxsIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJzY29yZURpc3BsYXkiLCJvbkdhbWVPdmVyIiwib25GaWd1cmVzTW92ZWQiLCJyZW5kZXJTdGF0ZSIsInJlcGFpbnRNYXRyaXhDZWxscyIsInJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbiIsInJlbmRlckZhbGxpbmdGaWd1cmVzIiwicmVuZGVyU3RhdHMiLCJmYWxsaW5nRmlndXJlIiwicmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMiLCJmaWd1cmVNYXRyaXgiLCJwcm9qZWN0aW9uRmlndXJlWCIsInByb2plY3Rpb25GaWd1cmVZIiwiY2FuRmlndXJlQmVQbGFjZWQiLCJyZXBhaW50UHJvamVjdGlvbkZpZ3VyZXNDZWxscyIsImluZGVudCIsImNvbG9ycyIsInJlcGFpbnRDZWxscyIsImNlbGxDb2xvcnMiLCJzdHlsZSIsImJhY2tncm91bmQiLCJsZXZlbFNwYW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2NvcmVTcGFuIiwiY29tYm9TcGFuIiwidG9TdHJpbmciLCJodG1sIiwiY29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNoaWxkcmVuIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJIVE1MRWxlbWVudCIsIkZhbGxpbmdSZXN1bHQiLCJ0cmFuc2ZlcnJlZEZpZ3VyZXMiLCJSZWd1bGFyRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJwcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCIsInByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQiLCJmYWxsaW5nUmVzdWx0IiwiZmFsbEZpZ3VyZXNGb3JPbmVDZWxsIiwic3F1YXNoTGluZXMiLCJvbmVDZWxsRmFsbGluZ1Jlc3VsdCIsImZpZ3VyZUNhbkZhbGwiLCJmaWd1cmVHYW1lT3ZlclJlc3VsdCIsInRyYW5zZmVyRmlndXJlVG9NYXRyaXgiLCJmaWd1cmVDZWxsWSIsImNlbGxWYWx1ZSIsImZpZ3VyZUNlbGxYIiwibWF0cml4WCIsIm1hdHJpeFkiLCJsaW5lc1RvU3F1YXNoIiwidW5zaGlmdCIsIkVudW1IZWxwZXIiLCJ2YWwiLCJPYmplY3QiLCJrZXlzIiwibiIsIk51bWJlciIsInBhcnNlSW50IiwiZmlsdGVyIiwiaXNOYU4iLCJ2YWx1ZXMiLCJUb0FycmF5IiwiZmxvb3IiLCJyYW5kb20iLCJBbHdheXNPbmVGaWd1cmVTcGF3bmVyIiwicHJvY2Vzc09uRmFsbFRpY2siLCJhZGRGaWd1cmUiLCJmaWd1cmVJbmRleCIsIkdldFJhbmRvbSIsImZpZ3VyZVdpZHRoIiwiY29vcmRpbmF0ZSIsImNlaWwiLCJNb3ZpbmdIYW5kbGVyIiwicHJvY2Vzc01vdmVMZWZ0Q29tbWFuZCIsInByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kIiwicHJvY2Vzc01vdmVEb3duQ29tbWFuZCIsInByb2Nlc3NUdXJuQ2xvY2t3aXNlQ29tbWFuZCIsInByb2Nlc3NNb3ZlVG9YQ29tbWFuZCIsInByb2Nlc3NNb3ZlVG9ZQ29tbWFuZCIsInByb2Nlc3NUdXJuVG9TdGF0ZUNvbW1hbmQiLCJhbGxUdXJuU3RhdGVzIiwibmV4dFR1cm5TdGF0ZSIsIm1vdmluZ01vZGlmaWVyIiwiRmFsbFRpY2tTY29yZUNvdW50ZXIiLCJzcXVhc2hlZFJvd3NSZXdhcmRUaHJlc2hvbGRzTWFwIiwicmV3YXJkT25Db21ibyIsIm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQiLCJwcmV2aW91c1RocmVzaG9sZFJld2FyZCIsInJld2FyZCIsInJvd3NTcXVhc2hlZFRocmVzaG9sZCIsIlNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciIsImxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlciIsIm1heExldmVscyIsInNxdWFzaGVkUm93c0NvdW50ZXIiLCJwcm9jZXNzSW5pdEdhbWVDb21tYW5kIiwibWluIiwiQ29tYm9Db3VudGVyIiwiQ29uc3RUaW1pbmdzSGFuZGxlciIsImRlbGF5TXMiLCJTdGF0c0NvdW50ZXIiLCJLZXlib2FyZENvbnRyb2xsZXIiLCJ3aW5kb3ciLCJvbmtleWRvd24iLCJjb2RlIiwiVGV0cmlzRmFjYWRlIiwiZ2FtZUNvbnRyb2xsZXIiLCJtb3ZpbmdIYW5kbGVyIiwia2V5Ym9hcmRDb250cm9sbGVyIiwiZmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IiLCJmaWd1cmVzU3Bhd25lciIsImxldmVsQ291bnRlciIsImNvbWJvQ291bnRlciIsInNjb3JlQ291bnRlciIsInN0YXRzQ291bnRlciIsInRhYmxlUmVuZGVyZXIiLCJib2R5Iiwic3RhcnQiLCJyZXN1bWUiLCJwYXVzZSIsIlR1cm5QbGFjaW5nU3RlcCIsInRhcmdldCIsIl9wZXJzaXN0ZWQiLCJwZXJzaXN0ZWQiLCJNb3ZlWFBsYWNpbmdTdGVwIiwiTW92ZVlQbGFjaW5nU3RlcCIsIkRyb3BQbGFjaW5nU3RlcCIsIkZpZ3VyZVBsYWNpbmdSZXN1bHQiLCJmaWd1cmVzVGFyZ2V0U3RhdGVzIiwicGxhY2luZ1N0ZXBzIiwiSG9sZSIsImlzT3BlbmVkIiwiY2VsbHMiLCJIb2xlc0hlbHBlciIsImhvbGVzIiwiSG9sZUluUHJvY2VzcyIsInByZXZpb3VzUm93T3BlblhzIiwiY3VycmVudFJvd09wZW5YcyIsImNvbnRpbnVlcyIsImhvbGVzSW5Qcm9jZXNzIiwiY292ZXJlZENvbHVtbnMiLCJTZXQiLCJob2xlIiwiYWRkIiwiaGFzIiwicHJvY2Vzc2luZ0hvbGUiLCJmaW5kIiwicHJldlgiLCJ1bmRlZmluZWQiLCJkb2VzVGhlV2F5T3V0RnJvbUhvbGVFeGlzdHMiLCJob2xlc0luUHJvZ3Jlc3NUb1JlbW92ZSIsImkiLCJpbml0aWFsQ29vcmRpbmF0ZSIsImZpbmRUaGVXYXlPdXRGcm9tSG9sZSIsImNvbnZlcnRDb3ZlcmVkQ29sdW1uc1RvWHMiLCJhbGxDb2x1bW5zRnJlZVRvRmFsbCIsImNoZWNrRmFsbFgiLCJ0b1kiLCJjb2xsZWN0Q292ZXJlZENvbHVtbnMiLCJzaXplIiwiQ2FsY3VsYXRlU2NvcmVSZXF1ZXN0Iiwib3JpZ2luYWxIb2xlcyIsIm9yaWdpbmFsQ292ZXJlZENvbHVtbnMiLCJpbWFnaW5hYmxlTWF0cml4IiwiaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zIiwic3F1YXNoZWRMaW5lc0NvdW50IiwiUGxhY2VSZXNvbHZpbmdFcnJvciIsIkVycm9yIiwiR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IiLCJGaWd1cmVQbGFjaW5nUmVzb2x2ZXIiLCJzY29yZUNhbGN1bGF0b3IiLCJyZXNvbHZlIiwibWF4U2NvcmUiLCJ0aGVCZXN0UmVzdWx0IiwicHJvY2Vzc1N0YXRlcyIsImltYWdpbmFibGVGaWd1cmUiLCJwbGFjaW5nRGlyZWN0aW9ucyIsImRlYnVnTW9kZSIsImZha2VHYW1lRGF0YSIsInN0cnVjdHVyZWRDbG9uZSIsIm9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMiLCJvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyIsImVudW1zIiwicG9wIiwibWF0cmljZXMiLCJzdHJpbmd5TWF0cmljZXMiLCJzdHJpbmd5RmlndXJlTWF0cml4Iiwiam9pbiIsIm9yaWdpbmFsTWF0cml4SG9sZXMiLCJjb2xsZWN0SG9sZXMiLCJpbWFnaW5lRmlndXJlRHJvcCIsImNhbGN1bGF0ZVNjb3JlUmVxdWVzdCIsImNhbGN1bGF0ZVNjb3JlIiwiZGlyZWN0aW9ucyIsIm1ha2VTaW1wbGVQbGFjaW5nU3RlcHMiLCJ0b3BZIiwibGVmdFgiLCJib3R0b21ZIiwicmlnaHRYIiwibWFrZVB1c2hJblBsYWNpbmdTdGVwcyIsImltYWdpbmVGaWd1cmVQbGFjaW5nIiwiZ2FtZU1hdHJpeCIsInRhcmdldFgiLCJ0YXJnZXRZIiwidGFyZ2V0Q29vcmRpbmF0ZSIsImZpZ3VyZVkiLCJmaWd1cmVYIiwiQ2FsY3VsYXRvckFnZ3JlZ2F0ZSIsImNhbGN1bGF0b3JzIiwicmVxdWVzdCIsImNhbGN1bGF0b3IiLCJTcXVhc2hlZFJvd3NDYWxjdWxhdG9yIiwiRmlsbGFibGVDZWxsc0NhbGN1bGF0b3IiLCJmaWxsYWJsZUNlbGxzQ291bnQiLCJmaWxsYWJsZUhlaWdodCIsImNhbGN1bGF0ZUZpbGxhYmxlU3BhY2UiLCJmaWxsYWJsZUNlbGxzU2NvcmUiLCJwb3ciLCJIb2xlc1YxQ2FsY3VsYXRvciIsImhvbGVzQ291bnQiLCJob2xlc0NvdmVyZWRIZWlnaHQiLCJjYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQiLCJob2xlc0NvdW50RGVjcmVhc2UiLCJob2xlc1Njb3JlIiwicmVhbE1hdHJpeCIsIm9yaWdpbmFsVGhlSGlnaGVzdEhvbGVZIiwib3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwiY2FsY3VsYXRlVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSIsImNvdmVyZWRDb2x1bW5zWXMiLCJob2xlc0NvdmVyZWRIZWlnaHRzU3VtIiwiY292ZXJlZFkiLCJ0aGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwidGhlSGlnaGVzdEhvbGVZIiwiRmlsbGVkSGVpZ2h0Q2FsY3VsYXRvciIsImNhbGN1bGF0ZUhlaWdodCIsImxvd2VzdEVtcHR5WSIsIlR1bm5lbHNDYWxjdWxhdG9yIiwidHVubmVsc1N1bUhlaWdodCIsInR1bm5lbHNDb3VudCIsImNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQiLCJ0dW5uZWxzU2NvcmUiLCJyZWFsQ292ZXJlZENvbHVtbnMiLCJ0dW5uZWxzIiwiVGV0cmlzU29sdmVyIiwiZmlndXJlUGxhY2luZ1Jlc29sdmVyIiwiZmlndXJlUGxhY2luZ1BlcmZvcm1lciIsIm9uRmlndXJlc1NwYXduZWQiLCJ0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyIsInBsYWNlIiwiUGxhY2luZ0Vycm9yIiwiSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciIsIk5vdFN1cHBvcnRlZERpcmVjdGlvblN0ZXBFcnJvciIsIkluc3RhbnRGaWd1cmVQbGFjaW5nUGVyZm9ybWVyIiwicGxhY2luZ1Jlc3VsdCIsInBsYWNlSW1wbCIsInRhcmdldEZpZ3VyZSIsInN0ZXAiLCJuYW1lIiwiVGV0cmlzU29sdmVyRmFjYWRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRldHJpcyIsImluaXRTb2x2ZXIiXSwic291cmNlUm9vdCI6IiJ9