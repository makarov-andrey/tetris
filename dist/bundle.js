(()=>{"use strict";var e;!function(e){e[e.FallingTickProcessed=0]="FallingTickProcessed",e[e.GameOver=1]="GameOver",e[e.FiguresMoved=2]="FiguresMoved",e[e.LevelUp=3]="LevelUp",e[e.FiguresSpawned=4]="FiguresSpawned"}(e||(e={}));var t,n=function(){function t(e,t,n,i){this.gameData=e,this.transferredToMatrixFigures=t,this.squashedLines=n,this.droppedLines=i}return t.prototype.getEventType=function(){return e.FallingTickProcessed},t}(),i=function(){function t(e){this.gameData=e}return t.prototype.getEventType=function(){return e.GameOver},t}(),r=function(){function t(e){this.gameData=e}return t.prototype.getEventType=function(){return e.FiguresMoved},t}(),o=function(){function t(e,t){this.gameData=e,this.newFigures=t}return t.prototype.getEventType=function(){return e.FiguresSpawned},t}(),a=function(){function e(){this.handlers=new Map}return e.prototype.on=function(e,t,n){void 0===n&&(n=!0);var i=this.handlers.get(e)||[];n&&i.some((function(e){return e===t}))||(i.push(t),this.handlers.set(e,i))},e.prototype.off=function(e,t){var n=this.handlers.get(e)||[],i=n.indexOf(t);i>0&&n.splice(i,1),this.handlers.set(e,n)},e.prototype.fire=function(e){(this.handlers.get(e.getEventType())||[]).forEach((function(t){t(e)}))},e}();!function(e){e[e.InitGame=0]="InitGame",e[e.ResumeGame=1]="ResumeGame",e[e.PauseGame=2]="PauseGame",e[e.FiguresFallTick=3]="FiguresFallTick",e[e.GameOver=4]="GameOver",e[e.Render=5]="Render",e[e.MoveLeft=6]="MoveLeft",e[e.MoveRight=7]="MoveRight",e[e.TurnClockwise=8]="TurnClockwise",e[e.MoveDown=9]="MoveDown",e[e.FiguresFallDown=10]="FiguresFallDown"}(t||(t={}));var s,u,l=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.InitGame},e}(),c=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.ResumeGame},e}(),h=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.PauseGame},e}(),f=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.FiguresFallTick},e}(),d=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.GameOver},e}(),m=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.Render},e}(),p=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveLeft},e}(),g=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveRight},e}(),v=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.TurnClockwise},e}(),y=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.MoveDown},e}(),w=function(){function e(e){this.gameData=e}return e.prototype.getCommandType=function(){return t.FiguresFallDown},e}(),F=function(){function e(){this.handlers=new Map}return e.prototype.addHandler=function(e,t,n){void 0===n&&(n=!0);var i=this.handlers.get(e)||[];n&&i.some((function(e){return e===t}))||(i.push(t),this.handlers.set(e,i))},e.prototype.removeHandler=function(e,t){var n=this.handlers.get(e)||[],i=n.indexOf(t);i>0&&n.splice(i,1),this.handlers.set(e,n)},e.prototype.run=function(e){(this.handlers.get(e.getCommandType())||[]).forEach((function(t){t(e)}))},e}(),T=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e[e.One=0]="One",e[e.Two=1]="Two",e[e.Three=2]="Three",e[e.Four=3]="Four"}(u||(u={}));var D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getNormalizedFigure=function(){var e=this.getFigure(),t=e.reduce((function(e,t){return Math.max(e,t.length)}),0);return e.map((function(e){var n=e.length;return e.length=t,e.fill(!1,n-1,t-1)}))},t.prototype.getFirstTurn=function(){return this.getNormalizedFigure()},t.prototype.getSecondTurn=function(){for(var e=this.getNormalizedFigure(),t=[],n=e.length,i=e[0].length,r=0;r<i;r++){t[r]=new Array(n).fill(!1);for(var o=0;o<n;o++)t[r][n-o-1]=e[o][r]}return t},t.prototype.getThirdTurn=function(){return this.getFirstTurn().reverse().map((function(e){return e.reverse()}))},t.prototype.getForthTurn=function(){return this.getSecondTurn().reverse().map((function(e){return e.reverse()}))},t}(function(){function e(){}return e.prototype.getTurn=function(e){switch(e){case u.One:return this.getFirstTurn();case u.Two:return this.getSecondTurn();case u.Three:return this.getThirdTurn();case u.Four:return this.getForthTurn()}},e}()),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"-#-".split("").map((function(e){return"#"===e}))]},t}(D),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"--#".split("").map((function(e){return"#"===e}))]},t}(D),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["###".split("").map((function(e){return"#"===e})),"#--".split("").map((function(e){return"#"===e}))]},t}(D),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["##".split("").map((function(e){return"#"===e})),"##".split("").map((function(e){return"#"===e}))]},t}(D),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["####".split("").map((function(e){return"#"===e}))]},t}(D),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["##-".split("").map((function(e){return"#"===e})),"-##".split("").map((function(e){return"#"===e}))]},t}(D),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.getFigure=function(){return["-##".split("").map((function(e){return"#"===e})),"##-".split("").map((function(e){return"#"===e}))]},t}(D),E=function(e,t){this.x=e,this.y=t},G=function(e,t,n,i){void 0===i&&(i=void 0),this.figure=e,this.position=t,this.turnState=n,this.color=i},k=function(e,t,n){this.fieldWidth=e,this.fieldHeight=t,this.figures=n},O=function(){this.figuresFallen=0,this.linesSquashed=0},P=function(){function e(e,t,n,i,r,o,a,s,u,l){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=setTimeout((function(){}))),void 0===a&&(a=1),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=new O),this.isInitialized=e,this.isGameOver=t,this.fallingFigures=n,this.matrix=i,this.nextTickTimeoutId=r,this.settings=o,this.level=a,this.score=s,this.combo=u,this.stats=l}return e.makeSimple=function(t,n){return void 0===t&&(t=10),void 0===n&&(n=20),new e(!1,!1,[],new Array(n).fill([]).map((function(e){return new Array(t).fill(!1)})),setTimeout((function(){})),new k(t,n,[new C,new S,new B,new M,new H,new b,new x]))},e}(),I=function(){function n(e,n,i){this.timingsHandler=e,this.eventBus=n,this.commandBus=i,this.gameData=P.makeSimple(),this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this)),this.commandBus.addHandler(t.ResumeGame,this.resumeGameHandler.bind(this)),this.commandBus.addHandler(t.PauseGame,this.pauseGameHandler.bind(this)),this.commandBus.addHandler(t.GameOver,this.gameOverHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.gameData=t.gameData,this.gameData.isInitialized=!0,this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.resumeGameHandler=function(e){this.gameData.isGameOver||(this.gameData.isInitialized||this.commandBus.run(new l(e.gameData)),this.fallTick())},n.prototype.pauseGameHandler=function(e){this.gameData=e.gameData,clearTimeout(this.gameData.nextTickTimeoutId),this.commandBus.run(new m(this.gameData))},n.prototype.gameOverHandler=function(){this.gameData.isInitialized=!1,this.gameData.isGameOver=!0,clearTimeout(this.gameData.nextTickTimeoutId),this.eventBus.fire(new i(this.gameData))},n.prototype.fallTick=function(){this.commandBus.run(new f(this.gameData))},n.prototype.onFallTickProcessed=function(e){clearTimeout(this.gameData.nextTickTimeoutId),this.gameData.isGameOver||(this.gameData.nextTickTimeoutId=setTimeout(this.fallTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))},n}(),L=function(){function e(){}return e.canFigureBePlaced=function(e,t,n){return e.every((function(e,i){return e.every((function(e,r){var o=t.y+i,a=t.x+r;return!e||o<0&&a>=0&&a<=n[0].length-1||o in n&&a in n[o]&&!n[o][a]}))}))},e}(),R=function(e,t,n){this.filled=e,this.filledGameOver=t,this.empty=n},_=function(e,t,n,i,r){void 0===t&&(t=!0),void 0===n&&(n=new R("#007400","#780000","#fff")),void 0===i&&(i=new R("#007400","#780000",null)),void 0===r&&(r=new R("#b8e5e3",null,null)),this.containerElement=e,this.renderProjectionFigures=t,this.matrixCellColors=n,this.fallingFigureCellColors=i,this.projectionFigureCellColors=r},q=function(e,t){this.filled=e,this.empty=t},j=function(){function n(e,n,i){this.renderSettings=e,this.commandBus=n,this.eventBus=i,this.cellsHtmlElementsMap=[],n.addHandler(t.InitGame,this.initHandler.bind(this)),n.addHandler(t.Render,this.renderCommandHandler.bind(this))}return n.prototype.initHandler=function(t){this.table=n.createHtmlElement('<div style="float: left; display: table; border-collapse: collapse"></div>'),this.cellsHtmlElementsMap=[];for(var i=0;i<t.gameData.settings.fieldHeight;i++){var r=n.createHtmlElement('<div style="display: table-row"></div>');this.cellsHtmlElementsMap[i]=[];for(var o=0;o<t.gameData.settings.fieldWidth;o++){var a=n.createHtmlElement('<div style="display: table-cell; border: 1px solid #ccc; width: 20px; height: 20px"></div>');this.cellsHtmlElementsMap[i][o]=a,r.appendChild(a)}this.table.appendChild(r)}this.renderSettings.containerElement.innerHTML="",this.renderSettings.containerElement.appendChild(this.table),this.scoreDisplay=n.createHtmlElement('<div style="float: left; font-family: \'Helvetica Neue\', sans-serif; font-size: 20px; margin-left: 15px;">\n                Level: <span id="level"></span><br>\n                Score: <span id="score"></span><br>\n                Combo: <span id="combo"></span><br>\n                Figures fallen: <span id="figures_fallen"></span><br>\n                Lines squashed: <span id="lines_squashed"></span><br>\n            </div>'),this.renderSettings.containerElement.appendChild(this.scoreDisplay),this.renderSettings.containerElement.appendChild(n.createHtmlElement('<div style="clear: both"></div>')),this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this)),this.eventBus.on(e.GameOver,this.onGameOver.bind(this)),this.eventBus.on(e.FiguresMoved,this.onFiguresMoved.bind(this))},n.prototype.onFiguresMoved=function(e){this.renderState(e.gameData)},n.prototype.onFallTickProcessed=function(e){this.renderState(e.gameData)},n.prototype.onGameOver=function(e){this.renderState(e.gameData)},n.prototype.renderCommandHandler=function(e){this.renderState(e.gameData)},n.prototype.renderState=function(e){this.repaintMatrixCells(e.matrix,new E(0,0),e),this.renderSettings.renderProjectionFigures&&this.renderFallingFiguresProjection(e),this.renderFallingFigures(e),this.renderStats(e)},n.prototype.renderFallingFigures=function(e){var t=this;e.fallingFigures.forEach((function(n){t.repaintFallingFiguresCells(n,e)}))},n.prototype.renderFallingFiguresProjection=function(e){var t=this;e.fallingFigures.forEach((function(n){for(var i=n.figure.getTurn(n.turnState),r=n.position.x,o=n.position.y;L.canFigureBePlaced(i,new E(r,o+1),e.matrix);)o++;t.repaintProjectionFiguresCells(i,new E(r,o),e)}))},n.prototype.repaintMatrixCells=function(e,t,n){var i;i=n.isGameOver?new q(this.renderSettings.matrixCellColors.filledGameOver,this.renderSettings.matrixCellColors.empty):new q(this.renderSettings.matrixCellColors.filled,this.renderSettings.matrixCellColors.empty),this.repaintCells(e,t,i)},n.prototype.repaintFallingFiguresCells=function(e,t){var n;n=t.isGameOver?new q(this.renderSettings.fallingFigureCellColors.filledGameOver,this.renderSettings.fallingFigureCellColors.empty):new q(e.color||this.renderSettings.fallingFigureCellColors.filled,this.renderSettings.fallingFigureCellColors.empty),this.repaintCells(e.figure.getTurn(e.turnState),e.position,n)},n.prototype.repaintProjectionFiguresCells=function(e,t,n){var i;i=n.isGameOver?new q(this.renderSettings.projectionFigureCellColors.filledGameOver,this.renderSettings.projectionFigureCellColors.empty):new q(this.renderSettings.projectionFigureCellColors.filled,this.renderSettings.projectionFigureCellColors.empty),this.repaintCells(e,t,i)},n.prototype.repaintCells=function(e,t,n){var i=this;e.forEach((function(e,r){e.forEach((function(e,o){var a=r+t.y,s=o+t.x;if(a in i.cellsHtmlElementsMap&&s in i.cellsHtmlElementsMap[a]){var u=e?n.filled:n.empty;null!==u&&(i.cellsHtmlElementsMap[a][s].style.background=u)}}))}))},n.prototype.renderStats=function(e){var t=document.getElementById("level"),n=document.getElementById("score"),i=document.getElementById("combo"),r=document.getElementById("figures_fallen"),o=document.getElementById("lines_squashed");null!==t&&(t.innerHTML=e.level.toString()),null!==n&&(n.innerHTML=e.score.toString()),null!==i&&(i.innerHTML=e.combo.toString()),null!==r&&(r.innerHTML=e.stats.figuresFallen.toString()),null!==o&&(o.innerHTML=e.stats.linesSquashed.toString())},n.createHtmlElement=function(e){var t=document.createElement("div");if(t.innerHTML=e,t.children.length>1||null===t.firstElementChild)throw"The HTML must contain only one child";if(!(t.firstElementChild instanceof HTMLElement))throw"Something went wrong while trying to get HTMLElement child from div";return t.firstElementChild},n}(),A=function(){this.transferredFigures=[],this.isGameOver=!1},N=function(){function e(e,n){this.commandBus=e,this.eventBus=n,this.commandBus.addHandler(t.FiguresFallTick,this.processFiguresFallTickCommand.bind(this)),this.commandBus.addHandler(t.FiguresFallDown,this.processDropFiguresCommand.bind(this))}return e.prototype.processFiguresFallTickCommand=function(e){var t=this.fallFiguresForOneCell(e.gameData),i=this.squashLines(e.gameData.matrix);t.isGameOver&&this.commandBus.run(new d(e.gameData)),this.eventBus.fire(new n(e.gameData,t.transferredFigures,i,0))},e.prototype.processDropFiguresCommand=function(e){for(var t,i=new A,r=0;e.gameData.fallingFigures.length>0;){var o=this.fallFiguresForOneCell(e.gameData);(t=i.transferredFigures).push.apply(t,o.transferredFigures),i.isGameOver=i.isGameOver||o.isGameOver,r++}var a=this.squashLines(e.gameData.matrix);i.isGameOver&&this.commandBus.run(new d(e.gameData)),this.eventBus.fire(new n(e.gameData,i.transferredFigures,a,r-1))},e.prototype.fallFiguresForOneCell=function(e){var t=this,n=new A;return e.fallingFigures.forEach((function(i,r){var o;if(t.figureCanFall(e.matrix,i))i.position.y++;else{var a=t.transferFigureToMatrix(e.matrix,i);(o=n.transferredFigures).push.apply(o,e.fallingFigures.splice(r,1)),n.isGameOver=n.isGameOver||a}})),n},e.prototype.figureCanFall=function(e,t){return L.canFigureBePlaced(t.figure.getTurn(t.turnState),new E(t.position.x,t.position.y+1),e)},e.prototype.transferFigureToMatrix=function(e,t){var n=!1;return t.figure.getTurn(t.turnState).forEach((function(i,r){i.forEach((function(i,o){if(i){var a=t.position.x+o,s=t.position.y+r;s in e&&a in e[s]&&!e[s][a]?e[s][a]=!0:n=!0}}))})),n},e.prototype.squashLines=function(e){var t=[];return e.forEach((function(e,n){e.every((function(e){return e}))&&t.push(n)}),0),t.forEach((function(t){e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t},e}(),z=function(){function e(){}return e.ToArray=function(e){return Object.keys(e).map((function(e){return Number.parseInt(e)})).filter((function(e){return!Number.isNaN(e)}))},e.GetRandom=function(t){var n=e.ToArray(t);return n[Math.floor(Math.random()*n.length)]},e}(),U=function(){function n(e,n){this.eventBus=e,this.commandBus=n,this.commandBus.addHandler(t.InitGame,this.initHandler.bind(this))}return n.prototype.initHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.processOnFallTick.bind(this))},n.prototype.processOnFallTick=function(e){this.addFigure(e.gameData)},n.prototype.addFigure=function(e){if(!(e.fallingFigures.length>0||e.isGameOver)){var t=Math.floor(Math.random()*e.settings.figures.length),n=e.settings.figures[t],i=z.GetRandom(u),r=n.getTurn(i),a=Math.max.apply(Math,r.map((function(e){return e.length}))),s=new E(Math.ceil(e.settings.fieldWidth/2-a/2)-1,-r.length),l=new G(n,s,i);e.fallingFigures.push(l),this.eventBus.fire(new o(e,[l]))}},n}(),W=function(){function e(e,n){this.commandBus=e,this.eventBus=n,this.commandBus.addHandler(t.MoveLeft,this.processMoveLeftCommand.bind(this)),this.commandBus.addHandler(t.MoveRight,this.processMoveRightCommand.bind(this)),this.commandBus.addHandler(t.MoveDown,this.processMoveDownCommand.bind(this)),this.commandBus.addHandler(t.TurnClockwise,this.processTurnClockwiseCommand.bind(this))}return e.prototype.processMoveLeftCommand=function(e){e.gameData.fallingFigures.forEach((function(t){L.canFigureBePlaced(t.figure.getTurn(t.turnState),new E(t.position.x-1,t.position.y),e.gameData.matrix)&&t.position.x--})),this.eventBus.fire(new r(e.gameData))},e.prototype.processMoveRightCommand=function(e){e.gameData.fallingFigures.forEach((function(t){L.canFigureBePlaced(t.figure.getTurn(t.turnState),new E(t.position.x+1,t.position.y),e.gameData.matrix)&&t.position.x++})),this.eventBus.fire(new r(e.gameData))},e.prototype.processTurnClockwiseCommand=function(e){var t=z.ToArray(u);e.gameData.fallingFigures.forEach((function(n){var i=n.turnState+1;i in t||(i=t[0]),L.canFigureBePlaced(n.figure.getTurn(i),n.position,e.gameData.matrix)&&(n.turnState=i)})),this.eventBus.fire(new r(e.gameData))},e.prototype.processMoveDownCommand=function(e){this.commandBus.run(new f(e.gameData))},e}(),Y=function(){function e(e){this.commandBus=e,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}return e.prototype.processInitGameCommand=function(e){var t=this;window.onkeydown=function(n){"ArrowLeft"===n.code?t.commandBus.run(new p(e.gameData)):"ArrowRight"===n.code?t.commandBus.run(new g(e.gameData)):"ArrowUp"===n.code?t.commandBus.run(new v(e.gameData)):"ArrowDown"===n.code||"ArrowDown"===n.code?t.commandBus.run(new y(e.gameData)):"Space"===n.code&&t.commandBus.run(new w(e.gameData))}},e}(),J=function(){function n(e,n,i,r){void 0===i&&(i=new Map([[1,100],[2,300],[3,500],[4,800]])),void 0===r&&(r=50),this.commandBus=e,this.eventBus=n,this.squashedRowsRewardThresholdsMap=i,this.rewardOnCombo=r,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))},n.prototype.onFallingTickProcessed=function(e){if(!(e.squashedLines.length<0)){var t=0;this.squashedRowsRewardThresholdsMap.forEach((function(n,i){i>e.squashedLines.length||(t=n)})),e.gameData.score+=t*e.gameData.level+this.rewardOnCombo*Math.max(0,e.gameData.combo-1)*e.gameData.level+2*e.droppedLines*e.gameData.level}},n}(),K=function(){function n(e,n,i,r){this.eventBus=e,this.commandBus=n,this.levelIncreaseOnSquashedRowsNumber=i,this.maxLevels=r,this.squashedRowsCounter=0,this.commandBus.addHandler(t.InitGame,this.processInitGameCommand.bind(this))}return n.prototype.processInitGameCommand=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.onFallTickProcessed=function(e){0!==e.squashedLines.length&&(this.squashedRowsCounter++,this.squashedRowsCounter>=this.levelIncreaseOnSquashedRowsNumber&&(this.squashedRowsCounter=0,e.gameData.level=Math.min(this.maxLevels,e.gameData.level+1)))},n}(),Q=function(){function n(e,n){this.commandBus=e,this.eventBus=n,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallTickProcessed.bind(this))},n.prototype.onFallTickProcessed=function(e){e.transferredToMatrixFigures.length<=0||(e.squashedLines.length>0?e.gameData.combo+=1:e.gameData.combo=0)},n}(),V=function(){function e(e){this.delayMs=e}return e.prototype.getDelayForNextTickMs=function(e){return this.delayMs},e}(),X=function(){function n(e,n){this.commandBus=e,this.eventBus=n,e.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FallingTickProcessed,this.onFallingTickProcessed.bind(this))},n.prototype.onFallingTickProcessed=function(e){e.gameData.stats.figuresFallen+=e.transferredToMatrixFigures.length,e.gameData.stats.linesSquashed+=e.squashedLines.length},n}(),Z=function(){function e(e,t,n,i,r,o,s,u,l,c,h,f,d){void 0===e&&(e=new a),void 0===t&&(t=new F),void 0===n&&(n=new I(new V(2e3),e,t)),void 0===i&&(i=new W(t,e)),void 0===r&&(r=new Y(t)),void 0===o&&(o=new N(t,e)),void 0===s&&(s=new U(e,t)),void 0===u&&(u=new K(e,t,8,15)),void 0===l&&(l=new Q(t,e)),void 0===c&&(c=new J(t,e)),void 0===h&&(h=new X(t,e)),void 0===f&&(f=new j(new _(document.body),t,e)),void 0===d&&(d=P.makeSimple()),this.eventBus=e,this.commandBus=t,this.gameController=n,this.movingHandler=i,this.movingController=r,this.fallingFiguresProcessor=o,this.figuresSpawner=s,this.levelCounter=u,this.comboCounter=l,this.scoreCounter=c,this.statsCounter=h,this.tableRenderer=f,this.gameData=d}return e.prototype.start=function(e){e=e||P.makeSimple(),this.commandBus.run(new l(e)),this.commandBus.run(new c(e))},e.prototype.resume=function(){this.commandBus.run(new c(this.gameData))},e.prototype.pause=function(){this.commandBus.run(new h(this.gameData))},e}(),$=function(e){this.target=e},ee=function(e){this.target=e},te=function(e){this.target=e},ne=function(){},ie=function(e,t){this.figuresTargetStates=e,this.placingSteps=t},re=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return re(t,e),t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return re(t,e),t}(Error)),ae=function(){function e(e,t){this.commandBus=e,this.scoreCalculator=t}return e.prototype.resolve=function(e){var t=this;if(0!==e.fallingFigures.length){if(1!==e.fallingFigures.length)throw new oe;var n=e.fallingFigures[0],i=-1/0,r=new ie(new Map,[]);this.processStates(e,(function(e,t,o){t>i&&(i=t,r=new ie(new Map([[n,e]]),o))}));var o="debugMode"in window&&window.debugMode,a=r.figuresTargetStates.get(n);if(o&&void 0!==a){var s=structuredClone(e);a.color="#f00",s.fallingFigures=[a],this.commandBus.run(new m(s)),this.processStates(e,void 0,(function(e){e.color="#00f",s.fallingFigures=[e],t.commandBus.run(new m(s))}))}return r}},e.prototype.processStates=function(e,t,n){for(var i=this,r=e.fallingFigures[0],o=z.ToArray(u);o[0]!==r.turnState;)o.unshift(o.pop());var a=new Map;o.forEach((function(e){a.set(e,r.figure.getTurn(e))})),a.forEach((function(o,a){for(var s=0;s<e.settings.fieldWidth-o[0].length+1;s++){var u=i.imagineFigureDrop(e.matrix,o,s),l=u[0],c=u[1],h=new E(s,l),f=i.squashLines(c),d=new G(r.figure,h,a);n&&n(d);var m=i.scoreCalculator.calculateScore(e,c,f),p=i.makeSimplePlacingSteps(r,d);t&&t(d,m,p)}})),this.collectOpenHoles(e.matrix).forEach((function(o){var s=o[0],u=o[1];a.forEach((function(o,a){for(var l=Math.min(s.y-o.length,0);l++;l<=u.y)for(var c=Math.min(s.x-o[0].length,0);c++;c<=u.x){var h=new E(c,l);if(L.canFigureBePlaced(o,h,e.matrix)){var f=new G(r.figure,h,a),d=i.makePushInPlacingSteps(e,r,f);if(void 0!==d){var m=i.imagineFigurePlacing(e.matrix,o,h),p=i.squashLines(m);n&&n(f);var g=i.scoreCalculator.calculateScore(e,m,p);t&&t(f,g,d)}}}}))}))},e.prototype.squashLines=function(e){var t=[];return e.forEach((function(e,n){e.every((function(e){return e}))&&t.push(n)}),0),t.forEach((function(t){e.splice(t,1),e.unshift(new Array(e[0].length).fill(!1))})),t.length},e.prototype.imagineFigureDrop=function(e,t,n){for(var i=-t.length;L.canFigureBePlaced(t,new E(n,i+1),e);)i++;return[i,this.imagineFigurePlacing(e,t,new E(n,i))]},e.prototype.imagineFigurePlacing=function(e,t,n){var i=structuredClone(e);return t.forEach((function(e,t){e.forEach((function(e,r){var o=n.y+t,a=n.x+r;o in i&&a in i[o]&&e&&(i[o][a]=!0)}))})),i},e.prototype.collectOpenHoles=function(e){return[]},e.prototype.makePushInPlacingSteps=function(e,t,n){},e.prototype.makeSimplePlacingSteps=function(e,t){return[new $(t.turnState),new ee(t.position.x),new ne]},e}(),se=function(){function e(e,t){void 0===t&&(t=.8),this.initialDelayMs=e,this.base=t}return e.prototype.getDelayForNextTickMs=function(e){return Math.pow(this.base-.007*(e.level-1),e.level-1)*this.initialDelayMs},e}(),ue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ue(t,e),t}(Error),ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ue(t,e),t}(le),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ue(t,e),t}(le),fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ue(t,e),t}(le),de=function(){function e(e,t){void 0===t&&(t=new se(100,.9)),this.commandBus=e,this.timingsHandler=t,this.nextMoveTimeoutId=setTimeout((function(){})),this.gameData=P.makeSimple()}return e.prototype.place=function(e,t){this.gameData=e,this.targetState=t,clearTimeout(this.nextMoveTimeoutId),this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData))},e.prototype.processTick=function(){var e=this;if(0!==this.gameData.fallingFigures.length){if(1!==this.gameData.fallingFigures.length)throw new ce;if(void 0!==this.targetState){var t=this.gameData.fallingFigures[0],n=this.targetState.figuresTargetStates.get(t);if(n){if(t.figure!==n.figure)throw new he("Both of the original and the target falling figures must have the same figure in it.");this.targetState.placingSteps.every((function(n){if(n instanceof $)return t.turnState===n.target||(e.commandBus.run(new v(e.gameData)),!1);if(n instanceof ee)return t.position.x===n.target||(t.position.x>n.target?e.commandBus.run(new p(e.gameData)):e.commandBus.run(new g(e.gameData)),!1);if(n instanceof te)return!(t.position.y<n.target&&(e.commandBus.run(new y(e.gameData)),1));if(n instanceof ne)return e.commandBus.run(new w(e.gameData)),!0;throw new fe("Unknown step "+n.constructor.name)}))||(this.nextMoveTimeoutId=setTimeout(this.processTick.bind(this),this.timingsHandler.getDelayForNextTickMs(this.gameData)))}}}},e}(),me=function(){function e(){}return e.prototype.calculateScore=function(e,t,n){var i,r=e.settings.fieldHeight,o=e.settings.fieldWidth,a=5*n,s=this.calculateHoles(e.matrix),u=this.calculateHolesAndCoveredHeight(t,e.matrix),l=u[0],c=u[1],h=s-l;i=0===c||0===l?h>0?150*h:70*h:(h>0?150*h:70*h)-c*Math.pow(c,c/(r*l))*5;var f=this.calculateHeight(t),d=-f*Math.pow(f,f/r)*3,m=this.calculateFillableSpace(t,o),p=m[0],g=0;m[1]>5&&(g=-p*Math.pow(p,p/(r*o)));var v,y=this.calculateTunnelsExceptUncovered(t,e.matrix),w=y[0],F=y[1],T=i+a+d+(v=0===F?0:70*-F-w*Math.pow(w,w/(r*F))*7)+g;return isNaN(T)&&console.log(t,i,a,d,v,g),T},e.prototype.calculateHoles=function(e){var t=new Set,n=0;return e.forEach((function(e,i){e.forEach((function(e,i){e?t.add(i):t.has(i)&&n++}))})),n},e.prototype.calculateHolesAndCoveredHeight=function(e,t){var n=this.calculateTheHighestHoleCoveredY(t),i=n[0],r=n[1],o=new Map,a=0,s=0;return e.forEach((function(e,t){e.forEach((function(e,n){e&&!o.has(n)&&o.set(n,t);var u=o.get(n);void 0===u||e||(s++,void 0!==i&&void 0!==r&&(t<i?a+=t-u:u<r&&(a+=r-u)))}))})),[s,a]},e.prototype.calculateTheHighestHoleCoveredY=function(e){var t=void 0,n=void 0,i=new Map;return e.some((function(e,r){return e.some((function(e,o){e&&!i.has(o)&&i.set(o,r);var a=i.get(o);return void 0!==a&&!e&&(n=r,t=a,!0)}))})),[n,t]},e.prototype.calculateHeight=function(e){var t=-1;return e.every((function(e,n){return!!e.every((function(e){return!e}))&&(t=n,!0)})),e.length-t-1},e.prototype.calculateTunnelsExceptUncovered=function(e,t){var n=new Set;t.every((function(e){e.forEach((function(e,t){e&&n.add(t)}))}));var i=new Set,r=new Map,o=e[0].length;e.every((function(e,t){return e.forEach((function(e,t){e&&i.add(t)})),e.forEach((function(e,t){e||i.has(t)||n.has(t)||0!==t&&!i.has(t-1)||t!==o-1&&!i.has(t+1)||r.set(t,(r.get(t)||0)+1)})),i.size<o}));var a=0,s=0;return r.forEach((function(e){e>=3&&(a+=e,s++)})),[a,s]},e.prototype.calculateFillableSpace=function(e,t){var n=new Set,i=0,r=0;return e.every((function(e){return e.forEach((function(e,t){e&&n.add(t)})),e.forEach((function(e,t){!e&&n.size>0&&!n.has(t)&&i++})),n.size<t&&(n.size>0&&r++,!0)})),[i,r]},e}(),pe=function(){function n(e,n,i,r){void 0===i&&(i=new ae(n,new me)),void 0===r&&(r=new de(n)),this.eventBus=e,this.commandBus=n,this.fallingFigurePlacingResolver=i,this.fallingFiguresPlacer=r,this.commandBus.addHandler(t.InitGame,this.initGameHandler.bind(this))}return n.prototype.initGameHandler=function(t){this.eventBus.on(e.FiguresSpawned,this.onFiguresSpawned.bind(this))},n.prototype.onFiguresSpawned=function(e){var t=this.fallingFigurePlacingResolver.resolve(e.gameData);this.fallingFiguresPlacer.place(e.gameData,t)},n}();document.addEventListener("DOMContentLoaded",(function(){var e=new a,t=new F,n=new Z(e,t);new pe(e,t),n.start()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxFQUlBQyxRQUpBLElBQUFELElBQUFBLEVBQUEsSUFBbUNFLEdBQ3ZDL1EsRUFDQSxJQUFJZ1IsVUFFQSxJQUFBRixJQUFBQSxFQUFBLElBQTJCRyxHQUF1QmpSLElBTmxELEtBQUFELFNBQUFBLEVBQ0EsS0FBQUMsV0FBQUEsRUFDQSxLQUFBNlEsNkJBQUFBLEVBSUEsS0FBQUMscUJBQUFBLEVBRVJqWCxLQUFLbUcsV0FBVzFFLFdBQVcxQyxFQUFZZ0MsU0FBVWYsS0FBS29HLGdCQUFnQkMsS0FBS3JHLE1BQy9FLENBVUosT0FSWSxZQUFBb0csZ0JBQVIsU0FBd0JLLEdBQ3BCekcsS0FBS2tHLFNBQVN0RyxHQUFHZCxFQUFVVyxlQUFnQk8sS0FBS3FYLGlCQUFpQmhSLEtBQUtyRyxNQUMxRSxFQUVRLFlBQUFxWCxpQkFBUixTQUF5QnhYLEdBQ3JCLElBQU15WCxFQUE2QnRYLEtBQUtnWCw2QkFBNkIxRixRQUFRelIsRUFBTWIsVUFDbkZnQixLQUFLaVgscUJBQXFCakQsTUFBTW5VLEVBQU1iLFNBQVVzWSxFQUNwRCxFQUNKLEVBckJBLEdDREFsTixTQUFTbU4saUJBQWlCLG9CQUFvQixXQUMxQyxJQUFNclIsRUFBVyxJQUFJNEosRUFDZjNKLEVBQWEsSUFBSTRKLEVBQ25CeUgsRUFBUyxJQUFJQyxFQUFhdlIsRUFBVUMsR0FDM0IsSUFBSXVSLEdBQWF4UixFQUFVQyxHQUV4Q3FSLEVBQU81RyxPQUNYLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0V2ZW50QnVzL0V2ZW50QnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmlndXJlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0dhbWVDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9SZW5kZXJlci9UYWJsZVJlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IvUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVXRpbHMvRW51bUhlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL0ZpZ3VyZXNTcGF3bmVyL0Fsd2F5c09uZUZpZ3VyZVNwYXduZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Nb3ZpbmdIYW5kbGVyL01vdmluZ0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9Nb3ZpbmdDb250cm9sbGVyL01vdmluZ0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvQ29tYm9Db3VudGVyL0NvbWJvQ291bnRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RldHJpcy9TdGF0c0NvdW50ZXIvU3RhdHNDb3VudGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVGV0cmlzRmFjYWRlLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvQ29tbW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1Jlc29sdmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXMvVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXRyaXNTb2x2ZXIvRmlndXJlUGxhY2luZ1BlcmZvcm1lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1Njb3JlQ2FsY3VsYXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVGV0cmlzU29sdmVyL1RldHJpc1NvbHZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuXG5leHBvcnQgZW51bSBFdmVudFR5cGUge1xuICAgIEZhbGxpbmdUaWNrUHJvY2Vzc2VkLFxuICAgIEdhbWVPdmVyLFxuICAgIEZpZ3VyZXNNb3ZlZCxcbiAgICBMZXZlbFVwLFxuICAgIEZpZ3VyZXNTcGF3bmVkLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50IHtcbiAgICBnYW1lRGF0YTogR2FtZURhdGE7XG5cbiAgICBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgRmFsbFRpY2tQcm9jZXNzZWRFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICAgICAgcHVibGljIHRyYW5zZmVycmVkVG9NYXRyaXhGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10sXG4gICAgICAgIHB1YmxpYyBzcXVhc2hlZExpbmVzOiBudW1iZXJbXSxcbiAgICAgICAgcHVibGljIGRyb3BwZWRMaW5lczogbnVtYmVyLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHYW1lT3ZlckV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5HYW1lT3ZlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVzTW92ZWRFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuRmlndXJlc01vdmVkO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExldmVsVXBFdmVudCBpbXBsZW1lbnRzIEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0RXZlbnRUeXBlKCk6IEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiBFdmVudFR5cGUuTGV2ZWxVcDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVzU3Bhd25lZEV2ZW50IGltcGxlbWVudHMgRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICAgICBwdWJsaWMgbmV3RmlndXJlczogRmFsbGluZ0ZpZ3VyZVtdLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRFdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50VHlwZS5GaWd1cmVzU3Bhd25lZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFdmVudEJ1cyB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyczogTWFwPEV2ZW50VHlwZSwgKCguLi5fOiBhbnkpID0+IHZvaWQpW10+ID0gbmV3IE1hcCgpO1xuXG4gICAgcHVibGljIG9uKGV2ZW50OiBFdmVudFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQsIHVuaXF1ZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBpZiAodW5pcXVlICYmIGhhbmRsZXJzLnNvbWUoYm91bmRIYW5kbGVyID0+IGJvdW5kSGFuZGxlciA9PT0gaGFuZGxlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChldmVudCwgaGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvZmYoZXZlbnQ6IEV2ZW50VHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGxldCBpbmRleCA9IGhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChldmVudCwgaGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBmaXJlKGV2ZW50UGF5bG9hZDogRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnRQYXlsb2FkLmdldEV2ZW50VHlwZSgpKSB8fCBbXTtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtoYW5kbGVyKGV2ZW50UGF5bG9hZCl9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBlbnVtIENvbW1hbmRUeXBlIHtcbiAgICBJbml0R2FtZSxcbiAgICBSZXN1bWVHYW1lLFxuICAgIFBhdXNlR2FtZSxcbiAgICBGaWd1cmVzRmFsbFRpY2ssXG4gICAgR2FtZU92ZXIsXG4gICAgUmVuZGVyLFxuICAgIE1vdmVMZWZ0LFxuICAgIE1vdmVSaWdodCxcbiAgICBUdXJuQ2xvY2t3aXNlLFxuICAgIE1vdmVEb3duLFxuICAgIEZpZ3VyZXNGYWxsRG93bixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kIHtcbiAgICBnYW1lRGF0YTogR2FtZURhdGE7XG5cbiAgICBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZTtcbn1cblxuZXhwb3J0IGNsYXNzIEluaXRHYW1lQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Jbml0R2FtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZXN1bWVHYW1lQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5SZXN1bWVHYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBhdXNlR2FtZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuUGF1c2VHYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxUaWNrO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVPdmVyQ29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5HYW1lT3ZlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLlJlbmRlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlTGVmdENvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZUxlZnQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW92ZVJpZ2h0Q29tbWFuZCBpbXBsZW1lbnRzIENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZ2FtZURhdGE6IEdhbWVEYXRhLFxuICAgICkge31cblxuICAgIHB1YmxpYyBnZXRDb21tYW5kVHlwZSgpOiBDb21tYW5kVHlwZSB7XG4gICAgICAgIHJldHVybiBDb21tYW5kVHlwZS5Nb3ZlUmlnaHQ7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVHVybkNsb2Nrd2lzZUNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuVHVybkNsb2Nrd2lzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlRG93bkNvbW1hbmQgaW1wbGVtZW50cyBDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGdhbWVEYXRhOiBHYW1lRGF0YSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0Q29tbWFuZFR5cGUoKTogQ29tbWFuZFR5cGUge1xuICAgICAgICByZXR1cm4gQ29tbWFuZFR5cGUuTW92ZURvd247XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRHJvcEZpZ3VyZXNDb21tYW5kIGltcGxlbWVudHMgQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldENvbW1hbmRUeXBlKCk6IENvbW1hbmRUeXBlIHtcbiAgICAgICAgcmV0dXJuIENvbW1hbmRUeXBlLkZpZ3VyZXNGYWxsRG93bjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kQnVzIHtcbiAgICBwcml2YXRlIGhhbmRsZXJzOiBNYXA8Q29tbWFuZFR5cGUsICgocGF5bG9hZDogQ29tbWFuZCkgPT4gdm9pZClbXT4gPSBuZXcgTWFwKCk7XG5cbiAgICBwdWJsaWMgYWRkSGFuZGxlcihldmVudDogQ29tbWFuZFR5cGUsIGhhbmRsZXI6ICguLi5fOiBhbnkpID0+IHZvaWQsIHVuaXF1ZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpIHx8IFtdO1xuICAgICAgICBpZiAodW5pcXVlICYmIGhhbmRsZXJzLnNvbWUoYm91bmRIYW5kbGVyID0+IGJvdW5kSGFuZGxlciA9PT0gaGFuZGxlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChldmVudCwgaGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVIYW5kbGVyKGV2ZW50OiBDb21tYW5kVHlwZSwgaGFuZGxlcjogKC4uLl86IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChldmVudCkgfHwgW107XG4gICAgICAgIGxldCBpbmRleCA9IGhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgIGhhbmRsZXJzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZXJzLnNldChldmVudCwgaGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBydW4ocGF5bG9hZDogQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmdldChwYXlsb2FkLmdldENvbW1hbmRUeXBlKCkpIHx8IFtdO1xuICAgICAgICBoYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge2hhbmRsZXIocGF5bG9hZCl9KTtcbiAgICB9XG59XG4iLCJleHBvcnQgZW51bSBGaWd1cmVUdXJuU3RhdGUge1xuICAgIE9uZSxcbiAgICBUd28sXG4gICAgVGhyZWUsXG4gICAgRm91cixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWd1cmUge1xuICAgIC8qKlxuICAgICAqIEFueSBmaWd1cmUgbXVzdCBiZSBhYmxlIHRvIHR1cm4gNCB0aW1lcyBpbiAyIGRpbWVuc2lvbnMuXG4gICAgICogQWxsIHR1cm5zIGFyZSBjbG9ja3dpc2UuXG4gICAgICovXG4gICAgZ2V0VHVybihmaWd1cmVUdXJuU3RhdGU6IEZpZ3VyZVR1cm5TdGF0ZSk6IGJvb2xlYW5bXVtdO1xuICAgIGdldEZpcnN0VHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIGdldFRoaXJkVHVybigpOiBib29sZWFuW11bXTtcbiAgICBnZXRGb3J0aFR1cm4oKTogYm9vbGVhbltdW107XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdEZpZ3VyZSBpbXBsZW1lbnRzIEZpZ3VyZXtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0Rmlyc3RUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRTZWNvbmRUdXJuKCk6IGJvb2xlYW5bXVtdO1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW107XG4gICAgcHVibGljIGFic3RyYWN0IGdldEZvcnRoVHVybigpOiBib29sZWFuW11bXTtcblxuICAgIGdldFR1cm4oZmlndXJlVHVyblN0YXRlOiBGaWd1cmVUdXJuU3RhdGUpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHN3aXRjaCAoZmlndXJlVHVyblN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIEZpZ3VyZVR1cm5TdGF0ZS5PbmU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rmlyc3RUdXJuKCk7XG4gICAgICAgICAgICBjYXNlIEZpZ3VyZVR1cm5TdGF0ZS5Ud286XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2Vjb25kVHVybigpO1xuICAgICAgICAgICAgY2FzZSBGaWd1cmVUdXJuU3RhdGUuVGhyZWU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGhpcmRUdXJuKCk7XG4gICAgICAgICAgICBjYXNlIEZpZ3VyZVR1cm5TdGF0ZS5Gb3VyOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZvcnRoVHVybigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2l2ZXMgYW4gZWFzeSB3YXkgdG8gZGVmaW5lIGZpZ3VyZXMgZm9yIHRldHJpcy5cbiAqIEp1c3QgaW1wbGVtZW50IHRoZSBnZXRGaWd1cmUgbWV0aG9kIGFuZCByZXR1cm4gZmlndXJlIGxpa2UgdGhpczpcbiAqIGBgYCh0cylcbiAqIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICogICAgIHJldHVybiBbXG4gKiAgICAgICAgIFt0cnVlLCAgdHJ1ZSwgdHJ1ZV0sXG4gKiAgICAgICAgIFtmYWxzZSwgdHJ1ZSwgZmFsc2VdLFxuICogICAgICAgICBbdHJ1ZSwgIHRydWUsIHRydWVdLFxuICogICAgIF07XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBPciBkZWZpbmUgaXQgbGlrZSB0aGlzIGZvciBtb3JlIHZpc3VhbCBwcmVzZW50YXRpb246XG4gKiBgYGAodHMpXG4gKiBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAqICAgICByZXR1cm4gW1xuICogICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAqICAgICAgICAgXCItIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gKiAgICAgICAgIFwiIyMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICogICAgIF07XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSBleHRlbmRzIEFic3RyYWN0RmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdO1xuXG4gICAgcHJpdmF0ZSBnZXROb3JtYWxpemVkRmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IGZpZ3VyZSA9IHRoaXMuZ2V0RmlndXJlKCk7XG4gICAgICAgIGxldCB0aGVMb25nZXN0Um93U2l6ZSA9IGZpZ3VyZS5yZWR1Y2UoXG4gICAgICAgICAgICAocHJldmlvdXMsIGN1cnJlbnQpID0+IE1hdGgubWF4KHByZXZpb3VzLCBjdXJyZW50Lmxlbmd0aCksXG4gICAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBmaWd1cmUubWFwKHJvdyA9PiB7XG4gICAgICAgICAgICBsZXQgb3JpZ2luYWxMZW5ndGggPSByb3cubGVuZ3RoO1xuICAgICAgICAgICAgcm93Lmxlbmd0aCA9IHRoZUxvbmdlc3RSb3dTaXplO1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5maWxsKGZhbHNlLCBvcmlnaW5hbExlbmd0aCAtIDEsIHRoZUxvbmdlc3RSb3dTaXplIC0gMSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGaXJzdFR1cm4oKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXROb3JtYWxpemVkRmlndXJlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNlY29uZFR1cm4oKTogYm9vbGVhbltdW10ge1xuICAgICAgICBsZXQgb3JpZ2luYWxGaWd1cmUgPSB0aGlzLmdldE5vcm1hbGl6ZWRGaWd1cmUoKTtcbiAgICAgICAgbGV0IHR1cm5lZEZpZ3VyZTogYm9vbGVhbltdW10gPSBbXTtcbiAgICAgICAgbGV0IG9yaWdpbmFsRmlndXJlSGVpZ2h0ID0gb3JpZ2luYWxGaWd1cmUubGVuZ3RoO1xuICAgICAgICBsZXQgb3JpZ2luYWxGaWd1cmVXaWR0aCA9IG9yaWdpbmFsRmlndXJlWzBdLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBvcmlnaW5hbEZpZ3VyZVdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgIHR1cm5lZEZpZ3VyZVt4XSA9IG5ldyBBcnJheShvcmlnaW5hbEZpZ3VyZUhlaWdodCkuZmlsbChmYWxzZSk7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IG9yaWdpbmFsRmlndXJlSGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICB0dXJuZWRGaWd1cmVbeF1bb3JpZ2luYWxGaWd1cmVIZWlnaHQgLSB5IC0gMV0gPSBvcmlnaW5hbEZpZ3VyZVt5XVt4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHVybmVkRmlndXJlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaGlyZFR1cm4oKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaXJzdFR1cm4oKS5yZXZlcnNlKCkubWFwKHJvdyA9PiByb3cucmV2ZXJzZSgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rm9ydGhUdXJuKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2Vjb25kVHVybigpLnJldmVyc2UoKS5tYXAocm93ID0+IHJvdy5yZXZlcnNlKCkpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIi0jLVwiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSaWdodExGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIi0tI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMZWZ0TEZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgICAgIFwiIy0tXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNxdWFyZUZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCIjI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTdGlja0ZpZ3VyZSBleHRlbmRzIFNpbXBseVJvdGF0YWJsZUZpZ3VyZSB7XG4gICAgcHJvdGVjdGVkIGdldEZpZ3VyZSgpOiBib29sZWFuW11bXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIiMjIyNcIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTFpGaWd1cmUgZXh0ZW5kcyBTaW1wbHlSb3RhdGFibGVGaWd1cmUge1xuICAgIHByb3RlY3RlZCBnZXRGaWd1cmUoKTogYm9vbGVhbltdW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIjIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgICAgICBcIi0jI1wiLnNwbGl0KFwiXCIpLm1hcChpdGVtID0+IGl0ZW0gPT09IFwiI1wiKSxcbiAgICAgICAgXTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGNsYXNzIFJaRmlndXJlIGV4dGVuZHMgU2ltcGx5Um90YXRhYmxlRmlndXJlIHtcbiAgICBwcm90ZWN0ZWQgZ2V0RmlndXJlKCk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiLSMjXCIuc3BsaXQoXCJcIikubWFwKGl0ZW0gPT4gaXRlbSA9PT0gXCIjXCIpLFxuICAgICAgICAgICAgXCIjIy1cIi5zcGxpdChcIlwiKS5tYXAoaXRlbSA9PiBpdGVtID09PSBcIiNcIiksXG4gICAgICAgIF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtGaWd1cmUsIEZpZ3VyZVR1cm5TdGF0ZSwgTGVmdExGaWd1cmUsIExaRmlndXJlLCBSaWdodExGaWd1cmUsIFJaRmlndXJlLCBTcXVhcmVGaWd1cmUsIFN0aWNrRmlndXJlLCBURmlndXJlfSBmcm9tIFwiLi9GaWd1cmVzXCI7XG5cbi8qKlxuICogeCBmb3IgaG9yaXpvbnRhbCBwb3NpdGlvbmluZ1xuICogeSBmb3IgdmVydGljYWwgcG9zaXRpb25pbmdcbiAqL1xuZXhwb3J0IGNsYXNzIENvb3JkaW5hdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgeDogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgeTogbnVtYmVyLFxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIEZhbGxpbmdGaWd1cmUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZmlndXJlOiBGaWd1cmUsXG4gICAgICAgIHB1YmxpYyBwb3NpdGlvbjogQ29vcmRpbmF0ZSxcbiAgICAgICAgcHVibGljIHR1cm5TdGF0ZTogRmlndXJlVHVyblN0YXRlLFxuICAgICAgICBwdWJsaWMgY29sb3I6IHN0cmluZ3x1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgR2FtZVNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZpZWxkV2lkdGg6IG51bWJlcixcbiAgICAgICAgcHVibGljIGZpZWxkSGVpZ2h0OiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBmaWd1cmVzOiBGaWd1cmVbXSxcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBTdGF0cyB7XG4gICAgcHVibGljIGZpZ3VyZXNGYWxsZW4gPSAwO1xuICAgIHB1YmxpYyBsaW5lc1NxdWFzaGVkID0gMDtcbn1cblxuZXhwb3J0IGNsYXNzIEdhbWVEYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGlzSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgcHVibGljIGlzR2FtZU92ZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICAgICAgcHVibGljIGZhbGxpbmdGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10gPSBbXSxcbiAgICAgICAgcHVibGljIG1hdHJpeDogYm9vbGVhbltdW10gPSBbXSxcbiAgICAgICAgcHVibGljIG5leHRUaWNrVGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB9KSxcbiAgICAgICAgcHVibGljIHNldHRpbmdzOiBHYW1lU2V0dGluZ3MsXG4gICAgICAgIHB1YmxpYyBsZXZlbDogbnVtYmVyID0gMSxcbiAgICAgICAgcHVibGljIHNjb3JlOiBudW1iZXIgPSAwLFxuICAgICAgICBwdWJsaWMgY29tYm86IG51bWJlciA9IDAsXG4gICAgICAgIHB1YmxpYyBzdGF0czogU3RhdHMgPSBuZXcgU3RhdHMoKSxcbiAgICApIHt9XG5cbiAgICBzdGF0aWMgbWFrZVNpbXBsZSh3aWR0aDogbnVtYmVyID0gMTAsIGhlaWdodDogbnVtYmVyID0gMjApOiBHYW1lRGF0YSB7XG4gICAgICAgIHJldHVybiBuZXcgR2FtZURhdGEoXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgW10sXG4gICAgICAgICAgICBuZXcgQXJyYXkoaGVpZ2h0KS5maWxsKFtdKVxuICAgICAgICAgICAgICAgIC5tYXAoXyA9PiBuZXcgQXJyYXkod2lkdGgpLmZpbGwoZmFsc2UpKSxcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBuZXcgR2FtZVNldHRpbmdzKFxuICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBURmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSaWdodExGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IExlZnRMRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTcXVhcmVGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFN0aWNrRmlndXJlKCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBMWkZpZ3VyZSgpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgUlpGaWd1cmUoKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1RpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi9UaW1pbmdzSGFuZGxlci9UaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50LCBGaWd1cmVzTW92ZWRFdmVudCwgR2FtZU92ZXJFdmVudH0gZnJvbSBcIi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQsIEluaXRHYW1lQ29tbWFuZCwgUGF1c2VHYW1lQ29tbWFuZCwgUmVuZGVyQ29tbWFuZCwgUmVzdW1lR2FtZUNvbW1hbmR9IGZyb20gXCIuL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBHYW1lQ29udHJvbGxlciB7XG4gICAgcHJpdmF0ZSBnYW1lRGF0YTogR2FtZURhdGEgPSBHYW1lRGF0YS5tYWtlU2ltcGxlKCk7XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHByaXZhdGUgdGltaW5nc0hhbmRsZXI6IFRpbWluZ3NIYW5kbGVyLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLlJlc3VtZUdhbWUsIHRoaXMucmVzdW1lR2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLlBhdXNlR2FtZSwgdGhpcy5wYXVzZUdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5HYW1lT3ZlciwgdGhpcy5nYW1lT3ZlckhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEgPSBjb21tYW5kLmdhbWVEYXRhO1xuICAgICAgICB0aGlzLmdhbWVEYXRhLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzdW1lR2FtZUhhbmRsZXIoY29tbWFuZDogUmVzdW1lR2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5nYW1lRGF0YS5pc0luaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBJbml0R2FtZUNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmFsbFRpY2soKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHBhdXNlR2FtZUhhbmRsZXIoY29tbWFuZDogUGF1c2VHYW1lQ29tbWFuZCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVEYXRhID0gY29tbWFuZC5nYW1lRGF0YTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZW5kZXJDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdhbWVPdmVySGFuZGxlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YS5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZ2FtZURhdGEuaXNHYW1lT3ZlciA9IHRydWU7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmdhbWVEYXRhLm5leHRUaWNrVGltZW91dElkKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBHYW1lT3ZlckV2ZW50KHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZhbGxUaWNrKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBGaWd1cmVzRmFsbFRpY2tDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbFRpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ2FtZURhdGEubmV4dFRpY2tUaW1lb3V0SWQpO1xuICAgICAgICBpZiAoIXRoaXMuZ2FtZURhdGEuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5nYW1lRGF0YS5uZXh0VGlja1RpbWVvdXRJZCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgdGhpcy5mYWxsVGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIHRoaXMudGltaW5nc0hhbmRsZXIuZ2V0RGVsYXlGb3JOZXh0VGlja01zKHRoaXMuZ2FtZURhdGEpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVQbGFjaW5nQ2hlY2tlciB7XG4gICAgcHVibGljIHN0YXRpYyBjYW5GaWd1cmVCZVBsYWNlZCh0YXJnZXRGaWd1cmVNYXRyaXg6IGJvb2xlYW5bXVtdLCB0YXJnZXRQb3NpdGlvbjogQ29vcmRpbmF0ZSwgbWF0cml4OiBib29sZWFuW11bXSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGFyZ2V0RmlndXJlTWF0cml4LmV2ZXJ5KChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByb3cuZXZlcnkoKHZhbHVlLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFkgPSB0YXJnZXRQb3NpdGlvbi55ICsgeTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsWCA9IHRhcmdldFBvc2l0aW9uLnggKyB4O1xuICAgICAgICAgICAgICAgIHJldHVybiAhdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfHwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhbFkgPCAwXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCA+PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCA8PSBtYXRyaXhbMF0ubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgICAgICApIHx8IChcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxZIGluIG1hdHJpeFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggaW4gbWF0cml4W3JlYWxZXVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIW1hdHJpeFtyZWFsWV1bcmVhbFhdXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kLCBSZW5kZXJDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQsIEdhbWVPdmVyRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtGaWd1cmVQbGFjaW5nQ2hlY2tlcn0gZnJvbSBcIi4uL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0Nvb3JkaW5hdGUsIEZhbGxpbmdGaWd1cmUsIEdhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZmlsbGVkOiBzdHJpbmd8bnVsbCxcbiAgICAgICAgcHVibGljIGZpbGxlZEdhbWVPdmVyOiBzdHJpbmd8bnVsbCxcbiAgICAgICAgcHVibGljIGVtcHR5OiBzdHJpbmd8bnVsbCxcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBUYWJsZVJlbmRlcmVyU2V0dGluZ3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgICAgIHB1YmxpYyByZW5kZXJQcm9qZWN0aW9uRmlndXJlczogYm9vbGVhbiA9IHRydWUsXG4gICAgICAgIHB1YmxpYyBtYXRyaXhDZWxsQ29sb3JzOiBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MgPSBuZXcgVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzKFxuICAgICAgICAgICAgJyMwMDc0MDAnLFxuICAgICAgICAgICAgJyM3ODAwMDAnLFxuICAgICAgICAgICAgJyNmZmYnLFxuICAgICAgICApLFxuICAgICAgICBwdWJsaWMgZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnM6IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyA9IG5ldyBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MoXG4gICAgICAgICAgICAnIzAwNzQwMCcsXG4gICAgICAgICAgICAnIzc4MDAwMCcsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICApLFxuICAgICAgICBwdWJsaWMgcHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnM6IFRhYmxlUmVuZGVyZXJDZWxsQ29sb3JTZXR0aW5ncyA9IG5ldyBUYWJsZVJlbmRlcmVyQ2VsbENvbG9yU2V0dGluZ3MoXG4gICAgICAgICAgICAnI2I4ZTVlMycsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgKSxcbiAgICApIHt9XG59XG5cbmNsYXNzIENlbGxDb2xvcnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZmlsbGVkOiBzdHJpbmd8bnVsbCxcbiAgICAgICAgcHVibGljIGVtcHR5OiBzdHJpbmd8bnVsbCxcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBUYWJsZVJlbmRlcmVyIHtcbiAgICBwcml2YXRlIGNlbGxzSHRtbEVsZW1lbnRzTWFwOiBIVE1MRWxlbWVudFtdW10gPSBbXTtcbiAgICBwcml2YXRlIHRhYmxlOiBIVE1MRWxlbWVudHx1bmRlZmluZWQ7XG4gICAgcHJpdmF0ZSBzY29yZURpc3BsYXk6IEhUTUxFbGVtZW50fHVuZGVmaW5lZDtcblxuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJTZXR0aW5nczogVGFibGVSZW5kZXJlclNldHRpbmdzLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5SZW5kZXIsIHRoaXMucmVuZGVyQ29tbWFuZEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0SGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50YWJsZSA9IFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoJzxkaXYgc3R5bGU9XCJmbG9hdDogbGVmdDsgZGlzcGxheTogdGFibGU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2VcIj48L2Rpdj4nKTtcbiAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcCA9IFtdO1xuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGNvbW1hbmQuZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRIZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgbGV0IHJvdyA9IFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoJzxkaXYgc3R5bGU9XCJkaXNwbGF5OiB0YWJsZS1yb3dcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBbeV0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgY29tbWFuZC5nYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBsZXQgY2VsbCA9IFRhYmxlUmVuZGVyZXIuY3JlYXRlSHRtbEVsZW1lbnQoJzxkaXYgc3R5bGU9XCJkaXNwbGF5OiB0YWJsZS1jZWxsOyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyB3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFt5XVt4XSA9IGNlbGw7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuY29udGFpbmVyRWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudGFibGUpO1xuXG4gICAgICAgIHRoaXMuc2NvcmVEaXNwbGF5ID0gVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudChcbiAgICAgICAgICAgIGA8ZGl2IHN0eWxlPVwiZmxvYXQ6IGxlZnQ7IGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhIE5ldWUnLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDIwcHg7IG1hcmdpbi1sZWZ0OiAxNXB4O1wiPlxuICAgICAgICAgICAgICAgIExldmVsOiA8c3BhbiBpZD1cImxldmVsXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBTY29yZTogPHNwYW4gaWQ9XCJzY29yZVwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgQ29tYm86IDxzcGFuIGlkPVwiY29tYm9cIj48L3NwYW4+PGJyPlxuICAgICAgICAgICAgICAgIEZpZ3VyZXMgZmFsbGVuOiA8c3BhbiBpZD1cImZpZ3VyZXNfZmFsbGVuXCI+PC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICBMaW5lcyBzcXVhc2hlZDogPHNwYW4gaWQ9XCJsaW5lc19zcXVhc2hlZFwiPjwvc3Bhbj48YnI+XG4gICAgICAgICAgICA8L2Rpdj5gKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc2NvcmVEaXNwbGF5KTtcblxuICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoVGFibGVSZW5kZXJlci5jcmVhdGVIdG1sRWxlbWVudCgnPGRpdiBzdHlsZT1cImNsZWFyOiBib3RoXCI+PC9kaXY+JykpO1xuXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbFRpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkdhbWVPdmVyLCB0aGlzLm9uR2FtZU92ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZpZ3VyZXNNb3ZlZCwgdGhpcy5vbkZpZ3VyZXNNb3ZlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmlndXJlc01vdmVkKGNvbW1hbmQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0ZShjb21tYW5kLmdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbFRpY2tQcm9jZXNzZWQoY29tbWFuZDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRlKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25HYW1lT3Zlcihjb21tYW5kOiBHYW1lT3ZlckV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJDb21tYW5kSGFuZGxlcihjb21tYW5kOiBSZW5kZXJDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdGUoY29tbWFuZC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJTdGF0ZShnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXBhaW50TWF0cml4Q2VsbHMoZ2FtZURhdGEubWF0cml4LCBuZXcgQ29vcmRpbmF0ZSgwLCAwKSwgZ2FtZURhdGEpO1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJTZXR0aW5ncy5yZW5kZXJQcm9qZWN0aW9uRmlndXJlcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGYWxsaW5nRmlndXJlc1Byb2plY3Rpb24oZ2FtZURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyRmFsbGluZ0ZpZ3VyZXMoZ2FtZURhdGEpO1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRzKGdhbWVEYXRhKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckZhbGxpbmdGaWd1cmVzKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZhbGxpbmdGaWd1cmUgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXBhaW50RmFsbGluZ0ZpZ3VyZXNDZWxscyhmYWxsaW5nRmlndXJlLCBnYW1lRGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyRmFsbGluZ0ZpZ3VyZXNQcm9qZWN0aW9uKGdhbWVEYXRhOiBHYW1lRGF0YSk6IHZvaWQge1xuICAgICAgICBnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZhbGxpbmdGaWd1cmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlndXJlTWF0cml4ID0gZmFsbGluZ0ZpZ3VyZS5maWd1cmUuZ2V0VHVybihmYWxsaW5nRmlndXJlLnR1cm5TdGF0ZSk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0aW9uRmlndXJlWCA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueDtcbiAgICAgICAgICAgIGxldCBwcm9qZWN0aW9uRmlndXJlWSA9IGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueTtcbiAgICAgICAgICAgIHdoaWxlKEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKGZpZ3VyZU1hdHJpeCwgbmV3IENvb3JkaW5hdGUocHJvamVjdGlvbkZpZ3VyZVgsIHByb2plY3Rpb25GaWd1cmVZICsgMSksIGdhbWVEYXRhLm1hdHJpeCkpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0aW9uRmlndXJlWSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXBhaW50UHJvamVjdGlvbkZpZ3VyZXNDZWxscyhcbiAgICAgICAgICAgICAgICBmaWd1cmVNYXRyaXgsXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUocHJvamVjdGlvbkZpZ3VyZVgsIHByb2plY3Rpb25GaWd1cmVZKSxcbiAgICAgICAgICAgICAgICBnYW1lRGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBhaW50TWF0cml4Q2VsbHMobWF0cml4OiBib29sZWFuW11bXSwgaW5kZW50OiBDb29yZGluYXRlLCBnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNvbG9yczogQ2VsbENvbG9ycztcbiAgICAgICAgaWYgKGdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MubWF0cml4Q2VsbENvbG9ycy5maWxsZWRHYW1lT3ZlcixcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5tYXRyaXhDZWxsQ29sb3JzLmZpbGxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLm1hdHJpeENlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwYWludENlbGxzKG1hdHJpeCwgaW5kZW50LCBjb2xvcnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMoZmFsbGluZ0ZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSwgZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGxldCBjb2xvcnM6IENlbGxDb2xvcnM7XG4gICAgICAgIGlmIChnYW1lRGF0YS5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmZpbGxlZEdhbWVPdmVyLFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MuZmFsbGluZ0ZpZ3VyZUNlbGxDb2xvcnMuZW1wdHksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sb3JzID0gbmV3IENlbGxDb2xvcnMoXG4gICAgICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5jb2xvciB8fCB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmZpbGxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLmZhbGxpbmdGaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhcbiAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUuZmlndXJlLmdldFR1cm4oZmFsbGluZ0ZpZ3VyZS50dXJuU3RhdGUpLFxuICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbixcbiAgICAgICAgICAgIGNvbG9yc1xuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVwYWludFByb2plY3Rpb25GaWd1cmVzQ2VsbHMobWF0cml4OiBib29sZWFuW11bXSwgaW5kZW50OiBDb29yZGluYXRlLCBnYW1lRGF0YTogR2FtZURhdGEpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNvbG9yczogQ2VsbENvbG9ycztcbiAgICAgICAgaWYgKGdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IG5ldyBDZWxsQ29sb3JzKFxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MucHJvamVjdGlvbkZpZ3VyZUNlbGxDb2xvcnMuZmlsbGVkR2FtZU92ZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXR0aW5ncy5wcm9qZWN0aW9uRmlndXJlQ2VsbENvbG9ycy5lbXB0eSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xvcnMgPSBuZXcgQ2VsbENvbG9ycyhcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmZpbGxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzLnByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzLmVtcHR5LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcGFpbnRDZWxscyhtYXRyaXgsIGluZGVudCwgY29sb3JzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcGFpbnRDZWxscyhtYXRyaXg6IGJvb2xlYW5bXVtdLCBpbmRlbnQ6IENvb3JkaW5hdGUsIGNlbGxDb2xvcnM6IENlbGxDb2xvcnMpOiB2b2lkIHtcbiAgICAgICAgbWF0cml4LmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbHVlLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFkgPSB5ICsgaW5kZW50Lnk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFggPSB4ICsgaW5kZW50Lng7XG4gICAgICAgICAgICAgICAgaWYgKHJlYWxZIGluIHRoaXMuY2VsbHNIdG1sRWxlbWVudHNNYXBcbiAgICAgICAgICAgICAgICAgICAgJiYgcmVhbFggaW4gdGhpcy5jZWxsc0h0bWxFbGVtZW50c01hcFtyZWFsWV1cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSB2YWx1ZSA/IGNlbGxDb2xvcnMuZmlsbGVkIDogY2VsbENvbG9ycy5lbXB0eTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbGxzSHRtbEVsZW1lbnRzTWFwW3JlYWxZXVtyZWFsWF0uc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyU3RhdHMoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxldmVsU3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZXZlbCcpO1xuICAgICAgICBjb25zdCBzY29yZVNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbiAgICAgICAgY29uc3QgY29tYm9TcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbWJvJyk7XG4gICAgICAgIGNvbnN0IGZpZ3VyZXNGYWxsZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlndXJlc19mYWxsZW4nKTtcbiAgICAgICAgY29uc3QgbGluZXNTcXVhc2hlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lc19zcXVhc2hlZCcpO1xuICAgICAgICBpZiAobGV2ZWxTcGFuICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsZXZlbFNwYW4uaW5uZXJIVE1MID0gZ2FtZURhdGEubGV2ZWwudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NvcmVTcGFuICE9PSBudWxsKSB7XG4gICAgICAgICAgICBzY29yZVNwYW4uaW5uZXJIVE1MID0gZ2FtZURhdGEuc2NvcmUudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tYm9TcGFuICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb21ib1NwYW4uaW5uZXJIVE1MID0gZ2FtZURhdGEuY29tYm8udG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlndXJlc0ZhbGxlbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZmlndXJlc0ZhbGxlbi5pbm5lckhUTUwgPSBnYW1lRGF0YS5zdGF0cy5maWd1cmVzRmFsbGVuLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbmVzU3F1YXNoZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxpbmVzU3F1YXNoZWQuaW5uZXJIVE1MID0gZ2FtZURhdGEuc3RhdHMubGluZXNTcXVhc2hlZC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlSHRtbEVsZW1lbnQoaHRtbDogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICBpZiAoY29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCA+IDEgfHwgY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyAnVGhlIEhUTUwgbXVzdCBjb250YWluIG9ubHkgb25lIGNoaWxkJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93ICdTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSB0cnlpbmcgdG8gZ2V0IEhUTUxFbGVtZW50IGNoaWxkIGZyb20gZGl2JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29vcmRpbmF0ZSwgRmFsbGluZ0ZpZ3VyZSwgR2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcbmltcG9ydCB7RHJvcEZpZ3VyZXNDb21tYW5kLCBDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgR2FtZU92ZXJDb21tYW5kLCBGaWd1cmVzRmFsbFRpY2tDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ0NoZWNrZXJ9IGZyb20gXCIuLi9VdGlscy9GaWd1cmVQbGFjaW5nQ2hlY2tlclwiO1xuXG5jbGFzcyBGYWxsaW5nUmVzdWx0IHtcbiAgICBwdWJsaWMgdHJhbnNmZXJyZWRGaWd1cmVzOiBGYWxsaW5nRmlndXJlW10gPSBbXTtcbiAgICBwdWJsaWMgaXNHYW1lT3ZlcjogYm9vbGVhbiA9IGZhbHNlO1xufVxuXG5leHBvcnQgY2xhc3MgUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuRmlndXJlc0ZhbGxUaWNrLCB0aGlzLnByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5GaWd1cmVzRmFsbERvd24sIHRoaXMucHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NGaWd1cmVzRmFsbFRpY2tDb21tYW5kKGNvbW1hbmQ6IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQpIHtcbiAgICAgICAgY29uc3QgZmFsbGluZ1Jlc3VsdCA9IHRoaXMuZmFsbEZpZ3VyZXNGb3JPbmVDZWxsKGNvbW1hbmQuZ2FtZURhdGEpO1xuICAgICAgICBsZXQgc3F1YXNoZWRMaW5lcyA9IHRoaXMuc3F1YXNoTGluZXMoY29tbWFuZC5nYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBpZiAoZmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBHYW1lT3ZlckNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmFsbFRpY2tQcm9jZXNzZWRFdmVudChcbiAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEsXG4gICAgICAgICAgICBmYWxsaW5nUmVzdWx0LnRyYW5zZmVycmVkRmlndXJlcyxcbiAgICAgICAgICAgIHNxdWFzaGVkTGluZXMsXG4gICAgICAgICAgICAwXG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc0Ryb3BGaWd1cmVzQ29tbWFuZChjb21tYW5kOiBEcm9wRmlndXJlc0NvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgbGV0IGZhbGxpbmdSZXN1bHQgPSBuZXcgRmFsbGluZ1Jlc3VsdCgpO1xuICAgICAgICBsZXQgZHJvcHBlZExpbmVzID0gMDtcbiAgICAgICAgd2hpbGUgKGNvbW1hbmQuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgb25lQ2VsbEZhbGxpbmdSZXN1bHQgPSB0aGlzLmZhbGxGaWd1cmVzRm9yT25lQ2VsbChjb21tYW5kLmdhbWVEYXRhKTtcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzLnB1c2goLi4ub25lQ2VsbEZhbGxpbmdSZXN1bHQudHJhbnNmZXJyZWRGaWd1cmVzKTtcbiAgICAgICAgICAgIGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciA9IGZhbGxpbmdSZXN1bHQuaXNHYW1lT3ZlciB8fCBvbmVDZWxsRmFsbGluZ1Jlc3VsdC5pc0dhbWVPdmVyO1xuICAgICAgICAgICAgZHJvcHBlZExpbmVzKys7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNxdWFzaGVkTGluZXMgPSB0aGlzLnNxdWFzaExpbmVzKGNvbW1hbmQuZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgaWYgKGZhbGxpbmdSZXN1bHQuaXNHYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgR2FtZU92ZXJDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQoXG4gICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLFxuICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMsXG4gICAgICAgICAgICBzcXVhc2hlZExpbmVzLFxuICAgICAgICAgICAgZHJvcHBlZExpbmVzIC0gMSxcbiAgICAgICAgKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmYWxsRmlndXJlc0Zvck9uZUNlbGwoZ2FtZURhdGE6IEdhbWVEYXRhKTogRmFsbGluZ1Jlc3VsdCB7XG4gICAgICAgIGxldCBmYWxsaW5nUmVzdWx0ID0gbmV3IEZhbGxpbmdSZXN1bHQoKTtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMuZm9yRWFjaCgoZmFsbGluZ0ZpZ3VyZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZ3VyZUNhbkZhbGwoZ2FtZURhdGEubWF0cml4LCBmYWxsaW5nRmlndXJlKSkge1xuICAgICAgICAgICAgICAgIGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueSsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlndXJlR2FtZU92ZXJSZXN1bHQgPSB0aGlzLnRyYW5zZmVyRmlndXJlVG9NYXRyaXgoXG4gICAgICAgICAgICAgICAgICAgIGdhbWVEYXRhLm1hdHJpeCxcbiAgICAgICAgICAgICAgICAgICAgZmFsbGluZ0ZpZ3VyZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZmFsbGluZ1Jlc3VsdC50cmFuc2ZlcnJlZEZpZ3VyZXMucHVzaCguLi5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5zcGxpY2UoaW5kZXgsIDEpKTtcbiAgICAgICAgICAgICAgICBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgPSBmYWxsaW5nUmVzdWx0LmlzR2FtZU92ZXIgfHwgZmlndXJlR2FtZU92ZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsbGluZ1Jlc3VsdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpZ3VyZUNhbkZhbGwobWF0cml4OiBib29sZWFuW11bXSwgZmFsbGluZ0ZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoXG4gICAgICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgIG5ldyBDb29yZGluYXRlKGZhbGxpbmdGaWd1cmUucG9zaXRpb24ueCwgZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55ICsgMSksXG4gICAgICAgICAgICBtYXRyaXhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZmVyRmlndXJlVG9NYXRyaXgobWF0cml4OiBib29sZWFuW11bXSwgZmFsbGluZ0ZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgaXNHYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICBmYWxsaW5nRmlndXJlLmZpZ3VyZS5nZXRUdXJuKGZhbGxpbmdGaWd1cmUudHVyblN0YXRlKVxuICAgICAgICAgICAgLmZvckVhY2goKHJvdywgZmlndXJlQ2VsbFkpID0+IHtcbiAgICAgICAgICAgICAgICByb3cuZm9yRWFjaCgoY2VsbFZhbHVlLCBmaWd1cmVDZWxsWCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGxWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRyaXhYID0gZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi54ICsgZmlndXJlQ2VsbFg7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRyaXhZID0gZmFsbGluZ0ZpZ3VyZS5wb3NpdGlvbi55ICsgZmlndXJlQ2VsbFk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRyaXhZIGluIG1hdHJpeFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgbWF0cml4WCBpbiBtYXRyaXhbbWF0cml4WV1cbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFtYXRyaXhbbWF0cml4WV1bbWF0cml4WF1cbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXhbbWF0cml4WV1bbWF0cml4WF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNHYW1lT3ZlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNHYW1lT3ZlcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNxdWFzaExpbmVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBudW1iZXJbXSB7XG4gICAgICAgIGxldCBsaW5lc1RvU3F1YXNoOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBtYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICBsZXQgY2FuQmVTcXVhc2hlZCA9IHJvdy5ldmVyeShjZWxsID0+IGNlbGwpO1xuICAgICAgICAgICAgaWYgKGNhbkJlU3F1YXNoZWQpIHtcbiAgICAgICAgICAgICAgICBsaW5lc1RvU3F1YXNoLnB1c2goeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgICBsaW5lc1RvU3F1YXNoLmZvckVhY2goeSA9PiB7XG4gICAgICAgICAgICBtYXRyaXguc3BsaWNlKHksIDEpO1xuICAgICAgICAgICAgbWF0cml4LnVuc2hpZnQobmV3IEFycmF5KG1hdHJpeFswXS5sZW5ndGgpLmZpbGwoZmFsc2UpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaW5lc1RvU3F1YXNoO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBFbnVtSGVscGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIFRvQXJyYXkodmFsOiBhbnkpOiB0eXBlb2YgdmFsW10ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKVxuICAgICAgICAgICAgLm1hcChuID0+IE51bWJlci5wYXJzZUludChuKSlcbiAgICAgICAgICAgIC5maWx0ZXIobiA9PiAhTnVtYmVyLmlzTmFOKG4pKSBhcyB1bmtub3duIGFzIHR5cGVvZiB2YWxbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIEdldFJhbmRvbSh2YWw6IGFueSk6IHR5cGVvZiB2YWwge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBFbnVtSGVscGVyLlRvQXJyYXkodmFsKTtcbiAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWx1ZXMubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlc1tyYW5kb21JbmRleF07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50LCBGaWd1cmVzU3Bhd25lZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vRmlndXJlc1wiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL0NvbW1vblwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0VudW1IZWxwZXJ9IGZyb20gXCIuLi9VdGlscy9FbnVtSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBBbHdheXNPbmVGaWd1cmVTcGF3bmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0SGFuZGxlcihldmVudDogSW5pdEdhbWVDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oXG4gICAgICAgICAgICBFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NPbkZhbGxUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzT25GYWxsVGljayhldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFkZEZpZ3VyZShldmVudC5nYW1lRGF0YSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRGaWd1cmUoZ2FtZURhdGE6IEdhbWVEYXRhKTogdm9pZCB7XG4gICAgICAgIGlmIChnYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPiAwIHx8IGdhbWVEYXRhLmlzR2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpZ3VyZUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ2FtZURhdGEuc2V0dGluZ3MuZmlndXJlcy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBmaWd1cmUgPSBnYW1lRGF0YS5zZXR0aW5ncy5maWd1cmVzW2ZpZ3VyZUluZGV4XTtcbiAgICAgICAgY29uc3QgdHVyblN0YXRlID0gRW51bUhlbHBlci5HZXRSYW5kb20oRmlndXJlVHVyblN0YXRlKTtcbiAgICAgICAgY29uc3QgZmlndXJlTWF0cml4ID0gZmlndXJlLmdldFR1cm4odHVyblN0YXRlKTtcbiAgICAgICAgY29uc3QgZmlndXJlV2lkdGggPSBNYXRoLm1heCguLi5maWd1cmVNYXRyaXgubWFwKHJvdyA9PiByb3cubGVuZ3RoKSk7XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBuZXcgQ29vcmRpbmF0ZShcbiAgICAgICAgICAgIE1hdGguY2VpbChnYW1lRGF0YS5zZXR0aW5ncy5maWVsZFdpZHRoIC8gMiAtIGZpZ3VyZVdpZHRoIC8gMikgLSAxLFxuICAgICAgICAgICAgLWZpZ3VyZU1hdHJpeC5sZW5ndGgsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZhbGxpbmdGaWd1cmUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShcbiAgICAgICAgICAgIGZpZ3VyZSxcbiAgICAgICAgICAgIGNvb3JkaW5hdGUsXG4gICAgICAgICAgICB0dXJuU3RhdGVcbiAgICAgICAgKTtcbiAgICAgICAgZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMucHVzaChmYWxsaW5nRmlndXJlKTtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5maXJlKG5ldyBGaWd1cmVzU3Bhd25lZEV2ZW50KGdhbWVEYXRhLCBbZmFsbGluZ0ZpZ3VyZV0pKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBNb3ZlTGVmdENvbW1hbmQsIE1vdmVSaWdodENvbW1hbmQsIFR1cm5DbG9ja3dpc2VDb21tYW5kLCBNb3ZlRG93bkNvbW1hbmQsIEZpZ3VyZXNGYWxsVGlja0NvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RmlndXJlVHVyblN0YXRlfSBmcm9tIFwiLi4vRmlndXJlc1wiO1xuaW1wb3J0IHtFdmVudEJ1cywgRmlndXJlc01vdmVkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVXRpbHMvRmlndXJlUGxhY2luZ0NoZWNrZXJcIjtcbmltcG9ydCB7RW51bUhlbHBlcn0gZnJvbSBcIi4uL1V0aWxzL0VudW1IZWxwZXJcIjtcblxuZXhwb3J0IGNsYXNzIE1vdmluZ0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlTGVmdCwgdGhpcy5wcm9jZXNzTW92ZUxlZnRDb21tYW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Nb3ZlUmlnaHQsIHRoaXMucHJvY2Vzc01vdmVSaWdodENvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLk1vdmVEb3duLCB0aGlzLnByb2Nlc3NNb3ZlRG93bkNvbW1hbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLlR1cm5DbG9ja3dpc2UsIHRoaXMucHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc01vdmVMZWZ0Q29tbWFuZChjb21tYW5kOiBNb3ZlTGVmdENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkTGVmdCA9IEZpZ3VyZVBsYWNpbmdDaGVja2VyLmNhbkZpZ3VyZUJlUGxhY2VkKFxuICAgICAgICAgICAgICAgIGZpZ3VyZS5maWd1cmUuZ2V0VHVybihmaWd1cmUudHVyblN0YXRlKSxcbiAgICAgICAgICAgICAgICBuZXcgQ29vcmRpbmF0ZShmaWd1cmUucG9zaXRpb24ueCAtIDEsIGZpZ3VyZS5wb3NpdGlvbi55KSxcbiAgICAgICAgICAgICAgICBjb21tYW5kLmdhbWVEYXRhLm1hdHJpeFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChjYW5CZU1vdmVkTGVmdCkge1xuICAgICAgICAgICAgICAgIGZpZ3VyZS5wb3NpdGlvbi54LS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlUmlnaHRDb21tYW5kKGNvbW1hbmQ6IE1vdmVSaWdodENvbW1hbmQpOiB2b2lkIHtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYW5CZU1vdmVkUmlnaHQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4oZmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgbmV3IENvb3JkaW5hdGUoZmlndXJlLnBvc2l0aW9uLnggKyAxLCBmaWd1cmUucG9zaXRpb24ueSksXG4gICAgICAgICAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5tYXRyaXhcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2FuQmVNb3ZlZFJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLngrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZmlyZShuZXcgRmlndXJlc01vdmVkRXZlbnQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kKGNvbW1hbmQ6IFR1cm5DbG9ja3dpc2VDb21tYW5kKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFsbFR1cm5TdGF0ZXMgPSBFbnVtSGVscGVyLlRvQXJyYXkoRmlndXJlVHVyblN0YXRlKTtcbiAgICAgICAgY29tbWFuZC5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5mb3JFYWNoKGZpZ3VyZSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV4dFR1cm5TdGF0ZSA9IGZpZ3VyZS50dXJuU3RhdGUgKyAxO1xuICAgICAgICAgICAgaWYgKCEobmV4dFR1cm5TdGF0ZSBpbiBhbGxUdXJuU3RhdGVzKSkge1xuICAgICAgICAgICAgICAgIG5leHRUdXJuU3RhdGUgPSBhbGxUdXJuU3RhdGVzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FuQmVUdXJuZWQgPSBGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChcbiAgICAgICAgICAgICAgICBmaWd1cmUuZmlndXJlLmdldFR1cm4obmV4dFR1cm5TdGF0ZSksXG4gICAgICAgICAgICAgICAgZmlndXJlLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQuZ2FtZURhdGEubWF0cml4XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNhbkJlVHVybmVkKSB7XG4gICAgICAgICAgICAgICAgZmlndXJlLnR1cm5TdGF0ZSA9IG5leHRUdXJuU3RhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLmZpcmUobmV3IEZpZ3VyZXNNb3ZlZEV2ZW50KGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NNb3ZlRG93bkNvbW1hbmQoY29tbWFuZDogTW92ZURvd25Db21tYW5kKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IEZpZ3VyZXNGYWxsVGlja0NvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIERyb3BGaWd1cmVzQ29tbWFuZCwgSW5pdEdhbWVDb21tYW5kLCBNb3ZlTGVmdENvbW1hbmQsIE1vdmVSaWdodENvbW1hbmQsIFR1cm5DbG9ja3dpc2VDb21tYW5kLCBNb3ZlRG93bkNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIE1vdmluZ0NvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXNcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMucHJvY2Vzc0luaXRHYW1lQ29tbWFuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NJbml0R2FtZUNvbW1hbmQoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHdpbmRvdy5vbmtleWRvd24gPSBldmVudCA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93TGVmdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlTGVmdENvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlUmlnaHRDb21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ0Fycm93VXAnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgVHVybkNsb2Nrd2lzZUNvbW1hbmQoY29tbWFuZC5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVEb3duQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZURvd25Db21tYW5kKGNvbW1hbmQuZ2FtZURhdGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gJ1NwYWNlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IERyb3BGaWd1cmVzQ29tbWFuZChjb21tYW5kLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtFdmVudEJ1cywgRXZlbnRUeXBlLCBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50fSBmcm9tIFwiLi4vRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgRmFsbFRpY2tTY29yZUNvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICAgICBwcml2YXRlIHNxdWFzaGVkUm93c1Jld2FyZFRocmVzaG9sZHNNYXA6IE1hcDxudW1iZXIsIG51bWJlcj4gPSBuZXcgTWFwKFtcbiAgICAgICAgICAgIFsxLCAxMDBdLFxuICAgICAgICAgICAgWzIsIDMwMF0sXG4gICAgICAgICAgICBbMywgNTAwXSxcbiAgICAgICAgICAgIFs0LCA4MDBdLFxuICAgICAgICBdKSxcbiAgICAgICAgcHJpdmF0ZSByZXdhcmRPbkNvbWJvID0gNTAsXG4gICAgKSB7XG4gICAgICAgIGNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5pbml0R2FtZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0R2FtZUhhbmRsZXIoY29tbWFuZDogSW5pdEdhbWVDb21tYW5kKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oRXZlbnRUeXBlLkZhbGxpbmdUaWNrUHJvY2Vzc2VkLCB0aGlzLm9uRmFsbGluZ1RpY2tQcm9jZXNzZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA8IDApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGxldCBwcmV2aW91c1RocmVzaG9sZFJld2FyZCA9IDA7XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcC5mb3JFYWNoKChyZXdhcmQsIHJvd3NTcXVhc2hlZFRocmVzaG9sZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvd3NTcXVhc2hlZFRocmVzaG9sZCA+IGV2ZW50LnNxdWFzaGVkTGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgPSByZXdhcmQ7XG4gICAgICAgIH0pO1xuICAgICAgICBldmVudC5nYW1lRGF0YS5zY29yZSArPVxuICAgICAgICAgICAgcHJldmlvdXNUaHJlc2hvbGRSZXdhcmQgKiBldmVudC5nYW1lRGF0YS5sZXZlbFxuICAgICAgICAgICAgKyB0aGlzLnJld2FyZE9uQ29tYm8gKiBNYXRoLm1heCgwLCBldmVudC5nYW1lRGF0YS5jb21ibyAtIDEpICogZXZlbnQuZ2FtZURhdGEubGV2ZWxcbiAgICAgICAgICAgICsgZXZlbnQuZHJvcHBlZExpbmVzICogMiAqIGV2ZW50LmdhbWVEYXRhLmxldmVsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIFNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciB7XG4gICAgcHJpdmF0ZSBzcXVhc2hlZFJvd3NDb3VudGVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGxldmVsSW5jcmVhc2VPblNxdWFzaGVkUm93c051bWJlcjogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIG1heExldmVsczogbnVtYmVyLFxuICAgICkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMuYWRkSGFuZGxlcihDb21tYW5kVHlwZS5Jbml0R2FtZSwgdGhpcy5wcm9jZXNzSW5pdEdhbWVDb21tYW5kLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzSW5pdEdhbWVDb21tYW5kKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZhbGxUaWNrUHJvY2Vzc2VkKGV2ZW50OiBGYWxsVGlja1Byb2Nlc3NlZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5zcXVhc2hlZExpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3F1YXNoZWRSb3dzQ291bnRlcisrO1xuICAgICAgICBpZiAodGhpcy5zcXVhc2hlZFJvd3NDb3VudGVyID49IHRoaXMubGV2ZWxJbmNyZWFzZU9uU3F1YXNoZWRSb3dzTnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLnNxdWFzaGVkUm93c0NvdW50ZXIgPSAwO1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEubGV2ZWwgPSBNYXRoLm1pbih0aGlzLm1heExldmVscywgZXZlbnQuZ2FtZURhdGEubGV2ZWwgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7RXZlbnRCdXMsIEV2ZW50VHlwZSwgRmFsbFRpY2tQcm9jZXNzZWRFdmVudH0gZnJvbSBcIi4uL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIENvbW1hbmRUeXBlLCBJbml0R2FtZUNvbW1hbmR9IGZyb20gXCIuLi9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcblxuZXhwb3J0IGNsYXNzIENvbWJvQ291bnRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwdWJsaWMgZXZlbnRCdXM6IEV2ZW50QnVzLFxuICAgICkge1xuICAgICAgICBjb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GYWxsaW5nVGlja1Byb2Nlc3NlZCwgdGhpcy5vbkZhbGxUaWNrUHJvY2Vzc2VkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GYWxsVGlja1Byb2Nlc3NlZChldmVudDogRmFsbFRpY2tQcm9jZXNzZWRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBldmVudC5nYW1lRGF0YS5jb21ibyArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQuZ2FtZURhdGEuY29tYm8gPSAwO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7R2FtZURhdGF9IGZyb20gXCIuLi9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIENvbnN0VGltaW5nc0hhbmRsZXIgaW1wbGVtZW50cyBUaW1pbmdzSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBkZWxheU1zOiBudW1iZXIsXG4gICAgKSB7fVxuXG4gICAgZ2V0RGVsYXlGb3JOZXh0VGlja01zKGdhbWVEYXRhOiBHYW1lRGF0YSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGF5TXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtDb21tYW5kQnVzLCBDb21tYW5kVHlwZSwgSW5pdEdhbWVDb21tYW5kfSBmcm9tIFwiLi4vQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnR9IGZyb20gXCIuLi9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuXG5leHBvcnQgY2xhc3MgU3RhdHNDb3VudGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21tYW5kQnVzOiBDb21tYW5kQnVzLFxuICAgICAgICBwcml2YXRlIGV2ZW50QnVzOiBFdmVudEJ1cyxcbiAgICApIHtcbiAgICAgICAgY29tbWFuZEJ1cy5hZGRIYW5kbGVyKENvbW1hbmRUeXBlLkluaXRHYW1lLCB0aGlzLmluaXRHYW1lSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRHYW1lSGFuZGxlcihjb21tYW5kOiBJbml0R2FtZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbihFdmVudFR5cGUuRmFsbGluZ1RpY2tQcm9jZXNzZWQsIHRoaXMub25GYWxsaW5nVGlja1Byb2Nlc3NlZC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRmFsbGluZ1RpY2tQcm9jZXNzZWQoZXZlbnQ6IEZhbGxUaWNrUHJvY2Vzc2VkRXZlbnQpIHtcbiAgICAgICAgZXZlbnQuZ2FtZURhdGEuc3RhdHMuZmlndXJlc0ZhbGxlbiArPSBldmVudC50cmFuc2ZlcnJlZFRvTWF0cml4RmlndXJlcy5sZW5ndGg7XG4gICAgICAgIGV2ZW50LmdhbWVEYXRhLnN0YXRzLmxpbmVzU3F1YXNoZWQgKz0gZXZlbnQuc3F1YXNoZWRMaW5lcy5sZW5ndGg7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lQ29udHJvbGxlcn0gZnJvbSAnLi9HYW1lQ29udHJvbGxlcidcbmltcG9ydCB7VGFibGVSZW5kZXJlciwgVGFibGVSZW5kZXJlclNldHRpbmdzfSBmcm9tICcuL1JlbmRlcmVyL1RhYmxlUmVuZGVyZXInXG5pbXBvcnQge1JlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3Nvcn0gZnJvbSBcIi4vRmFsbGluZ0ZpZ3VyZXNQcm9jZXNzb3IvUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yXCI7XG5pbXBvcnQge0Fsd2F5c09uZUZpZ3VyZVNwYXduZXJ9IGZyb20gXCIuL0ZpZ3VyZXNTcGF3bmVyL0Fsd2F5c09uZUZpZ3VyZVNwYXduZXJcIjtcbmltcG9ydCB7RXZlbnRCdXN9IGZyb20gXCIuL0V2ZW50QnVzL0V2ZW50QnVzXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIEluaXRHYW1lQ29tbWFuZCwgUGF1c2VHYW1lQ29tbWFuZCwgUmVzdW1lR2FtZUNvbW1hbmR9IGZyb20gXCIuL0NvbW1hbmRCdXMvQ29tbWFuZEJ1c1wiO1xuaW1wb3J0IHtNb3ZpbmdIYW5kbGVyfSBmcm9tIFwiLi9Nb3ZpbmdIYW5kbGVyL01vdmluZ0hhbmRsZXJcIjtcbmltcG9ydCB7TW92aW5nQ29udHJvbGxlcn0gZnJvbSBcIi4vTW92aW5nQ29udHJvbGxlci9Nb3ZpbmdDb250cm9sbGVyXCI7XG5pbXBvcnQge0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlcn0gZnJvbSBcIi4vVGltaW5nc0hhbmRsZXIvTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0ZhbGxUaWNrU2NvcmVDb3VudGVyfSBmcm9tIFwiLi9TY29yZUNvdW50ZXIvRmFsbFRpY2tTY29yZUNvdW50ZXJcIjtcbmltcG9ydCB7U3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyfSBmcm9tIFwiLi9MZXZlbENvdW50ZXIvU3F1YXNoZWRSb3dzQ291bnRlckJhc2VkTGV2ZWxDb3VudGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi9Db21tb25cIjtcbmltcG9ydCB7Q29tYm9Db3VudGVyfSBmcm9tIFwiLi9Db21ib0NvdW50ZXIvQ29tYm9Db3VudGVyXCI7XG5pbXBvcnQge0NvbnN0VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyL0NvbnN0VGltaW5nc0hhbmRsZXJcIjtcbmltcG9ydCB7U3RhdHNDb3VudGVyfSBmcm9tIFwiLi9TdGF0c0NvdW50ZXIvU3RhdHNDb3VudGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBUZXRyaXNGYWNhZGUge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1cyA9IG5ldyBFdmVudEJ1cygpLFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXMgPSBuZXcgQ29tbWFuZEJ1cygpLFxuICAgICAgICBwcml2YXRlIGdhbWVDb250cm9sbGVyID0gbmV3IEdhbWVDb250cm9sbGVyKFxuICAgICAgICAgICAgLy8gbmV3IExldmVsQmFzZWRUaW1pbmdzSGFuZGxlcigyMDAwKSxcbiAgICAgICAgICAgIG5ldyBDb25zdFRpbWluZ3NIYW5kbGVyKDIwMDApLFxuICAgICAgICAgICAgZXZlbnRCdXMsXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIG1vdmluZ0hhbmRsZXIgPSBuZXcgTW92aW5nSGFuZGxlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBtb3ZpbmdDb250cm9sbGVyID0gbmV3IE1vdmluZ0NvbnRyb2xsZXIoXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yID0gbmV3IFJlZ3VsYXJGYWxsaW5nRmlndXJlc1Byb2Nlc3NvcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1c1xuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIGZpZ3VyZXNTcGF3bmVyID0gbmV3IEFsd2F5c09uZUZpZ3VyZVNwYXduZXIoXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgbGV2ZWxDb3VudGVyID0gbmV3IFNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlcihcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIDgsXG4gICAgICAgICAgICAxNSxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBjb21ib0NvdW50ZXIgPSBuZXcgQ29tYm9Db3VudGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIHNjb3JlQ291bnRlciA9IG5ldyBGYWxsVGlja1Njb3JlQ291bnRlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBldmVudEJ1cyxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpdmF0ZSBzdGF0c0NvdW50ZXIgPSBuZXcgU3RhdHNDb3VudGVyKFxuICAgICAgICAgICAgY29tbWFuZEJ1cyxcbiAgICAgICAgICAgIGV2ZW50QnVzLFxuICAgICAgICApLFxuICAgICAgICBwcml2YXRlIHRhYmxlUmVuZGVyZXIgPSBuZXcgVGFibGVSZW5kZXJlcihcbiAgICAgICAgICAgIG5ldyBUYWJsZVJlbmRlcmVyU2V0dGluZ3MoXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjb21tYW5kQnVzLFxuICAgICAgICAgICAgZXZlbnRCdXNcbiAgICAgICAgKSxcbiAgICAgICAgcHVibGljIGdhbWVEYXRhID0gR2FtZURhdGEubWFrZVNpbXBsZSgpLFxuICAgICkge31cblxuICAgIHB1YmxpYyBzdGFydChnYW1lRGF0YT86IEdhbWVEYXRhKSB7XG4gICAgICAgIGdhbWVEYXRhID0gZ2FtZURhdGEgfHwgR2FtZURhdGEubWFrZVNpbXBsZSgpO1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBJbml0R2FtZUNvbW1hbmQoZ2FtZURhdGEpKTtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgUmVzdW1lR2FtZUNvbW1hbmQoZ2FtZURhdGEpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzdW1lKCkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBSZXN1bWVHYW1lQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHBhdXNlKCkge1xuICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBQYXVzZUdhbWVDb21tYW5kKHRoaXMuZ2FtZURhdGEpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0ZhbGxpbmdGaWd1cmV9IGZyb20gXCIuLi9UZXRyaXMvQ29tbW9uXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL1RldHJpcy9GaWd1cmVzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlndXJlUGxhY2luZ1N0ZXAge31cblxuZXhwb3J0IGNsYXNzIFR1cm5QbGFjaW5nU3RlcCBpbXBsZW1lbnRzIEZpZ3VyZVBsYWNpbmdTdGVwe1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgdGFyZ2V0OiBGaWd1cmVUdXJuU3RhdGVcbiAgICApIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlWFBsYWNpbmdTdGVwIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1N0ZXB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB0YXJnZXQ6IG51bWJlclxuICAgICkge31cbn1cblxuZXhwb3J0IGNsYXNzIE1vdmVZUGxhY2luZ1N0ZXAgaW1wbGVtZW50cyBGaWd1cmVQbGFjaW5nU3RlcHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHRhcmdldDogbnVtYmVyXG4gICAgKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgRHJvcFBsYWNpbmdTdGVwIGltcGxlbWVudHMgRmlndXJlUGxhY2luZ1N0ZXB7fVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1Jlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBmaWd1cmVzVGFyZ2V0U3RhdGVzOiBNYXA8RmFsbGluZ0ZpZ3VyZSwgRmFsbGluZ0ZpZ3VyZT4sXG4gICAgICAgIHB1YmxpYyBwbGFjaW5nU3RlcHM6IEZpZ3VyZVBsYWNpbmdTdGVwW10sXG4gICAgKSB7fVxufVxuIiwiaW1wb3J0IHtDb29yZGluYXRlLCBGYWxsaW5nRmlndXJlLCBHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcbmltcG9ydCB7RW51bUhlbHBlcn0gZnJvbSBcIi4uL1RldHJpcy9VdGlscy9FbnVtSGVscGVyXCI7XG5pbXBvcnQge0ZpZ3VyZVR1cm5TdGF0ZX0gZnJvbSBcIi4uL1RldHJpcy9GaWd1cmVzXCI7XG5pbXBvcnQge0ZpZ3VyZVBsYWNpbmdDaGVja2VyfSBmcm9tIFwiLi4vVGV0cmlzL1V0aWxzL0ZpZ3VyZVBsYWNpbmdDaGVja2VyXCI7XG5pbXBvcnQge0NvbW1hbmRCdXMsIFJlbmRlckNvbW1hbmR9IGZyb20gXCIuLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge1Njb3JlQ2FsY3VsYXRvcn0gZnJvbSBcIi4vU2NvcmVDYWxjdWxhdG9yXCI7XG5pbXBvcnQge0Ryb3BQbGFjaW5nU3RlcCwgRmlndXJlUGxhY2luZ1Jlc3VsdCwgRmlndXJlUGxhY2luZ1N0ZXAsIE1vdmVYUGxhY2luZ1N0ZXAsIFR1cm5QbGFjaW5nU3RlcH0gZnJvbSBcIi4vQ29tbW9uXCI7XG5cbmNsYXNzIFBsYWNlUmVzb2x2aW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5cbmNsYXNzIEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yIGV4dGVuZHMgUGxhY2VSZXNvbHZpbmdFcnJvciB7XG59XG5cbmV4cG9ydCBjbGFzcyBGaWd1cmVQbGFjaW5nUmVzb2x2ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgc2NvcmVDYWxjdWxhdG9yOiBTY29yZUNhbGN1bGF0b3IsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIHJlc29sdmUoZ2FtZURhdGE6IEdhbWVEYXRhKTogRmlndXJlUGxhY2luZ1Jlc3VsdHx1bmRlZmluZWQge1xuICAgICAgICBpZiAoZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdhbWVTdGF0ZU5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxGaWd1cmUgPSBnYW1lRGF0YS5mYWxsaW5nRmlndXJlc1swXTtcblxuICAgICAgICBsZXQgbWF4U2NvcmUgPSAtSW5maW5pdHk7XG4gICAgICAgIGxldCB0aGVCZXN0UmVzdWx0ID0gbmV3IEZpZ3VyZVBsYWNpbmdSZXN1bHQobmV3IE1hcCgpLCBbXSk7XG5cbiAgICAgICAgdGhpcy5wcm9jZXNzU3RhdGVzKGdhbWVEYXRhLCAoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSwgc2NvcmU6IG51bWJlciwgcGxhY2luZ0RpcmVjdGlvbnM6IEZpZ3VyZVBsYWNpbmdTdGVwW10pID0+IHtcbiAgICAgICAgICAgIGlmIChzY29yZSA+IG1heFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgbWF4U2NvcmUgPSBzY29yZTtcbiAgICAgICAgICAgICAgICB0aGVCZXN0UmVzdWx0ID0gbmV3IEZpZ3VyZVBsYWNpbmdSZXN1bHQoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBNYXAoW1tvcmlnaW5hbEZpZ3VyZSwgaW1hZ2luYWJsZUZpZ3VyZV1dKSxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2luZ0RpcmVjdGlvbnNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGxldCBkZWJ1Z01vZGUgPSAnZGVidWdNb2RlJyBpbiB3aW5kb3cgJiYgd2luZG93LmRlYnVnTW9kZTtcbiAgICAgICAgbGV0IGltYWdpbmFibGVGaWd1cmUgPSB0aGVCZXN0UmVzdWx0LmZpZ3VyZXNUYXJnZXRTdGF0ZXMuZ2V0KG9yaWdpbmFsRmlndXJlKTtcbiAgICAgICAgaWYgKGRlYnVnTW9kZSAmJiBpbWFnaW5hYmxlRmlndXJlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBmYWtlR2FtZURhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoZ2FtZURhdGEpO1xuICAgICAgICAgICAgaW1hZ2luYWJsZUZpZ3VyZS5jb2xvciA9ICcjZjAwJztcbiAgICAgICAgICAgIGZha2VHYW1lRGF0YS5mYWxsaW5nRmlndXJlcyA9IFtpbWFnaW5hYmxlRmlndXJlXTtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQoZmFrZUdhbWVEYXRhKSk7XG5cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1N0YXRlcyhnYW1lRGF0YSwgdW5kZWZpbmVkLCAoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSkgPT4ge1xuICAgICAgICAgICAgICAgIGltYWdpbmFibGVGaWd1cmUuY29sb3IgPSAnIzAwZic7XG4gICAgICAgICAgICAgICAgZmFrZUdhbWVEYXRhLmZhbGxpbmdGaWd1cmVzID0gW2ltYWdpbmFibGVGaWd1cmVdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IFJlbmRlckNvbW1hbmQoZmFrZUdhbWVEYXRhKSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoZUJlc3RSZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9jZXNzU3RhdGVzKFxuICAgICAgICBnYW1lRGF0YTogR2FtZURhdGEsXG4gICAgICAgIG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXM/OiAoaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSwgc2NvcmU6IG51bWJlciwgcGxhY2luZ0RpcmVjdGlvbnM6IEZpZ3VyZVBsYWNpbmdTdGVwW10pID0+IHZvaWQsXG4gICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzPzogKGltYWdpbmFibGVGaWd1cmU6IEZhbGxpbmdGaWd1cmUpID0+IHZvaWQsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRmlndXJlID0gZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXNbMF07XG5cbiAgICAgICAgbGV0IGVudW1zID0gRW51bUhlbHBlci5Ub0FycmF5KEZpZ3VyZVR1cm5TdGF0ZSk7XG4gICAgICAgIHdoaWxlIChlbnVtc1swXSAhPT0gb3JpZ2luYWxGaWd1cmUudHVyblN0YXRlKSB7XG4gICAgICAgICAgICBlbnVtcy51bnNoaWZ0KGVudW1zLnBvcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWF0cmljZXM6IE1hcDxGaWd1cmVUdXJuU3RhdGUsIGJvb2xlYW5bXVtdPiA9IG5ldyBNYXAoKTtcbiAgICAgICAgZW51bXMuZm9yRWFjaCh0dXJuU3RhdGUgPT4ge1xuICAgICAgICAgICAgbWF0cmljZXMuc2V0KHR1cm5TdGF0ZSwgb3JpZ2luYWxGaWd1cmUuZmlndXJlLmdldFR1cm4odHVyblN0YXRlKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1hdHJpY2VzLmZvckVhY2goKGZpZ3VyZU1hdHJpeCwgdHVyblN0YXRlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkV2lkdGggLSBmaWd1cmVNYXRyaXhbMF0ubGVuZ3RoICsgMTsgeCsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IFt5LCBpbWFnaW5hYmxlTWF0cml4XSA9IHRoaXMuaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZURhdGEubWF0cml4LCBmaWd1cmVNYXRyaXgsIHgpO1xuICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoeCwgeSk7XG4gICAgICAgICAgICAgICAgbGV0IHNxdWFzaGVkTGluZXNDb3VudCA9IHRoaXMuc3F1YXNoTGluZXMoaW1hZ2luYWJsZU1hdHJpeCk7XG4gICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVGaWd1cmUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShvcmlnaW5hbEZpZ3VyZS5maWd1cmUsIGNvb3JkaW5hdGUsIHR1cm5TdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLnNjb3JlQ2FsY3VsYXRvci5jYWxjdWxhdGVTY29yZShnYW1lRGF0YSwgaW1hZ2luYWJsZU1hdHJpeCwgc3F1YXNoZWRMaW5lc0NvdW50KTtcbiAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9ucyA9IHRoaXMubWFrZVNpbXBsZVBsYWNpbmdTdGVwcyhvcmlnaW5hbEZpZ3VyZSwgaW1hZ2luYWJsZUZpZ3VyZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgb25BZnRlclNjb3JlQ2FsY3VsYXRlcyhpbWFnaW5hYmxlRmlndXJlLCBzY29yZSwgZGlyZWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBvcGVuSG9sZXMgPSB0aGlzLmNvbGxlY3RPcGVuSG9sZXMoZ2FtZURhdGEubWF0cml4KTtcbiAgICAgICAgb3BlbkhvbGVzLmZvckVhY2goKFt0b3BMZWZ0Q29vcmRpbmF0ZSwgYm90dG9tUmlnaHRDb29yZGluYXRlXTogW0Nvb3JkaW5hdGUsIENvb3JkaW5hdGVdKSA9PiB7XG4gICAgICAgICAgICBtYXRyaWNlcy5mb3JFYWNoKChmaWd1cmVNYXRyaXgsIHR1cm5TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSBNYXRoLm1pbih0b3BMZWZ0Q29vcmRpbmF0ZS55IC0gZmlndXJlTWF0cml4Lmxlbmd0aCwgMCk7IHkrKzsgeSA8PSBib3R0b21SaWdodENvb3JkaW5hdGUueSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gTWF0aC5taW4odG9wTGVmdENvb3JkaW5hdGUueCAtIGZpZ3VyZU1hdHJpeFswXS5sZW5ndGgsIDApOyB4Kys7IHggPD0gYm90dG9tUmlnaHRDb29yZGluYXRlLngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoeCwgeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRmlndXJlUGxhY2luZ0NoZWNrZXIuY2FuRmlndXJlQmVQbGFjZWQoZmlndXJlTWF0cml4LCBjb29yZGluYXRlLCBnYW1lRGF0YS5tYXRyaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdpbmFibGVGaWd1cmUgPSBuZXcgRmFsbGluZ0ZpZ3VyZShvcmlnaW5hbEZpZ3VyZS5maWd1cmUsIGNvb3JkaW5hdGUsIHR1cm5TdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbnMgPSB0aGlzLm1ha2VQdXNoSW5QbGFjaW5nU3RlcHMoZ2FtZURhdGEsIG9yaWdpbmFsRmlndXJlLCBpbWFnaW5hYmxlRmlndXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWFnaW5hYmxlTWF0cml4ID0gdGhpcy5pbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lRGF0YS5tYXRyaXgsIGZpZ3VyZU1hdHJpeCwgY29vcmRpbmF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcXVhc2hlZExpbmVzQ291bnQgPSB0aGlzLnNxdWFzaExpbmVzKGltYWdpbmFibGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25CZWZvcmVTY29yZUNhbGN1bGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQmVmb3JlU2NvcmVDYWxjdWxhdGVzKGltYWdpbmFibGVGaWd1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMuc2NvcmVDYWxjdWxhdG9yLmNhbGN1bGF0ZVNjb3JlKGdhbWVEYXRhLCBpbWFnaW5hYmxlTWF0cml4LCBzcXVhc2hlZExpbmVzQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25BZnRlclNjb3JlQ2FsY3VsYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZnRlclNjb3JlQ2FsY3VsYXRlcyhpbWFnaW5hYmxlRmlndXJlLCBzY29yZSwgZGlyZWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcXVhc2hMaW5lcyhtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxpbmVzVG9TcXVhc2g6IG51bWJlcltdID0gW107XG4gICAgICAgIG1hdHJpeC5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIGxldCBjYW5CZVNxdWFzaGVkID0gcm93LmV2ZXJ5KGNlbGwgPT4gY2VsbCk7XG4gICAgICAgICAgICBpZiAoY2FuQmVTcXVhc2hlZCkge1xuICAgICAgICAgICAgICAgIGxpbmVzVG9TcXVhc2gucHVzaCh5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGxpbmVzVG9TcXVhc2guZm9yRWFjaCh5ID0+IHtcbiAgICAgICAgICAgIG1hdHJpeC5zcGxpY2UoeSwgMSk7XG4gICAgICAgICAgICBtYXRyaXgudW5zaGlmdChuZXcgQXJyYXkobWF0cml4WzBdLmxlbmd0aCkuZmlsbChmYWxzZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpbmVzVG9TcXVhc2gubGVuZ3RoO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW1hZ2luZUZpZ3VyZURyb3AoZ2FtZU1hdHJpeDogYm9vbGVhbltdW10sIGZpZ3VyZU1hdHJpeDogYm9vbGVhbltdW10sIHRhcmdldFg6IG51bWJlcik6IFtudW1iZXIsIGJvb2xlYW5bXVtdXSB7XG4gICAgICAgIGxldCB0YXJnZXRZID0gLWZpZ3VyZU1hdHJpeC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChGaWd1cmVQbGFjaW5nQ2hlY2tlci5jYW5GaWd1cmVCZVBsYWNlZChmaWd1cmVNYXRyaXgsIG5ldyBDb29yZGluYXRlKHRhcmdldFgsIHRhcmdldFkgKyAxKSwgZ2FtZU1hdHJpeCkpIHtcbiAgICAgICAgICAgIHRhcmdldFkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdGFyZ2V0WSxcbiAgICAgICAgICAgIHRoaXMuaW1hZ2luZUZpZ3VyZVBsYWNpbmcoZ2FtZU1hdHJpeCwgZmlndXJlTWF0cml4LCBuZXcgQ29vcmRpbmF0ZSh0YXJnZXRYLCB0YXJnZXRZKSksXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbWFnaW5lRmlndXJlUGxhY2luZyhnYW1lTWF0cml4OiBib29sZWFuW11bXSwgZmlndXJlTWF0cml4OiBib29sZWFuW11bXSwgdGFyZ2V0Q29vcmRpbmF0ZTogQ29vcmRpbmF0ZSk6IGJvb2xlYW5bXVtdIHtcbiAgICAgICAgbGV0IGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdID0gc3RydWN0dXJlZENsb25lKGdhbWVNYXRyaXgpO1xuICAgICAgICBmaWd1cmVNYXRyaXguZm9yRWFjaCgocm93LCBmaWd1cmVZKSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCBmaWd1cmVYKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbFkgPSB0YXJnZXRDb29yZGluYXRlLnkgKyBmaWd1cmVZO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxYID0gdGFyZ2V0Q29vcmRpbmF0ZS54ICsgZmlndXJlWDtcbiAgICAgICAgICAgICAgICBpZiAocmVhbFkgaW4gaW1hZ2luYWJsZU1hdHJpeFxuICAgICAgICAgICAgICAgICAgICAmJiByZWFsWCBpbiBpbWFnaW5hYmxlTWF0cml4W3JlYWxZXVxuICAgICAgICAgICAgICAgICAgICAmJiB2YWxcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZU1hdHJpeFtyZWFsWV1bcmVhbFhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGltYWdpbmFibGVNYXRyaXg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb2xsZWN0T3BlbkhvbGVzKG1hdHJpeDogYm9vbGVhbltdW10pOiBbQ29vcmRpbmF0ZSwgQ29vcmRpbmF0ZV1bXVxuICAgIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZVB1c2hJblBsYWNpbmdTdGVwcyhnYW1lRGF0YTogR2FtZURhdGEsIG9yaWdpbmFsRmlndXJlOiBGYWxsaW5nRmlndXJlLCBpbWFnaW5hYmxlRmlndXJlOiBGYWxsaW5nRmlndXJlKTogRmlndXJlUGxhY2luZ1N0ZXBbXXx1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZVNpbXBsZVBsYWNpbmdTdGVwcyhvcmlnaW5hbEZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSwgaW1hZ2luYWJsZUZpZ3VyZTogRmFsbGluZ0ZpZ3VyZSk6IEZpZ3VyZVBsYWNpbmdTdGVwW10ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgbmV3IFR1cm5QbGFjaW5nU3RlcChpbWFnaW5hYmxlRmlndXJlLnR1cm5TdGF0ZSksXG4gICAgICAgICAgICBuZXcgTW92ZVhQbGFjaW5nU3RlcChpbWFnaW5hYmxlRmlndXJlLnBvc2l0aW9uLngpLFxuICAgICAgICAgICAgbmV3IERyb3BQbGFjaW5nU3RlcCgpLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VGltaW5nc0hhbmRsZXJ9IGZyb20gXCIuL1RpbWluZ3NIYW5kbGVyXCI7XG5pbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vQ29tbW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBMZXZlbEJhc2VkVGltaW5nc0hhbmRsZXIgaW1wbGVtZW50cyBUaW1pbmdzSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbERlbGF5TXM6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBiYXNlOiBudW1iZXIgPSAwLjgsXG4gICAgKSB7fVxuXG4gICAgZ2V0RGVsYXlGb3JOZXh0VGlja01zKGdhbWVEYXRhOiBHYW1lRGF0YSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdyh0aGlzLmJhc2UgLSAoZ2FtZURhdGEubGV2ZWwgLSAxKSAqIDAuMDA3LCBnYW1lRGF0YS5sZXZlbCAtIDEpICogdGhpcy5pbml0aWFsRGVsYXlNcztcbiAgICB9XG59XG4iLCJpbXBvcnQge0dhbWVEYXRhfSBmcm9tIFwiLi4vVGV0cmlzL0NvbW1vblwiO1xuaW1wb3J0IHtDb21tYW5kQnVzLCBEcm9wRmlndXJlc0NvbW1hbmQsIE1vdmVEb3duQ29tbWFuZCwgTW92ZUxlZnRDb21tYW5kLCBNb3ZlUmlnaHRDb21tYW5kLCBUdXJuQ2xvY2t3aXNlQ29tbWFuZH0gZnJvbSBcIi4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7TGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyfSBmcm9tIFwiLi4vVGV0cmlzL1RpbWluZ3NIYW5kbGVyL0xldmVsQmFzZWRUaW1pbmdzSGFuZGxlclwiO1xuaW1wb3J0IHtEcm9wUGxhY2luZ1N0ZXAsIEZpZ3VyZVBsYWNpbmdSZXN1bHQsIEZpZ3VyZVBsYWNpbmdTdGVwLCBNb3ZlWFBsYWNpbmdTdGVwLCBNb3ZlWVBsYWNpbmdTdGVwLCBUdXJuUGxhY2luZ1N0ZXB9IGZyb20gXCIuL0NvbW1vblwiO1xuXG5jbGFzcyBQbGFjaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7fVxuY2xhc3MgR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IgZXh0ZW5kcyBQbGFjaW5nRXJyb3Ige31cbmNsYXNzIEluY29uc2lzdGVudFRhcmdldFN0YXRlRXJyb3IgZXh0ZW5kcyBQbGFjaW5nRXJyb3Ige31cbmNsYXNzIE5vdFN1cHBvcnRlZERpcmVjdGlvblN0ZXBFcnJvciBleHRlbmRzIFBsYWNpbmdFcnJvciB7fVxuXG5leHBvcnQgY2xhc3MgRmlndXJlUGxhY2luZ1BlcmZvcm1lciB7XG4gICAgcHJpdmF0ZSBuZXh0TW92ZVRpbWVvdXRJZDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gPSBzZXRUaW1lb3V0KCgpID0+IHt9KTtcbiAgICBwcml2YXRlIHRhcmdldFN0YXRlPzogRmlndXJlUGxhY2luZ1Jlc3VsdDtcbiAgICBwcml2YXRlIGdhbWVEYXRhOiBHYW1lRGF0YSA9IEdhbWVEYXRhLm1ha2VTaW1wbGUoKTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGNvbW1hbmRCdXM6IENvbW1hbmRCdXMsXG4gICAgICAgIHByaXZhdGUgdGltaW5nc0hhbmRsZXIgPSBuZXcgTGV2ZWxCYXNlZFRpbWluZ3NIYW5kbGVyKDEwMCwgMC45KSxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgcGxhY2UoZ2FtZURhdGE6IEdhbWVEYXRhLCB0YXJnZXRTdGF0ZT86IEZpZ3VyZVBsYWNpbmdSZXN1bHQpIHtcbiAgICAgICAgdGhpcy5nYW1lRGF0YSA9IGdhbWVEYXRhO1xuICAgICAgICB0aGlzLnRhcmdldFN0YXRlID0gdGFyZ2V0U3RhdGU7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm5leHRNb3ZlVGltZW91dElkKTtcbiAgICAgICAgdGhpcy5uZXh0TW92ZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NUaWNrLmJpbmQodGhpcyksXG4gICAgICAgICAgICB0aGlzLnRpbWluZ3NIYW5kbGVyLmdldERlbGF5Rm9yTmV4dFRpY2tNcyh0aGlzLmdhbWVEYXRhKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2Nlc3NUaWNrKCkge1xuICAgICAgICBpZiAodGhpcy5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nYW1lRGF0YS5mYWxsaW5nRmlndXJlcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHYW1lU3RhdGVOb3RTdXBwb3J0ZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbEZpZ3VyZSA9IHRoaXMuZ2FtZURhdGEuZmFsbGluZ0ZpZ3VyZXNbMF07XG4gICAgICAgIGNvbnN0IHRhcmdldEZpZ3VyZSA9IHRoaXMudGFyZ2V0U3RhdGUuZmlndXJlc1RhcmdldFN0YXRlcy5nZXQob3JpZ2luYWxGaWd1cmUpO1xuICAgICAgICBpZiAoIXRhcmdldEZpZ3VyZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsRmlndXJlLmZpZ3VyZSAhPT0gdGFyZ2V0RmlndXJlLmZpZ3VyZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEluY29uc2lzdGVudFRhcmdldFN0YXRlRXJyb3IoXCJCb3RoIG9mIHRoZSBvcmlnaW5hbCBhbmQgdGhlIHRhcmdldCBmYWxsaW5nIGZpZ3VyZXMgbXVzdCBoYXZlIHRoZSBzYW1lIGZpZ3VyZSBpbiBpdC5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWxsU3RlcHNQYXNzZWQgPSB0aGlzLnRhcmdldFN0YXRlLnBsYWNpbmdTdGVwcy5ldmVyeShzdGVwID0+IHtcbiAgICAgICAgICAgIGlmIChzdGVwIGluc3RhbmNlb2YgVHVyblBsYWNpbmdTdGVwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsRmlndXJlLnR1cm5TdGF0ZSAhPT0gc3RlcC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgVHVybkNsb2Nrd2lzZUNvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGVwIGluc3RhbmNlb2YgTW92ZVhQbGFjaW5nU3RlcCkge1xuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbEZpZ3VyZS5wb3NpdGlvbi54ICE9PSBzdGVwLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUucG9zaXRpb24ueCA+IHN0ZXAudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBNb3ZlTGVmdENvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kQnVzLnJ1bihuZXcgTW92ZVJpZ2h0Q29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RlcCBpbnN0YW5jZW9mIE1vdmVZUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxGaWd1cmUucG9zaXRpb24ueSA8IHN0ZXAudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZEJ1cy5ydW4obmV3IE1vdmVEb3duQ29tbWFuZCh0aGlzLmdhbWVEYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0ZXAgaW5zdGFuY2VvZiBEcm9wUGxhY2luZ1N0ZXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRCdXMucnVuKG5ldyBEcm9wRmlndXJlc0NvbW1hbmQodGhpcy5nYW1lRGF0YSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRGlyZWN0aW9uU3RlcEVycm9yKFwiVW5rbm93biBzdGVwIFwiICsgc3RlcC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFhbGxTdGVwc1Bhc3NlZCkge1xuICAgICAgICAgICAgLy8gdGhpcy5wcm9jZXNzVGljaygpO1xuICAgICAgICAgICAgdGhpcy5uZXh0TW92ZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGljay5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIC8vIDAsXG4gICAgICAgICAgICAgICAgdGhpcy50aW1pbmdzSGFuZGxlci5nZXREZWxheUZvck5leHRUaWNrTXModGhpcy5nYW1lRGF0YSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHYW1lRGF0YX0gZnJvbSBcIi4uL1RldHJpcy9Db21tb25cIjtcblxuZXhwb3J0IGNsYXNzIFNjb3JlQ2FsY3VsYXRvciB7XG4gICAgcHVibGljIGNhbGN1bGF0ZVNjb3JlKGdhbWVEYXRhOiBHYW1lRGF0YSwgbWF0cml4OiBib29sZWFuW11bXSwgc3F1YXNoZWRMaW5lc0NvdW50OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBmaWVsZEhlaWdodCA9IGdhbWVEYXRhLnNldHRpbmdzLmZpZWxkSGVpZ2h0O1xuICAgICAgICBjb25zdCBmaWVsZFdpZHRoID0gZ2FtZURhdGEuc2V0dGluZ3MuZmllbGRXaWR0aDtcbiAgICAgICAgY29uc3Qgc3F1YXNoZWRMaW5lc1Njb3JlID0gc3F1YXNoZWRMaW5lc0NvdW50ICogNTtcblxuICAgICAgICBjb25zdCBvcmlnaW5hbEhvbGVzQ291bnQgPSB0aGlzLmNhbGN1bGF0ZUhvbGVzKGdhbWVEYXRhLm1hdHJpeCk7XG4gICAgICAgIGNvbnN0IFtob2xlc0NvdW50LCBob2xlc0NvdmVyZWRIZWlnaHRdID0gdGhpcy5jYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQobWF0cml4LCBnYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBjb25zdCBob2xlc0NvdW50RGVjcmVhc2UgPSBvcmlnaW5hbEhvbGVzQ291bnQgLSBob2xlc0NvdW50O1xuICAgICAgICBsZXQgaG9sZXNTY29yZTogbnVtYmVyO1xuICAgICAgICBpZiAoaG9sZXNDb3ZlcmVkSGVpZ2h0ID09PSAwIHx8IGhvbGVzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIGhvbGVzU2NvcmUgPSAoaG9sZXNDb3VudERlY3JlYXNlID4gMCA/IGhvbGVzQ291bnREZWNyZWFzZSAqIDE1MCA6IGhvbGVzQ291bnREZWNyZWFzZSAqIDcwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhvbGVzU2NvcmUgPSAoaG9sZXNDb3VudERlY3JlYXNlID4gMCA/IGhvbGVzQ291bnREZWNyZWFzZSAqIDE1MCA6IGhvbGVzQ291bnREZWNyZWFzZSAqIDcwKVxuICAgICAgICAgICAgICAgIC0gaG9sZXNDb3ZlcmVkSGVpZ2h0ICogTWF0aC5wb3coaG9sZXNDb3ZlcmVkSGVpZ2h0LCBob2xlc0NvdmVyZWRIZWlnaHQgLyAoZmllbGRIZWlnaHQgKiBob2xlc0NvdW50KSkgKiA1O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jYWxjdWxhdGVIZWlnaHQobWF0cml4KTtcbiAgICAgICAgY29uc3QgaGVpZ2h0U2NvcmUgPSAtaGVpZ2h0ICogTWF0aC5wb3coaGVpZ2h0LCBoZWlnaHQgLyBmaWVsZEhlaWdodCkgKiAzO1xuXG4gICAgICAgIGNvbnN0IFtmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlSGVpZ2h0XSA9IHRoaXMuY2FsY3VsYXRlRmlsbGFibGVTcGFjZShtYXRyaXgsIGZpZWxkV2lkdGgpO1xuICAgICAgICBsZXQgZmlsbGFibGVDZWxsc1Njb3JlID0gMDtcbiAgICAgICAgaWYgKGZpbGxhYmxlSGVpZ2h0ID4gNSkge1xuICAgICAgICAgICAgZmlsbGFibGVDZWxsc1Njb3JlID0gLWZpbGxhYmxlQ2VsbHNDb3VudCAqIE1hdGgucG93KGZpbGxhYmxlQ2VsbHNDb3VudCwgZmlsbGFibGVDZWxsc0NvdW50IC8gKGZpZWxkSGVpZ2h0ICogZmllbGRXaWR0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgW3R1bm5lbHNTdW1IZWlnaHQsIHR1bm5lbHNDb3VudF0gPSB0aGlzLmNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQobWF0cml4LCBnYW1lRGF0YS5tYXRyaXgpO1xuICAgICAgICBsZXQgdHVubmVsc1Njb3JlOiBudW1iZXI7XG4gICAgICAgIGlmICh0dW5uZWxzQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHR1bm5lbHNTY29yZSA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0dW5uZWxzU2NvcmUgPSAtdHVubmVsc0NvdW50ICogNzBcbiAgICAgICAgICAgICAgICAtIHR1bm5lbHNTdW1IZWlnaHQgKiBNYXRoLnBvdyh0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzU3VtSGVpZ2h0IC8gKGZpZWxkSGVpZ2h0ICogdHVubmVsc0NvdW50KSkgKiA3O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2NvcmUgPSBob2xlc1Njb3JlICsgc3F1YXNoZWRMaW5lc1Njb3JlICsgaGVpZ2h0U2NvcmUgKyB0dW5uZWxzU2NvcmUgKyBmaWxsYWJsZUNlbGxzU2NvcmU7XG4gICAgICAgIGlmIChpc05hTihzY29yZSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1hdHJpeCwgaG9sZXNTY29yZSwgc3F1YXNoZWRMaW5lc1Njb3JlLCBoZWlnaHRTY29yZSwgdHVubmVsc1Njb3JlLCBmaWxsYWJsZUNlbGxzU2NvcmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY29yZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhvbGVzKGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+O1xuICAgICAgICBsZXQgaG9sZXNDb3VudCA9IDA7XG4gICAgICAgIGltYWdpbmFibGVNYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1ucy5hZGQoeCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3ZlcmVkQ29sdW1ucy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGhvbGVzQ291bnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVIb2xlc0FuZENvdmVyZWRIZWlnaHQoaW1hZ2luYWJsZU1hdHJpeDogYm9vbGVhbltdW10sIHJlYWxNYXRyaXg6IGJvb2xlYW5bXVtdKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICAgIGNvbnN0IFtvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSwgb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZXSA9IHRoaXMuY2FsY3VsYXRlVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWShyZWFsTWF0cml4KTtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zWXMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPjtcbiAgICAgICAgbGV0IGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gPSAwO1xuICAgICAgICBsZXQgaG9sZXNDb3VudCA9IDA7XG4gICAgICAgIGltYWdpbmFibGVNYXRyaXguZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgICAgICAgICByb3cuZm9yRWFjaCgodmFsLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbCAmJiAhY292ZXJlZENvbHVtbnNZcy5oYXMoeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZENvbHVtbnNZcy5zZXQoeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBjb3ZlcmVkWSA9IGNvdmVyZWRDb2x1bW5zWXMuZ2V0KHgpO1xuICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkWSAhPT0gdW5kZWZpbmVkICYmICF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZXNDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxUaGVIaWdoZXN0SG9sZVkgIT09IHVuZGVmaW5lZCAmJiBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkgPCBvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gKz0geSAtIGNvdmVyZWRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3ZlcmVkWSA8IG9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvbGVzQ292ZXJlZEhlaWdodHNTdW0gKz0gb3JpZ2luYWxUaGVIaWdoZXN0SG9sZUNvdmVyZWRZIC0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbaG9sZXNDb3VudCwgaG9sZXNDb3ZlcmVkSGVpZ2h0c1N1bV07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVUaGVIaWdoZXN0SG9sZUNvdmVyZWRZKG1hdHJpeDogYm9vbGVhbltdW10pOiBbbnVtYmVyfHVuZGVmaW5lZCwgbnVtYmVyfHVuZGVmaW5lZF0ge1xuICAgICAgICBsZXQgdGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHRoZUhpZ2hlc3RIb2xlWSA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zWXMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPjtcbiAgICAgICAgbWF0cml4LnNvbWUoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJvdy5zb21lKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmICFjb3ZlcmVkQ29sdW1uc1lzLmhhcyh4KSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkQ29sdW1uc1lzLnNldCh4LCB5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvdmVyZWRZID0gY292ZXJlZENvbHVtbnNZcy5nZXQoeCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRZICE9PSB1bmRlZmluZWQgJiYgIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGVIaWdoZXN0SG9sZVkgPSB5O1xuICAgICAgICAgICAgICAgICAgICB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZID0gY292ZXJlZFk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbdGhlSGlnaGVzdEhvbGVZLCB0aGVIaWdoZXN0SG9sZUNvdmVyZWRZXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUhlaWdodChtYXRyaXg6IGJvb2xlYW5bXVtdKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGxvd2VzdEVtcHR5WSA9IC0xO1xuICAgICAgICBtYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJvdy5ldmVyeSh2YWwgPT4gIXZhbCkpIHtcbiAgICAgICAgICAgICAgICBsb3dlc3RFbXB0eVkgPSB5O1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWF0cml4Lmxlbmd0aCAtIGxvd2VzdEVtcHR5WSAtIDE7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVUdW5uZWxzRXhjZXB0VW5jb3ZlcmVkKGltYWdpbmFibGVNYXRyaXg6IGJvb2xlYW5bXVtdLCByZWFsTWF0cml4OiBib29sZWFuW11bXSk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgICAgICBsZXQgcmVhbENvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIHJlYWxNYXRyaXguZXZlcnkoKHJvdykgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhbENvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICAgICAgICBsZXQgdHVubmVscyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+O1xuICAgICAgICBjb25zdCBmaWVsZFdpZHRoID0gaW1hZ2luYWJsZU1hdHJpeFswXS5sZW5ndGg7XG4gICAgICAgIGltYWdpbmFibGVNYXRyaXguZXZlcnkoKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHZhbCwgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbFxuICAgICAgICAgICAgICAgICAgICAmJiAhaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zLmhhcyh4KVxuICAgICAgICAgICAgICAgICAgICAmJiAhcmVhbENvdmVyZWRDb2x1bW5zLmhhcyh4KVxuICAgICAgICAgICAgICAgICAgICAmJiAoeCA9PT0gMCB8fCBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuaGFzKHggLSAxKSlcbiAgICAgICAgICAgICAgICAgICAgJiYgKHggPT09IGZpZWxkV2lkdGggLSAxIHx8IGltYWdpbmFibGVDb3ZlcmVkQ29sdW1ucy5oYXMoeCArIDEpKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0dW5uZWxzLnNldCh4LCAodHVubmVscy5nZXQoeCkgfHwgMCkgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBpbWFnaW5hYmxlQ292ZXJlZENvbHVtbnMuc2l6ZSA8IGZpZWxkV2lkdGg7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgdHVubmVsc1N1bUhlaWdodCA9IDA7XG4gICAgICAgIGxldCB0dW5uZWxzQ291bnQgPSAwO1xuICAgICAgICB0dW5uZWxzLmZvckVhY2goaGVpZ2h0ID0+IHtcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPj0gMykge1xuICAgICAgICAgICAgICAgIHR1bm5lbHNTdW1IZWlnaHQgKz0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHR1bm5lbHNDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt0dW5uZWxzU3VtSGVpZ2h0LCB0dW5uZWxzQ291bnRdO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlRmlsbGFibGVTcGFjZShtYXRyaXg6IGJvb2xlYW5bXVtdLCBmaWVsZFdpZHRoOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgbGV0IGNvdmVyZWRDb2x1bW5zID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgICAgIGxldCBmaWxsYWJsZUNlbGxzQ291bnQgPSAwO1xuICAgICAgICBsZXQgZmlsbGFibGVIZWlnaHQgPSAwO1xuICAgICAgICBtYXRyaXguZXZlcnkocm93ID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWRDb2x1bW5zLmFkZCh4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh2YWwsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbCAmJiBjb3ZlcmVkQ29sdW1ucy5zaXplID4gMCAmJiAhY292ZXJlZENvbHVtbnMuaGFzKHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlQ2VsbHNDb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLnNpemUgPCBmaWVsZFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRDb2x1bW5zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlSGVpZ2h0Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtmaWxsYWJsZUNlbGxzQ291bnQsIGZpbGxhYmxlSGVpZ2h0XTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0V2ZW50QnVzLCBFdmVudFR5cGUsIEZpZ3VyZXNTcGF3bmVkRXZlbnR9IGZyb20gXCIuLi9UZXRyaXMvRXZlbnRCdXMvRXZlbnRCdXNcIjtcbmltcG9ydCB7Q29tbWFuZEJ1cywgQ29tbWFuZFR5cGUsIEluaXRHYW1lQ29tbWFuZH0gZnJvbSBcIi4uL1RldHJpcy9Db21tYW5kQnVzL0NvbW1hbmRCdXNcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1Jlc29sdmVyfSBmcm9tIFwiLi9GaWd1cmVQbGFjaW5nUmVzb2x2ZXJcIjtcbmltcG9ydCB7RmlndXJlUGxhY2luZ1BlcmZvcm1lcn0gZnJvbSBcIi4vRmlndXJlUGxhY2luZ1BlcmZvcm1lclwiO1xuaW1wb3J0IHtTY29yZUNhbGN1bGF0b3J9IGZyb20gXCIuL1Njb3JlQ2FsY3VsYXRvclwiO1xuXG5leHBvcnQgY2xhc3MgVGV0cmlzU29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBldmVudEJ1czogRXZlbnRCdXMsXG4gICAgICAgIHByaXZhdGUgY29tbWFuZEJ1czogQ29tbWFuZEJ1cyxcbiAgICAgICAgcHJpdmF0ZSBmYWxsaW5nRmlndXJlUGxhY2luZ1Jlc29sdmVyID0gbmV3IEZpZ3VyZVBsYWNpbmdSZXNvbHZlcihcbiAgICAgICAgICAgIGNvbW1hbmRCdXMsXG4gICAgICAgICAgICBuZXcgU2NvcmVDYWxjdWxhdG9yKCksXG4gICAgICAgICksXG4gICAgICAgIHByaXZhdGUgZmFsbGluZ0ZpZ3VyZXNQbGFjZXIgPSBuZXcgRmlndXJlUGxhY2luZ1BlcmZvcm1lcihjb21tYW5kQnVzKSxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jb21tYW5kQnVzLmFkZEhhbmRsZXIoQ29tbWFuZFR5cGUuSW5pdEdhbWUsIHRoaXMuaW5pdEdhbWVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEdhbWVIYW5kbGVyKGNvbW1hbmQ6IEluaXRHYW1lQ29tbWFuZCkge1xuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKEV2ZW50VHlwZS5GaWd1cmVzU3Bhd25lZCwgdGhpcy5vbkZpZ3VyZXNTcGF3bmVkLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25GaWd1cmVzU3Bhd25lZChldmVudDogRmlndXJlc1NwYXduZWRFdmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXRGYWxsaW5nRmlndXJlc1N0YXRlcyA9IHRoaXMuZmFsbGluZ0ZpZ3VyZVBsYWNpbmdSZXNvbHZlci5yZXNvbHZlKGV2ZW50LmdhbWVEYXRhKTtcbiAgICAgICAgdGhpcy5mYWxsaW5nRmlndXJlc1BsYWNlci5wbGFjZShldmVudC5nYW1lRGF0YSwgdGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFRldHJpc0ZhY2FkZSB9IGZyb20gJy4vVGV0cmlzL1RldHJpc0ZhY2FkZSdcbmltcG9ydCB7RXZlbnRCdXN9IGZyb20gXCIuL1RldHJpcy9FdmVudEJ1cy9FdmVudEJ1c1wiO1xuaW1wb3J0IHtDb21tYW5kQnVzfSBmcm9tIFwiLi9UZXRyaXMvQ29tbWFuZEJ1cy9Db21tYW5kQnVzXCI7XG5pbXBvcnQge1RldHJpc1NvbHZlcn0gZnJvbSBcIi4vVGV0cmlzU29sdmVyL1RldHJpc1NvbHZlclwiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IGV2ZW50QnVzID0gbmV3IEV2ZW50QnVzKCk7XG4gICAgY29uc3QgY29tbWFuZEJ1cyA9IG5ldyBDb21tYW5kQnVzKCk7XG4gICAgbGV0IHRldHJpcyA9IG5ldyBUZXRyaXNGYWNhZGUoZXZlbnRCdXMsIGNvbW1hbmRCdXMpO1xuICAgIGxldCBzb2x2ZXIgPSBuZXcgVGV0cmlzU29sdmVyKGV2ZW50QnVzLCBjb21tYW5kQnVzKTtcblxuICAgIHRldHJpcy5zdGFydCgpO1xufSlcbiJdLCJuYW1lcyI6WyJFdmVudFR5cGUiLCJDb21tYW5kVHlwZSIsImdhbWVEYXRhIiwidHJhbnNmZXJyZWRUb01hdHJpeEZpZ3VyZXMiLCJzcXVhc2hlZExpbmVzIiwiZHJvcHBlZExpbmVzIiwiZ2V0RXZlbnRUeXBlIiwiRmFsbGluZ1RpY2tQcm9jZXNzZWQiLCJHYW1lT3ZlciIsIkZpZ3VyZXNNb3ZlZCIsIm5ld0ZpZ3VyZXMiLCJGaWd1cmVzU3Bhd25lZCIsImhhbmRsZXJzIiwiTWFwIiwib24iLCJldmVudCIsImhhbmRsZXIiLCJ1bmlxdWUiLCJ0aGlzIiwiZ2V0Iiwic29tZSIsImJvdW5kSGFuZGxlciIsInB1c2giLCJzZXQiLCJvZmYiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJmaXJlIiwiZXZlbnRQYXlsb2FkIiwiZm9yRWFjaCIsIkZpZ3VyZVR1cm5TdGF0ZSIsImdldENvbW1hbmRUeXBlIiwiSW5pdEdhbWUiLCJSZXN1bWVHYW1lIiwiUGF1c2VHYW1lIiwiRmlndXJlc0ZhbGxUaWNrIiwiUmVuZGVyIiwiTW92ZUxlZnQiLCJNb3ZlUmlnaHQiLCJUdXJuQ2xvY2t3aXNlIiwiTW92ZURvd24iLCJGaWd1cmVzRmFsbERvd24iLCJhZGRIYW5kbGVyIiwicmVtb3ZlSGFuZGxlciIsInJ1biIsInBheWxvYWQiLCJnZXROb3JtYWxpemVkRmlndXJlIiwiZmlndXJlIiwiZ2V0RmlndXJlIiwidGhlTG9uZ2VzdFJvd1NpemUiLCJyZWR1Y2UiLCJwcmV2aW91cyIsImN1cnJlbnQiLCJNYXRoIiwibWF4IiwibGVuZ3RoIiwibWFwIiwicm93Iiwib3JpZ2luYWxMZW5ndGgiLCJmaWxsIiwiZ2V0Rmlyc3RUdXJuIiwiZ2V0U2Vjb25kVHVybiIsIm9yaWdpbmFsRmlndXJlIiwidHVybmVkRmlndXJlIiwib3JpZ2luYWxGaWd1cmVIZWlnaHQiLCJvcmlnaW5hbEZpZ3VyZVdpZHRoIiwieCIsIkFycmF5IiwieSIsImdldFRoaXJkVHVybiIsInJldmVyc2UiLCJnZXRGb3J0aFR1cm4iLCJnZXRUdXJuIiwiZmlndXJlVHVyblN0YXRlIiwiT25lIiwiVHdvIiwiVGhyZWUiLCJGb3VyIiwic3BsaXQiLCJpdGVtIiwiU2ltcGx5Um90YXRhYmxlRmlndXJlIiwicG9zaXRpb24iLCJ0dXJuU3RhdGUiLCJjb2xvciIsImZpZWxkV2lkdGgiLCJmaWVsZEhlaWdodCIsImZpZ3VyZXMiLCJmaWd1cmVzRmFsbGVuIiwibGluZXNTcXVhc2hlZCIsImlzSW5pdGlhbGl6ZWQiLCJpc0dhbWVPdmVyIiwiZmFsbGluZ0ZpZ3VyZXMiLCJtYXRyaXgiLCJuZXh0VGlja1RpbWVvdXRJZCIsInNldHRpbmdzIiwibGV2ZWwiLCJzY29yZSIsImNvbWJvIiwic3RhdHMiLCJzZXRUaW1lb3V0IiwiU3RhdHMiLCJtYWtlU2ltcGxlIiwid2lkdGgiLCJoZWlnaHQiLCJHYW1lRGF0YSIsIl8iLCJHYW1lU2V0dGluZ3MiLCJURmlndXJlIiwiUmlnaHRMRmlndXJlIiwiTGVmdExGaWd1cmUiLCJTcXVhcmVGaWd1cmUiLCJTdGlja0ZpZ3VyZSIsIkxaRmlndXJlIiwiUlpGaWd1cmUiLCJ0aW1pbmdzSGFuZGxlciIsImV2ZW50QnVzIiwiY29tbWFuZEJ1cyIsImluaXRHYW1lSGFuZGxlciIsImJpbmQiLCJyZXN1bWVHYW1lSGFuZGxlciIsInBhdXNlR2FtZUhhbmRsZXIiLCJnYW1lT3ZlckhhbmRsZXIiLCJjb21tYW5kIiwib25GYWxsVGlja1Byb2Nlc3NlZCIsIkluaXRHYW1lQ29tbWFuZCIsImZhbGxUaWNrIiwiY2xlYXJUaW1lb3V0IiwiUmVuZGVyQ29tbWFuZCIsIkdhbWVPdmVyRXZlbnQiLCJGaWd1cmVzRmFsbFRpY2tDb21tYW5kIiwiZ2V0RGVsYXlGb3JOZXh0VGlja01zIiwiY2FuRmlndXJlQmVQbGFjZWQiLCJ0YXJnZXRGaWd1cmVNYXRyaXgiLCJ0YXJnZXRQb3NpdGlvbiIsImV2ZXJ5IiwidmFsdWUiLCJyZWFsWSIsInJlYWxYIiwiZmlsbGVkIiwiZmlsbGVkR2FtZU92ZXIiLCJlbXB0eSIsImNvbnRhaW5lckVsZW1lbnQiLCJyZW5kZXJQcm9qZWN0aW9uRmlndXJlcyIsIm1hdHJpeENlbGxDb2xvcnMiLCJmYWxsaW5nRmlndXJlQ2VsbENvbG9ycyIsInByb2plY3Rpb25GaWd1cmVDZWxsQ29sb3JzIiwiVGFibGVSZW5kZXJlckNlbGxDb2xvclNldHRpbmdzIiwicmVuZGVyU2V0dGluZ3MiLCJjZWxsc0h0bWxFbGVtZW50c01hcCIsImluaXRIYW5kbGVyIiwicmVuZGVyQ29tbWFuZEhhbmRsZXIiLCJ0YWJsZSIsIlRhYmxlUmVuZGVyZXIiLCJjcmVhdGVIdG1sRWxlbWVudCIsImNlbGwiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsInNjb3JlRGlzcGxheSIsIm9uR2FtZU92ZXIiLCJvbkZpZ3VyZXNNb3ZlZCIsInJlbmRlclN0YXRlIiwicmVwYWludE1hdHJpeENlbGxzIiwiQ29vcmRpbmF0ZSIsInJlbmRlckZhbGxpbmdGaWd1cmVzUHJvamVjdGlvbiIsInJlbmRlckZhbGxpbmdGaWd1cmVzIiwicmVuZGVyU3RhdHMiLCJmYWxsaW5nRmlndXJlIiwicmVwYWludEZhbGxpbmdGaWd1cmVzQ2VsbHMiLCJmaWd1cmVNYXRyaXgiLCJwcm9qZWN0aW9uRmlndXJlWCIsInByb2plY3Rpb25GaWd1cmVZIiwiRmlndXJlUGxhY2luZ0NoZWNrZXIiLCJyZXBhaW50UHJvamVjdGlvbkZpZ3VyZXNDZWxscyIsImluZGVudCIsImNvbG9ycyIsIkNlbGxDb2xvcnMiLCJyZXBhaW50Q2VsbHMiLCJjZWxsQ29sb3JzIiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwibGV2ZWxTcGFuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNjb3JlU3BhbiIsImNvbWJvU3BhbiIsInRvU3RyaW5nIiwiaHRtbCIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjaGlsZHJlbiIsImZpcnN0RWxlbWVudENoaWxkIiwiSFRNTEVsZW1lbnQiLCJ0cmFuc2ZlcnJlZEZpZ3VyZXMiLCJwcm9jZXNzRmlndXJlc0ZhbGxUaWNrQ29tbWFuZCIsInByb2Nlc3NEcm9wRmlndXJlc0NvbW1hbmQiLCJmYWxsaW5nUmVzdWx0IiwiZmFsbEZpZ3VyZXNGb3JPbmVDZWxsIiwic3F1YXNoTGluZXMiLCJHYW1lT3ZlckNvbW1hbmQiLCJGYWxsVGlja1Byb2Nlc3NlZEV2ZW50IiwiRmFsbGluZ1Jlc3VsdCIsIm9uZUNlbGxGYWxsaW5nUmVzdWx0IiwiZmlndXJlQ2FuRmFsbCIsImZpZ3VyZUdhbWVPdmVyUmVzdWx0IiwidHJhbnNmZXJGaWd1cmVUb01hdHJpeCIsImZpZ3VyZUNlbGxZIiwiY2VsbFZhbHVlIiwiZmlndXJlQ2VsbFgiLCJtYXRyaXhYIiwibWF0cml4WSIsImxpbmVzVG9TcXVhc2giLCJ1bnNoaWZ0IiwiVG9BcnJheSIsInZhbCIsIk9iamVjdCIsImtleXMiLCJuIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJmaWx0ZXIiLCJpc05hTiIsIkdldFJhbmRvbSIsInZhbHVlcyIsIkVudW1IZWxwZXIiLCJmbG9vciIsInJhbmRvbSIsInByb2Nlc3NPbkZhbGxUaWNrIiwiYWRkRmlndXJlIiwiZmlndXJlSW5kZXgiLCJmaWd1cmVXaWR0aCIsImNvb3JkaW5hdGUiLCJjZWlsIiwiRmFsbGluZ0ZpZ3VyZSIsIkZpZ3VyZXNTcGF3bmVkRXZlbnQiLCJwcm9jZXNzTW92ZUxlZnRDb21tYW5kIiwicHJvY2Vzc01vdmVSaWdodENvbW1hbmQiLCJwcm9jZXNzTW92ZURvd25Db21tYW5kIiwicHJvY2Vzc1R1cm5DbG9ja3dpc2VDb21tYW5kIiwiRmlndXJlc01vdmVkRXZlbnQiLCJhbGxUdXJuU3RhdGVzIiwibmV4dFR1cm5TdGF0ZSIsInByb2Nlc3NJbml0R2FtZUNvbW1hbmQiLCJ3aW5kb3ciLCJvbmtleWRvd24iLCJjb2RlIiwiTW92ZUxlZnRDb21tYW5kIiwiTW92ZVJpZ2h0Q29tbWFuZCIsIlR1cm5DbG9ja3dpc2VDb21tYW5kIiwiTW92ZURvd25Db21tYW5kIiwiRHJvcEZpZ3VyZXNDb21tYW5kIiwic3F1YXNoZWRSb3dzUmV3YXJkVGhyZXNob2xkc01hcCIsInJld2FyZE9uQ29tYm8iLCJvbkZhbGxpbmdUaWNrUHJvY2Vzc2VkIiwicHJldmlvdXNUaHJlc2hvbGRSZXdhcmQiLCJyZXdhcmQiLCJyb3dzU3F1YXNoZWRUaHJlc2hvbGQiLCJsZXZlbEluY3JlYXNlT25TcXVhc2hlZFJvd3NOdW1iZXIiLCJtYXhMZXZlbHMiLCJzcXVhc2hlZFJvd3NDb3VudGVyIiwibWluIiwiZGVsYXlNcyIsImdhbWVDb250cm9sbGVyIiwibW92aW5nSGFuZGxlciIsIm1vdmluZ0NvbnRyb2xsZXIiLCJmYWxsaW5nRmlndXJlc1Byb2Nlc3NvciIsImZpZ3VyZXNTcGF3bmVyIiwibGV2ZWxDb3VudGVyIiwiY29tYm9Db3VudGVyIiwic2NvcmVDb3VudGVyIiwic3RhdHNDb3VudGVyIiwidGFibGVSZW5kZXJlciIsIkV2ZW50QnVzIiwiQ29tbWFuZEJ1cyIsIkdhbWVDb250cm9sbGVyIiwiQ29uc3RUaW1pbmdzSGFuZGxlciIsIk1vdmluZ0hhbmRsZXIiLCJNb3ZpbmdDb250cm9sbGVyIiwiUmVndWxhckZhbGxpbmdGaWd1cmVzUHJvY2Vzc29yIiwiQWx3YXlzT25lRmlndXJlU3Bhd25lciIsIlNxdWFzaGVkUm93c0NvdW50ZXJCYXNlZExldmVsQ291bnRlciIsIkNvbWJvQ291bnRlciIsIkZhbGxUaWNrU2NvcmVDb3VudGVyIiwiU3RhdHNDb3VudGVyIiwiVGFibGVSZW5kZXJlclNldHRpbmdzIiwiYm9keSIsInN0YXJ0IiwiUmVzdW1lR2FtZUNvbW1hbmQiLCJyZXN1bWUiLCJwYXVzZSIsIlBhdXNlR2FtZUNvbW1hbmQiLCJ0YXJnZXQiLCJmaWd1cmVzVGFyZ2V0U3RhdGVzIiwicGxhY2luZ1N0ZXBzIiwiRXJyb3IiLCJzY29yZUNhbGN1bGF0b3IiLCJyZXNvbHZlIiwiR2FtZVN0YXRlTm90U3VwcG9ydGVkRXJyb3IiLCJtYXhTY29yZSIsInRoZUJlc3RSZXN1bHQiLCJGaWd1cmVQbGFjaW5nUmVzdWx0IiwicHJvY2Vzc1N0YXRlcyIsImltYWdpbmFibGVGaWd1cmUiLCJwbGFjaW5nRGlyZWN0aW9ucyIsImRlYnVnTW9kZSIsInVuZGVmaW5lZCIsInN0cnVjdHVyZWRDbG9uZSIsIm9uQWZ0ZXJTY29yZUNhbGN1bGF0ZXMiLCJvbkJlZm9yZVNjb3JlQ2FsY3VsYXRlcyIsImVudW1zIiwicG9wIiwibWF0cmljZXMiLCJpbWFnaW5lRmlndXJlRHJvcCIsImltYWdpbmFibGVNYXRyaXgiLCJzcXVhc2hlZExpbmVzQ291bnQiLCJjYWxjdWxhdGVTY29yZSIsImRpcmVjdGlvbnMiLCJtYWtlU2ltcGxlUGxhY2luZ1N0ZXBzIiwiY29sbGVjdE9wZW5Ib2xlcyIsInRvcExlZnRDb29yZGluYXRlIiwiYm90dG9tUmlnaHRDb29yZGluYXRlIiwibWFrZVB1c2hJblBsYWNpbmdTdGVwcyIsImltYWdpbmVGaWd1cmVQbGFjaW5nIiwiZ2FtZU1hdHJpeCIsInRhcmdldFgiLCJ0YXJnZXRZIiwidGFyZ2V0Q29vcmRpbmF0ZSIsImZpZ3VyZVkiLCJmaWd1cmVYIiwiVHVyblBsYWNpbmdTdGVwIiwiTW92ZVhQbGFjaW5nU3RlcCIsIkRyb3BQbGFjaW5nU3RlcCIsImluaXRpYWxEZWxheU1zIiwiYmFzZSIsInBvdyIsIlBsYWNpbmdFcnJvciIsIkxldmVsQmFzZWRUaW1pbmdzSGFuZGxlciIsIm5leHRNb3ZlVGltZW91dElkIiwicGxhY2UiLCJ0YXJnZXRTdGF0ZSIsInByb2Nlc3NUaWNrIiwidGFyZ2V0RmlndXJlIiwiSW5jb25zaXN0ZW50VGFyZ2V0U3RhdGVFcnJvciIsInN0ZXAiLCJNb3ZlWVBsYWNpbmdTdGVwIiwiTm90U3VwcG9ydGVkRGlyZWN0aW9uU3RlcEVycm9yIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaG9sZXNTY29yZSIsInNxdWFzaGVkTGluZXNTY29yZSIsIm9yaWdpbmFsSG9sZXNDb3VudCIsImNhbGN1bGF0ZUhvbGVzIiwiY2FsY3VsYXRlSG9sZXNBbmRDb3ZlcmVkSGVpZ2h0IiwiaG9sZXNDb3VudCIsImhvbGVzQ292ZXJlZEhlaWdodCIsImhvbGVzQ291bnREZWNyZWFzZSIsImNhbGN1bGF0ZUhlaWdodCIsImhlaWdodFNjb3JlIiwiY2FsY3VsYXRlRmlsbGFibGVTcGFjZSIsImZpbGxhYmxlQ2VsbHNDb3VudCIsImZpbGxhYmxlQ2VsbHNTY29yZSIsInR1bm5lbHNTY29yZSIsImNhbGN1bGF0ZVR1bm5lbHNFeGNlcHRVbmNvdmVyZWQiLCJ0dW5uZWxzU3VtSGVpZ2h0IiwidHVubmVsc0NvdW50IiwiY29uc29sZSIsImxvZyIsImNvdmVyZWRDb2x1bW5zIiwiU2V0IiwiYWRkIiwiaGFzIiwicmVhbE1hdHJpeCIsImNhbGN1bGF0ZVRoZUhpZ2hlc3RIb2xlQ292ZXJlZFkiLCJvcmlnaW5hbFRoZUhpZ2hlc3RIb2xlWSIsIm9yaWdpbmFsVGhlSGlnaGVzdEhvbGVDb3ZlcmVkWSIsImNvdmVyZWRDb2x1bW5zWXMiLCJob2xlc0NvdmVyZWRIZWlnaHRzU3VtIiwiY292ZXJlZFkiLCJ0aGVIaWdoZXN0SG9sZUNvdmVyZWRZIiwidGhlSGlnaGVzdEhvbGVZIiwibG93ZXN0RW1wdHlZIiwicmVhbENvdmVyZWRDb2x1bW5zIiwiaW1hZ2luYWJsZUNvdmVyZWRDb2x1bW5zIiwidHVubmVscyIsInNpemUiLCJmaWxsYWJsZUhlaWdodCIsImZhbGxpbmdGaWd1cmVQbGFjaW5nUmVzb2x2ZXIiLCJmYWxsaW5nRmlndXJlc1BsYWNlciIsIkZpZ3VyZVBsYWNpbmdSZXNvbHZlciIsIlNjb3JlQ2FsY3VsYXRvciIsIkZpZ3VyZVBsYWNpbmdQZXJmb3JtZXIiLCJvbkZpZ3VyZXNTcGF3bmVkIiwidGFyZ2V0RmFsbGluZ0ZpZ3VyZXNTdGF0ZXMiLCJhZGRFdmVudExpc3RlbmVyIiwidGV0cmlzIiwiVGV0cmlzRmFjYWRlIiwiVGV0cmlzU29sdmVyIl0sInNvdXJjZVJvb3QiOiIifQ==